<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Freemana2017">
<meta property="og:url" content="http://yoursite.com/page/12/index.html">
<meta property="og:site_name" content="Freemana2017">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Freemana2017">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/12/">





  <title>Freemana2017</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>



<a href="https://github.com/Freemana2017" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>







    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Freemana2017</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/11/å¹¶å‘ç¼–ç¨‹/å¹¶å‘ç¼–ç¨‹/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/11/å¹¶å‘ç¼–ç¨‹/å¹¶å‘ç¼–ç¨‹/" itemprop="url">å¹¶å‘ç¼–ç¨‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-11T10:13:42+08:00">
                2018-11-11
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/11/å¹¶å‘ç¼–ç¨‹/å¹¶å‘ç¼–ç¨‹/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/11/å¹¶å‘ç¼–ç¨‹/å¹¶å‘ç¼–ç¨‹/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g0m3jn2rm5j30g20chn1h.jpg" alt="image-20190228135737602"></p>
<hr>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g0m3jx5c41j30o20fn49y.jpg" alt="image-20190228135754241"></p>
<h1 id="1-å¹¶å‘ç¼–ç¨‹çš„åŸºç¡€"><a href="#1-å¹¶å‘ç¼–ç¨‹çš„åŸºç¡€" class="headerlink" title="1 å¹¶å‘ç¼–ç¨‹çš„åŸºç¡€"></a>1 å¹¶å‘ç¼–ç¨‹çš„åŸºç¡€</h1><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g0m42f2kxwj310o0mfama.jpg" alt="image-20190228141542431"></p>
<hr>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g0m43ql46bj30940b9whd.jpg" alt="image-20190228141659031"></p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/11/Spring Boot/SpringBoot-Docker-å°Dè¯¾å ‚/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/11/Spring Boot/SpringBoot-Docker-å°Dè¯¾å ‚/" itemprop="url">SpringBoot Docker å°Dè¯¾å ‚</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-11T10:13:42+08:00">
                2018-11-11
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/11/Spring Boot/SpringBoot-Docker-å°Dè¯¾å ‚/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/11/Spring Boot/SpringBoot-Docker-å°Dè¯¾å ‚/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ„å»ºSpringBoot-åº”ç”¨dockeré•œåƒ"><a href="#æ„å»ºSpringBoot-åº”ç”¨dockeré•œåƒ" class="headerlink" title="æ„å»ºSpringBoot åº”ç”¨dockeré•œåƒ"></a>æ„å»ºSpringBoot åº”ç”¨dockeré•œåƒ</h1><h4 id="1-ç¬¬1è¯¾-é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†"><a href="#1-ç¬¬1è¯¾-é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†" class="headerlink" title="1.ç¬¬1è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†"></a>1.ç¬¬1è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†</h4><blockquote>
<p> å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://spring.io/guides/gs/spring-boot-docker/" target="_blank" rel="noopener">https://spring.io/guides/gs/spring-boot-docker/</a></p>
<h2 id="1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom-xml"><a href="#1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom-xml" class="headerlink" title="1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom.xml"></a>1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom.xml</h2></blockquote>
<pre><code>ç®€ä»‹:ä½¿ç”¨Dockerçš„mavenæ’ä»¶ï¼Œæ„å»ºspringbootåº”ç”¨
 &lt;!--åœ¨mavenæœ€ä¸Šé¢çš„ç”³æ˜çš„åœ°æ–¹--properties--&gt;
     &lt;properties&gt;
       &lt;docker.image.prefix&gt;xdclass&lt;/docker.image.prefix&gt;
    &lt;/properties&gt;

    &lt;build&gt;
    &lt;!--é¡¹ç›®æ‰“åŒ…çš„åç§°--&gt;
        &lt;finalName&gt;docker-demo&lt;/finalName&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;com.spotify&lt;/groupId&gt;
                &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.3.6&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;repository&gt;${docker.image.prefix}/${project.artifactId}&lt;/repository&gt;
                    &lt;buildArgs&gt;
                        &lt;JAR_FILE&gt;target/${project.build.finalName}.jar&lt;/JAR_FILE&gt;
                    &lt;/buildArgs&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    é…ç½®è®²è§£
    Spotify çš„ docker-maven-plugin æ’ä»¶æ˜¯ç”¨mavenæ’ä»¶æ–¹å¼æ„å»ºdockeré•œåƒçš„ã€‚
    ${project.build.finalName} äº§å‡ºç‰©åç§°ï¼Œç¼ºçœä¸º${project.artifactId}-${project.version}
</code></pre><p>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</p>
<blockquote>
<p> <a href="https://blog.csdn.net/TMaskBoy/article/details/82562413" target="_blank" rel="noopener">https://blog.csdn.net/TMaskBoy/article/details/82562413</a></p>
</blockquote>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1qkosbaj30nw10pwj8.jpg" alt="image-20181111112653319"></p>
<h1 id="é«˜èƒ½é¢„è­¦"><a href="#é«˜èƒ½é¢„è­¦" class="headerlink" title="é«˜èƒ½é¢„è­¦"></a>é«˜èƒ½é¢„è­¦</h1><ul>
<li><p>No plugin found for prefix â€˜dockerâ€™ in the current project and in the plugin groups<br>åœ¨Mavençš„é…ç½®æ–‡ä»¶ conf/settings.xmlä¸­æ·»åŠ com.spotify</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;pluginGroups&gt;  </span><br><span class="line">    &lt;pluginGroup&gt;com.spotify&lt;/pluginGroup&gt;  </span><br><span class="line">&lt;/pluginGroups&gt;</span><br><span class="line"></span><br><span class="line">æ³¨æ„settingé…ç½®æ–‡ä»¶åœ¨mavençš„ä»“åº“é‡Œé¢æ‰¾ä¸åˆ° é‡æ–°æ›´æ–°ideaä¸­mavençš„æ’ä»¶ ç„¶å æ›´æ¢.m2ä¸­confä¸­setting.xmlçš„å†…å®¹</span><br></pre></td></tr></table></figure>
</li>
<li><p>#è¯¦ç»†é”™è¯¯å¦‚ä¸‹ï¼šom.spotify.docker.client.shaded.com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of com.spotify.docker.client.messages.RegistryAuth: no String-argument constructor/factory method to deserialize from String value (â€˜swarmâ€™)  </p>
<p>èµ·åˆpom.xmlä¸­docker-maven-pluginçš„ç‰ˆæœ¬æ˜¯1.0.0ï¼Œä½¿ç”¨mvn package docker:build -eæ„å»ºImageå‡ºç°å¦‚ä¸Šå¼‚å¸¸ã€‚<br>ç™¾èˆ¬æœç´¢æ— æœï¼Œåæ¥çœ‹å…¶ä»–çš„Spring Bootæ„å»ºDockeré•œåƒæœ‰ç”¨çš„æ˜¯0.4.3ï¼Œé‚ä¿®æ”¹ä¹‹ã€‚ </p>
<ol start="2">
<li>è§£å†³åŠæ³•</li>
</ol>
<hr>
<h1 id="å°†å°Dè¯¾å ‚é‡Œé¢çš„æ’ä»¶"><a href="#å°†å°Dè¯¾å ‚é‡Œé¢çš„æ’ä»¶" class="headerlink" title="å°†å°Dè¯¾å ‚é‡Œé¢çš„æ’ä»¶"></a>å°†å°Dè¯¾å ‚é‡Œé¢çš„æ’ä»¶</h1></li>
</ul>
<pre><code> &lt;groupId&gt;com.spotify&lt;/groupId&gt;
&lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
&lt;version&gt;1.3.6&lt;/version&gt;
</code></pre><h1 id="æ”¹ä¸ºâ­ï¸â­ï¸"><a href="#æ”¹ä¸ºâ­ï¸â­ï¸" class="headerlink" title="æ”¹ä¸ºâ­ï¸â­ï¸"></a>æ”¹ä¸ºâ­ï¸â­ï¸</h1>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;groupId&gt;com.spotify&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt; â­ï¸ //è¿™è¾¹ä¸æ˜¯dockerfile-maven-pluginäº†è€Œæ˜¯docker-maven-plugin</span><br><span class="line">&lt;version&gt;0.4.13&lt;/version&gt;</span><br></pre></td></tr></table></figure>
<p>   â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ </p>
<h3 id="ç¬¬2è¯¾-é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†"><a href="#ç¬¬2è¯¾-é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†" class="headerlink" title="ç¬¬2è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†"></a>ç¬¬2è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†</h3><blockquote>
<h4 id="æ­¥éª¤1åˆ›å»ºDockerfile-é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc-main-docker-Dockerfile-å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰"><a href="#æ­¥éª¤1åˆ›å»ºDockerfile-é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc-main-docker-Dockerfile-å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰" class="headerlink" title="æ­¥éª¤1åˆ›å»ºDockerfile,é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc/main/docker/Dockerfile,å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰"></a>æ­¥éª¤1åˆ›å»ºDockerfile,é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc/main/docker/Dockerfile,å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰</h4></blockquote>
<pre><code>ç®€ä»‹:æ‰“åŒ…SpringCloudé•œåƒå¹¶ä¸Šä¼ ç§æœ‰ä»“åº“å¹¶éƒ¨ç½²
1ã€ ä»€ä¹ˆæ˜¯Dockerfile : ç”±ä¸€ç³»åˆ—å‘½ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ï¼Œè¿™äº›å‘½ä»¤åº”ç”¨äºåŸºç¡€é•œåƒ, æœ€ç»ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é•œ       åƒ
å®æˆ˜
FROM openjdk:8-jdk-alpine
VOLUME /tmp
ARG JAR_FILE
COPY ${JAR_FILE} app.jar
ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]


å‚æ•°è®²è§£ï¼š
FROM &lt;image&gt;:&lt;tag&gt; éœ€è¦ä¸€ä¸ªåŸºç¡€é•œåƒï¼Œå¯ä»¥æ˜¯å…¬å…±çš„æˆ–è€…æ˜¯ç§æœ‰çš„ï¼Œ åç»­æ„å»ºä¼šåŸºäºæ­¤é•œåƒï¼Œå¦‚æœåŒä¸€ä¸ªDockerfileä¸­å»ºç«‹å¤šä¸ªé•œåƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªFROMæŒ‡ä»¤

VOLUME  é…ç½®ä¸€ä¸ªå…·æœ‰æŒä¹…åŒ–åŠŸèƒ½çš„ç›®å½•ï¼Œä¸»æœº /var/lib/docker ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é“¾æ¥åˆ°å®¹   å™¨çš„/tmpã€‚æ”¹æ­¥éª¤æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ¶‰åŠåˆ°æ–‡ä»¶ç³»ç»Ÿçš„åº”ç”¨å°±å¾ˆæœ‰å¿…è¦äº†ã€‚/tmpç›®å½•ç”¨æ¥æŒä¹…åŒ–åˆ° Docker æ•°æ® æ–‡ä»¶å¤¹ï¼Œå› ä¸º Spring Boot ä½¿ç”¨çš„å†…åµŒ Tomcat å®¹å™¨é»˜è®¤ä½¿ç”¨/tmpä½œä¸ºå·¥ä½œç›®å½• 

ARG  è®¾ç½®ç¼–è¯‘é•œåƒæ—¶åŠ å…¥çš„å‚æ•°ï¼Œ ENV æ˜¯è®¾ç½®å®¹å™¨çš„ç¯å¢ƒå˜é‡
COPY : åªæ”¯æŒå°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ ,è¿˜æœ‰ä¸ªADDæ›´å¼ºå¤§ä½†å¤æ‚ç‚¹
ENTRYPOINT å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤
EXPOSE 8080 æš´éœ²é•œåƒç«¯å£
</code></pre><h3 id="ç¬¬3è¯¾æ„å»ºé•œåƒ"><a href="#ç¬¬3è¯¾æ„å»ºé•œåƒ" class="headerlink" title="ç¬¬3è¯¾æ„å»ºé•œåƒ"></a>ç¬¬3è¯¾æ„å»ºé•œåƒ</h3><pre><code>2ã€æ„å»ºé•œåƒ
        mvn install dockerfile:build
        æ‰“æ ‡ç­¾
        docker tag a1b9fc71720d registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808
        æ¨é€åˆ°é•œåƒä»“åº“
        docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808

        åº”ç”¨æœåŠ¡å™¨æ‹‰å–é•œåƒ
        docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808


        docker run -d --name xdclass_docker_demo1 -p 8099:8080  a1b9fc71720d

        3ã€æŸ¥çœ‹å¯åŠ¨æ—¥å¿— docker logs -f  containerid
</code></pre><h1 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h1><h2 id="1-mvn-install-dockerfile-buildã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆç»ˆç«¯æ²¡æœ‰ç”¨ideaä¸­ç»ˆç«¯å´æœ‰ç”¨-ğŸ˜„å“ˆå“ˆ"><a href="#1-mvn-install-dockerfile-buildã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆç»ˆç«¯æ²¡æœ‰ç”¨ideaä¸­ç»ˆç«¯å´æœ‰ç”¨-ğŸ˜„å“ˆå“ˆ" class="headerlink" title="1.mvn install dockerfile:buildã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆç»ˆç«¯æ²¡æœ‰ç”¨ideaä¸­ç»ˆç«¯å´æœ‰ç”¨ ğŸ˜„å“ˆå“ˆ"></a>1.mvn install dockerfile:buildã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆç»ˆç«¯æ²¡æœ‰ç”¨ideaä¸­ç»ˆç«¯å´æœ‰ç”¨ ğŸ˜„å“ˆå“ˆ</h2><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1qi5qd3j30uw0u0dog.jpg" alt="image-20181111130637806"></p>
<h2 id="2-docker-images"><a href="#2-docker-images" class="headerlink" title="2.docker images"></a>2.docker images</h2><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1qlpbxvj30qw04taax.jpg" alt="image-20181111130706064"></p>
<blockquote>
<p>æ²¡æœ‰åå­—é•œåƒï¼Ÿï¼Ÿæ³¨æ„åœ¨ideaä¸­æµ‹è¯•çš„è¯å°±è¦ç”¨idea ä¸è¦éšå˜æ”¹æˆç»ˆç«¯</p>
</blockquote>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1qj8tx1j314c0b142v.jpg" alt="image-20181111131256001"></p>
<h2 id="3-docker-run-d-â€“name-demo-p-8080-8080-8ef42611e3b0"><a href="#3-docker-run-d-â€“name-demo-p-8080-8080-8ef42611e3b0" class="headerlink" title="3.docker  run -d â€“name demo -p 8080:8080  8ef42611e3b0"></a>3.docker  run -d â€“name demo -p 8080:8080  8ef42611e3b0</h2><blockquote>
<p>å¤‡æ³¨ï¼šè¿è¡Œé•œåƒ â€“name æŒ‡å®šåå­— -d åå°è¿è¡Œ 8ef42611e3b0ï¼šåˆšåˆšæ„å»ºçš„imageçš„ID </p>
<p>name ä¸ä¼šç”¨å°±åˆ«ç”¨</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1qmrfedj31bl03h766.jpg" alt="image-20181111133053363"></p>
</blockquote>
<h3 id="4-docker-ps"><a href="#4-docker-ps" class="headerlink" title="4.docker ps"></a>4.docker ps</h3><blockquote>
<p>æŸ¥çœ‹ä¸€ä¸‹é•œåƒçš„è¿›ç¨‹</p>
</blockquote>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1qm8xnmj30xs02g3zi.jpg" alt="image-20181111133138180"></p>
<p>ï¼Ÿï¼Ÿï¼Ÿæ²¡æœ‰ç¨‹åºã€‚æµ‹è¯•ä¸€ä¸‹</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/11/Spring Boot/SpringBooté«˜çº§é›·ä¸°é˜³/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/11/Spring Boot/SpringBooté«˜çº§é›·ä¸°é˜³/" itemprop="url">SpringBoot  é›·ä¸°é˜³æ•´åˆç¯‡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-11T10:13:42+08:00">
                2018-11-11
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/11/Spring Boot/SpringBooté«˜çº§é›·ä¸°é˜³/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/11/Spring Boot/SpringBooté«˜çº§é›·ä¸°é˜³/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#1 SpringBoot-cache</p>
<h4 id="SpringbootCacheApplication"><a href="#SpringbootCacheApplication" class="headerlink" title="SpringbootCacheApplication"></a>SpringbootCacheApplication</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸€ã€æ­å»ºåŸºæœ¬ç¯å¢ƒ</span></span><br><span class="line"><span class="comment"> * 1ã€å¯¼å…¥æ•°æ®åº“æ–‡ä»¶ åˆ›å»ºå‡ºdepartmentå’Œemployeeè¡¨</span></span><br><span class="line"><span class="comment"> * 2ã€åˆ›å»ºjavaBeanå°è£…æ•°æ®</span></span><br><span class="line"><span class="comment"> * 3ã€æ•´åˆMyBatisæ“ä½œæ•°æ®åº“</span></span><br><span class="line"><span class="comment"> * 		1.é…ç½®æ•°æ®æºä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * 		2.ä½¿ç”¨æ³¨è§£ç‰ˆçš„MyBatisï¼›</span></span><br><span class="line"><span class="comment"> * 			1ï¼‰ã€<span class="doctag">@MapperScan</span>æŒ‡å®šéœ€è¦æ‰«æçš„mapperæ¥å£æ‰€åœ¨çš„åŒ…</span></span><br><span class="line"><span class="comment"> * äºŒã€å¿«é€Ÿä½“éªŒç¼“å­˜</span></span><br><span class="line"><span class="comment"> * 		æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment"> * 			1ã€å¼€å¯åŸºäºæ³¨è§£çš„ç¼“å­˜ <span class="doctag">@EnableCaching</span></span></span><br><span class="line"><span class="comment"> * 			2ã€æ ‡æ³¨ç¼“å­˜æ³¨è§£å³å¯</span></span><br><span class="line"><span class="comment"> * 				<span class="doctag">@Cacheable</span></span></span><br><span class="line"><span class="comment"> * 				<span class="doctag">@CacheEvict</span></span></span><br><span class="line"><span class="comment"> * 				<span class="doctag">@CachePut</span></span></span><br><span class="line"><span class="comment"> * é»˜è®¤ä½¿ç”¨çš„æ˜¯ConcurrentMapCacheManager==ConcurrentMapCacheï¼›å°†æ•°æ®ä¿å­˜åœ¨	ConcurrentMap&lt;Object, Object&gt;ä¸­</span></span><br><span class="line"><span class="comment"> * å¼€å‘ä¸­ä½¿ç”¨ç¼“å­˜ä¸­é—´ä»¶ï¼›redisã€memcachedã€ehcacheï¼›</span></span><br><span class="line"><span class="comment"> * ä¸‰ã€æ•´åˆredisä½œä¸ºç¼“å­˜</span></span><br><span class="line"><span class="comment"> * Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰çš„ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚</span></span><br><span class="line"><span class="comment"> * 	1ã€å®‰è£…redisï¼šä½¿ç”¨dockerï¼›</span></span><br><span class="line"><span class="comment"> * 	2ã€å¼•å…¥redisçš„starter</span></span><br><span class="line"><span class="comment"> * 	3ã€é…ç½®redis</span></span><br><span class="line"><span class="comment"> * 	4ã€æµ‹è¯•ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * 		åŸç†ï¼šCacheManager===Cache ç¼“å­˜ç»„ä»¶æ¥å®é™…ç»™ç¼“å­˜ä¸­å­˜å–æ•°æ®</span></span><br><span class="line"><span class="comment"> *		1ï¼‰ã€å¼•å…¥redisçš„starterï¼Œå®¹å™¨ä¸­ä¿å­˜çš„æ˜¯ RedisCacheManagerï¼›</span></span><br><span class="line"><span class="comment"> *		2ï¼‰ã€RedisCacheManager å¸®æˆ‘ä»¬åˆ›å»º RedisCache æ¥ä½œä¸ºç¼“å­˜ç»„ä»¶ï¼›RedisCacheé€šè¿‡æ“ä½œredisç¼“å­˜æ•°æ®çš„</span></span><br><span class="line"><span class="comment"> *		3ï¼‰ã€é»˜è®¤ä¿å­˜æ•°æ® k-v éƒ½æ˜¯Objectï¼›åˆ©ç”¨åºåˆ—åŒ–ä¿å­˜ï¼›å¦‚ä½•ä¿å­˜ä¸ºjson</span></span><br><span class="line"><span class="comment"> *   			1ã€å¼•å…¥äº†redisçš„starterï¼ŒcacheManagerå˜ä¸º RedisCacheManagerï¼›</span></span><br><span class="line"><span class="comment"> *   			2ã€é»˜è®¤åˆ›å»ºçš„ RedisCacheManager æ“ä½œredisçš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ RedisTemplate&lt;Object, Object&gt;</span></span><br><span class="line"><span class="comment"> *   			3ã€RedisTemplate&lt;Object, Object&gt; æ˜¯ é»˜è®¤ä½¿ç”¨jdkçš„åºåˆ—åŒ–æœºåˆ¶</span></span><br><span class="line"><span class="comment"> *      4ï¼‰ã€è‡ªå®šä¹‰CacheManagerï¼›</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.atguigu.cache.mapper"</span>)</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Springboot01CacheApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(Springboot01CacheApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Beanâ€“Department"><a href="#Beanâ€“Department" class="headerlink" title="Beanâ€“Department"></a>Beanâ€“Department</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.cache.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Department</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String departmentName;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Department</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Department</span><span class="params">(Integer id, String departmentName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.departmentName = departmentName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getDepartmentName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> departmentName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDepartmentName</span><span class="params">(String departmentName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.departmentName = departmentName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Department [id="</span> + id + <span class="string">", departmentName="</span> + departmentName + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Beanâ€”Employee"><a href="#Beanâ€”Employee" class="headerlink" title="Beanâ€”Employee"></a>Beanâ€”Employee</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.cache.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String lastName;</span><br><span class="line">	<span class="keyword">private</span> String email;</span><br><span class="line">	<span class="keyword">private</span> Integer gender; <span class="comment">//æ€§åˆ« 1ç”·  0å¥³</span></span><br><span class="line">	<span class="keyword">private</span> Integer dId;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(Integer id, String lastName, String email, Integer gender, Integer dId)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">		<span class="keyword">this</span>.email = email;</span><br><span class="line">		<span class="keyword">this</span>.gender = gender;</span><br><span class="line">		<span class="keyword">this</span>.dId = dId;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getLastName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> lastName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLastName</span><span class="params">(String lastName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.lastName = lastName;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> email;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.email = email;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getGender</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> gender;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGender</span><span class="params">(Integer gender)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.gender = gender;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getdId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> dId;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setdId</span><span class="params">(Integer dId)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.dId = dId;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Employee [id="</span> + id + <span class="string">", lastName="</span> + lastName + <span class="string">", email="</span> + email + <span class="string">", gender="</span> + gender + <span class="string">", dId="</span></span><br><span class="line">				+ dId + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="configâ€”myRedisConfig"><a href="#configâ€”myRedisConfig" class="headerlink" title="configâ€”myRedisConfig"></a>configâ€”myRedisConfig</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.cache.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.cache.bean.Department;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.cache.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Primary;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRedisConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;Object, Employee&gt; <span class="title">empRedisTemplate</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            RedisConnectionFactory redisConnectionFactory)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> UnknownHostException </span>&#123;</span><br><span class="line">        RedisTemplate&lt;Object, Employee&gt; template = <span class="keyword">new</span> RedisTemplate&lt;Object, Employee&gt;();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        Jackson2JsonRedisSerializer&lt;Employee&gt; ser = <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Employee&gt;(Employee.class);</span><br><span class="line">        template.setDefaultSerializer(ser);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;Object, Department&gt; <span class="title">deptRedisTemplate</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            RedisConnectionFactory redisConnectionFactory)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> UnknownHostException </span>&#123;</span><br><span class="line">        RedisTemplate&lt;Object, Department&gt; template = <span class="keyword">new</span> RedisTemplate&lt;Object, Department&gt;();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        Jackson2JsonRedisSerializer&lt;Department&gt; ser = <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Department&gt;(Department.class);</span><br><span class="line">        template.setDefaultSerializer(ser);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//CacheManagerCustomizerså¯ä»¥æ¥å®šåˆ¶ç¼“å­˜çš„ä¸€äº›è§„åˆ™</span></span><br><span class="line">    <span class="meta">@Primary</span>  <span class="comment">//å°†æŸä¸ªç¼“å­˜ç®¡ç†å™¨ä½œä¸ºé»˜è®¤çš„</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisCacheManager <span class="title">employeeCacheManager</span><span class="params">(RedisTemplate&lt;Object, Employee&gt; empRedisTemplate)</span></span>&#123;</span><br><span class="line">        RedisCacheManager cacheManager = <span class="keyword">new</span> RedisCacheManager(empRedisTemplate);</span><br><span class="line">        <span class="comment">//keyå¤šäº†ä¸€ä¸ªå‰ç¼€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨å‰ç¼€ï¼Œé»˜è®¤ä¼šå°†CacheNameä½œä¸ºkeyçš„å‰ç¼€</span></span><br><span class="line">        cacheManager.setUsePrefix(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cacheManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisCacheManager <span class="title">deptCacheManager</span><span class="params">(RedisTemplate&lt;Object, Department&gt; deptRedisTemplate)</span></span>&#123;</span><br><span class="line">        RedisCacheManager cacheManager = <span class="keyword">new</span> RedisCacheManager(deptRedisTemplate);</span><br><span class="line">        <span class="comment">//keyå¤šäº†ä¸€ä¸ªå‰ç¼€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨å‰ç¼€ï¼Œé»˜è®¤ä¼šå°†CacheNameä½œä¸ºkeyçš„å‰ç¼€</span></span><br><span class="line">        cacheManager.setUsePrefix(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cacheManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="configâ€”mycacheconfig"><a href="#configâ€”mycacheconfig" class="headerlink" title="configâ€”mycacheconfig"></a>configâ€”mycacheconfig</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.cache.config;</span><br><span class="line"></span><br><span class="line">import org.springframework.cache.interceptor.KeyGenerator;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class MyCacheConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Bean(&quot;myKeyGenerator&quot;)</span><br><span class="line">    public KeyGenerator keyGenerator()&#123;</span><br><span class="line">        return new KeyGenerator()&#123;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public Object generate(Object target, Method method, Object... params) &#123;</span><br><span class="line">                return method.getName()+&quot;[&quot;+ Arrays.asList(params).toString()+&quot;]&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="DeptService"><a href="#DeptService" class="headerlink" title="DeptService"></a>DeptService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.cache.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.cache.bean.Department;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.cache.mapper.DepartmentMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.Cache;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.CacheConfig;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.Cacheable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeptService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DepartmentMapper departmentMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"deptCacheManager"</span>)</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RedisCacheManager deptCacheManager;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  ç¼“å­˜çš„æ•°æ®èƒ½å­˜å…¥redisï¼›</span></span><br><span class="line"><span class="comment">     *  ç¬¬äºŒæ¬¡ä»ç¼“å­˜ä¸­æŸ¥è¯¢å°±ä¸èƒ½ååºåˆ—åŒ–å›æ¥ï¼›</span></span><br><span class="line"><span class="comment">     *  å­˜çš„æ˜¯deptçš„jsonæ•°æ®;CacheManageré»˜è®¤ä½¿ç”¨RedisTemplate&lt;Object, Employee&gt;æ“ä½œRedis</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//    @Cacheable(cacheNames = "dept",cacheManager = "deptCacheManager")</span></span><br><span class="line"><span class="comment">//    public Department getDeptById(Integer id)&#123;</span></span><br><span class="line"><span class="comment">//        System.out.println("æŸ¥è¯¢éƒ¨é—¨"+id);</span></span><br><span class="line"><span class="comment">//        Department department = departmentMapper.getDeptById(id);</span></span><br><span class="line"><span class="comment">//        return department;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ç¼“å­˜ç®¡ç†å™¨å¾—åˆ°ç¼“å­˜ï¼Œè¿›è¡Œapiè°ƒç”¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Department <span class="title">getDeptById</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æŸ¥è¯¢éƒ¨é—¨"</span>+id);</span><br><span class="line">        Department department = departmentMapper.getDeptById(id);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æŸä¸ªç¼“å­˜</span></span><br><span class="line">        Cache dept = deptCacheManager.getCache(<span class="string">"dept"</span>);</span><br><span class="line">        dept.put(<span class="string">"dept:1"</span>,department);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> department;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="EmployeeService"><a href="#EmployeeService" class="headerlink" title="EmployeeService"></a>EmployeeService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.cache.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.cache.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.cache.mapper.EmployeeMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@CacheConfig</span>(cacheNames=<span class="string">"emp"</span><span class="comment">/*,cacheManager = "employeeCacheManager"*/</span>) <span class="comment">//æŠ½å–ç¼“å­˜çš„å…¬å…±é…ç½®</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeMapper employeeMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†æ–¹æ³•çš„è¿è¡Œç»“æœè¿›è¡Œç¼“å­˜ï¼›ä»¥åå†è¦ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ï¼Œä¸ç”¨è°ƒç”¨æ–¹æ³•ï¼›</span></span><br><span class="line"><span class="comment">     * CacheManagerç®¡ç†å¤šä¸ªCacheç»„ä»¶çš„ï¼Œå¯¹ç¼“å­˜çš„çœŸæ­£CRUDæ“ä½œåœ¨Cacheç»„ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªç¼“å­˜ç»„ä»¶æœ‰è‡ªå·±å”¯ä¸€ä¸€ä¸ªåå­—ï¼›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * åŸç†ï¼š</span></span><br><span class="line"><span class="comment">     *   1ã€è‡ªåŠ¨é…ç½®ç±»ï¼›CacheAutoConfiguration</span></span><br><span class="line"><span class="comment">     *   2ã€ç¼“å­˜çš„é…ç½®ç±»</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.GenericCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.JCacheCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.EhCacheCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.HazelcastCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.InfinispanCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.CouchbaseCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.RedisCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.CaffeineCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.GuavaCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.SimpleCacheConfigurationã€é»˜è®¤ã€‘</span></span><br><span class="line"><span class="comment">     *   org.springframework.boot.autoconfigure.cache.NoOpCacheConfiguration</span></span><br><span class="line"><span class="comment">     *   3ã€å“ªä¸ªé…ç½®ç±»é»˜è®¤ç”Ÿæ•ˆï¼šSimpleCacheConfigurationï¼›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *   4ã€ç»™å®¹å™¨ä¸­æ³¨å†Œäº†ä¸€ä¸ªCacheManagerï¼šConcurrentMapCacheManager</span></span><br><span class="line"><span class="comment">     *   5ã€å¯ä»¥è·å–å’Œåˆ›å»ºConcurrentMapCacheç±»å‹çš„ç¼“å­˜ç»„ä»¶ï¼›ä»–çš„ä½œç”¨å°†æ•°æ®ä¿å­˜åœ¨ConcurrentMapä¸­ï¼›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *   è¿è¡Œæµç¨‹ï¼š</span></span><br><span class="line"><span class="comment">     *   <span class="doctag">@Cacheable</span>ï¼š</span></span><br><span class="line"><span class="comment">     *   1ã€æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œå…ˆå»æŸ¥è¯¢Cacheï¼ˆç¼“å­˜ç»„ä»¶ï¼‰ï¼ŒæŒ‰ç…§cacheNamesæŒ‡å®šçš„åå­—è·å–ï¼›</span></span><br><span class="line"><span class="comment">     *      ï¼ˆCacheManagerå…ˆè·å–ç›¸åº”çš„ç¼“å­˜ï¼‰ï¼Œç¬¬ä¸€æ¬¡è·å–ç¼“å­˜å¦‚æœæ²¡æœ‰Cacheç»„ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</span></span><br><span class="line"><span class="comment">     *   2ã€å»Cacheä¸­æŸ¥æ‰¾ç¼“å­˜çš„å†…å®¹ï¼Œä½¿ç”¨ä¸€ä¸ªkeyï¼Œé»˜è®¤å°±æ˜¯æ–¹æ³•çš„å‚æ•°ï¼›</span></span><br><span class="line"><span class="comment">     *      keyæ˜¯æŒ‰ç…§æŸç§ç­–ç•¥ç”Ÿæˆçš„ï¼›é»˜è®¤æ˜¯ä½¿ç”¨keyGeneratorç”Ÿæˆçš„ï¼Œé»˜è®¤ä½¿ç”¨SimpleKeyGeneratorç”Ÿæˆkeyï¼›</span></span><br><span class="line"><span class="comment">     *          SimpleKeyGeneratorç”Ÿæˆkeyçš„é»˜è®¤ç­–ç•¥ï¼›</span></span><br><span class="line"><span class="comment">     *                  å¦‚æœæ²¡æœ‰å‚æ•°ï¼›key=new SimpleKey()ï¼›</span></span><br><span class="line"><span class="comment">     *                  å¦‚æœæœ‰ä¸€ä¸ªå‚æ•°ï¼škey=å‚æ•°çš„å€¼</span></span><br><span class="line"><span class="comment">     *                  å¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼škey=new SimpleKey(params)ï¼›</span></span><br><span class="line"><span class="comment">     *   3ã€æ²¡æœ‰æŸ¥åˆ°ç¼“å­˜å°±è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼›</span></span><br><span class="line"><span class="comment">     *   4ã€å°†ç›®æ ‡æ–¹æ³•è¿”å›çš„ç»“æœï¼Œæ”¾è¿›ç¼“å­˜ä¸­</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *   <span class="doctag">@Cacheable</span>æ ‡æ³¨çš„æ–¹æ³•æ‰§è¡Œä¹‹å‰å…ˆæ¥æ£€æŸ¥ç¼“å­˜ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œé»˜è®¤æŒ‰ç…§å‚æ•°çš„å€¼ä½œä¸ºkeyå»æŸ¥è¯¢ç¼“å­˜ï¼Œ</span></span><br><span class="line"><span class="comment">     *   å¦‚æœæ²¡æœ‰å°±è¿è¡Œæ–¹æ³•å¹¶å°†ç»“æœæ”¾å…¥ç¼“å­˜ï¼›ä»¥åå†æ¥è°ƒç”¨å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®ï¼›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *   æ ¸å¿ƒï¼š</span></span><br><span class="line"><span class="comment">     *      1ï¼‰ã€ä½¿ç”¨CacheManagerã€ConcurrentMapCacheManagerã€‘æŒ‰ç…§åå­—å¾—åˆ°Cacheã€ConcurrentMapCacheã€‘ç»„ä»¶</span></span><br><span class="line"><span class="comment">     *      2ï¼‰ã€keyä½¿ç”¨keyGeneratorç”Ÿæˆçš„ï¼Œé»˜è®¤æ˜¯SimpleKeyGenerator</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *   å‡ ä¸ªå±æ€§ï¼š</span></span><br><span class="line"><span class="comment">     *      cacheNames/valueï¼šæŒ‡å®šç¼“å­˜ç»„ä»¶çš„åå­—;å°†æ–¹æ³•çš„è¿”å›ç»“æœæ”¾åœ¨å“ªä¸ªç¼“å­˜ä¸­ï¼Œæ˜¯æ•°ç»„çš„æ–¹å¼ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªç¼“å­˜ï¼›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      keyï¼šç¼“å­˜æ•°æ®ä½¿ç”¨çš„keyï¼›å¯ä»¥ç”¨å®ƒæ¥æŒ‡å®šã€‚é»˜è®¤æ˜¯ä½¿ç”¨æ–¹æ³•å‚æ•°çš„å€¼  1-æ–¹æ³•çš„è¿”å›å€¼</span></span><br><span class="line"><span class="comment">     *              ç¼–å†™SpELï¼› #i d;å‚æ•°idçš„å€¼   #a0  #p0  #root.args[0]</span></span><br><span class="line"><span class="comment">     *              getEmp[2]</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      keyGeneratorï¼škeyçš„ç”Ÿæˆå™¨ï¼›å¯ä»¥è‡ªå·±æŒ‡å®škeyçš„ç”Ÿæˆå™¨çš„ç»„ä»¶id</span></span><br><span class="line"><span class="comment">     *              key/keyGeneratorï¼šäºŒé€‰ä¸€ä½¿ç”¨;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      cacheManagerï¼šæŒ‡å®šç¼“å­˜ç®¡ç†å™¨ï¼›æˆ–è€…cacheResolveræŒ‡å®šè·å–è§£æå™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      conditionï¼šæŒ‡å®šç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹æ‰ç¼“å­˜ï¼›</span></span><br><span class="line"><span class="comment">     *              ,condition = "#id&gt;0"</span></span><br><span class="line"><span class="comment">     *          condition = "#a0&gt;1"ï¼šç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‹1çš„æ—¶å€™æ‰è¿›è¡Œç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *      unless:å¦å®šç¼“å­˜ï¼›å½“unlessæŒ‡å®šçš„æ¡ä»¶ä¸ºtrueï¼Œæ–¹æ³•çš„è¿”å›å€¼å°±ä¸ä¼šè¢«ç¼“å­˜ï¼›å¯ä»¥è·å–åˆ°ç»“æœè¿›è¡Œåˆ¤æ–­</span></span><br><span class="line"><span class="comment">     *              unless = "#result == null"</span></span><br><span class="line"><span class="comment">     *              unless = "#a0==2":å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼æ˜¯2ï¼Œç»“æœä¸ç¼“å­˜ï¼›</span></span><br><span class="line"><span class="comment">     *      syncï¼šæ˜¯å¦ä½¿ç”¨å¼‚æ­¥æ¨¡å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Cacheable</span>(value = &#123;<span class="string">"emp"</span>&#125;<span class="comment">/*,keyGenerator = "myKeyGenerator",condition = "#a0&gt;1",unless = "#a0==2"*/</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">getEmp</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æŸ¥è¯¢"</span>+id+<span class="string">"å·å‘˜å·¥"</span>);</span><br><span class="line">        Employee emp = employeeMapper.getEmpById(id);</span><br><span class="line">        <span class="keyword">return</span> emp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@CachePut</span>ï¼šæ—¢è°ƒç”¨æ–¹æ³•ï¼Œåˆæ›´æ–°ç¼“å­˜æ•°æ®ï¼›åŒæ­¥æ›´æ–°ç¼“å­˜</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹äº†æ•°æ®åº“çš„æŸä¸ªæ•°æ®ï¼ŒåŒæ—¶æ›´æ–°ç¼“å­˜ï¼›</span></span><br><span class="line"><span class="comment">     * è¿è¡Œæ—¶æœºï¼š</span></span><br><span class="line"><span class="comment">     *  1ã€å…ˆè°ƒç”¨ç›®æ ‡æ–¹æ³•</span></span><br><span class="line"><span class="comment">     *  2ã€å°†ç›®æ ‡æ–¹æ³•çš„ç»“æœç¼“å­˜èµ·æ¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">     *  1ã€æŸ¥è¯¢1å·å‘˜å·¥ï¼›æŸ¥åˆ°çš„ç»“æœä¼šæ”¾åœ¨ç¼“å­˜ä¸­ï¼›</span></span><br><span class="line"><span class="comment">     *          keyï¼š1  valueï¼šlastNameï¼šå¼ ä¸‰</span></span><br><span class="line"><span class="comment">     *  2ã€ä»¥åæŸ¥è¯¢è¿˜æ˜¯ä¹‹å‰çš„ç»“æœ</span></span><br><span class="line"><span class="comment">     *  3ã€æ›´æ–°1å·å‘˜å·¥ï¼›ã€lastName:zhangsanï¼›gender:0ã€‘</span></span><br><span class="line"><span class="comment">     *          å°†æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿæ”¾è¿›ç¼“å­˜äº†ï¼›</span></span><br><span class="line"><span class="comment">     *          keyï¼šä¼ å…¥çš„employeeå¯¹è±¡  å€¼ï¼šè¿”å›çš„employeeå¯¹è±¡ï¼›</span></span><br><span class="line"><span class="comment">     *  4ã€æŸ¥è¯¢1å·å‘˜å·¥ï¼Ÿ</span></span><br><span class="line"><span class="comment">     *      åº”è¯¥æ˜¯æ›´æ–°åçš„å‘˜å·¥ï¼›</span></span><br><span class="line"><span class="comment">     *          key = "#employee.id":ä½¿ç”¨ä¼ å…¥çš„å‚æ•°çš„å‘˜å·¥idï¼›</span></span><br><span class="line"><span class="comment">     *          key = "#result.id"ï¼šä½¿ç”¨è¿”å›åçš„id</span></span><br><span class="line"><span class="comment">     *             <span class="doctag">@Cacheable</span>çš„keyæ˜¯ä¸èƒ½ç”¨#result</span></span><br><span class="line"><span class="comment">     *      ä¸ºä»€ä¹ˆæ˜¯æ²¡æ›´æ–°å‰çš„ï¼Ÿã€1å·å‘˜å·¥æ²¡æœ‰åœ¨ç¼“å­˜ä¸­æ›´æ–°ã€‘</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@CachePut</span>(<span class="comment">/*value = "emp",*/</span>key = <span class="string">"#result.id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">updateEmp</span><span class="params">(Employee employee)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"updateEmp:"</span>+employee);</span><br><span class="line">        employeeMapper.updateEmp(employee);</span><br><span class="line">        <span class="keyword">return</span> employee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@CacheEvict</span>ï¼šç¼“å­˜æ¸…é™¤</span></span><br><span class="line"><span class="comment">     *  keyï¼šæŒ‡å®šè¦æ¸…é™¤çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     *  allEntries = trueï¼šæŒ‡å®šæ¸…é™¤è¿™ä¸ªç¼“å­˜ä¸­æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     *  beforeInvocation = falseï¼šç¼“å­˜çš„æ¸…é™¤æ˜¯å¦åœ¨æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">     *      é»˜è®¤ä»£è¡¨ç¼“å­˜æ¸…é™¤æ“ä½œæ˜¯åœ¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ;å¦‚æœå‡ºç°å¼‚å¸¸ç¼“å­˜å°±ä¸ä¼šæ¸…é™¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  beforeInvocation = trueï¼š</span></span><br><span class="line"><span class="comment">     *      ä»£è¡¨æ¸…é™¤ç¼“å­˜æ“ä½œæ˜¯åœ¨æ–¹æ³•è¿è¡Œä¹‹å‰æ‰§è¡Œï¼Œæ— è®ºæ–¹æ³•æ˜¯å¦å‡ºç°å¼‚å¸¸ï¼Œç¼“å­˜éƒ½æ¸…é™¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@CacheEvict</span>(value=<span class="string">"emp"</span>,beforeInvocation = <span class="keyword">true</span><span class="comment">/*key = "#id",*/</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteEmp</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"deleteEmp:"</span>+id);</span><br><span class="line">        <span class="comment">//employeeMapper.deleteEmpById(id);</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Caching å®šä¹‰å¤æ‚çš„ç¼“å­˜è§„åˆ™</span></span><br><span class="line">    <span class="meta">@Caching</span>(</span><br><span class="line">         cacheable = &#123;</span><br><span class="line">             <span class="meta">@Cacheable</span>(<span class="comment">/*value="emp",*/</span>key = <span class="string">"#lastName"</span>)</span><br><span class="line">         &#125;,</span><br><span class="line">         put = &#123;</span><br><span class="line">             <span class="meta">@CachePut</span>(<span class="comment">/*value="emp",*/</span>key = <span class="string">"#result.id"</span>),</span><br><span class="line">             <span class="meta">@CachePut</span>(<span class="comment">/*value="emp",*/</span>key = <span class="string">"#result.email"</span>)</span><br><span class="line">         &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">getEmpByLastName</span><span class="params">(String lastName)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> employeeMapper.getEmpByLastName(lastName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2-SpringBoot-amqp"><a href="#2-SpringBoot-amqp" class="headerlink" title="2 SpringBoot -amqp"></a>2 SpringBoot -amqp</h1><h4 id="SpringBootAmqpApplication"><a href="#SpringBootAmqpApplication" class="headerlink" title="SpringBootAmqpApplication"></a>SpringBootAmqpApplication</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.amqp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.EnableRabbit;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªåŠ¨é…ç½®</span></span><br><span class="line"><span class="comment"> *  1ã€RabbitAutoConfiguration</span></span><br><span class="line"><span class="comment"> *  2ã€æœ‰è‡ªåŠ¨é…ç½®äº†è¿æ¥å·¥å‚ConnectionFactoryï¼›</span></span><br><span class="line"><span class="comment"> *  3ã€RabbitProperties å°è£…äº† RabbitMQçš„é…ç½®</span></span><br><span class="line"><span class="comment"> *  4ã€ RabbitTemplate ï¼šç»™RabbitMQå‘é€å’Œæ¥å—æ¶ˆæ¯ï¼›</span></span><br><span class="line"><span class="comment"> *  5ã€ AmqpAdmin ï¼š RabbitMQç³»ç»Ÿç®¡ç†åŠŸèƒ½ç»„ä»¶;</span></span><br><span class="line"><span class="comment"> *  	AmqpAdminï¼šåˆ›å»ºå’Œåˆ é™¤ Queueï¼ŒExchangeï¼ŒBinding</span></span><br><span class="line"><span class="comment"> *  6ã€<span class="doctag">@EnableRabbit</span> +  <span class="doctag">@RabbitListener</span> ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—çš„å†…å®¹</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableRabbit</span>  <span class="comment">//å¼€å¯åŸºäºæ³¨è§£çš„RabbitMQæ¨¡å¼</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Springboot02AmqpApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(Springboot02AmqpApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="BookService"><a href="#BookService" class="headerlink" title="BookService"></a>BookService</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.amqp.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.amqp.bean.Book;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener</span>(queues = <span class="string">"atguigu.news"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(Book book)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ”¶åˆ°æ¶ˆæ¯ï¼š"</span>+book);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener</span>(queues = <span class="string">"atguigu"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive02</span><span class="params">(Message message)</span></span>&#123;</span><br><span class="line">        System.out.println(message.getBody());</span><br><span class="line">        System.out.println(message.getMessageProperties());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="MyAMQPConfig"><a href="#MyAMQPConfig" class="headerlink" title="MyAMQPConfig"></a>MyAMQPConfig</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class MyAMQPConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public MessageConverter messageConverter()&#123;</span><br><span class="line">        return new Jackson2JsonMessageConverter();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-SpringBoot-elastic"><a href="#3-SpringBoot-elastic" class="headerlink" title="3 SpringBoot-elastic"></a>3 SpringBoot-elastic</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.elastic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SpringBooté»˜è®¤æ”¯æŒä¸¤ç§æŠ€æœ¯æ¥å’ŒESäº¤äº’ï¼›</span></span><br><span class="line"><span class="comment"> * 1ã€Jestï¼ˆé»˜è®¤ä¸ç”Ÿæ•ˆï¼‰</span></span><br><span class="line"><span class="comment"> * 	éœ€è¦å¯¼å…¥jestçš„å·¥å…·åŒ…ï¼ˆio.searchbox.client.JestClientï¼‰</span></span><br><span class="line"><span class="comment"> * 2ã€SpringData ElasticSearchã€ESç‰ˆæœ¬æœ‰å¯èƒ½ä¸åˆé€‚ã€‘</span></span><br><span class="line"><span class="comment"> * 		ç‰ˆæœ¬é€‚é…è¯´æ˜ï¼šhttps://github.com/spring-projects/spring-data-elasticsearch</span></span><br><span class="line"><span class="comment"> *		å¦‚æœç‰ˆæœ¬ä¸é€‚é…ï¼š2.4.6</span></span><br><span class="line"><span class="comment"> *			1ï¼‰ã€å‡çº§SpringBootç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"> *			2ï¼‰ã€å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ES</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 		1ï¼‰ã€Client èŠ‚ç‚¹ä¿¡æ¯clusterNodesï¼›clusterName</span></span><br><span class="line"><span class="comment"> * 		2ï¼‰ã€ElasticsearchTemplate æ“ä½œes</span></span><br><span class="line"><span class="comment"> *		3ï¼‰ã€ç¼–å†™ä¸€ä¸ª ElasticsearchRepository çš„å­æ¥å£æ¥æ“ä½œESï¼›</span></span><br><span class="line"><span class="comment"> *	ä¸¤ç§ç”¨æ³•ï¼šhttps://github.com/spring-projects/spring-data-elasticsearch</span></span><br><span class="line"><span class="comment"> *	1ï¼‰ã€ç¼–å†™ä¸€ä¸ª ElasticsearchRepository</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Springboot03ElasticApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(Springboot03ElasticApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="BookRepository"><a href="#BookRepository" class="headerlink" title="BookRepository"></a>BookRepository</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.elastic.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.elastic.bean.Book;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.repository.ElasticsearchRepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BookRepository</span> <span class="keyword">extends</span> <span class="title">ElasticsearchRepository</span>&lt;<span class="title">Book</span>,<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‚ç…§</span></span><br><span class="line">    <span class="comment">// https://docs.spring.io/spring-data/elasticsearch/docs/3.0.6.RELEASE/reference/html/</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> List&lt;Book&gt; <span class="title">findByBookNameLike</span><span class="params">(String bookName)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Book"><a href="#Book" class="headerlink" title="Book"></a>Book</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Document</span>(indexName = <span class="string">"atguigu"</span>,type = <span class="string">"book"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.elasticsearch.jest.uris=http:<span class="comment">//118.24.44.169:9200</span></span><br><span class="line"></span><br><span class="line">spring.data.elasticsearch.cluster-name=elasticsearch</span><br><span class="line">spring.data.elasticsearch.cluster-nodes=<span class="number">118.24</span>.44.169:<span class="number">9301</span></span><br></pre></td></tr></table></figure>
<h1 id="4-SpringBoot-task"><a href="#4-SpringBoot-task" class="headerlink" title="4 SpringBoot -task"></a>4 SpringBoot -task</h1><h4 id="SpringBoot-TaskApplication"><a href="#SpringBoot-TaskApplication" class="headerlink" title="SpringBoot-TaskApplication"></a>SpringBoot-TaskApplication</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.task;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableAsync;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableAsync</span>  <span class="comment">//å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@EnableScheduling</span> <span class="comment">//å¼€å¯åŸºäºæ³¨è§£çš„å®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Springboot04TaskApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(Springboot04TaskApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="AsyncService"><a href="#AsyncService" class="headerlink" title="AsyncService"></a>AsyncService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.task.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Async;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"å¤„ç†æ•°æ®ä¸­..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ScheduleService"><a href="#ScheduleService" class="headerlink" title="ScheduleService"></a>ScheduleService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.task.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScheduledService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * second(ç§’), minuteï¼ˆåˆ†ï¼‰, hourï¼ˆæ—¶ï¼‰, day of monthï¼ˆæ—¥ï¼‰, monthï¼ˆæœˆï¼‰, day of weekï¼ˆå‘¨å‡ ï¼‰.</span></span><br><span class="line"><span class="comment">     * 0 * * * * MON-FRI</span></span><br><span class="line"><span class="comment">     *  ã€0 0/5 14,18 * * ?ã€‘ æ¯å¤©14ç‚¹æ•´ï¼Œå’Œ18ç‚¹æ•´ï¼Œæ¯éš”5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="comment">     *  ã€0 15 10 ? * 1-6ã€‘ æ¯ä¸ªæœˆçš„å‘¨ä¸€è‡³å‘¨å…­10:15åˆ†æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="comment">     *  ã€0 0 2 ? * 6Lã€‘æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªå‘¨å…­å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="comment">     *  ã€0 0 2 LW * ?ã€‘æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªå·¥ä½œæ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="comment">     *  ã€0 0 2-4 ? * 1#1ã€‘æ¯ä¸ªæœˆçš„ç¬¬ä¸€ä¸ªå‘¨ä¸€å‡Œæ™¨2ç‚¹åˆ°4ç‚¹æœŸé—´ï¼Œæ¯ä¸ªæ•´ç‚¹éƒ½æ‰§è¡Œä¸€æ¬¡ï¼›</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">   <span class="comment">// @Scheduled(cron = "0 * * * * MON-SAT")</span></span><br><span class="line">    <span class="comment">//@Scheduled(cron = "0,1,2,3,4 * * * * MON-SAT")</span></span><br><span class="line">   <span class="comment">// @Scheduled(cron = "0-4 * * * * MON-SAT")</span></span><br><span class="line">    <span class="meta">@Scheduled</span>(cron = <span class="string">"0/4 * * * * MON-SAT"</span>)  <span class="comment">//æ¯4ç§’æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello ... "</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Asyncontroller"><a href="#Asyncontroller" class="headerlink" title="Asyncontroller"></a>Asyncontroller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.task.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.task.service.AsyncService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AsyncService asyncService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        asyncService.hello();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="properties-1"><a href="#properties-1" class="headerlink" title="properties"></a>properties</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.mail.username=534096094@qq.com</span><br><span class="line">spring.mail.password=gtstkoszjelabijb</span><br><span class="line">spring.mail.host=smtp.qq.com</span><br><span class="line">spring.mail.properties.mail.smtp.ssl.enable=true</span><br></pre></td></tr></table></figure>
<h1 id="5-Spring-security"><a href="#5-Spring-security" class="headerlink" title="5 Spring-security"></a>5 Spring-security</h1><h4 id="SpringBootSecurityApplication"><a href="#SpringBootSecurityApplication" class="headerlink" title="SpringBootSecurityApplication"></a>SpringBootSecurityApplication</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€å¼•å…¥SpringSecurityï¼›</span></span><br><span class="line"><span class="comment"> * 2ã€ç¼–å†™SpringSecurityçš„é…ç½®ç±»ï¼›</span></span><br><span class="line"><span class="comment"> * 		<span class="doctag">@EnableWebSecurity</span>   extends WebSecurityConfigurerAdapter</span></span><br><span class="line"><span class="comment"> * 3ã€æ§åˆ¶è¯·æ±‚çš„è®¿é—®æƒé™ï¼š</span></span><br><span class="line"><span class="comment"> * 		configure(HttpSecurity http) &#123;</span></span><br><span class="line"><span class="comment"> * 		 	http.authorizeRequests().antMatchers("/").permitAll()</span></span><br><span class="line"><span class="comment"> * 		 		.antMatchers("/level1/**").hasRole("VIP1")</span></span><br><span class="line"><span class="comment"> * 		&#125;</span></span><br><span class="line"><span class="comment"> * 4ã€å®šä¹‰è®¤è¯è§„åˆ™ï¼š</span></span><br><span class="line"><span class="comment"> * 		configure(AuthenticationManagerBuilder auth)&#123;</span></span><br><span class="line"><span class="comment"> * 		 	auth.inMemoryAuthentication()</span></span><br><span class="line"><span class="comment"> * 		 		.withUser("zhangsan").password("123456").roles("VIP1","VIP2")</span></span><br><span class="line"><span class="comment"> * 		&#125;</span></span><br><span class="line"><span class="comment"> * 5ã€å¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»é™†åŠŸèƒ½ï¼š</span></span><br><span class="line"><span class="comment"> * 		configure(HttpSecurity http)&#123;</span></span><br><span class="line"><span class="comment"> * 		 	http.formLogin();</span></span><br><span class="line"><span class="comment"> * 		&#125;</span></span><br><span class="line"><span class="comment"> * 6ã€æ³¨é”€ï¼šhttp.logout();</span></span><br><span class="line"><span class="comment"> * 7ã€è®°ä½æˆ‘ï¼šRemeberme()ï¼›</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Springboot05SecurityApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(Springboot05SecurityApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="MySecurityConfig"><a href="#MySecurityConfig" class="headerlink" title="MySecurityConfig"></a>MySecurityConfig</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.security.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//super.configure(http);</span></span><br><span class="line">        <span class="comment">//å®šåˆ¶è¯·æ±‚çš„æˆæƒè§„åˆ™</span></span><br><span class="line">        http.authorizeRequests().antMatchers(<span class="string">"/"</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">"/level1/**"</span>).hasRole(<span class="string">"VIP1"</span>)</span><br><span class="line">                .antMatchers(<span class="string">"/level2/**"</span>).hasRole(<span class="string">"VIP2"</span>)</span><br><span class="line">                .antMatchers(<span class="string">"/level3/**"</span>).hasRole(<span class="string">"VIP3"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»é™†åŠŸèƒ½ï¼Œæ•ˆæœï¼Œå¦‚æœæ²¡æœ‰ç™»é™†ï¼Œæ²¡æœ‰æƒé™å°±ä¼šæ¥åˆ°ç™»é™†é¡µé¢</span></span><br><span class="line">        http.formLogin().usernameParameter(<span class="string">"user"</span>).passwordParameter(<span class="string">"pwd"</span>)</span><br><span class="line">                .loginPage(<span class="string">"/userlogin"</span>);</span><br><span class="line">        <span class="comment">//1ã€/loginæ¥åˆ°ç™»é™†é¡µ</span></span><br><span class="line">        <span class="comment">//2ã€é‡å®šå‘åˆ°/login?errorè¡¨ç¤ºç™»é™†å¤±è´¥</span></span><br><span class="line">        <span class="comment">//3ã€æ›´å¤šè¯¦ç»†è§„å®š</span></span><br><span class="line">        <span class="comment">//4ã€é»˜è®¤postå½¢å¼çš„ /loginä»£è¡¨å¤„ç†ç™»é™†</span></span><br><span class="line">        <span class="comment">//5ã€ä¸€ä½†å®šåˆ¶loginPageï¼›é‚£ä¹ˆ loginPageçš„postè¯·æ±‚å°±æ˜¯ç™»é™†</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€åŠŸèƒ½ã€‚</span></span><br><span class="line">        http.logout().logoutSuccessUrl(<span class="string">"/"</span>);<span class="comment">//æ³¨é”€æˆåŠŸä»¥åæ¥åˆ°é¦–é¡µ</span></span><br><span class="line">        <span class="comment">//1ã€è®¿é—® /logout è¡¨ç¤ºç”¨æˆ·æ³¨é”€ï¼Œæ¸…ç©ºsession</span></span><br><span class="line">        <span class="comment">//2ã€æ³¨é”€æˆåŠŸä¼šè¿”å› /login?logout é¡µé¢ï¼›</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¼€å¯è®°ä½æˆ‘åŠŸèƒ½</span></span><br><span class="line">        http.rememberMe().rememberMeParameter(<span class="string">"remeber"</span>);</span><br><span class="line">        <span class="comment">//ç™»é™†æˆåŠŸä»¥åï¼Œå°†cookieå‘ç»™æµè§ˆå™¨ä¿å­˜ï¼Œä»¥åè®¿é—®é¡µé¢å¸¦ä¸Šè¿™ä¸ªcookieï¼Œåªè¦é€šè¿‡æ£€æŸ¥å°±å¯ä»¥å…ç™»å½•</span></span><br><span class="line">        <span class="comment">//ç‚¹å‡»æ³¨é”€ä¼šåˆ é™¤cookie</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰è®¤è¯è§„åˆ™</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//super.configure(auth);</span></span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">"zhangsan"</span>).password(<span class="string">"123456"</span>).roles(<span class="string">"VIP1"</span>,<span class="string">"VIP2"</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">"lisi"</span>).password(<span class="string">"123456"</span>).roles(<span class="string">"VIP2"</span>,<span class="string">"VIP3"</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">"wangwu"</span>).password(<span class="string">"123456"</span>).roles(<span class="string">"VIP1"</span>,<span class="string">"VIP3"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.security.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KungfuController</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> String PREFIX = <span class="string">"pages/"</span>;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * æ¬¢è¿é¡µ</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"welcome"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * ç™»é™†é¡µ</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/userlogin"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">loginPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> PREFIX+<span class="string">"login"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * level1é¡µé¢æ˜ å°„</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> path</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/level1/&#123;path&#125;"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">level1</span><span class="params">(@PathVariable(<span class="string">"path"</span>)</span>String path) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> PREFIX+<span class="string">"level1/"</span>+path;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * level2é¡µé¢æ˜ å°„</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> path</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/level2/&#123;path&#125;"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">level2</span><span class="params">(@PathVariable(<span class="string">"path"</span>)</span>String path) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> PREFIX+<span class="string">"level2/"</span>+path;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * level3é¡µé¢æ˜ å°„</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> path</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/level3/&#123;path&#125;"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">level3</span><span class="params">(@PathVariable(<span class="string">"path"</span>)</span>String path) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> PREFIX+<span class="string">"level3/"</span>+path;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="welcome"><a href="#welcome" class="headerlink" title="welcome"></a>welcome</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span></span></span><br><span class="line"><span class="tag">	  <span class="attr">xmlns:sec</span>=<span class="string">"http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>æ¬¢è¿å…‰ä¸´æ­¦æ—ç§˜ç±ç®¡ç†ç³»ç»Ÿ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">"!isAuthenticated()"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h2</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span>æ¸¸å®¢æ‚¨å¥½ï¼Œå¦‚æœæƒ³æŸ¥çœ‹æ­¦æ—ç§˜ç± <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/userlogin&#125;"</span>&gt;</span>è¯·ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">"isAuthenticated()"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">sec:authentication</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>ï¼Œæ‚¨å¥½,æ‚¨çš„è§’è‰²æœ‰ï¼š</span><br><span class="line">		<span class="tag">&lt;<span class="name">span</span> <span class="attr">sec:authentication</span>=<span class="string">"principal.authorities"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">"@&#123;/logout&#125;"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"æ³¨é”€"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">"hasRole('VIP1')"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>æ™®é€šæ­¦åŠŸç§˜ç±<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level1/1&#125;"</span>&gt;</span>ç½—æ±‰æ‹³<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level1/2&#125;"</span>&gt;</span>æ­¦å½“é•¿æ‹³<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level1/3&#125;"</span>&gt;</span>å…¨çœŸå‰‘æ³•<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">"hasRole('VIP2')"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>é«˜çº§æ­¦åŠŸç§˜ç±<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level2/1&#125;"</span>&gt;</span>å¤ªææ‹³<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level2/2&#125;"</span>&gt;</span>ä¸ƒä¼¤æ‹³<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level2/3&#125;"</span>&gt;</span>æ¢¯äº‘çºµ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">"hasRole('VIP3')"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>ç»ä¸–æ­¦åŠŸç§˜ç±<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level3/1&#125;"</span>&gt;</span>è‘µèŠ±å®å…¸<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level3/2&#125;"</span>&gt;</span>é¾Ÿæ´¾æ°”åŠŸ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/level3/3&#125;"</span>&gt;</span>ç‹¬å­¤ä¹å‰‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="loginhtml"><a href="#loginhtml" class="headerlink" title="loginhtml"></a>loginhtml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;h1 align=&quot;center&quot;&gt;æ¬¢è¿ç™»é™†æ­¦æ—ç§˜ç±ç®¡ç†ç³»ç»Ÿ&lt;/h1&gt;</span><br><span class="line">	&lt;hr&gt;</span><br><span class="line">	&lt;div align=&quot;center&quot;&gt;</span><br><span class="line">		&lt;form th:action=&quot;@&#123;/userlogin&#125;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">			ç”¨æˆ·å:&lt;input name=&quot;user&quot;/&gt;&lt;br&gt;</span><br><span class="line">			å¯†ç :&lt;input name=&quot;pwd&quot;&gt;&lt;br/&gt;</span><br><span class="line">			&lt;input type=&quot;checkbox&quot; name=&quot;remeber&quot;&gt; è®°ä½æˆ‘&lt;br/&gt;</span><br><span class="line">			&lt;input type=&quot;submit&quot; value=&quot;ç™»é™†&quot;&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h1 id="6-springboot-dubbo"><a href="#6-springboot-dubbo" class="headerlink" title="6  springboot-dubbo"></a>6  springboot-dubbo</h1><h4 id="consumer-user"><a href="#consumer-user" class="headerlink" title="consumer-user"></a>consumer-user</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Reference;</span><br><span class="line"><span class="keyword">import</span> com.atguigu.ticket.service.TicketService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Reference</span></span><br><span class="line">    TicketService ticketService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String ticket = ticketService.getTicket();</span><br><span class="line">        System.out.println(<span class="string">"ä¹°åˆ°ç¥¨äº†ï¼š"</span>+ticket);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dubbo.application.name=consumer-user</span><br><span class="line"></span><br><span class="line">dubbo.registry.address=zookeeper:<span class="comment">//118.24.44.169:2181</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">//å°†æœåŠ¡å‘å¸ƒå‡ºå»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TicketServiceImpl</span> <span class="keyword">implements</span> <span class="title">TicketService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTicket</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ã€Šå‰å®³äº†ï¼Œæˆ‘çš„å›½ã€‹"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dubbo.application.name=provider-ticket</span><br><span class="line"></span><br><span class="line">dubbo.registry.address=zookeeper://118.24.44.169:2181</span><br><span class="line"></span><br><span class="line">dubbo.scan.base-packages=com.atguigu.ticket.service</span><br></pre></td></tr></table></figure>
<h4 id="SpringCloud"><a href="#SpringCloud" class="headerlink" title="SpringCloud"></a>SpringCloud</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ³¨å†Œä¸­å¿ƒ</span><br><span class="line"> * 1ã€é…ç½®Eurekaä¿¡æ¯</span><br><span class="line"> * 2ã€@EnableEurekaServer</span><br><span class="line"> */</span><br><span class="line">@EnableEurekaServer</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class EurekaServerApplication &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		SpringApplication.run(EurekaServerApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 8761</span><br><span class="line">eureka:</span><br><span class="line">  instance:</span><br><span class="line">    hostname: eureka-server  # eurekaå®ä¾‹çš„ä¸»æœºå</span><br><span class="line">  client:</span><br><span class="line">    register-with-eureka: false #ä¸æŠŠè‡ªå·±æ³¨å†Œåˆ°eurekaä¸Š</span><br><span class="line">    fetch-registry: false #ä¸ä»eurekaä¸Šæ¥è·å–æœåŠ¡çš„æ³¨å†Œä¿¡æ¯</span><br><span class="line">    service-url:</span><br><span class="line">      defaultZone: http://localhost:8761/eureka/</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: 8002</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: provider-ticket</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">eureka:</span><br><span class="line">  instance:</span><br><span class="line">    prefer-ip-address: true # æ³¨å†ŒæœåŠ¡çš„æ—¶å€™ä½¿ç”¨æœåŠ¡çš„ipåœ°å€</span><br><span class="line">  client:</span><br><span class="line">    service-url:</span><br><span class="line">      defaultZone: http://localhost:8761/eureka/</span><br></pre></td></tr></table></figure>
<h1 id="Springboot-Actuar"><a href="#Springboot-Actuar" class="headerlink" title="Springboot Actuar"></a>Springboot Actuar</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * è‡ªå®šä¹‰å¥åº·çŠ¶æ€æŒ‡ç¤ºå™¨</span><br><span class="line"> * 1ã€ç¼–å†™ä¸€ä¸ªæŒ‡ç¤ºå™¨ å®ç° HealthIndicator æ¥å£</span><br><span class="line"> * 2ã€æŒ‡ç¤ºå™¨çš„åå­— xxxxHealthIndicator</span><br><span class="line"> * 3ã€åŠ å…¥å®¹å™¨ä¸­</span><br><span class="line"> */</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class Springboot08ActuatorApplication &#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		SpringApplication.run(Springboot08ActuatorApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.springboot08actuator.health;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.actuate.health.Health;</span><br><span class="line">import org.springframework.boot.actuate.health.HealthIndicator;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class MyAppHealthIndicator implements HealthIndicator &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Health health() &#123;</span><br><span class="line"></span><br><span class="line">        //è‡ªå®šä¹‰çš„æ£€æŸ¥æ–¹æ³•</span><br><span class="line">        //Health.up().build()ä»£è¡¨å¥åº·</span><br><span class="line">        return Health.down().withDetail(&quot;msg&quot;,&quot;æœåŠ¡å¼‚å¸¸&quot;).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git.branch=master</span><br><span class="line">git.commit.id=xjkd33s</span><br><span class="line">git.commit.time=2017-12-12 12:12:56</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">management.security.enabled=false</span><br><span class="line"></span><br><span class="line">spring.redis.host=118.24.44.169</span><br><span class="line"></span><br><span class="line">info.app.id=hello</span><br><span class="line">info.app.version=1.0.0</span><br><span class="line"></span><br><span class="line">#endpoints.metrics.enabled=false</span><br><span class="line">endpoints.shutdown.enabled=true</span><br><span class="line"></span><br><span class="line">#endpoints.beans.id=mybean</span><br><span class="line">#endpoints.beans.path=/bean</span><br><span class="line">#endpoints.beans.enabled=false</span><br><span class="line">#</span><br><span class="line">#endpoints.dump.path=/du</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># \u5173\u95ED\u6240\u6709\u7AEF\u70B9\u8BBF\u95EE</span><br><span class="line">#endpoints.enabled=false</span><br><span class="line">#endpoints.beans.enabled=true</span><br><span class="line"></span><br><span class="line">management.context-path=/manage</span><br><span class="line"></span><br><span class="line">management.port=8181</span><br></pre></td></tr></table></figure>
<p> 1</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/10/SpringCloud/å°Dè¯¾å ‚springcloud/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/10/SpringCloud/å°Dè¯¾å ‚springcloud/" itemprop="url">å°Dè¯¾å ‚SpringCloudç¬”è®°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-10T16:56:31+08:00">
                2018-11-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/10/SpringCloud/å°Dè¯¾å ‚springcloud/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/10/SpringCloud/å°Dè¯¾å ‚springcloud/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##SpringCloudè¯¾ç¨‹ç¬”è®° </p>
<p>ç¬¬ä¸€ç«  è¯¾ç¨‹ä»‹ç»å’Œå­¦ä¹ è·¯çº¿ </p>
<h3 id="1ã€å¾®æœåŠ¡æ¶æ„SpringCloudè¯¾ç¨‹ä»‹ç»"><a href="#1ã€å¾®æœåŠ¡æ¶æ„SpringCloudè¯¾ç¨‹ä»‹ç»" class="headerlink" title="1ã€å¾®æœåŠ¡æ¶æ„SpringCloudè¯¾ç¨‹ä»‹ç»"></a>1ã€å¾®æœåŠ¡æ¶æ„SpringCloudè¯¾ç¨‹ä»‹ç»</h3><p>â€‹    ç®€ä»‹ï¼šè¯¾ç¨‹ä»‹ç»å’Œè¯¾ç¨‹å¤§çº²è®²è§£ï¼Œè®²è¯¾é£æ ¼å’Œé‡ç‚¹å†…å®¹ç†è§£æŠ€</p>
<h3 id="2ã€æŠ€æœ¯é€‰å‹å’Œå­¦åæ°´å¹³"><a href="#2ã€æŠ€æœ¯é€‰å‹å’Œå­¦åæ°´å¹³" class="headerlink" title="2ã€æŠ€æœ¯é€‰å‹å’Œå­¦åæ°´å¹³"></a>2ã€æŠ€æœ¯é€‰å‹å’Œå­¦åæ°´å¹³</h3><p>â€‹    ç®€ä»‹ï¼šè¯¾ç¨‹æ‰€éœ€åŸºç¡€å’ŒæŠ€æœ¯é€‰å‹è®²è§£ï¼Œå­¦å®Œè¯¾ç¨‹å¯ä»¥åˆ°è¾¾æ€æ ·çš„ç¨‹åº¦ï¼Œ<br>â€‹<br>â€‹    1ã€IDEA JDK8 Maven SpringBootåŸºç¡€ Linux<br>â€‹<br>â€‹    2ã€ç†è§£æŒæ¡å¹¶å¼€å‘SpringCloudé‡Œé¢ä¸»æµæ¶æ„å’Œç»„ä»¶çš„åŸºç¡€ä½¿ç”¨ï¼Œè¿˜æœ‰éƒ¨åˆ†æºç åŸç†çš„ç†è§£<br>â€‹<br>â€‹    3ã€æŒæ¡å­¦ä¹ çš„æŠ€å·§å’Œè§£å†³é—®é¢˜çš„æ€è·¯</p>
<p>ç¬¬äºŒç«  æ¶æ„æ¼”è¿›å’Œåˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€çŸ¥è¯†</p>
<h3 id="1ã€ä¼ ç»Ÿæ¶æ„æ¼”è¿›åˆ°åˆ†å¸ƒå¼æ¶æ„"><a href="#1ã€ä¼ ç»Ÿæ¶æ„æ¼”è¿›åˆ°åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="1ã€ä¼ ç»Ÿæ¶æ„æ¼”è¿›åˆ°åˆ†å¸ƒå¼æ¶æ„"></a>1ã€ä¼ ç»Ÿæ¶æ„æ¼”è¿›åˆ°åˆ†å¸ƒå¼æ¶æ„</h3><p>â€‹    ç®€ä»‹ï¼šè®²è§£å•æœºåº”ç”¨å’Œåˆ†å¸ƒå¼åº”ç”¨æ¶æ„æ¼”è¿›åŸºç¡€çŸ¥è¯† (ç”»å›¾)</p>
<pre><code>    é«˜å¯ç”¨ LVS+keepalive 


1ã€å•ä½“åº”ç”¨ï¼š
    å¼€å‘é€Ÿåº¦æ…¢
    å¯åŠ¨æ—¶é—´é•¿
    ä¾èµ–åºå¤§
    ç­‰ç­‰


2ã€å¾®æœåŠ¡
    æ˜“å¼€å‘ã€ç†è§£å’Œç»´æŠ¤
    ç‹¬ç«‹çš„éƒ¨ç½²å’Œå¯åŠ¨
    ç­‰


    ä¸è¶³ï¼š
        åˆ†å¸ƒå¼ç³»ç»Ÿ-ã€‹åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜
        éœ€è¦ç®¡ç†å¤šä¸ªæœåŠ¡-ã€‹æœåŠ¡æ²»ç†
</code></pre><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1g14gosv706j30k20cctf2.jpg" alt="image-20190316111233001"></p>
<h3 id="2ã€å¾®æœåŠ¡æ ¸å¿ƒåŸºç¡€è®²è§£"><a href="#2ã€å¾®æœåŠ¡æ ¸å¿ƒåŸºç¡€è®²è§£" class="headerlink" title="2ã€å¾®æœåŠ¡æ ¸å¿ƒåŸºç¡€è®²è§£"></a>2ã€å¾®æœåŠ¡æ ¸å¿ƒåŸºç¡€è®²è§£</h3><p>â€‹    ç®€ä»‹ï¼šè®²è§£å¾®æœåŠ¡æ ¸å¿ƒçŸ¥è¯† ï¼šç½‘å…³ã€æœåŠ¡å‘ç°æ³¨å†Œã€é…ç½®ä¸­å¿ƒã€é“¾è·¯è¿½è¸ªã€è´Ÿè½½å‡è¡¡å™¨ã€ç†”æ–­<br>â€‹        1ã€ç½‘å…³ï¼šè·¯ç”±è½¬å‘ + è¿‡æ»¤å™¨<br>â€‹                /api/v1/pruduct/      å•†å“æœåŠ¡<br>â€‹                /api/v1/order/        è®¢å•æœåŠ¡<br>â€‹                /api/v1/user/         ç”¨æˆ·æœåŠ¡</p>
<pre><code>2ã€æœåŠ¡æ³¨å†Œå‘ç°ï¼šè°ƒç”¨å’Œè¢«è°ƒç”¨æ–¹çš„ä¿¡æ¯ç»´æŠ¤

3ã€é…ç½®ä¸­å¿ƒï¼šç®¡ç†é…ç½®ï¼ŒåŠ¨æ€æ›´æ–° application.properties

4ã€é“¾è·¯è¿½è¸ªï¼šåˆ†æè°ƒç”¨é“¾è·¯è€—æ—¶
    ä¾‹å­ï¼šä¸‹å•-ã€‹æŸ¥è¯¢å•†å“æœåŠ¡è·å–å•†å“ä»·æ ¼-ã€‹æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯-ã€‹ä¿å­˜æ•°æ®åº“

5ã€è´Ÿè½½å‡è¡¡å™¨ï¼šåˆ†å‘è´Ÿè½½

6ã€ç†”æ–­ï¼šä¿æŠ¤è‡ªå·±å’Œè¢«è°ƒç”¨æ–¹
</code></pre><h3 id="3ã€å¸¸è§çš„å¾®æœåŠ¡æ¡†æ¶"><a href="#3ã€å¸¸è§çš„å¾®æœåŠ¡æ¡†æ¶" class="headerlink" title="3ã€å¸¸è§çš„å¾®æœåŠ¡æ¡†æ¶"></a>3ã€å¸¸è§çš„å¾®æœåŠ¡æ¡†æ¶</h3><p>â€‹    ç®€ä»‹:è®²è§£å¸¸ç”¨çš„å¾®æœåŠ¡æ¡†æ¶</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1g14hezas8nj30ld0bkdie.jpg" alt="image-20190316113743778"></p>
<pre><code>consumer: è°ƒç”¨æ–¹  æ¶ˆè´¹è€… å®¢æˆ·ç«¯ client 
provider: è¢«è°ƒç”¨æ–¹ æœåŠ¡è€… æœåŠ¡ç«¯ service


ä¸€ä¸ªæ¥å£ä¸€èˆ¬éƒ½ä¼šå……å½“ä¸¤ä¸ªè§’è‰²ï¼ˆä¸æ˜¯åŒæ—¶å……å½“ï¼‰

1ã€dubbo: zookeeper + dubbo + springmvc/springboot
    å®˜æ–¹åœ°å€ï¼šhttp://dubbo.apache.org/#!/?lang=zh-cn
    é…å¥—
        é€šä¿¡æ–¹å¼ï¼šrpc
        æ³¨å†Œä¸­å¿ƒï¼šzookeper/redis
        é…ç½®ä¸­å¿ƒï¼šdiamond

2ã€springcloud: å…¨å®¶æ¡¶+è½»æ¾åµŒå…¥ç¬¬ä¸‰æ–¹ç»„ä»¶(Netflix å¥ˆé£)
    å®˜ç½‘ï¼šhttp://projects.spring.io/spring-cloud/
    é…å¥—
        é€šä¿¡æ–¹å¼ï¼šhttp restful
        æ³¨å†Œä¸­å¿ƒï¼šeruka/consul
        é…ç½®ä¸­å¿ƒï¼šconfig
        æ–­è·¯å™¨ï¼šhystrix
        ç½‘å…³ï¼šzuul
        åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼šsleuth+zipkin

å­¦ä¹ èµ„æ–™ï¼šhttps://blog.csdn.net/zhangweiwei2020/article/details/78646252
</code></pre><h3 id="4ã€å¾®æœåŠ¡ä¸‹ç”µå•†é¡¹ç›®åŸºç¡€æ¨¡å—è®¾è®¡"><a href="#4ã€å¾®æœåŠ¡ä¸‹ç”µå•†é¡¹ç›®åŸºç¡€æ¨¡å—è®¾è®¡" class="headerlink" title="4ã€å¾®æœåŠ¡ä¸‹ç”µå•†é¡¹ç›®åŸºç¡€æ¨¡å—è®¾è®¡"></a>4ã€å¾®æœåŠ¡ä¸‹ç”µå•†é¡¹ç›®åŸºç¡€æ¨¡å—è®¾è®¡</h3><p>â€‹    ç®€ä»‹ï¼šå¾®æœåŠ¡ä¸‹ç”µå•†é¡¹ç›®åŸºç¡€æ¨¡å—è®¾è®¡ åˆ†ç¦»å‡ ä¸ªæ¨¡å—ï¼Œè¯¾ç¨‹å›´ç»•è¿™ä¸ªåŸºç¡€é¡¹ç›®è¿›è¡Œå­¦ä¹ <br>â€‹        å°è€Œç²¾çš„æ–¹å¼å­¦ä¹ å¾®æœåŠ¡</p>
<pre><code>1ã€ç”¨æˆ·æœåŠ¡
    1ï¼‰ç”¨æˆ·ä¿¡æ¯æ¥å£
    2ï¼‰ç™»å½•æ¥å£

2ã€å•†å“æœåŠ¡
    1ï¼‰å•†å“åˆ—è¡¨
    2ï¼‰å•†å“è¯¦æƒ…

3ã€è®¢å•æœåŠ¡ 
    1ï¼‰æˆ‘çš„è®¢å•
    2ï¼‰ä¸‹å•æ¥å£
</code></pre><h1 id="ç¬¬ä¸‰ç« -SpringCloudæ ¸å¿ƒç»„ä»¶æ³¨å†Œä¸­å¿ƒ"><a href="#ç¬¬ä¸‰ç« -SpringCloudæ ¸å¿ƒç»„ä»¶æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="ç¬¬ä¸‰ç«  SpringCloudæ ¸å¿ƒç»„ä»¶æ³¨å†Œä¸­å¿ƒ"></a>ç¬¬ä¸‰ç«  SpringCloudæ ¸å¿ƒç»„ä»¶æ³¨å†Œä¸­å¿ƒ</h1><h3 id="1ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡çš„æ³¨å†Œä¸­å¿ƒ"><a href="#1ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡çš„æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡çš„æ³¨å†Œä¸­å¿ƒ"></a>1ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡çš„æ³¨å†Œä¸­å¿ƒ</h3><p>â€‹    ç®€ä»‹ï¼šè®²è§£ä»€ä¹ˆæ˜¯æ³¨å†Œä¸­å¿ƒï¼Œå¸¸ç”¨çš„æ³¨å†Œä¸­å¿ƒæœ‰å“ªäº› (ç”»å›¾)<br>â€‹<br>â€‹        ç†è§£æ³¨å†Œä¸­å¿ƒï¼šæœåŠ¡ç®¡ç†,æ ¸å¿ƒæ˜¯æœ‰ä¸ªæœåŠ¡æ³¨å†Œè¡¨ï¼Œå¿ƒè·³æœºåˆ¶åŠ¨æ€ç»´æŠ¤<br>â€‹<br>â€‹        æœåŠ¡æä¾›è€…provider: å¯åŠ¨çš„æ—¶å€™å‘æ³¨å†Œä¸­å¿ƒä¸ŠæŠ¥è‡ªå·±çš„ç½‘ç»œä¿¡æ¯<br>â€‹<br>â€‹        æœåŠ¡æ¶ˆè´¹è€…consumer: å¯åŠ¨çš„æ—¶å€™å‘æ³¨å†Œä¸­å¿ƒä¸ŠæŠ¥è‡ªå·±çš„ç½‘ç»œä¿¡æ¯ï¼Œæ‹‰å–providerçš„ç›¸å…³ç½‘ç»œä¿¡æ¯</p>
<pre><code>ä¸ºä»€ä¹ˆè¦ç”¨ï¼š
    å¾®æœåŠ¡åº”ç”¨å’Œæœºå™¨è¶Šæ¥è¶Šå¤šï¼Œè°ƒç”¨æ–¹éœ€è¦çŸ¥é“æ¥å£çš„ç½‘ç»œåœ°å€ï¼Œå¦‚æœé é…ç½®æ–‡ä»¶çš„æ–¹å¼å»æ§åˆ¶ç½‘ç»œåœ°å€ï¼Œå¯¹äºåŠ¨æ€æ–°å¢æœºå™¨ï¼Œç»´æŠ¤å¸¦æ¥å¾ˆå¤§é—®é¢˜

ä¸»æµçš„æ³¨å†Œä¸­å¿ƒï¼š
    zookeeperã€Eurekaã€consulã€etcd ç­‰
</code></pre><p>â€‹        </p>
<h3 id="2ã€åˆ†å¸ƒå¼åº”ç”¨çŸ¥è¯†CAPç†è®ºçŸ¥è¯†"><a href="#2ã€åˆ†å¸ƒå¼åº”ç”¨çŸ¥è¯†CAPç†è®ºçŸ¥è¯†" class="headerlink" title="2ã€åˆ†å¸ƒå¼åº”ç”¨çŸ¥è¯†CAPç†è®ºçŸ¥è¯†"></a>2ã€åˆ†å¸ƒå¼åº”ç”¨çŸ¥è¯†CAPç†è®ºçŸ¥è¯†</h3><p>â€‹    ç®€ä»‹ï¼šè®²è§£åˆ†å¸ƒå¼æ ¸å¿ƒçŸ¥è¯†CAPç†è®º</p>
<pre><code>CAPå®šç†ï¼š
    æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒConsistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼Œä¸‰è€…ä¸å¯åŒæ—¶è·å¾—ã€‚




ä¸€è‡´æ€§ï¼ˆCï¼‰ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ•°æ®å¤‡ä»½ï¼Œåœ¨åŒä¸€æ—¶åˆ»æ˜¯å¦åŒæ ·çš„å€¼ã€‚ï¼ˆæ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çš„æ•°æ®å®Œå…¨ä¸€è‡´ï¼Œè¶Šå¤šèŠ‚ç‚¹ï¼Œæ•°æ®åŒæ­¥è¶Šè€—æ—¶ï¼‰
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯ç”¨æ€§ï¼ˆAï¼‰ï¼šè´Ÿè½½è¿‡å¤§åï¼Œé›†ç¾¤æ•´ä½“æ˜¯å¦è¿˜èƒ½å“åº”å®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚ã€‚ï¼ˆæœåŠ¡ä¸€ç›´å¯ç”¨ï¼Œè€Œä¸”æ˜¯æ­£å¸¸å“åº”æ—¶é—´ï¼‰</span><br></pre></td></tr></table></figure>
<pre><code>åˆ†åŒºå®¹é”™æ€§ï¼ˆPï¼‰ï¼šåˆ†åŒºå®¹å¿æ€§ï¼Œå°±æ˜¯é«˜å¯ç”¨æ€§ï¼Œä¸€ä¸ªèŠ‚ç‚¹å´©äº†ï¼Œå¹¶ä¸å½±å“å…¶å®ƒçš„èŠ‚ç‚¹ï¼ˆ100ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‚äº†å‡ ä¸ªï¼Œä¸å½±å“æœåŠ¡ï¼Œè¶Šå¤šæœºå™¨è¶Šå¥½ï¼‰


CAPç†è®ºå°±æ˜¯è¯´åœ¨åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œæœ€å¤šåªèƒ½å®ç°ä¸Šé¢çš„ä¸¤ç‚¹ã€‚è€Œç”±äºå½“å‰çš„ç½‘ç»œç¡¬ä»¶è‚¯å®šä¼šå‡ºç°å»¶è¿Ÿä¸¢åŒ…ç­‰é—®é¢˜ï¼Œæ‰€ä»¥åˆ†åŒºå®¹å¿æ€§æ˜¯æˆ‘ä»¬å¿…é¡»éœ€è¦å®ç°çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´è¿›è¡Œæƒè¡¡
</code></pre><p>â€‹        </p>
<p>###3ã€åˆ†å¸ƒå¼ç³»ç»ŸCAPåŸç†å¸¸è§é¢è¯•é¢˜å’Œæ³¨å†Œä¸­å¿ƒé€‰æ‹©<br>â€‹        ç®€ä»‹:è®²è§£CAPåŸåˆ™åœ¨é¢è¯•ä¸­å›ç­”å’Œæ³¨å†Œä¸­å¿ƒé€‰æ‹©</p>
<pre><code>C A æ»¡è¶³çš„æƒ…å†µä¸‹ï¼ŒPä¸èƒ½æ»¡è¶³çš„åŸå› ï¼š
    æ•°æ®åŒæ­¥(C)éœ€è¦æ—¶é—´ï¼Œä¹Ÿè¦æ­£å¸¸çš„æ—¶é—´å†…å“åº”(A)ï¼Œé‚£ä¹ˆæœºå™¨æ•°é‡å°±è¦å°‘ï¼Œæ‰€ä»¥På°±ä¸æ»¡è¶³

CP æ»¡è¶³çš„æƒ…å†µä¸‹ï¼ŒAä¸èƒ½æ»¡è¶³çš„åŸå› ï¼š
    æ•°æ®åŒæ­¥(C)éœ€è¦æ—¶é—´, æœºå™¨æ•°é‡ä¹Ÿå¤š(P)ï¼Œä½†æ˜¯åŒæ­¥æ•°æ®éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥ä¸èƒ½å†æ­£å¸¸æ—¶é—´å†…å“åº”ï¼Œæ‰€ä»¥Aå°±ä¸æ»¡è¶³

AP æ»¡è¶³çš„æƒ…å†µä¸‹ï¼ŒCä¸èƒ½æ»¡è¶³çš„åŸå› ï¼š
    æœºå™¨æ•°é‡ä¹Ÿå¤š(P)ï¼Œæ­£å¸¸çš„æ—¶é—´å†…å“åº”(A)ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¸èƒ½åŠæ—¶åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œæ‰€ä»¥Cä¸æ»¡è¶³

æ³¨å†Œä¸­å¿ƒé€‰æ‹©ï¼š
    Zookeeperï¼šCPè®¾è®¡ï¼Œä¿è¯äº†ä¸€è‡´æ€§ï¼Œé›†ç¾¤æ­å»ºçš„æ—¶å€™ï¼ŒæŸä¸ªèŠ‚ç‚¹å¤±æ•ˆï¼Œåˆ™ä¼šè¿›è¡Œé€‰ä¸¾è¡Œçš„leaderï¼Œæˆ–è€…åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹ä¸å¯ç”¨ï¼Œåˆ™æ— æ³•æä¾›æœåŠ¡ï¼Œå› æ­¤å¯ç”¨æ€§æ²¡æ³•æ»¡è¶³

    Eurekaï¼šAPåŸåˆ™ï¼Œæ— ä¸»ä»èŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œè‡ªåŠ¨åˆ‡æ¢å…¶ä»–èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨ï¼Œå»ä¸­å¿ƒåŒ–



ç»“è®ºï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­P,è‚¯å®šè¦æ»¡è¶³ï¼Œæ‰€ä»¥åªèƒ½åœ¨CAä¸­äºŒé€‰ä¸€
    æ²¡æœ‰æœ€å¥½çš„é€‰æ‹©ï¼Œæœ€å¥½çš„é€‰æ‹©æ˜¯æ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥è¿›è¡Œæ¶æ„è®¾è®¡

    å¦‚æœè¦æ±‚ä¸€è‡´æ€§ï¼Œåˆ™é€‰æ‹©zookeeperï¼Œå¦‚é‡‘èè¡Œä¸š

    å¦‚æœè¦å»å¯ç”¨æ€§ï¼Œåˆ™Eurekaï¼Œå¦‚ç”µå•†ç³»ç»Ÿ
</code></pre><h3 id="4ã€SpringCloudå¾®æœåŠ¡æ ¸å¿ƒç»„ä»¶Eurekaä»‹ç»å’Œé—­æºåå½±å“"><a href="#4ã€SpringCloudå¾®æœåŠ¡æ ¸å¿ƒç»„ä»¶Eurekaä»‹ç»å’Œé—­æºåå½±å“" class="headerlink" title="4ã€SpringCloudå¾®æœåŠ¡æ ¸å¿ƒç»„ä»¶Eurekaä»‹ç»å’Œé—­æºåå½±å“"></a>4ã€SpringCloudå¾®æœåŠ¡æ ¸å¿ƒç»„ä»¶Eurekaä»‹ç»å’Œé—­æºåå½±å“</h3><p>â€‹    ç®€ä»‹ï¼š<br>â€‹        SpringCloudä½“ç³»ä»‹ç»<br>â€‹            å®˜æ–¹åœ°å€ï¼š<a href="http://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">http://projects.spring.io/spring-cloud/</a></p>
<pre><code>    Eurekaçš„åŸºç¡€çŸ¥è¯†--&gt;ç”»å›¾è®²è§£äº¤äº’æµç¨‹ï¼ŒæœåŠ¡æä¾›è€…&lt;--&gt;æœåŠ¡æ¶ˆè´¹è€… ;

    Eureka 2.xé—­æºåé€‰æ‹©

å‚è€ƒï¼šhttps://www.jianshu.com/p/d32ae141f680
     https://blog.csdn.net/zjcjava/article/details/78608892
</code></pre><p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1g14jyoymi6j30f807m419.jpg" alt="image-20190316130552646">â€“</p>
<h3 id="5ã€æœåŠ¡æ³¨å†Œå’Œå‘ç°Eureka-Serveræ­å»ºå®æˆ˜"><a href="#5ã€æœåŠ¡æ³¨å†Œå’Œå‘ç°Eureka-Serveræ­å»ºå®æˆ˜" class="headerlink" title="5ã€æœåŠ¡æ³¨å†Œå’Œå‘ç°Eureka Serveræ­å»ºå®æˆ˜"></a>5ã€æœåŠ¡æ³¨å†Œå’Œå‘ç°Eureka Serveræ­å»ºå®æˆ˜</h3><p>â€‹    ç®€ä»‹ï¼šä½¿ç”¨IDEAæ­å»ºEurekaæœåŠ¡ä¸­å¿ƒServerç«¯å¹¶å¯åŠ¨ï¼Œé¡¹ç›®åŸºæœ¬éª¨æ¶ä»‹ç»<br>â€‹<br>â€‹    å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#spring-cloud-eureka-server" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#spring-cloud-eureka-server</a><br>â€‹<br>â€‹    ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®<br>â€‹    ç¬¬äºŒæ­¥: æ·»åŠ æ³¨è§£ @EnableEurekaServer<br>â€‹    ç¬¬ä¸‰æ­¥ï¼šå¢åŠ é…ç½®application.yml<br>â€‹            server:<br>â€‹              port: 8761<br>â€‹<br>â€‹            eureka:<br>â€‹              instance:<br>â€‹                hostname: localhost<br>â€‹              client:</p>
<pre><code>#å£°æ˜è‡ªå·±æ˜¯ä¸ªæœåŠ¡ç«¯
</code></pre><p>â€‹                registerWithEureka: false<br>â€‹                fetchRegistry: false<br>â€‹                serviceUrl:<br>â€‹                  defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/<br>â€‹    </p>
<pre><code>ç¬¬å››æ­¥ï¼šè®¿é—®æ³¨å†Œä¸­å¿ƒé¡µé¢

mavenåœ°å€: https://www.cnblogs.com/sword-successful/p/6408281.html
</code></pre><p>6ã€æœåŠ¡æ³¨å†Œå’Œå‘ç°ä¹‹Eureka Clientæ­å»ºå•†å“æœåŠ¡å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šæ­å»ºç”¨å•†å“æœåŠ¡ï¼Œå¹¶å°†æœåŠ¡æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</p>
<pre><code>1ã€åˆ›å»ºä¸€ä¸ªSpirngBootåº”ç”¨ï¼Œå¢åŠ æœåŠ¡æ³¨å†Œå’Œå‘ç°ä¾èµ–
2ã€æ¨¡æ‹Ÿå•†å“ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­

3ã€å¼€å‘å•†å“åˆ—è¡¨æ¥å£ï¼Œå•†å“è¯¦æƒ…æ¥å£

4ã€é…ç½®æ–‡ä»¶åŠ å…¥æ³¨å†Œä¸­å¿ƒåœ°å€
    ä½¿ç”¨eurekaå®¢æˆ·ç«¯ å®˜æ–¹æ–‡æ¡£ï¼šhttp://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#netflix-eureka-client-starter
</code></pre><p>7ã€EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒé…ç½®æ§åˆ¶å°é—®é¢˜å¤„ç†<br>â€‹    ç®€ä»‹ï¼šè®²è§£æœåŠ¡æ³¨å†Œä¸­å¿ƒç®¡ç†åå°ï¼Œï¼ˆåç»­è¿˜ä¼šç»†è®²ï¼‰</p>
<pre><code>é—®é¢˜ï¼šeurekaç®¡ç†åå°å‡ºç°ä¸€ä¸²çº¢è‰²å­—ä½“ï¼šæ˜¯è­¦å‘Šï¼Œè¯´æ˜æœ‰æœåŠ¡ä¸Šçº¿ç‡ä½

EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&apos;RE NOT. RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE.

å…³é—­æ£€æŸ¥æ–¹æ³•ï¼šeurekaæœåŠ¡ç«¯é…ç½®æ–‡ä»¶åŠ å…¥
server:
    enable-self-preservation: false
æ³¨æ„ï¼šè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ç¦æ­¢å…³é—­ï¼Œé»˜è®¤æ˜¯å¼€å¯çŠ¶æ€true
</code></pre><p>â€‹<br>â€‹    é—®é¢˜äºŒï¼šä¸ºä»€ä¹ˆåªåŠ ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒåœ°å€ï¼Œå°±å¯ä»¥æ³¨å†Œ<br>â€‹    By having spring-cloud-starter-netflix-eureka-client on the classpath, your application automatically registers with the Eureka Server. Configuration is required to locate the Eureka server, as shown in the following example:</p>
<p>ç¬¬å››ç«  æœåŠ¡æ¶ˆè´¹è€…ribbonå’Œfeignå®æˆ˜å’Œæ³¨å†Œä¸­å¿ƒé«˜å¯ç”¨</p>
<p>1ã€å¸¸ç”¨çš„æœåŠ¡é—´è°ƒç”¨æ–¹å¼è®²è§£<br>â€‹    ç®€ä»‹ï¼šè®²è§£å¸¸ç”¨çš„æœåŠ¡é—´çš„è°ƒç”¨æ–¹å¼</p>
<pre><code>RPC:
    è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œåƒè°ƒç”¨æœ¬åœ°æœåŠ¡(æ–¹æ³•)ä¸€æ ·è°ƒç”¨æœåŠ¡å™¨çš„æœåŠ¡
    æ”¯æŒåŒæ­¥ã€å¼‚æ­¥è°ƒç”¨
    å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹TCPè¿æ¥ï¼Œå¯ä»¥ä¸€æ¬¡å»ºç«‹ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥å¤šä¸ªè°ƒç”¨å¤ç”¨ä¸€æ¬¡é“¾æ¥

    PRCæ•°æ®åŒ…å°
        protobuf
        thrift
    rpcï¼šç¼–è§£ç ï¼Œåºåˆ—åŒ–ï¼Œé“¾æ¥ï¼Œä¸¢åŒ…ï¼Œåè®®


Rest(Http):
    httpè¯·æ±‚ï¼Œæ”¯æŒå¤šç§åè®®å’ŒåŠŸèƒ½
    å¼€å‘æ–¹ä¾¿æˆæœ¬ä½

    httpæ•°æ®åŒ…å¤§

    javaå¼€å‘ï¼šHttpClientï¼ŒURLConnection
</code></pre><p>2ã€å¾®æœåŠ¡è°ƒç”¨æ–¹å¼ä¹‹ribbonå®æˆ˜ è®¢å•è°ƒç”¨å•†å“æœåŠ¡<br>â€‹    ç®€ä»‹ï¼šå®æˆ˜ç”µå•†é¡¹ç›® è®¢å•æœåŠ¡ è°ƒç”¨å•†å“æœåŠ¡è·å–å•†å“ä¿¡æ¯<br>â€‹        1ã€åˆ›å»ºorder_serviceé¡¹ç›®<br>â€‹        2ã€å¼€å‘ä¼ªä¸‹å•æ¥å£<br>â€‹        3ã€ä½¿ç”¨ribbon. (ç±»ä¼¼httpClient,URLConnection) </p>
<pre><code>    å¯åŠ¨ç±»å¢åŠ æ³¨è§£
      @Bean
      @LoadBalanced
      public RestTemplate restTemplate() {
           return new RestTemplate();
      }
4ã€æ ¹æ®åç§°è¿›è¡Œè°ƒç”¨å•†å“ï¼Œè·å–å•†å“è¯¦æƒ…
</code></pre><p>3ã€é«˜çº§ç¯‡å¹…ä¹‹Ribbonè´Ÿè½½å‡è¡¡æºç åˆ†æå®æˆ˜<br>â€‹    ç®€ä»‹: è®²è§£ribbonæœåŠ¡é—´è°ƒç”¨è´Ÿè½½å‡è¡¡æºç åˆ†æ<br>â€‹        1ã€å®Œå–„ä¸‹å•æ¥å£<br>â€‹        2ã€åˆ†æ@LoadBalanced<br>â€‹            1ï¼‰é¦–å…ˆä»æ³¨å†Œä¸­å¿ƒè·å–providerçš„åˆ—è¡¨<br>â€‹            2ï¼‰é€šè¿‡ä¸€å®šçš„ç­–ç•¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹</p>
<pre><code>3ï¼‰å†è¿”å›ç»™restTemplateè°ƒç”¨
</code></pre><p>=============================================<br>æ›´å¤šå¹²è´§æŠ€æœ¯è®¿é—®å°Dè¯¾å ‚å®˜ç½‘ <a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a><br>å°Dè€å¸ˆä¸ªäººå¾®ä¿¡ï¼šjack794666918</p>
<h1 id="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"><a href="#å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚" class="headerlink" title="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"></a>å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚</h1><p>4ã€é«˜çº§ç¯‡å¹…ä¹‹æœåŠ¡é—´è°ƒç”¨ä¹‹è´Ÿè½½å‡è¡¡ç­–ç•¥è°ƒæ•´å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šå®æˆ˜è°ƒæ•´é»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥å®æˆ˜</p>
<pre><code>è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼šhttp://cloud.spring.io/spring-cloud-static/Finchley.RELEASE/single/spring-cloud.html#_customizing_the_ribbon_client_by_setting_properties

åœ¨é…ç½®æ–‡ä»¶ymlé‡Œé¢ï¼Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥
    #è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥
    product-service:
      ribbon:
        NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule

ç­–ç•¥é€‰æ‹©ï¼š
    1ã€å¦‚æœæ¯ä¸ªæœºå™¨é…ç½®ä¸€æ ·ï¼Œåˆ™å»ºè®®ä¸ä¿®æ”¹ç­–ç•¥ (æ¨è)
    2ã€å¦‚æœéƒ¨åˆ†æœºå™¨é…ç½®å¼ºï¼Œåˆ™å¯ä»¥æ”¹ä¸º WeightedResponseTimeRule
</code></pre><p>5ã€å¾®æœåŠ¡è°ƒç”¨æ–¹å¼ä¹‹feign å®æˆ˜ è®¢å•è°ƒç”¨å•†å“æœåŠ¡<br>â€‹    ç®€ä»‹ï¼šæ”¹é€ ç”µå•†é¡¹ç›® è®¢å•æœåŠ¡ è°ƒç”¨å•†å“æœåŠ¡è·å–å•†å“ä¿¡æ¯<br>â€‹        Feignï¼š ä¼ªRPCå®¢æˆ·ç«¯(æœ¬è´¨è¿˜æ˜¯ç”¨http)<br>â€‹        å®˜æ–¹æ–‡æ¡£: <a href="https://cloud.spring.io/spring-cloud-openfeign/" target="_blank" rel="noopener">https://cloud.spring.io/spring-cloud-openfeign/</a></p>
<pre><code>1ã€ä½¿ç”¨feignæ­¥éª¤è®²è§£ï¼ˆæ–°æ—§ç‰ˆæœ¬ä¾èµ–åç§°ä¸ä¸€æ ·ï¼‰
    åŠ å…¥ä¾èµ–
         &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
        &lt;/dependency&gt;
    å¯åŠ¨ç±»å¢åŠ @EnableFeignClients
    å¢åŠ ä¸€ä¸ªæ¥å£ å¹¶@FeignClient(name=&quot;product-service&quot;)

2ã€ç¼–ç å®æˆ˜


3ã€æ³¨æ„ç‚¹ï¼š
    1ã€è·¯å¾„
    2ã€Httpæ–¹æ³•å¿…é¡»å¯¹åº”
    3ã€ä½¿ç”¨requestBodyï¼Œåº”è¯¥ä½¿ç”¨@PostMapping
    4ã€å¤šä¸ªå‚æ•°çš„æ—¶å€™ï¼Œé€šè¿‡@RequestParamï¼ˆ&quot;id&quot;) int id)æ–¹å¼è°ƒç”¨
</code></pre><p>6ã€Feignæ ¸å¿ƒæºç è§£è¯»å’ŒæœåŠ¡è°ƒç”¨æ–¹å¼ribbonå’ŒFeigné€‰æ‹©<br>â€‹    ç®€ä»‹: è®²è§£Feignæ ¸å¿ƒæºç è§£è¯»å’Œ æœåŠ¡é—´çš„è°ƒç”¨æ–¹å¼ribbonã€feigné€‰æ‹©<br>â€‹<br>â€‹        1ã€ribbonå’Œfeignä¸¤ä¸ªçš„åŒºåˆ«å’Œé€‰æ‹©<br>â€‹            é€‰æ‹©feign<br>â€‹                é»˜è®¤é›†æˆäº†ribbon<br>â€‹                å†™èµ·æ¥æ›´åŠ æ€è·¯æ¸…æ™°å’Œæ–¹ä¾¿<br>â€‹                é‡‡ç”¨æ³¨è§£æ–¹å¼è¿›è¡Œé…ç½®ï¼Œé…ç½®ç†”æ–­ç­‰æ–¹å¼æ–¹ä¾¿<br>â€‹<br>â€‹        2ã€è¶…æ—¶é…ç½®<br>â€‹            é»˜è®¤optons readtimeoutæ˜¯60ï¼Œä½†æ˜¯ç”±äºhystrixé»˜è®¤æ˜¯1ç§’è¶…æ—¶<br>â€‹    </p>
<pre><code>#ä¿®æ”¹è°ƒç”¨è¶…æ—¶æ—¶é—´
feign:
  client:
    config:
      default:
        connectTimeout: 2000
        readTimeout: 2000

æ¨¡æ‹Ÿæ¥å£å“åº”æ…¢ï¼Œçº¿ç¨‹ç¡çœ æ–°çš„æ–¹å¼
  try {
        TimeUnit.SECONDS.sleep(1);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
</code></pre><p>ç¬¬äº”ç«  äº’è”ç½‘æ¶æ„æœåŠ¡é™çº§ç†”æ–­ Hystrix å®æˆ˜</p>
<p>1ã€åˆ†å¸ƒå¼æ ¸å¿ƒçŸ¥è¯†ä¹‹ç†”æ–­ã€é™çº§è®²è§£<br>â€‹    ç®€ä»‹ï¼šç³»ç»Ÿè´Ÿè½½è¿‡é«˜ï¼Œçªå‘æµé‡æˆ–è€…ç½‘ç»œç­‰å„ç§å¼‚å¸¸æƒ…å†µä»‹ç»ï¼Œå¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆ</p>
<pre><code>1ã€ç†”æ–­ï¼š
    ä¿é™©ä¸ï¼Œç†”æ–­æœåŠ¡ï¼Œä¸ºäº†é˜²æ­¢æ•´ä¸ªç³»ç»Ÿæ•…éšœï¼ŒåŒ…å«å­å’Œä¸‹æ¸¸æœåŠ¡

    ä¸‹å•æœåŠ¡ -ã€‹å•†å“æœåŠ¡
            -ã€‹ç”¨æˆ·æœåŠ¡ ï¼ˆå‡ºç°å¼‚å¸¸-ã€‹ç†”æ–­ï¼‰

2ã€é™çº§ï¼š
    æŠ›å¼ƒä¸€äº›éæ ¸å¿ƒçš„æ¥å£å’Œæ•°æ®

    æ—…è¡Œç®±çš„ä¾‹å­ï¼šåªå¸¦æ ¸å¿ƒçš„ç‰©å“ï¼ŒæŠ›å¼ƒéæ ¸å¿ƒçš„ï¼Œç­‰æœ‰æ¡ä»¶çš„æ—¶å€™å†å»æºå¸¦è¿™äº›ç‰©å“
</code></pre><p>â€‹<br>â€‹    3ã€ç†”æ–­å’Œé™çº§äº’ç›¸äº¤é›†<br>â€‹        ç›¸åŒç‚¹ï¼š<br>â€‹            1ï¼‰ä»å¯ç”¨æ€§å’Œå¯é æ€§è§¦å‘ï¼Œä¸ºäº†é˜²æ­¢ç³»ç»Ÿå´©æºƒ<br>â€‹            2ï¼‰æœ€ç»ˆè®©ç”¨æˆ·ä½“éªŒåˆ°çš„æ˜¯æŸäº›åŠŸèƒ½æš‚æ—¶ä¸èƒ½ç”¨<br>â€‹<br>â€‹        ä¸åŒç‚¹<br>â€‹            1ï¼‰æœåŠ¡ç†”æ–­ä¸€èˆ¬æ˜¯ä¸‹æ¸¸æœåŠ¡æ•…éšœå¯¼è‡´çš„ï¼Œè€ŒæœåŠ¡é™çº§ä¸€èˆ¬æ˜¯ä»æ•´ä½“ç³»ç»Ÿè´Ÿè·è€ƒè™‘ï¼Œç”±è°ƒç”¨æ–¹æ§åˆ¶</p>
<p>2ã€Netflixå¼€æºç»„ä»¶æ–­è·¯å™¨Hystrixä»‹ç»<br>â€‹    ç®€ä»‹ï¼šä»‹ç»HystrixåŸºç¡€çŸ¥è¯†å’Œä½¿ç”¨åœºæ™¯<br>â€‹<br>â€‹    æ–‡æ¡£åœ°å€ï¼š<br>â€‹        <a href="https://github.com/Netflix/Hystrix" target="_blank" rel="noopener">https://github.com/Netflix/Hystrix</a><br>â€‹        <a href="https://github.com/Netflix/Hystrix/wiki" target="_blank" rel="noopener">https://github.com/Netflix/Hystrix/wiki</a><br>â€‹<br>â€‹    1ã€ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ<br>â€‹        1ï¼‰hystrixå¯¹åº”çš„ä¸­æ–‡åå­—æ˜¯â€œè±ªçŒªâ€<br>â€‹<br>        2ï¼‰hystrix    è‹±[hÉªstâ€™rÉªks] ç¾[hÉªstâ€™rÉªks]</p>
<p>â€‹<br>â€‹    2ã€ä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ<br>â€‹        åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œä¸€ä¸ªæœåŠ¡ä¾èµ–å¤šä¸ªæœåŠ¡ï¼Œå¯èƒ½å­˜åœ¨æŸä¸ªæœåŠ¡è°ƒç”¨å¤±è´¥ï¼Œ<br>â€‹        æ¯”å¦‚è¶…æ—¶ã€å¼‚å¸¸ç­‰ï¼Œå¦‚ä½•èƒ½å¤Ÿä¿è¯åœ¨ä¸€ä¸ªä¾èµ–å‡ºé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå¯¼è‡´æ•´ä½“æœåŠ¡å¤±è´¥ï¼Œ<br>â€‹        é€šè¿‡Hystrixå°±å¯ä»¥è§£å†³<br>â€‹<br>â€‹        <a href="http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#_circuit_breaker_hystrix_clients" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#_circuit_breaker_hystrix_clients</a><br>â€‹<br>â€‹    3ã€æä¾›äº†ç†”æ–­ã€éš”ç¦»ã€Fallbackã€cacheã€ç›‘æ§ç­‰åŠŸèƒ½</p>
<pre><code>4ã€ç†”æ–­åæ€ä¹ˆå¤„ç†ï¼Ÿ
    å‡ºç°é”™è¯¯ä¹‹åå¯ä»¥ fallback é”™è¯¯çš„å¤„ç†ä¿¡æ¯

    å…œåº•æ•°æ®
</code></pre><p>3ã€Feignç»“åˆHystrixæ–­è·¯å™¨å¼€å‘å®æˆ˜ã€Šä¸Šã€‹<br>â€‹    ç®€ä»‹ï¼šè®²è§£SpringCloudæ•´åˆæ–­è·¯å™¨çš„ä½¿ç”¨ï¼Œç”¨æˆ·æœåŠ¡å¼‚å¸¸æƒ…å†µ</p>
<pre><code>1ã€åŠ å…¥ä¾èµ–

æ³¨æ„ï¼šç½‘ä¸Šæ–°æ—§ç‰ˆæœ¬é—®é¢˜ï¼Œæ‰€ä»¥è¦ä»¥å®˜ç½‘ä¸ºä¸»ï¼Œä¸ç„¶éƒ¨åˆ†æ³¨è§£ä¼šä¸¢å¤±
æœ€æ–°ç‰ˆæœ¬ 2.0

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;
    &lt;/dependency&gt;


2ã€å¢åŠ æ³¨è§£
    å¯åŠ¨ç±»é‡Œé¢å¢åŠ æ³¨è§£
    @EnableCircuitBreaker

    æ³¨è§£è¶Šæ¥è¶Šå¤š-ã€‹ SpringCloudApplicationæ³¨è§£

3ã€APIæ¥å£ç¼–ç å®æˆ˜
  ç†”æ–­-ã€‹é™çº§

    1ï¼‰æœ€å¤–å±‚apiä½¿ç”¨ï¼Œå¥½æ¯”å¼‚å¸¸å¤„ç†ï¼ˆç½‘ç»œå¼‚å¸¸ï¼Œå‚æ•°æˆ–è€…å†…éƒ¨è°ƒç”¨é—®é¢˜ï¼‰
        apiæ–¹æ³•ä¸Šå¢åŠ  @HystrixCommand(fallbackMethod = &quot;saveOrderFail&quot;)

        ç¼–å†™fallbackæ–¹æ³•å®ç°ï¼Œæ–¹æ³•ç­¾åä¸€å®šè¦å’Œapiæ–¹æ³•ç­¾åä¸€è‡´ï¼ˆæ³¨æ„ç‚¹ï¼ï¼ï¼ï¼‰
</code></pre><p>â€‹        </p>
<pre><code>è¡¥å……ï¼š ä¿®æ”¹mavenä»“åº“åœ°å€
pom.xmlä¸­ä¿®æ”¹

&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;nexus-aliyun&lt;/id&gt;
        &lt;name&gt;Nexus aliyun&lt;/name&gt;
        &lt;layout&gt;default&lt;/layout&gt;
        &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;/enabled&gt;
        &lt;/snapshots&gt;
        &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/releases&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre><p>4ã€Feignç»“åˆHystrixæ–­è·¯å™¨å¼€å‘å®æˆ˜ã€Šä¸‹ã€‹<br>â€‹    ç®€ä»‹ï¼šè®²è§£SpringCloudæ•´åˆæ–­è·¯å™¨çš„ä½¿ç”¨ï¼Œç”¨æˆ·æœåŠ¡å¼‚å¸¸æƒ…å†µ<br>â€‹    1ã€feignç»“åˆHystrix<br>â€‹<br>â€‹        1ï¼‰å¼€å¯feignæ”¯æŒhystrix  (æ³¨æ„ï¼Œä¸€å®šè¦å¼€å¯ï¼Œæ—§ç‰ˆæœ¬é»˜è®¤æ”¯æŒï¼Œæ–°ç‰ˆæœ¬é»˜è®¤å…³é—­)<br>â€‹            feign:<br>â€‹              hystrix:<br>â€‹                enabled: true<br>â€‹<br>â€‹        2ï¼‰FeignClient(name=â€xxxâ€, fallback=xxx.class ), classéœ€è¦ç»§æ‰¿å½“å‰FeignClientçš„ç±»</p>
<p>5ã€ç†”æ–­é™çº§æœåŠ¡å¼‚å¸¸æŠ¥è­¦é€šçŸ¥å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šå®Œå–„æœåŠ¡ç†”æ–­å¤„ç†ï¼ŒæŠ¥è­¦æœºåˆ¶å®Œå–„</p>
<pre><code>1ã€åŠ å…¥redisä¾èµ–
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
    &lt;/dependency&gt;
2ã€é…ç½®redisé“¾æ¥ä¿¡æ¯
  redis:
    database: 0
    host: 127.0.0.1
    port: 6379
    timeout: 2000

3ã€ä½¿ç”¨

    //ç›‘æ§æŠ¥è­¦
    String saveOrderKye = &quot;save-order&quot;;
    String sendValue = redisTemplate.opsForValue().get(saveOrderKye);
    final String ip = request.getRemoteAddr();
    new Thread( ()-&gt;{
        if (StringUtils.isBlank(sendValue)) {
            System.out.println(&quot;ç´§æ€¥çŸ­ä¿¡ï¼Œç”¨æˆ·ä¸‹å•å¤±è´¥ï¼Œè¯·ç¦»å¼€æŸ¥æ‰¾åŸå› ,ipåœ°å€æ˜¯=&quot;+ip);
            //å‘é€ä¸€ä¸ªhttpè¯·æ±‚ï¼Œè°ƒç”¨çŸ­ä¿¡æœåŠ¡ TODO
            redisTemplate.opsForValue().set(saveOrderKye, &quot;save-order-fail&quot;, 20, TimeUnit.SECONDS);
        }else{
            System.out.println(&quot;å·²ç»å‘é€è¿‡çŸ­ä¿¡ï¼Œ20ç§’å†…ä¸é‡å¤å‘é€&quot;);
        }
    }).start();
</code></pre><p>6ã€é«˜çº§ç¯‡å¹…ä¹‹æ·±å…¥æºç å‰–æHystrixé™çº§ç­–ç•¥å’Œè°ƒæ•´<br>â€‹    ç®€ä»‹ï¼šæºç åˆ†æHystrixé™çº§ç­–ç•¥å’Œè°ƒæ•´</p>
<pre><code>1ã€æŸ¥çœ‹é»˜è®¤è®²è§£ç­–ç•¥ HystrixCommandProperties
    1ï¼‰execution.isolation.strategy   éš”ç¦»ç­–ç•¥
        THREAD çº¿ç¨‹æ± éš”ç¦» ï¼ˆé»˜è®¤ï¼‰
        SEMAPHORE ä¿¡å·é‡
            ä¿¡å·é‡é€‚ç”¨äºæ¥å£å¹¶å‘é‡é«˜çš„æƒ…å†µï¼Œå¦‚æ¯ç§’æ•°åƒæ¬¡è°ƒç”¨çš„æƒ…å†µï¼Œå¯¼è‡´çš„çº¿ç¨‹å¼€é”€è¿‡é«˜ï¼Œé€šå¸¸åªé€‚ç”¨äºéç½‘ç»œè°ƒç”¨ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«

    2ï¼‰execution.isolation.thread.timeoutInMilliseconds  è¶…æ—¶æ—¶é—´
        é»˜è®¤ 1000æ¯«ç§’

    3ï¼‰execution.timeout.enabled æ˜¯å¦å¼€å¯è¶…æ—¶é™åˆ¶ ï¼ˆä¸€å®šä¸è¦ç¦ç”¨ï¼‰


    4ï¼‰execution.isolation.semaphore.maxConcurrentRequests éš”ç¦»ç­–ç•¥ä¸º ä¿¡å·é‡çš„æ—¶å€™ï¼Œå¦‚æœè¾¾åˆ°æœ€å¤§å¹¶å‘æ•°æ—¶ï¼Œåç»­è¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œé»˜è®¤æ˜¯10


å®˜æ–¹æ–‡æ¡£:
    https://github.com/Netflix/Hystrix/wiki/Configuration#execution.isolation.strategy

2ã€è°ƒæ•´ç­–ç•¥
    è¶…æ—¶æ—¶é—´è°ƒæ•´

hystrix:
  command:
    default:
      execution:
        isolation:
          thread:
            timeoutInMilliseconds: 4000
</code></pre><p>7ã€æ–­è·¯å™¨Dashboardç›‘æ§ä»ªè¡¨ç›˜å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šè®²è§£æ–­è·¯å™¨DashboardåŸºç¡€ä½¿ç”¨å’ŒæŸ¥çœ‹<br>â€‹    1ã€åŠ å…¥ä¾èµ–<br>â€‹         <dependency><br>â€‹            <groupid>org.springframework.cloud</groupid><br>â€‹            <artifactid>spring-cloud-starter-netflix-hystrix-dashboard</artifactid><br>â€‹        </dependency></p>
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
    &lt;/dependency&gt;

2ã€å¯åŠ¨ç±»å¢åŠ æ³¨è§£
    @EnableHystrixDashboard
</code></pre><p>â€‹<br>â€‹    3ã€é…ç½®æ–‡ä»¶å¢åŠ endpoint<br>management:<br>  endpoints:<br>â€‹    web:<br>â€‹      exposure:<br>â€‹        include: â€œ*â€</p>
<pre><code>4ã€è®¿é—®å…¥å£
    http://localhost:8781/hystrix

    Hystrix Dashboardè¾“å…¥ï¼š http://localhost:8781/actuator/hystrix.stream 
</code></pre><p>â€‹<br>â€‹    å‚è€ƒèµ„æ–™<br>â€‹        é»˜è®¤å¼€å¯ç›‘æ§é…ç½®<br>â€‹        <a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-actuator" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-actuator</a><br>â€‹<br>â€‹        é…ç½®æ–‡ä»¶ç±»ï¼š<br>â€‹            spring-configuration-metadata.json</p>
<p>8ã€æ–­è·¯å™¨ç›‘æ§ä»ªè¡¨å‚æ•°è®²è§£å’Œæ¨¡æ‹Ÿç†”æ–­<br>â€‹    ç®€ä»‹ï¼šè®²è§£ æ–­è·¯å™¨ç›‘æ§ä»ªè¡¨ç›˜å‚æ•°å’Œæ¨¡æ‹Ÿç†”æ–­</p>
<pre><code>1ã€sse  server-send-eventæ¨é€åˆ°å‰ç«¯

èµ„æ–™ï¼šhttps://github.com/Netflix/Hystrix/wiki/Dashboard
</code></pre><p>ç¬¬å…­ç«  å¾®æœåŠ¡ç½‘å…³zuulå¼€å‘å®æˆ˜ </p>
<p>1ã€å¾®æœåŠ¡ç½‘å…³ä»‹ç»å’Œä½¿ç”¨åœºæ™¯<br>â€‹    ç®€ä»‹ï¼šè®²è§£ç½‘å…³çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯ (ç”»å›¾)<br>â€‹<br>â€‹    1ï¼‰ä»€ä¹ˆæ˜¯ç½‘å…³<br>â€‹        API Gatewayï¼Œæ˜¯ç³»ç»Ÿçš„å”¯ä¸€å¯¹å¤–çš„å…¥å£ï¼Œä»‹äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„ä¸­é—´å±‚ï¼Œå¤„ç†éä¸šåŠ¡åŠŸèƒ½ æä¾›è·¯ç”±è¯·æ±‚ã€é‰´æƒã€ç›‘æ§ã€ç¼“å­˜ã€é™æµç­‰åŠŸèƒ½<br>â€‹<br>â€‹            ç»Ÿä¸€æ¥å…¥<br>â€‹                æ™ºèƒ½è·¯ç”±<br>â€‹                ABæµ‹è¯•ã€ç°åº¦æµ‹è¯•<br>â€‹                è´Ÿè½½å‡è¡¡ã€å®¹ç¾å¤„ç†<br>â€‹                æ—¥å¿—åŸ‹ç‚¹ï¼ˆç±»ä¼¼Nignxæ—¥å¿—ï¼‰<br>â€‹<br>            æµé‡ç›‘æ§<br>                é™æµå¤„ç†<br>                æœåŠ¡é™çº§</p>
<pre><code>        å®‰å…¨é˜²æŠ¤
            é‰´æƒå¤„ç†
            ç›‘æ§
            æœºå™¨ç½‘ç»œéš”ç¦»


2ï¼‰ä¸»æµçš„ç½‘å…³
    zuulï¼šæ˜¯Netflixå¼€æºçš„å¾®æœåŠ¡ç½‘å…³ï¼Œå’ŒEureka,Ribbon,Hystrixç­‰ç»„ä»¶é…åˆä½¿ç”¨ï¼ŒZuul 2.0æ¯”1.0çš„æ€§èƒ½æé«˜å¾ˆå¤š

    kong: ç”±Mashapeå…¬å¸å¼€æºçš„ï¼ŒåŸºäºNginxçš„API gateway

    nginx+luaï¼šæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨,luaæ˜¯è„šæœ¬è¯­è¨€ï¼Œè®©Nginxæ‰§è¡ŒLuaè„šæœ¬ï¼Œå¹¶ä¸”é«˜å¹¶å‘ã€éé˜»å¡çš„å¤„ç†å„ç§è¯·æ±‚
</code></pre><p>2ã€SpringCloudçš„ç½‘å…³ç»„ä»¶zuulåŸºæœ¬ä½¿ç”¨<br>â€‹    ç®€ä»‹ï¼šè®²è§£zuulç½‘å…³åŸºæœ¬ä½¿ç”¨</p>
<pre><code>1ã€åŠ å…¥ä¾èµ–


2ã€å¯åŠ¨ç±»åŠ å…¥æ³¨è§£ @EnableZuulProxy
    é»˜è®¤é›†æˆæ–­è·¯å™¨  @EnableCircuitBreaker

    é»˜è®¤è®¿é—®è§„åˆ™  
        http://gateway:port/service-id/**

            ä¾‹å­ï¼šé»˜è®¤ /order-service/api/v1/order/save?user_id=2&amp;product_id=1
                 è‡ªå®šä¹‰ /xdclass_order/api/v1/order/save?user_id=2&amp;product_id=1

    è‡ªå®šä¹‰è·¯ç”±è½¬å‘ï¼š
        zuul:
         routes:
             order-service: /apigateway/**


    ç¯å¢ƒéš”ç¦»é…ç½®ï¼š
        éœ€æ±‚ ï¼šä¸æƒ³è®©é»˜è®¤çš„æœåŠ¡å¯¹å¤–æš´éœ²æ¥å£
            /order-service/api/v1/order/save

        é…ç½®ï¼š
        zuul: 
            ignored-patterns:
                - /*-service/api/v1/order/save
</code></pre><p>3ã€é«˜çº§ç¯‡å¹…ä¹‹Zuulå¸¸ç”¨é—®é¢˜åˆ†æå’Œç½‘å…³è¿‡æ»¤å™¨åŸç†åˆ†æ</p>
<pre><code>ç®€ä»‹ï¼šè®²è§£Zuulç½‘å…³åŸç†å’Œè¿‡æ»¤å™¨ç”Ÿå‘½å‘¨æœŸï¼Œ

1ã€è·¯ç”±åç§°å®šä¹‰é—®é¢˜
    è·¯ç”±æ˜ å°„é‡å¤è¦†ç›–é—®é¢˜

2ã€Httpè¯·æ±‚å¤´è¿‡æ»¤é—®é¢˜

3ã€è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºé—®é¢˜ ï¼Œè¿‡æ»¤å™¨çš„orderå€¼è¶Šå°ï¼Œè¶Šå…ˆæ‰§è¡Œ


4ã€å…±äº«RequestContextï¼Œä¸Šä¸‹æ–‡å¯¹è±¡
</code></pre><p>4ã€è‡ªå®šä¹‰Zuulè¿‡æ»¤å™¨å®ç°ç™»å½•é‰´æƒå®æˆ˜<br>â€‹    ç®€ä»‹ï¼šè‡ªå®šä¹‰Zuulè¿‡æ»¤å™¨å®ç°ç™»å½•é‰´æƒå®æˆ˜</p>
<pre><code>1ã€æ–°å»ºä¸€ä¸ªfilteråŒ…

2ã€æ–°å»ºä¸€ä¸ªç±»ï¼Œå®ç°ZuulFilterï¼Œé‡å†™é‡Œé¢çš„æ–¹æ³•

3ã€åœ¨ç±»é¡¶éƒ¨åŠ æ³¨è§£ï¼Œ@Component,è®©Springæ‰«æ
</code></pre><p>5ã€é«˜çº§ç¯‡å¹…ä¹‹é«˜å¹¶å‘æƒ…å†µä¸‹æ¥å£é™æµç‰¹æŠ€<br>â€‹    ç®€ä»‹ï¼šè°·æ­Œguavaæ¡†æ¶ä»‹ç»ï¼Œç½‘å…³é™æµä½¿ç”¨</p>
<pre><code>1ã€nginxå±‚é™æµ

2ã€ç½‘å…³å±‚é™æµ
</code></pre><p>6ã€Zuulå¾®æœåŠ¡ç½‘å…³é›†ç¾¤æ­å»º<br>â€‹    ç®€ä»‹ï¼šå¾®æœåŠ¡ç½‘å…³Zullé›†ç¾¤æ­å»º</p>
<pre><code>1ã€nginx+lvs+keepalive 
https://www.cnblogs.com/liuyisai/p/5990645.html
</code></pre><p>ç¬¬ä¸ƒç«  åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç³»ç»ŸSleuthå’ŒZipKinå®æˆ˜<br>â€‹    </p>
<pre><code>1ã€å¾®æœåŠ¡ä¸‹çš„é“¾è·¯è¿½è¸ªè®²è§£å’Œé‡è¦æ€§
    ç®€ä»‹ï¼šè®²è§£ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç³»ç»Ÿï¼ŒåŠä½¿ç”¨å¥½å¤„




2ã€SpringCloudçš„é“¾è·¯è¿½è¸ªç»„ä»¶Sleuthå®æˆ˜
    ç®€ä»‹ï¼šè®²è§£åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç»„ä»¶Sleuthå®æˆ˜

    1ã€å®˜æ–¹æ–‡æ¡£
    http://cloud.spring.io/spring-cloud-static/Finchley.SR1/single/spring-cloud.html#sleuth-adding-project

    2ã€ä»€ä¹ˆæ˜¯Sleuth
        ä¸€ä¸ªç»„ä»¶ï¼Œä¸“é—¨ç”¨äºè®°å½•é“¾è·¯æ•°æ®çš„å¼€æºç»„ä»¶

        [order-service,96f95a0dd81fe3ab,852ef4cfcdecabf3,false]

        1ã€ç¬¬ä¸€ä¸ªå€¼ï¼Œspring.application.nameçš„å€¼

        2ã€ç¬¬äºŒä¸ªå€¼ï¼Œ96f95a0dd81fe3ab ï¼Œsleuthç”Ÿæˆçš„ä¸€ä¸ªIDï¼Œå«Trace IDï¼Œç”¨æ¥æ ‡è¯†ä¸€æ¡è¯·æ±‚é“¾è·¯ï¼Œä¸€æ¡è¯·æ±‚é“¾è·¯ä¸­åŒ…å«ä¸€ä¸ªTrace IDï¼Œå¤šä¸ªSpan ID

        3ã€ç¬¬ä¸‰ä¸ªå€¼ï¼Œ852ef4cfcdecabf3ã€spanid åŸºæœ¬çš„å·¥ä½œå•å…ƒï¼Œè·å–å…ƒæ•°æ®ï¼Œå¦‚å‘é€ä¸€ä¸ªhttp

        4ã€ç¬¬å››ä¸ªå€¼ï¼šfalseï¼Œæ˜¯å¦è¦å°†è¯¥ä¿¡æ¯è¾“å‡ºåˆ°zipkinæœåŠ¡ä¸­æ¥æ”¶é›†å’Œå±•ç¤ºã€‚

    3ã€æ·»åŠ ä¾èµ–
        &lt;dependency&gt;
         &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
         &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;
         &lt;/dependency&gt;






3ã€SpringCloudçš„é“¾è·¯è¿½è¸ªç»„ä»¶Sleuthå¸¸è§é—®é¢˜è¯´æ˜
    ç®€ä»‹ï¼šè®²è§£åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç»„ä»¶Sleuthå¸¸è§é—®é¢˜è¯´æ˜
</code></pre><p>â€‹      </p>
<pre><code>4ã€å¯è§†åŒ–é“¾è·¯è¿½è¸ªç³»ç»ŸZipkinéƒ¨ç½²
    ç®€ä»‹ï¼šè®²è§£Zipkinçš„ä»‹ç»å’Œéƒ¨ç½²
    1ã€ä»€ä¹ˆæ˜¯zipkin
        å®˜ç½‘ï¼šhttps://zipkin.io/
        å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„APMå·¥å…·ï¼ˆApplication Performance Managementï¼‰,åŸºäºGoogle Dapperçš„åŸºç¡€å®ç°ï¼Œå’Œsleuthç»“åˆå¯ä»¥æä¾›å¯è§†åŒ–webç•Œé¢åˆ†æè°ƒç”¨é“¾è·¯è€—æ—¶æƒ…å†µ            

    2ã€åŒç±»äº§å“
        é¹°çœ¼ï¼ˆEagleEyeï¼‰
        CAT
        twitterå¼€æºzipkinï¼Œç»“åˆsleuth
        Pinpointï¼Œè¿ç”¨JavaAgentå­—èŠ‚ç å¢å¼ºæŠ€æœ¯
        StackDriver Trace (Google) 

    3ã€å¼€å§‹ä½¿ç”¨
        https://github.com/openzipkin/zipkin
        https://zipkin.io/pages/quickstart.html

        zipkinç»„æˆï¼šCollectorã€Storageã€Restful APIã€Web UIç»„æˆ

    4ã€çŸ¥è¯†æ‹“å±•ï¼šOpenTracing
    OpenTracing å·²è¿›å…¥ CNCFï¼Œæ­£åœ¨ä¸ºå…¨çƒçš„åˆ†å¸ƒå¼è¿½è¸ªï¼Œæä¾›ç»Ÿä¸€çš„æ¦‚å¿µå’Œæ•°æ®æ ‡å‡†ã€‚ 
    é€šè¿‡æä¾›å¹³å°æ— å…³ã€å‚å•†æ— å…³çš„ APIï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ–¹ä¾¿çš„æ·»åŠ ï¼ˆæˆ–æ›´æ¢ï¼‰è¿½è¸ªç³»ç»Ÿçš„å®ç°ã€‚


    æ¨èé˜…è¯»ï¼š
        http://blog.daocloud.io/cncf-3/
        https://www.zhihu.com/question/27994350
        https://yq.aliyun.com/articles/514488?utm_content=m_43347







5ã€é«˜çº§ç¯‡å¹…ä¹‹é“¾è·¯è¿½è¸ªç»„ä»¶Zipkin+Sleuthå®æˆ˜
    ç®€ä»‹ï¼šä½¿ç”¨Zipkin+Sleuthä¸šåŠ¡åˆ†æè°ƒç”¨é“¾è·¯åˆ†æå®æˆ˜

    1ã€æ–‡æ¡£
    http://cloud.spring.io/spring-cloud-static/Finchley.SR1/single/spring-cloud.html#_sleuth_with_zipkin_via_http

      sleuthæ”¶é›†è·Ÿè¸ªä¿¡æ¯é€šè¿‡httpè¯·æ±‚å‘é€ç»™zipkin serverï¼Œzipkinserverè¿›è¡Œè·Ÿè¸ªä¿¡æ¯çš„å­˜å‚¨ä»¥åŠæä¾›Rest APIå³å¯ï¼ŒZipkin UIè°ƒç”¨å…¶APIæ¥å£è¿›è¡Œæ•°æ®å±•ç¤º

      é»˜è®¤å­˜å‚¨æ˜¯å†…å­˜ï¼Œå¯ä¹Ÿç”¨mysqlã€æˆ–è€…elasticsearchç­‰å­˜å‚¨

    2ã€åŠ å…¥ä¾èµ–
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;
    &lt;/dependency&gt;

    é‡Œé¢åŒ…å« spring-cloud-starter-sleuthã€spring-cloud-sleuth-zipkin

    3ã€æ–‡æ¡£è¯´æ˜ï¼šhttp://cloud.spring.io/spring-cloud-static/Finchley.SR1/single/spring-cloud.html#_features_2

    4ã€é…ç½®zipkin.base-url

    5ã€é…ç½®é‡‡æ ·ç™¾åˆ†é—­spring.sleuth.sampler


    æ¨èèµ„æ–™ï¼š
        https://blog.csdn.net/jrn1012/article/details/77837710
</code></pre><p>=============================================<br>æ›´å¤šå¹²è´§æŠ€æœ¯è®¿é—®å°Dè¯¾å ‚å®˜ç½‘ <a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a><br>å°Dè€å¸ˆä¸ªäººå¾®ä¿¡ï¼šjack794666918</p>
<h1 id="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-1"><a href="#å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-1" class="headerlink" title="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"></a>å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚</h1><p>â€‹<br>ç¬¬å…«ç«  å¾®æœåŠ¡æ ¸å¿ƒçŸ¥è¯†åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒConfigå®æˆ˜<br>â€‹<br>â€‹    1ã€å¾®æœåŠ¡ä¸‹çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ<br>â€‹        ç®€ä»‹ï¼šè®²è§£ä»€ä¹ˆæ˜¯é…ç½®ä¸­å¿ƒåŠä½¿ç”¨å‰åçš„å¥½å¤„ (ç”»å›¾)<br>â€‹        ä»€ä¹ˆæ˜¯é…ç½®ä¸­å¿ƒï¼š<br>â€‹            ä¸€å¥è¯ï¼šç»Ÿä¸€ç®¡ç†é…ç½®, å¿«é€Ÿåˆ‡æ¢å„ä¸ªç¯å¢ƒçš„é…ç½®<br>â€‹<br>â€‹        ç›¸å…³äº§å“ï¼š<br>â€‹            ç™¾åº¦çš„disconf<br>â€‹                åœ°å€:<a href="https://github.com/knightliao/disconf" target="_blank" rel="noopener">https://github.com/knightliao/disconf</a><br>â€‹<br>â€‹            é˜¿é‡Œçš„diamand<br>â€‹                åœ°å€ï¼š<a href="https://github.com/takeseem/diamond" target="_blank" rel="noopener">https://github.com/takeseem/diamond</a><br>â€‹<br>â€‹            springcloudçš„configs-server:<br>â€‹                åœ°å€ï¼š<a href="http://cloud.spring.io/spring-cloud-config/" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-config/</a></p>
<pre><code>    æ¨èå¹²è´§æ–‡ç« ï¼šhttp://jm.taobao.org/2016/09/28/an-article-about-config-center/





2ã€SpringCloudçš„é…ç½®ä¸­å¿ƒç»„ä»¶config-serverå®æˆ˜
    ç®€ä»‹ï¼šè®²è§£SpringCloudé…ç½®ä¸­å¿ƒconfig-serverå®æˆ˜
    1ã€æ–°å»ºé¡¹ç›®ï¼Œåˆ›å»ºconfig-server
    2ã€å¯åŠ¨ç±»å¢åŠ æ³¨è§£
        @EnableConfigServer












3ã€ä½¿ç”¨gitæœåŠ¡å™¨ç»“åˆConfigæ­å»ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ
    ç®€ä»‹ï¼šè®²è§£ä½¿ç”¨gitæœåŠ¡å™¨ç»“åˆConfigæ­å»ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ

    1ã€é»˜è®¤ä½¿ç”¨gitå­˜å‚¨é…ç½®ä¸­å¿ƒ
        ä½¿ç”¨gitæœåŠ¡å™¨ï¼Œå¯ä»¥è‡ªå·±æ­å»ºgitlabæœåŠ¡å™¨
        æˆ–è€…ä½¿ç”¨githubã€å¼€æºä¸­å›½gitã€é˜¿é‡Œäº‘git

        794666918@qq.com
        xdclass.net123

        https://gitee.com/waitforxy/config_cloud.git

    2ã€é…ç½®æ–‡ä»¶æ·»åŠ é…ç½®
        spring:
          application:
            name: config-server
        #gité…ç½®
          cloud:
            config:
              server:
                git:
                  uri: https://gitee.com/waitforxy/config_cloud
                  username: 794666918@qq.com
                  password: xdclass.net123
                  #è¶…æ—¶æ—¶é—´
                  timeout: 5
                    #åˆ†æ”¯
                    default-label: master


    3ã€è®¿é—®æ–¹å¼ï¼ˆä¸€å®šè¦æ³¨æ„è¯­æ³•ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œä¼šå‡ºé”™ï¼‰
        å¤šç§è®¿é—®è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡å¯åŠ¨æ—¥å¿—å»æŸ¥çœ‹
        ä¾‹å­ http://localhost:9100/product-service.yml

        /{name}-{profiles}.properties
        /{name}-{profiles}.yml
        /{name}-{profiles}.json
        /{label}/{name}-{profiles}.yml

        name æœåŠ¡å™¨åç§°
        profile ç¯å¢ƒåç§°ï¼Œå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§
        lable ä»“åº“åˆ†æ”¯ã€é»˜è®¤masteråˆ†æ”¯
</code></pre><p>4ã€åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯ä½¿ç”¨å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šå¾®æœåŠ¡é‡Œé¢å®¢æˆ·ç«¯æ¥å…¥é…ç½®ä¸­å¿ƒå®æˆ˜<br>â€‹        å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html#_spring_cloud_config_client" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html#_spring_cloud_config_client</a><br>â€‹<br>â€‹        1ã€åŠ å…¥ä¾èµ–<br>â€‹             <dependency><br>â€‹                <groupid>org.springframework.cloud</groupid><br>â€‹                <artifactid>spring-cloud-config-client</artifactid><br>â€‹            </dependency><br>â€‹<br>â€‹         2ã€ä¿®æ”¹å¯¹åº”æœåŠ¡çš„é…ç½®æ–‡ä»¶,æŠŠapplication.yml æ”¹ä¸º bootstrap.yml<br>â€‹            #æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€<br>â€‹            eureka:<br>â€‹              client:<br>â€‹                serviceUrl:<br>â€‹                  defaultZone: <a href="http://localhost:8761/eureka/" target="_blank" rel="noopener">http://localhost:8761/eureka/</a><br>â€‹    </p>
<pre><code>    #æœåŠ¡çš„åç§°
    spring:
      application:
        name: product-service
      #æŒ‡å®šä»å“ªä¸ªé…ç½®ä¸­å¿ƒè¯»å–
      cloud:
        config:
          discovery:
            service-id: CONFIG-SERVER
            enabled: true
          profile: test
          #å»ºè®®ç”¨lableå»åŒºåˆ†ç¯å¢ƒï¼Œé»˜è®¤æ˜¯lableæ˜¯masteråˆ†æ”¯
          #label: test

æ³¨æ„ç‚¹ï¼š
    1.é…ç½®æ–‡ä»¶è¦ç”¨bootstrap.yml
    2.é»˜è®¤è¯»å–æ–‡ä»¶åæ˜¯ æœåŠ¡åç§°
</code></pre><p>ç¬¬ä¹ç«  å¾®æœåŠ¡æ¶ˆæ¯æ€»çº¿Busç»“åˆæ¶ˆæ¯é˜Ÿåˆ—RabbitMQå®æˆ˜</p>
<pre><code>1ã€æ¶ˆæ¯æ€»çº¿Busä»‹ç»å’Œä½¿ç”¨åœºæ™¯
    ç®€ä»‹ï¼šè®²è§£æ¶ˆæ¯æ€»çº¿Busä»‹ç»å’Œä½¿ç”¨åœºæ™¯
    1ã€ä»€ä¹ˆæ˜¯æ¶ˆæ¯
        ä¸€ä¸ªäº‹ä»¶ï¼Œéœ€è¦å¹¿æ’­æˆ–è€…å•ç‹¬ä¼ é€’ç»™æŸä¸ªæ¥å£

    2ã€ä¸ºä»€ä¹ˆä½¿ç”¨è¿™ä¸ª
        é…ç½®æ›´æ–°äº†ï¼Œä½†æ˜¯å…¶ä»–ç³»ç»Ÿä¸çŸ¥é“æ˜¯å¦æ›´æ–°









2ã€æ¶ˆæ¯é˜Ÿåˆ—å’ŒRabbitMQåŸºç¡€ä»‹ç»
    ç®€ä»‹ï¼šæ¶ˆæ¯é˜Ÿåˆ—å’ŒRabbitMQåŸºç¡€ä»‹ç»

        1ã€æ¶ˆæ¯é˜Ÿåˆ—ä»‹ç»
            å‚è€ƒï¼šhttps://www.cnblogs.com/linjiqin/p/5720865.html

        2ã€åŒç±»äº§å“
            ActiveMQ
            RocketMQ
            Kafka
            ç­‰

        3ã€SpringCloudé»˜è®¤æ¨èä½¿ç”¨RabbitMQ


        4ã€RabbitMQä»‹ç»    
            å®˜æ–¹æ–‡æ¡£ï¼šhttp://www.rabbitmq.com/getstarted.html
            ä¸­æ–‡æ–‡æ¡£ï¼šhttp://rabbitmq.mr-ping.com/





3ã€å®æˆ˜ç³»åˆ—ä½¿ç”¨Dockeræ­å»ºRabbitMQ3.7
    ç®€ä»‹ï¼šä½¿ç”¨Dockerå®‰è£…RabbitMQ

    1ã€å¦‚æœå¯¹Dockeræ²¡åŸºç¡€ï¼Œè¯¾ç¨‹åç»­æœ‰è®²è§£Dockerï¼Œå¯ä»¥å…ˆè·³è½¬è¿‡å»å­¦ä¹ Docker
    2ã€å®‰è£…æ­¥éª¤
        1)æ‹‰å–é•œåƒï¼šdocker pull rabbitmq:management
        2)æŸ¥çœ‹å½“å‰é•œåƒåˆ—è¡¨ï¼šdocker images
        3)åˆ é™¤æŒ‡å®šé•œåƒï¼šdocker rmi  IMAGE_ID  (å¦‚æœéœ€è¦å¼ºåˆ¶åˆ é™¤åŠ  -f)

        4)åˆ›å»ºå®¹å™¨
        docker run -d --name=&quot;myrabbitmq&quot; -p 5671:5671 -p 15672:15672 rabbitmq:management

        å‚æ•°è®²è§£: 
            run: åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤
             -d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ID
             -p: ç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£
             --name=&quot;rabbitmq&quot;: ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°


    3ã€RabbitMQé»˜è®¤åˆ›å»ºäº†ä¸€ä¸ª guest ç”¨æˆ·ï¼Œå¯†ç ä¹Ÿæ˜¯ guest, å¦‚æœè®¿é—®ä¸äº†è®°å¾—æŸ¥çœ‹é˜²ç«å¢™ï¼Œç«¯å£æˆ–è€…äº‘æœåŠ¡å™¨çš„å®‰å…¨ç»„
      ç®¡ç†åå°ï¼šhttp://127.0.0.1:15672


å…¶ä»–å®‰è£…æ–¹å¼ï¼š
Linuxå®‰è£…ï¼šhttps://blog.csdn.net/qq_34021712/article/details/72567786
windowså®‰è£…ï¼šhttp://www.rabbitmq.com/install-windows.html

https://blog.csdn.net/liyuejin/article/details/78410586





4ã€é«˜çº§ç¯‡å¹…æ¶ˆæ¯æ€»çº¿æ•´åˆé…ç½®ä¸­å¿ƒæ¶æ„æµç¨‹å›¾
    ç®€ä»‹ï¼šè®²è§£æ¶ˆæ¯æ€»çº¿Busç»“åˆconfigç»„ä»¶æ­å»ºé…ç½®ä¸­å¿ƒé¡¹ç›®æ¶æ„å›¾å’Œæ“ä½œæµç¨‹

        å¯åŠ¨
        rabbitmqï¼š docker run -d -p 5672:5672 -p 15672:15672 rabbitmq:management
        rabbitmqé»˜è®¤æ˜¯5672,æ‰€ä»¥æ”¹ä¸º5672ç«¯å£

        1ã€config-clientåŠ å…¥ä¾èµ–

            &lt;!--é…ç½®ä¸­å¿ƒç»“åˆæ¶ˆæ¯é˜Ÿåˆ—--&gt;

            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
            &lt;/dependency&gt;

            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;
            &lt;/dependency&gt;
</code></pre><p>â€‹<br>â€‹            å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://cloud.spring.io/spring-cloud-bus/single/spring-cloud-bus.html#_bus_refresh_endpoint" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-bus/single/spring-cloud-bus.html#_bus_refresh_endpoint</a><br>â€‹            æ–‡æ¡£é‡Œé¢ æš´éœ²ç«¯ç‚¹ management.endpoints.web.exposure.include=bus-refresh<br>â€‹<br>â€‹            2ã€åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ å…³äºRabbitMQçš„è¿æ¥(å¦‚æœæ˜¯æœ¬æœºï¼Œåˆ™å¯ä»¥ç›´æ¥å¯åŠ¨ï¼Œé‡‡ç”¨é»˜è®¤è¿æ¥é…ç½®)<br>â€‹                spring:<br>â€‹                  rabbitmq:<br>â€‹                    host: localhost<br>â€‹                    port: 5672<br>â€‹                    username: guest<br>â€‹                    password: guest<br>â€‹<br>â€‹                #æš´éœ²å…¨éƒ¨çš„ç›‘æ§ä¿¡æ¯<br>â€‹                management:<br>â€‹                  endpoints:<br>â€‹                    web:<br>â€‹                      exposure:<br>â€‹                        include: â€œ*â€<br>â€‹<br>â€‹            3ã€éœ€è¦åˆ·æ–°é…ç½®çš„åœ°æ–¹ï¼Œå¢åŠ æ³¨è§£<br>â€‹                @RefreshScope<br>â€‹<br>            4ã€è®¿é—®éªŒè¯ postæ–¹å¼ï¼š<br>                <a href="http://localhost:8773/actuator/bus-refresh" target="_blank" rel="noopener">http://localhost:8773/actuator/bus-refresh</a></p>
<pre><code>        5ã€åŠ¨æ€åˆ·æ–°é…ç½®: åœ¨å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒä½¿ç”¨ï¼Œå°½é‡å°‘åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨








5ã€å¾®æœåŠ¡ç›¸å…³é¡¹ç›®æ”¹é€ é…ç½®ä¸­å¿ƒ
ç®€ä»‹ï¼šæŠŠè¯¾ç¨‹é¡¹ç›®æ”¹é€ æˆé…ç½®ä¸­å¿ƒè®²è§£

1ã€gité‡Œé¢æ–°å¢å¯¹åº”é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œéƒ½è¦æ·»åŠ ä¸‹é¢çš„é…ç½®
    #æœåŠ¡çš„åç§°
    spring:
      rabbitmq:
        host: localhost
        port: 5672
        username: guest
        password: guest

    #æš´éœ²å…¨éƒ¨çš„ç›‘æ§ä¿¡æ¯
    management:
      endpoints:
        web:
          exposure:
            include: &quot;*&quot;
</code></pre><p>â€‹<br>â€‹    2ã€é¡¹ç›®é‡Œé¢æ·»åŠ mavenä¾èµ–<br>â€‹<br>â€‹        <!--é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯--><br>â€‹        <dependency><br>â€‹            <groupid>org.springframework.cloud</groupid><br>â€‹            <artifactid>spring-cloud-config-client</artifactid><br>â€‹        </dependency><br>â€‹<br>â€‹        <!--config server--><br>â€‹<br>â€‹        <dependency><br>â€‹            <groupid>org.springframework.boot</groupid><br>â€‹            <artifactid>spring-boot-starter-actuator</artifactid><br>â€‹        </dependency><br>â€‹<br>        <dependency><br>            <groupid>org.springframework.cloud</groupid><br>            <artifactid>spring-cloud-starter-bus-amqp</artifactid><br>        </dependency></p>
<pre><code>3ã€ä¿®æ”¹application.propertiesä¸ºbootstrap.yml å¹¶æ‹·è´é…ç½®æ–‡ä»¶

        #æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€
        eureka:
          client:
            serviceUrl:
              defaultZone: http://localhost:8761/eureka/

        #æœåŠ¡çš„åç§°
        spring:
          application:
            name: order-service
          #æŒ‡å®šä»å“ªä¸ªé…ç½®ä¸­å¿ƒè¯»å–
          cloud:
            config:
              discovery:
                service-id: CONFIG-SERVER
                enabled: true
              profile: test

4ã€å„ä¸ªé¡¹ç›®å¯åŠ¨é¡ºåº
    1ï¼‰æ³¨å†Œä¸­å¿ƒ
    2ï¼‰é…ç½®ä¸­å¿ƒ
    3ï¼‰å¯¹åº”çš„æœåŠ¡ï¼šå•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ã€‚ã€‚ã€‚
    4ï¼‰å¯åŠ¨ç½‘å…³
</code></pre><p>ç¬¬åç« ã€SpringCloudè¯¾ç¨‹å†…å®¹ä¸ŠåŠéƒ¨åˆ†æ€»ç»“<br>â€‹    </p>
<pre><code>1ã€å¾®æœåŠ¡æ ¸å¿ƒçŸ¥è¯†å†…å®¹å›é¡¾

ç®€ä»‹ï¼šå›é¡¾SpringCloudå‰é¢10ç« çš„åŸºç¡€å†…å®¹

    1)ä»‹ç»å¾®æœåŠ¡çš„åŸºç¡€çŸ¥è¯†ï¼Œæ ¸å¿ƒç»„ä»¶ï¼ŒCAPåŸç†

    2ï¼‰SpringCloudæ³¨å†Œä¸­å¿ƒ Eureka

    3ï¼‰product-service / order-service

    4) ä¼ªRPC Ribbon / feign 

    5) hystrixç†”æ–­

    6) æœåŠ¡ç½‘å…³ä»‹ç»ï¼Œzuul

    7ï¼‰é…ç½®ä¸­å¿ƒconfig-server
</code></pre><p>â€‹    </p>
<pre><code>2ã€å¾®æœåŠ¡ä¸‹åŠéƒ¨åˆ†çŸ¥è¯† äº‘æœåŠ¡å™¨å’ŒDockerå®¹å™¨
    ç®€ä»‹ï¼šè®²è§£äº‘æœåŠ¡å™¨å’Œå®¹å™¨çŸ¥è¯†
</code></pre><p>â€‹    </p>
<p>ç¬¬åä¸€ç«  é˜¿é‡Œäº‘ECSæœåŠ¡å™¨ä»‹ç»å’Œç½‘ç»œçŸ¥è¯†è®²è§£</p>
<pre><code>1ã€äº‘æœåŠ¡å™¨ä»‹ç»å’Œé˜¿é‡Œäº‘æœåŠ¡å™¨ECSæœåŠ¡å™¨é€‰è´­
    ç®€ä»‹ï¼šä»€ä¹ˆæ˜¯äº‘æœåŠ¡å™¨åŠç›®å‰ä¸»è¦çš„å‡ ä¸ªå‚å•†ä»‹ç»
    1ã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€äºšé©¬é€Šäº‘
    é˜¿é‡Œäº‘ï¼šhttps://www.aliyun.com/
    è…¾è®¯äº‘ï¼šhttps://cloud.tencent.com/
    äºšé©¬é€Šäº‘ï¼šhttps://aws.amazon.com/
</code></pre><p>â€‹<br>â€‹    2ã€é˜¿é‡Œäº‘æœåŠ¡å™¨è¿œç¨‹ç™»å½•å’Œå¸¸ç”¨å·¥å…·<br>â€‹        ç®€ä»‹ï¼šè®²è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç™»å½•ä½¿ç”¨å’Œå¸¸è§ç»ˆç«¯å·¥å…·<br>â€‹        1ã€windowså·¥å…·   puttyï¼Œxshell, security<br>â€‹            å‚è€ƒèµ„æ–™ï¼š<br>â€‹                <a href="https://jingyan.baidu.com/article/e75057f210c6dcebc91a89dd.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/e75057f210c6dcebc91a89dd.html</a><br>â€‹                <a href="https://www.jb51.net/softjc/88235.html" target="_blank" rel="noopener">https://www.jb51.net/softjc/88235.html</a><br>â€‹<br>â€‹        2ã€è‹¹æœç³»ç»ŸMACï¼š é€šè¿‡ç»ˆç«¯ç™»å½•<br>â€‹            ssh root@ip  å›è½¦åè¾“å…¥å¯†ç <br>â€‹            ssh <a href="mailto:root@120.25.1.38" target="_blank" rel="noopener">root@120.25.1.38</a><br>â€‹<br>â€‹        3ã€å¯ä»¥å°è¯•è‡ªå·±é€šè¿‡ç™¾åº¦è¿›è¡Œæ‰¾æ–‡æ¡£ï¼Œ å®‰è£…mysql jdk  nginx maven git redis elk </p>
<p>3ã€äº’è”ç½‘æ¶æ„çŸ¥è¯†ä¹‹ç½‘ç«™éƒ¨ç½²ä¸Šçº¿åŸºç¡€å‡†å¤‡<br>â€‹    ç®€ä»‹ï¼šè®²è§£åº”ç”¨éƒ¨ç½²åˆ°å¯ä»¥å…¬ç½‘è®¿é—®éœ€è¦æ­¥éª¤</p>
<pre><code>1ã€ä¸€ä¸ªhttpè¯·æ±‚çš„æ•…äº‹

2ã€ä»€ä¹ˆæ˜¯cnameå’Œaè®°å½•
        Aè®°å½•å’ŒCNAMEåªå¯ä»¥åŒæ—¶ç”Ÿæ•ˆä¸€ä¸ªï¼ŒAè®°å½•ä¼˜å…ˆ

3ã€åŸŸåå’Œipçš„å…³ç³»ï¼ŒDNSä½œç”¨


å‚è€ƒèµ„æ–™ï¼š
    https://blog.csdn.net/benbenzhuhwp/article/details/44704319

    https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=0&amp;rsv_idx=1&amp;ch=1&amp;tn=98050039_dg&amp;wd=%E4%B8%80%E4%B8%AAhttp%E8%AF%B7%E6%B1%82%E7%9A%84%E8%AF%A6%E7%BB%86%E8%BF%87%E7%A8%8B&amp;rsv_pq=80a65c5f00005961&amp;rsv_t=a5fcWreuJzILdSwr4gI8pFqlO7HSu5BlhjwalyVzPiV9w2L%2BKEj78pPi1Qn6Vx4wXxI&amp;rqlang=cn&amp;rsv_enter=1&amp;rsv_sug3=8&amp;rsv_sug1=8&amp;rsv_sug7=100&amp;sug=%25E4%25B8%2580%25E4%25B8%25AAhttp%25E8%25AF%25B7%25E6%25B1%2582%25E7%259A%2584%25E8%25AF%25A6%25E7%25BB%2586%25E8%25BF%2587%25E7%25A8%258B&amp;rsv_n=1
</code></pre><p>4ã€åŸŸåè´­ä¹°å’Œé…ç½®è§£æå®æˆ˜<br>â€‹    ç®€ä»‹ï¼šåŸŸåè´­ä¹°å’Œé…ç½®è§£æå®æˆ˜</p>
<pre><code>1ã€è´­ä¹°åŸŸåï¼Œå¤‡æ¡ˆ
    é˜¿é‡Œäº‘ å¤‡æ¡ˆåœ°å€ï¼šhttps://beian.aliyun.com/

2ã€è´­ä¹°æœåŠ¡å™¨ï¼Œé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ï¼Œäºšé©¬é€Šäº‘aws

3ã€é…ç½®åŸŸåè§£æåˆ°æœåŠ¡å™¨
</code></pre><p>â€‹    </p>
<p>â€‹<br>ç¬¬åäºŒç«  å¾®æœåŠ¡å¿…å¤‡æŠ€èƒ½Dockerå®¹å™¨åŸºç¡€ç¯‡å¹…<br>â€‹<br>â€‹    1ã€å¾®æœåŠ¡ä¸‹çš„Dockerä»‹ç»å’Œä½¿ç”¨åœºæ™¯<br>â€‹        ç®€ä»‹ï¼šDockerä»‹ç»å’Œä½¿ç”¨åœºæ™¯<br>â€‹<br>â€‹        1ã€ä»€ä¹ˆæ˜¯Dokcer<br>â€‹            ç™¾ç§‘:ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼›<br>â€‹<br>â€‹            ä½¿ç”¨goè¯­è¨€ç¼–å†™ï¼Œåœ¨LCXï¼ˆlinuxå®¹å™¨ï¼‰åŸºç¡€ä¸Šè¿›è¡Œçš„å°è£…<br>â€‹<br>â€‹            ç®€å•æ¥è¯´ï¼š<br>â€‹                1ï¼‰å°±æ˜¯å¯ä»¥å¿«é€Ÿéƒ¨ç½²å¯åŠ¨åº”ç”¨<br>â€‹                2ï¼‰å®ç°è™šæ‹ŸåŒ–ï¼Œå®Œæ•´èµ„æºéš”ç¦»<br>â€‹                3ï¼‰ä¸€æ¬¡ç¼–å†™ï¼Œå››å¤„è¿è¡Œï¼ˆæœ‰ä¸€å®šçš„é™åˆ¶ï¼Œæ¯”å¦‚Dockeræ˜¯åŸºäºLinux 64bitçš„ï¼Œæ— æ³•åœ¨32bitçš„linux/Windows/unixç¯å¢ƒä¸‹ä½¿ç”¨ï¼‰<br>â€‹<br>        2ã€ä¸ºä»€ä¹ˆè¦ç”¨<br>            1ã€æä¾›ä¸€æ¬¡æ€§çš„ç¯å¢ƒï¼Œå‡å¦‚éœ€è¦å®‰è£…Mysqlï¼Œåˆ™éœ€è¦å®‰è£…å¾ˆå¤šä¾èµ–åº“ã€ç‰ˆæœ¬ç­‰ï¼Œå¦‚æœä½¿ç”¨Dockeråˆ™é€šè¿‡é•œåƒå°±å¯ä»¥ç›´æ¥å¯åŠ¨è¿è¡Œ   </p>
<pre><code>        2ã€å¿«é€ŸåŠ¨æ€æ‰©å®¹ï¼Œä½¿ç”¨dockeréƒ¨ç½²äº†ä¸€ä¸ªåº”ç”¨ï¼Œå¯ä»¥åˆ¶ä½œæˆé•œåƒï¼Œç„¶åé€šè¿‡Dokcerå¿«é€Ÿå¯åŠ¨

        3ã€ç»„å»ºå¾®æœåŠ¡æ¶æ„ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæœºå™¨ä¸Šæ¨¡æ‹Ÿå‡ºå¤šä¸ªå¾®æœåŠ¡ï¼Œå¯åŠ¨å¤šä¸ªåº”ç”¨

        4ã€æ›´å¥½çš„èµ„æºéš”ç¦»å’Œå…±äº«

        ä¸€å¥è¯ï¼šå¼€ç®±å³ç”¨ï¼Œå¿«é€Ÿéƒ¨ç½²ï¼Œå¯ç§»æ¤æ€§å¼ºï¼Œç¯å¢ƒéš”ç¦»







2ã€Linuxäº‘æœåŠ¡å™¨Centos7å®‰è£…Dockerå®æˆ˜
    ç®€ä»‹ï¼šè®²è§£é˜¿é‡Œäº‘ECSæœåŠ¡å®‰è£…Dockerå®æˆ˜
    Linux Standard Baseçš„ç¼©å†™ï¼Œlsb_releaseå‘½ä»¤ç”¨æ¥æ˜¾ç¤ºLSBå’Œç‰¹å®šç‰ˆæœ¬çš„ç›¸å…³ä¿¡æ¯
    å‘½ä»¤ï¼š lsb_release -a 

    é˜¿é‡Œäº‘å®‰è£…æ‰‹å†Œï¼š
    https://help.aliyun.com/document_detail/51853.html?spm=a2c4g.11186623.6.820.RaToNY

    å¸¸è§é—®é¢˜ï¼š
    https://blog.csdn.net/daluguishou/article/details/52080250






3ã€Dockerä»“åº“ã€é•œåƒã€å®¹å™¨æ ¸å¿ƒçŸ¥è¯†è®²è§£
    ç®€ä»‹ï¼šå¿«é€ŸæŒæ¡DokceråŸºç¡€çŸ¥è¯†ï¼Œ

    1ã€æ¦‚å¿µï¼š
        Docker é•œåƒ - Docker imagesï¼š
                 å®¹å™¨è¿è¡Œæ—¶çš„åªè¯»æ¨¡æ¿ï¼Œæ“ä½œç³»ç»Ÿ+è½¯ä»¶è¿è¡Œç¯å¢ƒ+ç”¨æˆ·ç¨‹åº

                 class User{
                     private String userName;
                     private int age;
                 }


        Docker å®¹å™¨ - Docker containersï¼š
                å®¹å™¨åŒ…å«äº†æŸä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„å…¨éƒ¨ç¯å¢ƒ

                 User user = new User()


        Docker ä»“åº“ - Docker registeriesï¼š 
                ç”¨æ¥ä¿å­˜é•œåƒï¼Œæœ‰å…¬æœ‰å’Œç§æœ‰ä»“åº“ï¼Œå¥½æ¯”Mavençš„ä¸­å¤®ä»“åº“å’Œæœ¬åœ°ç§æœ
                é•œåƒä»“åº“ï¼š    

                ï¼ˆå‚è€ƒï¼‰é…ç½®å›½å†…é•œåƒä»“åº“ï¼šhttps://blog.csdn.net/zzy1078689276/article/details/77371782

        å¯¹æ¯”é¢å‘å¯¹è±¡çš„æ–¹å¼
        Dokcer é‡Œé¢çš„é•œåƒ : Javaé‡Œé¢çš„ç±» Class
        Docker é‡Œé¢çš„å®¹å™¨ : Javaé‡Œé¢çš„å¯¹è±¡ Object
        é€šè¿‡ç±»åˆ›å»ºå¯¹è±¡ï¼Œé€šè¿‡é•œåƒåˆ›å»ºå®¹å™¨


4ã€Dockerå®¹å™¨å¸¸è§å‘½ä»¤å®æˆ˜
    ç®€ä»‹ï¼šè®²è§£Dockeråœ¨äº‘æœåŠ¡ä¸Šçš„å®é™…åº”ç”¨
    1ã€ å¸¸ç”¨å‘½ä»¤ï¼ˆå®‰è£…éƒ¨ç½²å¥½Dokceråï¼Œæ‰§è¡Œçš„å‘½ä»¤æ˜¯dockerå¼€å¤´ï¼‰,xxxæ˜¯é•œåƒåç§°

        æœç´¢é•œåƒï¼šdocker search xxx

        åˆ—å‡ºå½“å‰ç³»ç»Ÿå­˜åœ¨çš„é•œåƒï¼šdocker images

        æ‹‰å–é•œåƒï¼šdocker pull xxx
            xxxæ˜¯å…·ä½“æŸä¸ªé•œåƒåç§°(æ ¼å¼ REPOSITORY:TAG)
            REPOSITORYï¼šè¡¨ç¤ºé•œåƒçš„ä»“åº“æº,TAGï¼šé•œåƒçš„æ ‡ç­¾

        è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼šdocker run -d --name &quot;xdclass_mq&quot; -p 5672:5672 -p 15672:15672 rabbitmq:management
            docker run - è¿è¡Œä¸€ä¸ªå®¹å™¨
            -d åå°è¿è¡Œ
            -p ç«¯å£æ˜ å°„
            rabbitmq:management  (æ ¼å¼ REPOSITORY:TAG)ï¼Œå¦‚æœä¸æŒ‡å®štagï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°çš„
            --name &quot;xxx&quot;

        åˆ—ä¸¾å½“å‰è¿è¡Œçš„å®¹å™¨ï¼šdocker ps

        æ£€æŸ¥å®¹å™¨å†…éƒ¨ä¿¡æ¯ï¼šdocker inspect å®¹å™¨åç§°

        åˆ é™¤é•œåƒï¼šdocker rmi IMAGE_NAME
             å¼ºåˆ¶ç§»é™¤é•œåƒä¸ç®¡æ˜¯å¦æœ‰å®¹å™¨ä½¿ç”¨è¯¥é•œåƒ å¢åŠ  -f å‚æ•°ï¼Œ

        åœæ­¢æŸä¸ªå®¹å™¨ï¼šdocker stop å®¹å™¨åç§°

        å¯åŠ¨æŸä¸ªå®¹å™¨ï¼šdocker start å®¹å™¨åç§°

        ç§»é™¤æŸä¸ªå®¹å™¨ï¼š docker rm å®¹å™¨åç§° ï¼ˆå®¹å™¨å¿…é¡»æ˜¯åœæ­¢çŠ¶æ€ï¼‰


    æ–‡æ¡£ï¼š
        https://blog.csdn.net/permike/article/details/51879578







5ã€å®æˆ˜åº”ç”¨ä¹‹ä½¿ç”¨Dockeréƒ¨ç½²NginxæœåŠ¡å™¨
    ç®€ä»‹ï¼šè®²è§£ä½¿ç”¨Dockeréƒ¨ç½²NginxæœåŠ¡å™¨å®æˆ˜
    1ã€è·å–é•œåƒ 
        docker run (é¦–å…ˆä¼šä»æœ¬åœ°æ‰¾é•œåƒï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥å¯åŠ¨ï¼Œæ²¡æœ‰çš„è¯ï¼Œä»é•œåƒä»“åº“æ‹‰èµ·ï¼Œå†å¯åŠ¨)

        docker search nignx
    2ã€åˆ—ä¸¾
        docker images
    3ã€æ‹‰å–
        docker pull nignx
    3ã€å¯åŠ¨
        docker run -d --name &quot;xdclass_nginx&quot; -p 8088:80 nginx
        docker run -d --name &quot;xdclass_nginx2&quot; -p 8089:80 nginx
        docker run -d --name &quot;xdclass_nginx3&quot; -p 8090:80 nginx
    4ã€è®¿é—®
        å¦‚æœæ˜¯é˜¿é‡Œäº‘æœåŠ¡ï¼Œè®°å¾—é…ç½®å®‰å…¨ç»„ï¼Œè…¾è®¯äº‘ä¹Ÿéœ€è¦é…ç½®ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªé˜²ç«å¢™







6ã€å…¬å¸ä¸­Dockeré•œåƒä»“åº“ä½¿ç”¨è®²è§£
    ç®€ä»‹ï¼šè®²è§£ä¸€èˆ¬å…¬å¸ä¸­é•œåƒä»“åº“åœ¨çš„ä½¿ç”¨

    1ã€ä¸ºå•¥è¦ç”¨é•œåƒä»“åº“


    2ã€å®˜æ–¹å…¬å…±é•œåƒä»“åº“å’Œç§æœ‰é•œåƒä»“åº“
        å…¬å…±é•œåƒä»“åº“ï¼š
                å®˜æ–¹ï¼šhttps://hub.docker.com/ï¼ŒåŸºäºå„ä¸ªè½¯ä»¶å¼€å‘æˆ–è€…æœ‰è½¯ä»¶æä¾›å•†å¼€å‘çš„
                éå®˜æ–¹ï¼šå…¶ä»–ç»„ç»‡æˆ–è€…å…¬å¸å¼€å‘çš„é•œåƒï¼Œä¾›å¤§å®¶å…è´¹è¯•ç”¨

        ç§æœ‰é•œåƒä»“åº“ï¼š
                ç”¨äºå­˜æ”¾å…¬å¸å†…éƒ¨çš„é•œåƒï¼Œä¸æä¾›ç»™å¤–éƒ¨è¯•ç”¨ï¼› 

                SpringCloud å¼€å‘äº†ä¸€ä¸ªæ”¯ä»˜ç³»ç»Ÿ -ã€‹åšæˆä¸€ä¸ªé•œåƒ ï¼ˆæ“ä½œç³»ç»Ÿ+è½¯ä»¶è¿è¡Œç¯å¢ƒ+ç”¨æˆ·ç¨‹åºï¼‰






7ã€é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºè‡ªå·±çš„é•œåƒä»“åº“
    ç®€ä»‹ï¼šä½¿ç”¨é˜¿é‡Œäº‘æ­å»ºè‡ªå·±çš„é•œåƒä»“åº“

    1ã€é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼šhttps://dev.aliyun.com/search.html

    ç‚¹å‡»ç®¡ç†æ§åˆ¶å°-ã€‹åˆæ¬¡ä½¿ç”¨ä¼šæç¤ºå¼€é€šï¼Œç„¶åè®¾ç½®å¯†ç 
    xdclass.net123


    2ã€ä½¿ç”¨é˜¿é‡Œäº‘ç§æœ‰é•œåƒä»“åº“
        1)ç™»å½•ï¼š docker login --username=794666918@qq.com registry.cn-shenzhen.aliyuncs.com

        2) æ¨é€æœ¬åœ°é•œåƒï¼š
        docker tag [ImageId] registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:[é•œåƒç‰ˆæœ¬å·]
        ä¾‹å­ï¼š
        docker tag 2f415b0e9a6e registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:xd_rabbitmq-v1.0.2

        docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:xd_rabbitmq-v1.0.2

        3)æ‹‰å–é•œåƒ
            çº¿ä¸ŠæœåŠ¡å™¨æ‹‰å–é•œåƒï¼š
                docker login --username=794666918@qq.com registry.cn-shenzhen.aliyuncs.com

                docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:xd_rabbitmq-v1.0.2

                å¯åŠ¨å®¹å™¨ï¼š
                docker run -d --name &quot;xdclass_mq&quot; -p 5672:5672 -p 15672:15672 2f415b0e9a6e
</code></pre><p>ç¬¬åä¸‰ç«  å¾®æœåŠ¡é«˜çº§ç¯‡å¹…SpringCloudå’ŒDockeræ•´åˆéƒ¨ç½²<br>â€‹<br>â€‹    ç¬¬1è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†<br>â€‹<br>â€‹    ç®€ä»‹:ä½¿ç”¨Dockerçš„mavenæ’ä»¶ï¼Œæ„å»ºspringbootåº”ç”¨<br>â€‹<br>    å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://spring.io/guides/gs/spring-boot-docker/" target="_blank" rel="noopener">https://spring.io/guides/gs/spring-boot-docker/</a></p>
<pre><code>1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom.xml

     &lt;properties&gt;
       &lt;docker.image.prefix&gt;xdclass&lt;/docker.image.prefix&gt;
    &lt;/properties&gt;

    &lt;build&gt;
        &lt;finalName&gt;docker-demo&lt;/finalName&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;com.spotify&lt;/groupId&gt;
                &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.3.6&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;repository&gt;${docker.image.prefix}/${project.artifactId}&lt;/repository&gt;
                    &lt;buildArgs&gt;
                        &lt;JAR_FILE&gt;target/${project.build.finalName}.jar&lt;/JAR_FILE&gt;
                    &lt;/buildArgs&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    é…ç½®è®²è§£
    Spotify çš„ docker-maven-plugin æ’ä»¶æ˜¯ç”¨mavenæ’ä»¶æ–¹å¼æ„å»ºdockeré•œåƒçš„ã€‚
    ${project.build.finalName} äº§å‡ºç‰©åç§°ï¼Œç¼ºçœä¸º${project.artifactId}-${project.version}
</code></pre><p>=============================================<br>æ›´å¤šå¹²è´§æŠ€æœ¯è®¿é—®å°Dè¯¾å ‚å®˜ç½‘ <a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a><br>å°Dè€å¸ˆä¸ªäººå¾®ä¿¡ï¼šjack794666918</p>
<h1 id="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-2"><a href="#å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-2" class="headerlink" title="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"></a>å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚</h1><pre><code>ç¬¬2è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†

        ç®€ä»‹:æ‰“åŒ…SpringCloudé•œåƒå¹¶ä¸Šä¼ ç§æœ‰ä»“åº“å¹¶éƒ¨ç½²

        1ã€åˆ›å»ºDockerfile,é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc/main/docker/Dockerfile,å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰
            ä»€ä¹ˆæ˜¯Dockerfile : ç”±ä¸€ç³»åˆ—å‘½ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ï¼Œè¿™äº›å‘½ä»¤åº”ç”¨äºåŸºç¡€é•œåƒ, æœ€ç»ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ

            FROM openjdk:8-jdk-alpine
            VOLUME /tmp
            ARG JAR_FILE
            COPY ${JAR_FILE} app.jar
            ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]


            å‚æ•°è®²è§£ï¼š
            FROM &lt;image&gt;:&lt;tag&gt; éœ€è¦ä¸€ä¸ªåŸºç¡€é•œåƒï¼Œå¯ä»¥æ˜¯å…¬å…±çš„æˆ–è€…æ˜¯ç§æœ‰çš„ï¼Œ åç»­æ„å»ºä¼šåŸºäºæ­¤é•œåƒï¼Œå¦‚æœåŒä¸€ä¸ªDockerfileä¸­å»ºç«‹å¤šä¸ªé•œåƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªFROMæŒ‡ä»¤

            VOLUME  é…ç½®ä¸€ä¸ªå…·æœ‰æŒä¹…åŒ–åŠŸèƒ½çš„ç›®å½•ï¼Œä¸»æœº /var/lib/docker ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é“¾æ¥åˆ°å®¹å™¨çš„/tmpã€‚æ”¹æ­¥éª¤æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ¶‰åŠåˆ°æ–‡ä»¶ç³»ç»Ÿçš„åº”ç”¨å°±å¾ˆæœ‰å¿…è¦äº†ã€‚/tmpç›®å½•ç”¨æ¥æŒä¹…åŒ–åˆ° Docker æ•°æ®æ–‡ä»¶å¤¹ï¼Œå› ä¸º Spring Boot ä½¿ç”¨çš„å†…åµŒ Tomcat å®¹å™¨é»˜è®¤ä½¿ç”¨/tmpä½œä¸ºå·¥ä½œç›®å½• 

            ARG  è®¾ç½®ç¼–è¯‘é•œåƒæ—¶åŠ å…¥çš„å‚æ•°ï¼Œ ENV æ˜¯è®¾ç½®å®¹å™¨çš„ç¯å¢ƒå˜é‡
            COPY : åªæ”¯æŒå°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ ,è¿˜æœ‰ä¸ªADDæ›´å¼ºå¤§ä½†å¤æ‚ç‚¹
            ENTRYPOINT å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤
            EXPOSE 8080 æš´éœ²é•œåƒç«¯å£
        2ã€æ„å»ºé•œåƒ
        mvn install dockerfile:build
        æ‰“æ ‡ç­¾
        docker tag a1b9fc71720d registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808
        æ¨é€åˆ°é•œåƒä»“åº“
        docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808

        åº”ç”¨æœåŠ¡å™¨æ‹‰å–é•œåƒ
        docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808


        docker run -d --name xdclass_docker_demo1 -p 8099:8080  a1b9fc71720d

        3ã€æŸ¥çœ‹å¯åŠ¨æ—¥å¿— docker logs -f  containerid

        æ–‡æ¡£ï¼šhttps://yeasy.gitbooks.io/docker_practice/image/dockerfile/











ç¬¬3è¯¾ å®æˆ˜ç³»åˆ—ä¹‹æ³¨å†Œä¸­å¿ƒæ‰“åŒ…Dockeré•œåƒ
    ç®€ä»‹ï¼šè®²è§£ä½¿ç”¨Dockeræ‰“åŒ…æ³¨å†Œä¸­å¿ƒï¼Œä¸Šä¼ ç§æœ‰é•œåƒä»“åº“å¹¶éƒ¨ç½²

    1ã€æ–°å¢mavenæ’ä»¶
        &lt;properties&gt;
           &lt;docker.image.prefix&gt;xdclass&lt;/docker.image.prefix&gt;
        &lt;/properties&gt;

        &lt;build&gt;
            &lt;finalName&gt;docker-demo&lt;/finalName&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;com.spotify&lt;/groupId&gt;
                    &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
                    &lt;version&gt;1.3.6&lt;/version&gt;
                    &lt;configuration&gt;
                        &lt;repository&gt;${docker.image.prefix}/${project.artifactId}&lt;/repository&gt;
                        &lt;buildArgs&gt;
                            &lt;JAR_FILE&gt;target/${project.build.finalName}.jar&lt;/JAR_FILE&gt;
                        &lt;/buildArgs&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/build&gt;

    2ã€æ–°å»ºDockerfile
            FROM openjdk:8-jdk-alpine
            VOLUME /tmp
            ARG JAR_FILE
            COPY ${JAR_FILE} app.jar
            ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]

    3ã€æ‰“åŒ…ï¼š
        mvn install dockerfile:build

    4ã€æ¨é€é˜¿é‡Œäº‘é•œåƒä»“åº“

    é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼šhttps://dev.aliyun.com/search.html
</code></pre><p>docker tag 062d2ddf272a registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:eureka-v20180825<br>docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:eureka-v20180825<br>docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:eureka-v20180825</p>
<pre><code>    5ã€æŸ¥çœ‹æ—¥å¿— docker logs -f  containerid






ç¬¬4è¯¾ å®æˆ˜ç³»åˆ—ä¹‹éƒ¨ç½²RabbitMQå’Œé…ç½®ä¸­å¿ƒæ‰“åŒ…Dockeré•œåƒ
    ç®€ä»‹ï¼šè®²è§£ä½¿ç”¨Dockeræ‰“åŒ…é…ç½®ä¸­å¿ƒï¼Œå’Œéƒ¨ç½²RabbitMQ

    1ã€æœåŠ¡åœ°å€ ssh root@47.106.120.173

    éƒ¨ç½²    rabbitmqï¼š docker run -d -p 5672:5672 -p 15672:15672 rabbitmq:management

    2ã€æ¨é€é•œåƒ

    docker tag 0f636543904e registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:config-server-v20180825

    docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:config-server-v20180825

    docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:config-server-v20180825



5ã€å¸¸è§é—®é¢˜å¤„ç†ä¹‹å‡çº§äº‘æœåŠ¡å™¨
    ç®€ä»‹ï¼šå¤„ç†ä¸ŠèŠ‚è¯¾å‡ºç°çš„é—®é¢˜ï¼Œå‡çº§æœåŠ¡å™¨æ³¨æ„äº‹é¡¹

    1ã€å‡çº§äº‘æœåŠ¡å™¨é…ç½®ï¼ˆè´­ä¹°é…ç½®åéœ€è¦é‡å¯æœºå™¨æ‰ç”Ÿæ•ˆï¼‰

    2ã€å¯åŠ¨å®Œæˆåï¼Œéœ€è¦å¼€å¯docker
        æŒ‡ä»¤ï¼š systemctl  start docker

    3ã€æ‰€æœ‰å¯¹å¤–çš„éƒ½è¦ç»è¿‡ç½‘å…³æ‰å¯ä»¥å¯¹å¤–ï¼Œåº”ç”¨é—´é€šä¿¡(é™¤éè·¨æœºæˆ¿)éƒ½ç”¨å†…ç½‘é€šä¿¡









6ã€å®æˆ˜ç³»åˆ—ä¹‹Dockeréƒ¨ç½²Redis
    ç®€ä»‹ï¼šä½¿ç”¨Dockerå®‰è£…redis
    1ã€æœç´¢é•œåƒ docker search redis

    2ã€æ‹‰å– docker pull docker.io/redis

    3ã€å¯åŠ¨ docker run --name &quot;xd_redis&quot; -p 6379:6379 -d 4e8db158f18d
    å‚è€ƒï¼š
    docker run --name &quot;xd_redis&quot; -p 6379:6379 -d 4e8db158f18d --requirepass &quot;123456&quot; -v $PWD/data:/data

    4ã€è®¿é—®rediså®¹å™¨é‡Œé¢ï¼Œè¿›è¡Œæ“ä½œ
    docker exec -it 295058d2b92e redis-cli










7ã€ç”Ÿäº§ç¯å¢ƒå¸¸è§é—®é¢˜ä¹‹é…ç½®ä¸­å¿ƒè®¿é—®
    ç®€ä»‹ï¼šè®²è§£ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å¸¸è§é—®é¢˜ï¼Œé…ç½®ä¸­å¿ƒè®¿é—®è·¯å¾„å˜åŒ–

    1ã€é…ç½®ä¸­å¿ƒè®¿é—®å‡ºé”™ï¼Œè·¯å¾„ä¸å¯¹

       è§£å†³ï¼šä¿®æ”¹æ‰€æœ‰çš„æ³¨å†Œä¸­å¿ƒï¼Œå¢åŠ ä¸‹é¢é…ç½®
    instance:
    instance-id: ${spring.cloud.client.ip-address}:${server.port}
    prefer-ip-address: true



    docker tag 50a12cd66210 registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:config-server-v20180826








8ã€å®æˆ˜ç³»åˆ—ä¹‹æ‰“åŒ…Dockeré•œåƒæ‰“åŒ…å•†å“æœåŠ¡å’Œè®¢å•æœåŠ¡ã€ç½‘å…³ 
   ç®€ä»‹:æ‰“åŒ…Dockeré•œåƒéƒ¨ç½²å•†å“æœåŠ¡å’Œè®¢å•æœåŠ¡ã€ç½‘å…³

   æ³¨æ„ï¼š
   1ã€mavenæ‰“åŒ…æ„å»ºï¼Œä¼šè§¦å‘å•å…ƒæµ‹è¯•ï¼Œéƒ¨åˆ†æƒ…å†µå¯ä»¥è·³è¿‡ï¼Œ
   mvn install -Dmaven.test.skip=true dockerfile:build

   2ã€ç”Ÿäº§ç¯å¢ƒä¸èƒ½ç”¨localhost æˆ–è€… 127.0.0.1, ä¸€å®šè¦ç”¨å†…ç½‘é€šä¿¡ip (è™šæ‹Ÿä¸»æœºæ˜ å°„ hosts)










 9ã€å®æˆ˜ç³»åˆ—äº‘æœåŠ¡å™¨éƒ¨ç½²ç½‘å…³ã€è®¢å•ã€å•†å“æœåŠ¡
     ç®€ä»‹ï¼šäº‘æœåŠ¡éƒ¨ç½²å•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ã€ç½‘å…³æœåŠ¡

     1ã€æ‹‰å–é•œåƒã€å¯åŠ¨



     è®¿é—®è·¯å¾„
     http://47.106.120.173:8781/api/v1/order/save?product_id=5&amp;user_id=5

     http://47.106.120.173:9000/apigateway/order/api/v1/order/save?user_id=5&amp;product_id=3&amp;token=232serer
</code></pre><p>ç¬¬åå››ç«  è¯¾ç¨‹æ€»ç»“å’Œå¸¸è§é—®é¢˜å¤„ç†</p>
<pre><code>1ã€SpringCloudå¾®æœåŠ¡å¸¸è§é—®é¢˜å’Œè§£å†³æ€è·¯
ç®€ä»‹ï¼šè®²è§£SpringCloudå¼€å‘å®æˆ˜å¸¸è§é—®é¢˜ï¼ŒåŠè§£å†³æ€è·¯

    1ã€æŠ€æœ¯é€‰æ‹©ï¼šSpringCloudå…¨å®¶æ¡¶ï¼Œæ¯ä¸ªç»„ä»¶åˆæœ‰å¤šä¸ªæ›¿ä»£ï¼Œæ”¹æ€ä¹ˆé€‰æ‹©

        1ï¼‰é€‰æ‹©çš„æ—¶å€™æ ¹æ®å…¬å¸é‡Œé¢å›¢é˜Ÿäººå‘˜ç†Ÿæ‚‰ç¨‹åº¦ï¼Œé™ä½å­¦ä¹ æˆæœ¬
        2ï¼‰é€‰æ‹©ç¤¾åŒºæ´»è·ƒçš„å¹¶ä¸”æ–‡æ¡£ç›¸å¯¹è¾ƒå¤šçš„ï¼Œæ€ä¹ˆåˆ¤æ–­æ´»è·ƒï¼Œå¯ä»¥çœ‹githubä¸Šä»£ç æäº¤å’Œstartæ•°

    2ã€äº‘æœåŠ¡é€‰æ‹©ï¼š è…¾è®¯äº‘ï¼Œé˜¿é‡Œäº‘ ï¼Œé‡åˆ°é—®é¢˜å¯ä»¥æäº¤å·¥å•ï¼Œæœ‰ä¸“äººè·Ÿè¿›
</code></pre><p>â€‹<br>â€‹        3ã€éƒ¨ç½²äº†åº”ç”¨ï¼Œä½†æ˜¯è®¿é—®ä¸äº†<br>â€‹            è§£å†³æ€è·¯ï¼š<br>â€‹                1)æŸ¥çœ‹åº”ç”¨å¯åŠ¨æ˜¯å¦æ­£å¸¸ï¼Œå¦‚æœæœ‰é”™è¯¯æ—¥å¿—ï¼Œå¤åˆ¶é”™è¯¯æ—¥å¿—å»ç™¾åº¦æœç´¢ï¼ï¼ï¼ï¼ï¼ï¼ï¼ç‰¹åˆ«é‡è¦<br>â€‹<br>â€‹                2ï¼‰å¯åŠ¨æ­£å¸¸ï¼Œåˆ™å…ˆåœ¨æœ¬æœºä½¿ç”¨ CURL â€œ<a href="http://lcoalhost:8080/api/v1/user/find&quot;" target="_blank" rel="noopener">http://lcoalhost:8080/api/v1/user/find&quot;</a>  è®¿é—®å¯¹åº”çš„æ¥å£ï¼Œçœ‹æ˜¯å¦æœ‰å“åº”<br>â€‹<br>â€‹                3ï¼‰å¯åŠ¨æ­£å¸¸ï¼Œä¸”curlæœ‰å“åº”ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦æœ‰å…³é—­é˜²ç«å¢™ï¼Œæˆ–è€…å¼€æ”¾å¯¹åº”çš„è®¿é—®ç«¯å£ï¼Œå¼€æ”¾ç«¯å£æ‰å¯ä»¥è®¿é—®<br>â€‹<br>â€‹                4ï¼‰è…¾è®¯äº‘å’Œé˜¿é‡Œäº‘éƒ½æ˜¯æœ‰å®‰å…¨ç»„ï¼Œç±»ä¼¼å¤–å±‚é˜²ç«å¢™ï¼Œä¸€å®šè¦å»webæ§åˆ¶å°æ£€æŸ¥æ˜¯å¦æœ‰å¼€å¯ç«¯å£</p>
<pre><code>    4ã€å†…ç½‘å’Œå¤–ç½‘è®¿é—®ï¼Œé‰´æƒé—®é¢˜å®‰å…¨é—®é¢˜

            1ï¼‰æ‰€æœ‰åº”ç”¨åªèƒ½é€šè¿‡ç½‘å…³æä¾›å¯¹å¤–è®¿é—®çš„å…¥å£

            2ï¼‰åº”ç”¨ç¨‹åºä¹‹é—´é€šè®¯ï¼Œé‡‡ç”¨å†…ç½‘


    5ã€ç¨‹åºå‡ºé”™æˆ–è€…å¼‚å¸¸: å¤åˆ¶é”™è¯¯æ—¥å¿—å»ç™¾åº¦æœç´¢ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šäººä¼šé‡åˆ°ç±»ä¼¼çš„é”™è¯¯ï¼Œå¤šç§¯ç´¯ï¼Œç‰¹åˆ«å¼ºè°ƒ







2ã€è¯¾ç¨‹æ€»ç»“å’Œåç»­æŠ€æœ¯è§„åˆ’
ç®€ä»‹ï¼šæ€»ç»“SpringCloudè¯¾ç¨‹å’Œå¾®æœåŠ¡åç»­è¯¾ç¨‹è§„åˆ’

    1ã€springCloudå…¨å®¶æ¡¶ï¼ŒæŠ€æœ¯é€‰æ‹©å’ŒçŸ¥è¯†ç‚¹ç‰¹åˆ«å¤šï¼Œä¸€å®šè¦å­¦ä¼šè®°ç¬”è®°ï¼Œå¾®æœåŠ¡æ›´å¤šå…³æ³¨çš„æ˜¯é‡Œé¢æ¶æ„å’Œæ•°æ®æµè½¬ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ä¸šåŠ¡ã€‚

    2ã€SpringCloudæ¶æ„è¿™äº›é…ç½®ï¼Œä¸€èˆ¬ä½¿ç”¨ä¸€æ¬¡åå°±ä¸ä¼šå¤šæ¬¡ä¿®æ”¹äº†ï¼Œè¿›å…¥å…¬å¸ä¸»è¦è¿˜æ˜¯å¼€å‘ä¸šåŠ¡ï¼Œä¸šåŠ¡å¼€å‘ä¸€èˆ¬éƒ½ç”¨springbootï¼Œæ¯”è¾ƒå°‘è®©æ–°äººæ­å»ºSpringCloudçš„æ¶æ„


    3ã€å¼€å‘ä¸šåŠ¡ï¼Œæ— éå°±æ˜¯CRUDï¼Œå¢åˆ æ”¹æŸ¥ï¼Œåªä¸è¿‡æ˜¯åˆçº§å’Œé«˜çº§çš„åŒºåˆ«ï¼Œå°è£…æˆé€šç”¨å’Œä¸é€šç”¨çš„åŒºåˆ«
</code></pre><p>â€‹<br>â€‹        4ã€å¾®æœåŠ¡å’Œå®¹å™¨ç››è¡Œçš„æƒ…å†µä¸‹ï¼Œå®¹å™¨ç¼–æ’å’Œè‡ªåŠ¨ç¼©æ‰©å®¹è¶Šæ¥è¶Šé‡è¦<br>â€‹<br>â€‹            å¯ä»¥å…³æ³¨ï¼šk8s / service mesh /server less ç­‰æŠ€æœ¯</p>
<p>â€‹<br>â€‹        æ€»ç»“ï¼š<br>â€‹            1ï¼‰åç»­ä¼šæ¨å‡ºå¯¹åº”çš„è¯¾ç¨‹ï¼Œè¿˜æœ‰é¡¹ç›®å®æˆ˜ç³»åˆ—ï¼Œå¤§å®¶è®°å¾—å…³æ³¨ å°Dè¯¾å ‚ï¼Œå®˜ç½‘ ï¼š<a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a>,<br>â€‹<br>â€‹            2ï¼‰ä¹Ÿå¯ä»¥åŠ æˆ‘å¾®ä¿¡äº¤æµï¼š jack794666918<br>â€‹<br>â€‹            3ï¼‰è´­ä¹°å¯¹åº”çš„è¯¾ç¨‹åï¼Œè®°å¾—è¿›æˆ‘ä»¬å°Dè¯¾å ‚å®˜æ–¹çš„äº¤æµç¾¤ï¼Œæˆ‘ä¼šåœ¨é‡Œé¢åˆ†äº«ä¸»æµæŠ€æœ¯å’Œç­”ç–‘ï¼Œé¢è¯•ç»éªŒç­‰ç­‰ï¼Œè¿˜ä¼šåŒæ­¥æ›´æ–°èµ„æ–™å’Œè¿˜è¶…çº§å¹²è´§åˆ†äº« </p>
<p>=============================================</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/å¸¸è§é—®é¢˜æ€»ç»“/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/å¸¸è§é—®é¢˜æ€»ç»“/" itemprop="url">å¸¸è§é—®é¢˜æ€»ç»“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-09T17:14:16+08:00">
                2018-11-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/å¸¸è§é—®é¢˜æ€»ç»“/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/å¸¸è§é—®é¢˜æ€»ç»“/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>å‰ç«¯å‘åç«¯ä¼ å€¼ï¼š</p>
<ul>
<li><p>Button å’Œform</p>
</li>
<li><ul>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goUpdatePage</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.location.href = <span class="string">"$&#123;pageContext.request.contextPath&#125;/user/editcontroller?id="</span> + id;</span><br><span class="line">&#125;      </span><br><span class="line"> &lt;button type=<span class="string">"button"</span> onclick=<span class="string">"goUpdatePage($&#123;user.id&#125;)"</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-primary btn-xs"</span>&gt;</span><br><span class="line">    &lt;i</span><br><span class="line">            <span class="class"><span class="keyword">class</span></span>=<span class="string">" glyphicon glyphicon-pencil"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>å¼€å‘ä¸­serviceå±‚ å¿…é¡»è¦å†™ @serviceæ³¨è§£</p>
</li>
<li><p>âš ï¸serviceä¸­ä¸è¦åŠ @serviceã€‚åœ¨serviceçš„å®ç°serviceimlä¸­åŠ @serviceæ³¨è§£</p>
</li>
<li><p>å¼€å‘çš„é¡ºåº ä»å‰ç«¯ä¼ å€¼åˆ°Controller å†åˆ° service å†åˆ°serviceimpl å†åˆ°userdao å†åˆ°mybatis.xmlå†åˆ°æ•°æ®åº“ æ•°æ®åº“è¿”å›å‰ç«¯é¡µé¢</p>
</li>
<li><p>å¼•å…¥mybatis çš„å¤šä¸ªmapperçš„é…ç½®æ–‡ä»¶ mapper.xml  Spring Boot çš„æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mybatis.mapper-locations=classpath:mybatis/mapper/*.xml</span><br></pre></td></tr></table></figure>
</li>
<li><p>###ideaè­¦å‘Šï¼šField injection is not recommended</p>
</li>
<li><p>####Springbootå¼€å‘ Daoä¸­UserDao RoleDaoä¸­è¦åŠ  @Mapperæ³¨è§£</p>
<p># </p>
</li>
<li><h1 id=""><a href="#" class="headerlink" title=""></a><img src="/Users/apple/Desktop/å±å¹•å¿«ç…§ 2018-11-14 ä¸‹åˆ1.19.50.png" alt="å±å¹•å¿«ç…§ 2018-11-14 ä¸‹åˆ1.19.50"></h1></li>
<li><p>importå’Œopené¡¹ç›®æ˜¯ä¸ä¸€æ ·çš„ å‡ºç°ä¸Šé¢çš„æƒ…å†µè¦importä¸€ä¸‹å•Š å…„ide</p>
</li>
<li><h3 id="Caused-by-org-apache-ibatis-type-TypeException-Could-not-resolve-type-alias-â€˜BaseResultMapâ€™"><a href="#Caused-by-org-apache-ibatis-type-TypeException-Could-not-resolve-type-alias-â€˜BaseResultMapâ€™" class="headerlink" title="Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias â€˜BaseResultMapâ€™"></a>Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias â€˜BaseResultMapâ€™</h3></li>
<li><p>Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Ca</p>
<blockquote>
<p> çœ‹åˆ°é‚£ä¸ª<strong>resultType</strong>äº†ä¹ˆï¼Œå°±æ˜¯å®ƒæƒ¹çš„ç¥¸ï¼Œè¿™é‡ŒæŠŠ<strong>resultType</strong>æ”¹ä¸º<strong>resultMap</strong>å°±OKå•¦ï¼Œé‡å¯tomcatï¼Œæœ¨æœ‰å¼‚å¸¸å•¦</p>
</blockquote>
</li>
</ul>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxtic1bppsj309801naa1.jpg" alt="image-20181114135152950"></p>
<blockquote>
<p>è·³è½¬è§†å›¾ ç”¨å­—ç¬¦ä¸²å“ˆ </p>
</blockquote>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxtic5ntolj305505g3yh.jpg" alt="image-20181117115951176"></p>
<p>å¼€å‘ä¸­å‰ç«¯çš„imgè¦æ”¾åˆ°å’Œæ¡†æ¶çš„åŒä¸€ç›®å½•åŠä¸‹é¢å“ˆã€‚å…„die</p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection connection = ConnectionUtils.getConnection();</span><br></pre></td></tr></table></figure>
<p>ç”¨ç±».æ–¹æ³•ï¼ˆï¼‰.var å¯ä»¥ç›´æ¥è¿”å›è¯¥å¯¹è±¡çš„è¿”å›å¯¹è±¡</p>
<p>Sting s=â€testâ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(s);===s.sout</span><br></pre></td></tr></table></figure>
<p><img src="../../../../Users/apple/Library/Application Support/typora-user-images/image-20190131103713601.png" alt="image-20190131103713601"></p>
<hr>
<h1 id="æ—¶é—´é—®é¢˜"><a href="#æ—¶é—´é—®é¢˜" class="headerlink" title="æ—¶é—´é—®é¢˜"></a>æ—¶é—´é—®é¢˜</h1><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g008jkl0ryj30k40boq4n.jpg" alt="image-20190209160806502"></p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_34160679/article/details/80651027" target="_blank" rel="noopener">https://blog.csdn.net/qq_34160679/article/details/80651027</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc.url     = jdbc:mysql:/xxx:3306/zhongfubang?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=Asia/Shanghai</span><br></pre></td></tr></table></figure>
<h1 id="Linux-æ— æ³•ä½¿ç”¨å‘½ä»¤"><a href="#Linux-æ— æ³•ä½¿ç”¨å‘½ä»¤" class="headerlink" title="Linux æ— æ³•ä½¿ç”¨å‘½ä»¤"></a>Linux æ— æ³•ä½¿ç”¨å‘½ä»¤</h1><h2 id="export-PATH-usr-local-sbin-usr-local-bin-sbin-bin-usr-sbin-usr-bin-root-bin"><a href="#export-PATH-usr-local-sbin-usr-local-bin-sbin-bin-usr-sbin-usr-bin-root-bin" class="headerlink" title="export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin"></a>export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</h2><p>ä¿®æ”¹/etc/profileæ–‡ä»¶ï¼Œé…ç½®mavenç¯å¢ƒå˜é‡æ—¶å€™å‡ºé—®é¢˜äº†ï¼Œå¿˜è®°åŠ äº† $PATH: ç„¶åsource /etc/profile æ¥ä¸‹æ¥å°±æ˜¯ ll,ls,vimå‘½ä»¤éƒ½ç”¨ä¸äº†ã€‚ã€‚ã€‚å®³çš„æˆ‘ä»¥ä¸º<a href="https://www.baidu.com/s?wd=xshell&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank" rel="noopener">xshell</a>æˆ‘æ›´æ–°äº†å‘¢ï¼Œå¸è½½é‡è£…äº†è¿˜æ˜¯æ²¡ç”¨ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20181204225756905.png" alt="img"></p>
<p>è§£å†³åŠæ³•å¦‚ä¸‹å›¾ï¼Œæ‰§è¡Œè¿™ä¸¤æ¡å‘½ä»¤ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g0g5vwo6mtj30j6014mx0.jpg" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line"> </span><br><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>
<h1 id="SpringBoot-ä¸»ç±»æŠ¥é”™"><a href="#SpringBoot-ä¸»ç±»æŠ¥é”™" class="headerlink" title="SpringBoot ä¸»ç±»æŠ¥é”™"></a>SpringBoot ä¸»ç±»æŠ¥é”™</h1><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g0oi0rg7sqj30ep04qgn0.jpg" alt="image-20190302154936111"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ideaä¸­ä½¿ç”¨ç»ˆç«¯ ç„¶åä½¿ç”¨mvn installå‘½ä»¤ã€‚åˆ æ‰æœ‰é—®é¢˜çš„jaråŒ…é‡æ–°ä¸‹è½½ã€‚ è§£å†³é—®é¢˜</span><br></pre></td></tr></table></figure>
<h1 id="Ideaç›¸å…³"><a href="#Ideaç›¸å…³" class="headerlink" title="Ideaç›¸å…³"></a>Ideaç›¸å…³</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è£…ä¸€ä¸ªlombokæ’ä»¶æ‰ä¼šæœ‰get setæ–¹æ³•</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MybatisPluginCodesæ’ä»¶</span><br><span class="line">  findBy...</span><br><span class="line">  çœ‹æ–‡æ¡£ å¸è½½å…¶ä»–ç›¸å…³æ’ä»¶</span><br><span class="line">  commond+1 åˆ›å»ºSQlè¯­å¥</span><br></pre></td></tr></table></figure>
<h1 id="self4j-log4jçš„é—®é¢˜"><a href="#self4j-log4jçš„é—®é¢˜" class="headerlink" title="self4j log4jçš„é—®é¢˜"></a>self4j log4jçš„é—®é¢˜</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggerFactory is not a Logback LoggerContext but Logback is on the classpath. Either remove Logback or the competing implementation</span><br></pre></td></tr></table></figure>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1g1124u0uuij30qj0e0wi9.jpg" alt="image-20190313123221966"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;exclusions&gt;</span><br><span class="line">                &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;</span><br><span class="line">                   &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;</span><br><span class="line">                &lt;/exclusion&gt;</span><br><span class="line">           &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">---------------------</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Springboot-ä¾èµ–å†²çª"><a href="#Springboot-ä¾èµ–å†²çª" class="headerlink" title="Springboot ä¾èµ–å†²çª"></a>Springboot ä¾èµ–å†²çª</h1><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g1155hk802j316r0sux04.jpg" alt="image-20190313141644871"></p>
<hr>
<h2 id="Maven-logsé‡åˆ°é”™è¯¯-é‡å¯Idea-æˆ–è€…å…³æœºé‡å¯ç”µè„‘"><a href="#Maven-logsé‡åˆ°é”™è¯¯-é‡å¯Idea-æˆ–è€…å…³æœºé‡å¯ç”µè„‘" class="headerlink" title="Maven logsé‡åˆ°é”™è¯¯ é‡å¯Idea æˆ–è€…å…³æœºé‡å¯ç”µè„‘"></a>Maven logsé‡åˆ°é”™è¯¯ é‡å¯Idea æˆ–è€…å…³æœºé‡å¯ç”µè„‘</h2><hr>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g13nelpo6bj30rb0i9gps.jpg" alt="image-20190315181918906"></p>
<hr>
<h1 id="SpringBoot-Mybatis-æ•´åˆé—®é¢˜ï¼š"><a href="#SpringBoot-Mybatis-æ•´åˆé—®é¢˜ï¼š" class="headerlink" title="SpringBoot +Mybatis æ•´åˆé—®é¢˜ï¼š"></a>SpringBoot +Mybatis æ•´åˆé—®é¢˜ï¼š</h1><p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g13o3g3lewj31dh05ytel.jpg" alt="image-20190315184317660"></p>
<p>ä½¿ç”¨Yml æ·»åŠ mapperxml</p>
<h1 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1g13o412h65j30n30bxq44.jpg" alt="image-20190315184344150"></h1><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/&#123;id&#125;&quot;)</span><br><span class="line"> @ResponseBody</span><br><span class="line"> public Mydb01 list(@PathVariable(&quot;id&quot;) Integer id) &#123;//@PathVariable(&quot;id&quot;)  idæ˜¯ä¸æ˜¯ä¸€å®šè¦å†™</span><br><span class="line">     return userService.selectByPrimaryKey(id);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1g13o4kjhurj309a04c3ys.jpg" alt="image-20190315184418672"></p>
<hr>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/Iterm2é…ç½®/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/Iterm2é…ç½®/" itemprop="url">ITerm2çš„é…ç½®</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-09T09:58:44+08:00">
                2018-11-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/Iterm2é…ç½®/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/Iterm2é…ç½®/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ITerm2çš„é…ç½®é—®é¢˜"><a href="#ITerm2çš„é…ç½®é—®é¢˜" class="headerlink" title="ITerm2çš„é…ç½®é—®é¢˜"></a>ITerm2çš„é…ç½®é—®é¢˜</h2><h1 id="æ¯æ¬¡vimçš„æ—¶å€™ä¸€å®šè¦sourceä¸€ä¸‹-å•Š-xiong-die"><a href="#æ¯æ¬¡vimçš„æ—¶å€™ä¸€å®šè¦sourceä¸€ä¸‹-å•Š-xiong-die" class="headerlink" title="æ¯æ¬¡vimçš„æ—¶å€™ä¸€å®šè¦sourceä¸€ä¸‹ å•Š xiong die"></a>æ¯æ¬¡vimçš„æ—¶å€™ä¸€å®šè¦sourceä¸€ä¸‹ å•Š xiong die</h1><blockquote>
<p>å­¦ä¹ èµ„æº</p>
<p><a href="https://www.jianshu.com/p/9c3439cc3bdb" target="_blank" rel="noopener">https://www.jianshu.com/p/9c3439cc3bdb</a> ç®€ä¹¦</p>
<p><a href="https://github.com/sirius1024/iterm2-with-oh-my-zsh" target="_blank" rel="noopener">https://github.com/sirius1024/iterm2-with-oh-my-zsh</a> Github</p>
<p><a href="https://www.cnblogs.com/xishuai/p/mac-iterm2.html" target="_blank" rel="noopener">https://www.cnblogs.com/xishuai/p/mac-iterm2.html</a> åšå®¢å›­</p>
<p><a href="https://blog.csdn.net/z3512498/article/details/51245853" target="_blank" rel="noopener">https://blog.csdn.net/z3512498/article/details/51245853</a> CSDN æ”¹å˜ç”¨æˆ·å </p>
<blockquote>
<p>å¿…é¡»è¦ä½¿ç”¨vimçš„å‘½ä»¤ä¿®æ”¹é…ç½®</p>
</blockquote>
</blockquote>
<h3 id="å¸¸è§çš„å‘½ä»¤"><a href="#å¸¸è§çš„å‘½ä»¤" class="headerlink" title="å¸¸è§çš„å‘½ä»¤"></a>å¸¸è§çš„å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.zshrc</span><br><span class="line">source ~/.zshrc  ï¼ˆsoucreé…ç½®æ–‡ä»¶ è®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼‰</span><br><span class="line">æ–‡ä»¶æ”¾åœ¨itermgitä¸‹é¢ å¿…é¡»è¦åœ¨ä¸»é¢˜å¯ä»¥ä½¿ç”¨çš„æƒ…å†µä¸‹ è¿›è¡Œä»¥ä¸Šçš„é…ç½®</span><br><span class="line">å¿«æ·é”®å†²çª å–è¯ copyå¤±æ•ˆ</span><br></pre></td></tr></table></figure>
<h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><ul>
<li>å®‰è£…å®Œæˆåï¼Œåœ¨/binç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªzshçš„æ–‡ä»¶ã€‚</li>
</ul>
<p>Macç³»ç»Ÿé»˜è®¤ä½¿ç”¨dashä½œä¸ºç»ˆç«¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ä¿®æ”¹é»˜è®¤ä½¿ç”¨zshï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³ä¿®æ”¹å›é»˜è®¤dashï¼ŒåŒæ ·ä½¿ç”¨chshå‘½ä»¤å³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/bash</span><br></pre></td></tr></table></figure>
<p>export MAVEN_HOME=/Java/apache-maven-3.5.4 </p>
<p>export PATH=${PATH}:${MAVEN_HOME}/bin </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/08/Docker/Docker-web/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/08/Docker/Docker-web/" itemprop="url">docker-web</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-08T10:20:30+08:00">
                2018-11-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/08/Docker/Docker-web/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/08/Docker/Docker-web/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p> å­¦ä¹ åœ°å€* <a href="https://www.imooc.com/video/14624ï¼ˆæ…•è¯¾ç½‘ï¼‰-6âƒ£åˆ˜æœå›½" target="_blank" rel="noopener">https://www.imooc.com/video/14624ï¼ˆæ…•è¯¾ç½‘ï¼‰-6âƒ£åˆ˜æœå›½</a></p>
</blockquote>
<p>#ç¬¬ä¸€ä¸ª java webé¡¹ç›® ï¼ˆSpringBoot é¡¹ç›®æ‰“åŒ…æˆä¸€ä¸ªwaråŒ…çš„æ–¹å¼ï¼‰</p>
<h3 id="ä¸€åˆ¶ä½œè‡ªå·±çš„æ™¯è±¡"><a href="#ä¸€åˆ¶ä½œè‡ªå·±çš„æ™¯è±¡" class="headerlink" title="ä¸€åˆ¶ä½œè‡ªå·±çš„æ™¯è±¡"></a>ä¸€åˆ¶ä½œè‡ªå·±çš„æ™¯è±¡</h3><ul>
<li><p>Dockerfile</p>
</li>
<li><p>docker build</p>
<hr>
<ul>
<li>é¦–å…ˆéœ€è¦ä¸€ä¸ªwaræ–‡ä»¶ æ‹·è´åœ¨æ¡Œé¢ä¸Š</li>
</ul>
<blockquote>
<p>Docker images</p>
</blockquote>
</li>
</ul>
<h5 id="1-å»ºç«‹ä¸€ä¸ªDockerfile"><a href="#1-å»ºç«‹ä¸€ä¸ªDockerfile" class="headerlink" title="1.å»ºç«‹ä¸€ä¸ªDockerfile"></a>1.å»ºç«‹ä¸€ä¸ªDockerfile</h5><blockquote>
<p>vim Dockerfile</p>
</blockquote>
<h6 id="2-ä¸‹è½½Tomcaté•œåƒ"><a href="#2-ä¸‹è½½Tomcaté•œåƒ" class="headerlink" title="2. ä¸‹è½½Tomcaté•œåƒ"></a>2. ä¸‹è½½Tomcaté•œåƒ</h6><blockquote>
<p>ç½‘æ˜“é•œåƒä¸­å¿ƒ æ‰¾Tomcatçš„é•œåƒ <a href="https://c.163yun.com/hub#/m/home/" target="_blank" rel="noopener">https://c.163yun.com/hub#/m/home/</a></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1o7j48uj30z90583z1.jpg" alt="image-20181108171728002"></p>
</blockquote>
<p>ï¼ˆåŒ…æ‹¬JDK Tomcatï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hub.c.163.com/library/tomcat:latest</span><br></pre></td></tr></table></figure>
<p> <img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1ocd68lj30p10bjdik.jpg" alt="image-20181108172737831"></p>
<p>ç«™åœ¨å·¨äººçš„è‚©ä¸Š</p>
<h5 id="3-ç¼–è¾‘Dockerfile"><a href="#3-ç¼–è¾‘Dockerfile" class="headerlink" title="3.ç¼–è¾‘Dockerfile"></a>3.ç¼–è¾‘Dockerfile</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åœ¨Macç»ˆç«¯ä¸­ä½¿ç”¨vimç¼–è¾‘æ–‡ä»¶æ­¥éª¤</span><br><span class="line">1.  cd   æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„  &lt;å›è»Š&gt;</span><br><span class="line">2. è¼¸å…¥  vim æ–‡ä»¶å &lt;å›è»Š&gt;</span><br><span class="line">3. æŒ‰ä¸‹ i éµä¾†ç¼–è¾‘æ–‡æœ¬æ–‡å­—</span><br><span class="line">4. é€€å‡ºvimç·¨è¼¯å™¨ï¼š</span><br><span class="line">     ä¸ä¿å­˜å¹¶é€€å‡º  &lt;ESC&gt;   :q!   &lt;å›è»Š&gt;</span><br><span class="line">     ä¿å­˜å¹¶é€€å‡º     &lt;ESC&gt;   :wq   &lt;å›è»Š&gt;</span><br></pre></td></tr></table></figure>
<p>from hub.c.163.com/library/tomcat</p>
<p>MAINTAINER Freemana2017 <a href="mailto:1047629166@qq.com" target="_blank" rel="noopener">1047629166@qq.com</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/apple/Desktop/Dockerweb</span><br><span class="line">ls</span><br><span class="line">&gt; mv atcrodfunding3_ssm-0.0.1-SNAPSHOT.war atcrod.war</span><br><span class="line">mv atcrodfunding3_ssm-0.0.1-SNAPSHOT.war atcrod.war (ç”¨MV é‡æ–°å‘½åä¸€ä¸‹)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>è¿›å…¥æ–‡ä»¶å¤¹é‡Œé¢ ç¼–å†™Dockerfile</p>
</li>
<li><p>å­¦ä¼šçœ‹é•œåƒçš„è¯´æ˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">How to use this image.</span><br><span class="line"></span><br><span class="line">Run the default Tomcat server (CMD [\&quot;catalina.sh\&quot;, \&quot;run\&quot;]):</span><br><span class="line"></span><br><span class="line">$ docker run -it --rm tomcat:8.0</span><br><span class="line">You can test it by visiting http://container-ip:8080 in a browser or, if you need access outside the host, on port 8888:</span><br><span class="line"></span><br><span class="line">$ docker run -it --rm -p 8888:8080 tomcat:8.0</span><br><span class="line">You can then go to http://localhost:8888 or http://host-ip:8888 in a browser.</span><br><span class="line"></span><br><span class="line">The default Tomcat environment in the image for versions 7 and 8 is:</span><br><span class="line"></span><br><span class="line">â­ï¸CATALINA_BASE:   /usr/local/tomcat</span><br><span class="line">â­ï¸CATALINA_HOME:   /usr/local/tomcat</span><br><span class="line">CATALINA_TMPDIR: /usr/local/tomcat/temp</span><br><span class="line">JRE_HOME:        /usr</span><br><span class="line">CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1ã€‚ç¼–å†™Dockerfile-æ–‡ä»¶â€“Dockerfile"><a href="#1ã€‚ç¼–å†™Dockerfile-æ–‡ä»¶â€“Dockerfile" class="headerlink" title="1ã€‚ç¼–å†™Dockerfile æ–‡ä»¶â€“Dockerfile"></a>1ã€‚ç¼–å†™Dockerfile æ–‡ä»¶â€“Dockerfile</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from hub.c.163.com/library/tomcat</span><br><span class="line"></span><br><span class="line">MAINTAINER Freemana2017 1047629166@qq.com</span><br><span class="line"></span><br><span class="line">COPY atcrod.war /usr/local/tomcat/webapps</span><br></pre></td></tr></table></figure>
<h3 id="2-åˆ›å»ºé•œåƒ-â€“docker-build"><a href="#2-åˆ›å»ºé•œåƒ-â€“docker-build" class="headerlink" title="2.åˆ›å»ºé•œåƒ â€“docker build"></a>2.åˆ›å»ºé•œåƒ â€“docker build</h3><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1obbfgjj30hu07q0uk.jpg" alt="image-20181108174858497"></p>
<h3 id="3-æŸ¥çœ‹é•œåƒâ€“docker-images"><a href="#3-æŸ¥çœ‹é•œåƒâ€“docker-images" class="headerlink" title="3.æŸ¥çœ‹é•œåƒâ€“docker images"></a>3.æŸ¥çœ‹é•œåƒâ€“docker images</h3><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1o9fhwsj30uh03s3zp.jpg" alt="image-20181108174929561"></p>
<h2 id="4-ç»™é•œåƒå†™åå­—-docker-build-t-atcrod-latest"><a href="#4-ç»™é•œåƒå†™åå­—-docker-build-t-atcrod-latest" class="headerlink" title="4.ç»™é•œåƒå†™åå­— docker build -t atcrod:latest ."></a>4.ç»™é•œåƒå†™åå­— docker build -t atcrod:latest .</h2><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1obvr9lj30l7080q4p.jpg" alt="image-20181108175158795"></p>
<h3 id="5-å†æ¬¡æŸ¥çœ‹é•œåƒ-docker-images"><a href="#5-å†æ¬¡æŸ¥çœ‹é•œåƒ-docker-images" class="headerlink" title="5.å†æ¬¡æŸ¥çœ‹é•œåƒ docker images"></a>5.å†æ¬¡æŸ¥çœ‹é•œåƒ docker images</h3><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1ocxbkbj30wq049mym.jpg" alt="image-20181108175309803"></p>
<hr>
<hr>
<hr>
<hr>
<h1 id="äºŒè¿è¡Œè‡ªå·±çš„å®¹å™¨"><a href="#äºŒè¿è¡Œè‡ªå·±çš„å®¹å™¨" class="headerlink" title="###äºŒè¿è¡Œè‡ªå·±çš„å®¹å™¨"></a>###äºŒè¿è¡Œè‡ªå·±çš„å®¹å™¨</h1><h3 id="1-docker-run-d-p-8888-8080-atcrod"><a href="#1-docker-run-d-p-8888-8080-atcrod" class="headerlink" title="1.docker run -d -p 8888:8080 atcrod"></a>1.docker run -d -p 8888:8080 atcrod</h3><blockquote>
<p>8888æœ¬æœºçš„ç«¯å£å·ã€‚8080Tomcatçš„ç«¯å£å· å»163.comæŸ¥è¯¢ atcrodé•œåƒçš„åå­—</p>
</blockquote>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1oaw0vvj30mx01it99.jpg" alt="image-20181108175738036"></p>
<h4 id="2-docker-ps"><a href="#2-docker-ps" class="headerlink" title="2.docker ps"></a>2.docker ps</h4><blockquote>
<p>æŸ¥çœ‹Tomcatçš„è¿›ç¨‹ æ£€æŸ¥å®¹å™¨æ˜¯ä¸æ˜¯å¯åŠ¨å•¦</p>
</blockquote>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1o9yl4qj310e0283z9.jpg" alt="image-20181108175751244"></p>
<h3 id="3-netstat-na-grep-8888"><a href="#3-netstat-na-grep-8888" class="headerlink" title="3.netstat -na|grep 8888"></a>3.netstat -na|grep 8888</h3><blockquote>
<p>æ£€æŸ¥ç«¯å£æ˜¯ä¸æ˜¯å­˜åœ¨äº†  è¾“å…¥localhost:8888æµ‹è¯•Tomcatæ˜¯å¦å¯åŠ¨å•¦</p>
</blockquote>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1oagkq1j30os02oq3i.jpg" alt="image-20181108180034419"></p>
<hr>
<hr>
<hr>
<hr>
<hr>
<h1 id="âš ï¸-ä»¥ä¸Šåªæ˜¯webé¡¹ç›®åœ¨Dockerä¸­çš„éƒ¨ç½²é¡¹ç›®"><a href="#âš ï¸-ä»¥ä¸Šåªæ˜¯webé¡¹ç›®åœ¨Dockerä¸­çš„éƒ¨ç½²é¡¹ç›®" class="headerlink" title="âš ï¸ ä»¥ä¸Šåªæ˜¯webé¡¹ç›®åœ¨Dockerä¸­çš„éƒ¨ç½²é¡¹ç›®"></a>âš ï¸ ä»¥ä¸Šåªæ˜¯webé¡¹ç›®åœ¨Dockerä¸­çš„éƒ¨ç½²é¡¹ç›®</h1><h1 id="3-Docker-éƒ¨ç½²SpringBoot-webé¡¹ç›®"><a href="#3-Docker-éƒ¨ç½²SpringBoot-webé¡¹ç›®" class="headerlink" title="3.Docker éƒ¨ç½²SpringBoot webé¡¹ç›®"></a>3.Docker éƒ¨ç½²SpringBoot webé¡¹ç›®</h1><blockquote>
<p>å­¦ä¹ èµ„æºæ±‡æ€»</p>
<p><a href="http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html" target="_blank" rel="noopener">http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html</a></p>
<p><a href="https://blog.csdn.net/weixin_39800144/article/details/79214978" target="_blank" rel="noopener">https://blog.csdn.net/weixin_39800144/article/details/79214978</a></p>
<p><a href="https://blog.csdn.net/weixin_39800144/article/details/79213276" target="_blank" rel="noopener">https://blog.csdn.net/weixin_39800144/article/details/79213276</a></p>
<p><a href="https://bingohuang.com/spring-boot-docker/" target="_blank" rel="noopener">https://bingohuang.com/spring-boot-docker/</a></p>
</blockquote>
<blockquote>
<p>FROM java:8</p>
<p>VOLUME /tmp</p>
<p>COPY target/tran4spd-1.0-SNAPSHOT.jar resource.jar.   #è¿™è¾¹æ”¾çš„æ˜¯Dockeréƒ¨ç½²çš„jaråŒ…çš„ä½ç½® ç»å¯¹è·¯å¾„</p>
<p>RUN bash -c â€œtouch /resource.jarâ€</p>
<p>EXPOSE 8080</p>
<p>ENTRYPOINT [â€œjavaâ€,â€-jarâ€,â€resource.jarâ€]</p>
<p># docker run -d -p 18080:8099 â€“name docker-resource leesia/resource:1.0</p>
</blockquote>
<p> æ³¨æ„java-jaræ— æ³•è¿è¡ŒTomcatè¦å¤–ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/servlet-api --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.5&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>##æ–‡ä»¶è·¯å¾„ä¸è¦ç”¨ä¸­æ–‡ï¼ï¼ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/07/Docker/Docker-SpringBoot/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/07/Docker/Docker-SpringBoot/" itemprop="url">Docker SpringBoot</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-07T18:04:37+08:00">
                2018-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/SpringBoot/" itemprop="url" rel="index">
                    <span itemprop="name">SpringBoot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/07/Docker/Docker-SpringBoot/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/07/Docker/Docker-SpringBoot/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="DockerMachineåº”ç”¨"><a href="#DockerMachineåº”ç”¨" class="headerlink" title="DockerMachineåº”ç”¨"></a>DockerMachineåº”ç”¨</h2><h4 id="æ³¨æ„æ•´ä¸ªè¿‡ç¨‹è¦ç­‰å¾…ä¸€ä¸‹"><a href="#æ³¨æ„æ•´ä¸ªè¿‡ç¨‹è¦ç­‰å¾…ä¸€ä¸‹" class="headerlink" title="æ³¨æ„æ•´ä¸ªè¿‡ç¨‹è¦ç­‰å¾…ä¸€ä¸‹"></a>æ³¨æ„æ•´ä¸ªè¿‡ç¨‹è¦ç­‰å¾…ä¸€ä¸‹</h4><blockquote>
<p>å‚è€ƒ<a href="https://study.163.com/course/courseLearn.htm?courseId=1002892012#/learn/video?lessonId=1003309140&amp;courseId=1002892012" target="_blank" rel="noopener">https://study.163.com/course/courseLearn.htm?courseId=1002892012#/learn/video?lessonId=1003309140&amp;courseId=1002892012</a></p>
<p>ç½‘æ˜“äº‘è¯¾å ‚ åŠ¨æ‰‹ç©Docker</p>
</blockquote>
<ul>
<li>å®‰è£…DockerMachine</li>
<li>docker-machine ls    tcp://192.168.99.100:2376   nameï¼šcloudcomb</li>
</ul>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nhvbpxj30v502gq3j.jpg" alt="image-20181107181833492"></p>
<ul>
<li><p>docker-machine create â€“driver virtualbox cloudcomb </p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1niejwmj314m0j0agt.jpg" alt="image-20181107181903652"></p>
</li>
<li><p>Docker-machine env cloudcomb</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nnekkpj30oe05ngnb.jpg" alt="image-20181107182121568"></p>
</li>
</ul>
<p>âš ï¸ç¬¬å››ä¸ªå˜é‡evalè¯´çš„æ˜¯å½“å‰Dockermachineçš„åå­—æ˜¯â€”cloudcomb</p>
<ul>
<li><p>eval $(docker-machine env cloudcomb) æ‹·è´æ”¾åˆ°åº•ä¸‹</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1njfqr1j30nw01mdg7.jpg" alt="image-20181107182325486"></p>
</li>
<li><p>ä½¿ç”¨ç½‘æ˜“èœ‚å·¢</p>
</li>
<li><p>Docker run hub.c163.com/library/busybox:latest echon hello world ï¼ˆunableã€‚ã€‚è¿™ä¸ªè¿‡ç¨‹è¦ç­‰å¾…å•Šï¼‰â­ï¸</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nuv8l5j30uv05vq53.jpg" alt="image-20181107182746194"></p>
</li>
<li><p>docker-machine rm cloudcomb åˆ é™¤docker-machine</p>
</li>
</ul>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nr9y6gj30vk06atak.jpg" alt="image-20181107182909832"></p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1no2f8zj310i0iywgq.jpg" alt="image-20181107183004383"></p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nya7tbj30vj0gvwh6.jpg" alt="image-20181107183018420"></p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1npbkc8j30vb0dowgf.jpg" alt="image-20181107183034881"></p>
<h1 id="SpringBootæ•´åˆDocker"><a href="#SpringBootæ•´åˆDocker" class="headerlink" title="SpringBootæ•´åˆDocker"></a>SpringBootæ•´åˆDocker</h1><blockquote>
<p>Emmmm.ç­‰æˆ‘æœ‰é’±äº† æŠŠXnipå»æ‰å“ˆå“ˆ</p>
</blockquote>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1npwdhcj30qd1niq9k.jpg" alt="image-20181107183409783"></p>
<ul>
<li><p>ä¸‹è½½æºç <a href="https://github.com/bingohuang/spring-boot-docker" target="_blank" rel="noopener">https://github.com/bingohuang/spring-boot-docker</a></p>
<blockquote>
<p>Git é€šè¿‡å‘½ä»¤è¡Œä¸‹è½½æ–‡ä»¶ å…ˆcdä¸€ä¸‹æŒ‡å®šä¸€ä¸‹ä¸‹è½½çš„è·¯å¾„</p>
</blockquote>
</li>
<li><p>å¯¼å…¥é¡¹ç›®åˆ°Idea ç„¶åæŸ¥çœ‹ä¸€ä¸‹æºç </p>
</li>
<li><p>è¿è¡Œä¸€ä¸‹é¡¹ç›®ï¼ˆè®¿é—®ä¸€ä¸‹ æµ‹è¯•ä¸€ä¸‹ï¼‰</p>
<h2 id="Docker-SpringBootéƒ¨ç½²é¡¹ç›®"><a href="#Docker-SpringBootéƒ¨ç½²é¡¹ç›®" class="headerlink" title="Docker SpringBootéƒ¨ç½²é¡¹ç›®"></a>Docker SpringBootéƒ¨ç½²é¡¹ç›®</h2></li>
</ul>
<p>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</p>
<h3 id="1-installé¡¹ç›®"><a href="#1-installé¡¹ç›®" class="headerlink" title="1.installé¡¹ç›®"></a>1.installé¡¹ç›®</h3><p>  <img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nqqkndj308301d0sq.jpg" alt="image-20181107185602118"></p>
<blockquote>
<p>æ‰¾åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶ æ”¾åˆ°æ¡Œé¢ä¸Š</p>
</blockquote>
<h3 id="2-å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå¥½åƒè¦æŠŠjaræ”¹åæˆgs-spring-boot-docker-0-0-1-jar"><a href="#2-å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå¥½åƒè¦æŠŠjaræ”¹åæˆgs-spring-boot-docker-0-0-1-jar" class="headerlink" title="2.å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå¥½åƒè¦æŠŠjaræ”¹åæˆgs-spring-boot-docker-0.0.1.jar"></a>2.å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå¥½åƒè¦æŠŠjaræ”¹åæˆgs-spring-boot-docker-0.0.1.jar</h3><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1nypf5ij309k01jglr.jpg" alt="image-20181107191351622"></p>
<h3 id="3-cdåˆ°æ–‡ä»¶ä¸‹-lsä¸€ä¸‹"><a href="#3-cdåˆ°æ–‡ä»¶ä¸‹-lsä¸€ä¸‹" class="headerlink" title="3.cdåˆ°æ–‡ä»¶ä¸‹ lsä¸€ä¸‹"></a>3.cdåˆ°æ–‡ä»¶ä¸‹ lsä¸€ä¸‹</h3><h3 id="4-æ‰§è¡Œ-Ë›docker-version"><a href="#4-æ‰§è¡Œ-Ë›docker-version" class="headerlink" title="4.æ‰§è¡Œ  Ë›docker version"></a>4.æ‰§è¡Œ  Ë›docker version</h3><p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nu3j80j30gp0dcwgb.jpg" alt="image-20181107191444666"></p>
<h3 id="5-æ‰§è¡Œ-docker-machine-env"><a href="#5-æ‰§è¡Œ-docker-machine-env" class="headerlink" title="5.æ‰§è¡Œ docker-machine env"></a>5.æ‰§è¡Œ docker-machine env</h3><p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nmu4mmj30m405agn2.jpg" alt="image-20181107191515590"></p>
<h3 id="6-æ‰§è¡Œeval-docker-machine-env-ï¼ˆå¤åˆ¶åé¢çš„ç¬¬å››æ¡ï¼‰"><a href="#6-æ‰§è¡Œeval-docker-machine-env-ï¼ˆå¤åˆ¶åé¢çš„ç¬¬å››æ¡ï¼‰" class="headerlink" title="6.æ‰§è¡Œeval $(docker-machine env)ï¼ˆå¤åˆ¶åé¢çš„ç¬¬å››æ¡ï¼‰"></a>6.æ‰§è¡Œeval $(docker-machine env)ï¼ˆå¤åˆ¶åé¢çš„ç¬¬å››æ¡ï¼‰</h3><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nkk2c6j30j6015q39.jpg" alt="image-20181107191547911"></p>
<p>tcp://192.168.99.100:2376192.168.99.100</p>
<p> tcp://127.0.0.1:2376 tcp://127.0.0.1:2376</p>
<p>###7.docker versionï¼ˆæ²¡æœ‰-ï¼‰</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nwvgcbj30ib0de40e.jpg" alt="image-20181107191658043"></p>
<h3 id="8-lsä¸€ä¸‹ç›®å½•"><a href="#8-lsä¸€ä¸‹ç›®å½•" class="headerlink" title="8.lsä¸€ä¸‹ç›®å½•"></a>8.lsä¸€ä¸‹ç›®å½•</h3><p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nk29s4j30k301l0t2.jpg" alt="image-20181107191730046"></p>
<h3 id="9-docker-build-t-cloudcomb-sun-1-0"><a href="#9-docker-build-t-cloudcomb-sun-1-0" class="headerlink" title="9.docker build -t cloudcomb/sun:1.0 ."></a>9.docker build -t cloudcomb/sun:1.0 .</h3><blockquote>
<p> ï¼ˆæ¡Œé¢ä¸Šè¦æœ‰jaråŒ…å’Œdockerfilede æ–‡ä»¶ï¼‰</p>
</blockquote>
<p><img src="/Users/apple/Library/Application Support/typora-user-images/image-20181107191826890.png" alt="image-20181107191826890"></p>
<blockquote>
<p>æ­¤æ—¶æŠ¥é”™ æ²¡æœ‰gs-spring-boot-docker.jaræ–‡ä»¶ å…¶å®lsçš„æ—¶å€™å°±åº”è¯¥æ˜¯gs-spring-boot-docker.jar è¿™å„¿æ˜¯ä¸ªbugã€‚</p>
<p>è§£å†³åŠæ³• æ”¹jaråŒ…å æ·»åŠ gså‰ç¼€</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://docker.mirrors.ustc.edu.cn</span><br></pre></td></tr></table></figure>
<h3 id="10ã€‚docker-build-t-cloudcomb-sun-1-0-ï¼ˆå¤§ä½¬è¯´è¿™ä¸€æ­¥æ˜¯æ‹‰å–é•œåƒã€‚ç”¨åŠ é€Ÿå™¨-æ”¹ååé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨å¤§ä½¬ç½‘æ˜“äº‘çš„Dokceré•œåƒ"><a href="#10ã€‚docker-build-t-cloudcomb-sun-1-0-ï¼ˆå¤§ä½¬è¯´è¿™ä¸€æ­¥æ˜¯æ‹‰å–é•œåƒã€‚ç”¨åŠ é€Ÿå™¨-æ”¹ååé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨å¤§ä½¬ç½‘æ˜“äº‘çš„Dokceré•œåƒ" class="headerlink" title="10ã€‚docker build -t cloudcomb/sun:1.0 .ï¼ˆå¤§ä½¬è¯´è¿™ä¸€æ­¥æ˜¯æ‹‰å–é•œåƒã€‚ç”¨åŠ é€Ÿå™¨ æ”¹ååé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨å¤§ä½¬ç½‘æ˜“äº‘çš„Dokceré•œåƒ"></a>10ã€‚docker build -t cloudcomb/sun:1.0 .ï¼ˆå¤§ä½¬è¯´è¿™ä¸€æ­¥æ˜¯æ‹‰å–é•œåƒã€‚ç”¨åŠ é€Ÿå™¨ æ”¹ååé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨å¤§ä½¬ç½‘æ˜“äº‘çš„Dokceré•œåƒ</h3><p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nxqi67j30u00d5jv6.jpg" alt="image-20181107192039326"></p>
<h3 id="11-docker-images-a"><a href="#11-docker-images-a" class="headerlink" title="11. docker images -a"></a>11. docker images -a</h3><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nl3117j30rv04k3zz.jpg" alt="image-20181107192154611"></p>
<h3 id="12-docker-run-p-1024-8080-t-cloudcomb-sun-1-0"><a href="#12-docker-run-p-1024-8080-t-cloudcomb-sun-1-0" class="headerlink" title="12.docker run -p 1024:8080 -t cloudcomb/sun:1.0 ."></a>12.docker run -p 1024:8080 -t cloudcomb/sun:1.0 .</h3><blockquote>
<p>æ³¨æ„ cloudcombå’Œå‰é¢çš„cloudcombè¦ä¸€ä¸€å¯¹åº”</p>
<p>1024 ä¸8080æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»</p>
<p>Error: Unable to access jarfile /app.jar</p>
<p>â­ï¸ ADD user-server-0.0.1-SNAPSHOT.jar app.jar è¦å’Œpomçš„<artifactid>user-server</artifactid></p>
<p>ä¿æŒåå­—ä¸€æ ·ï¼Œä¸ç„¶mavenæ‰“å‡ºæ¥çš„åŒ…ï¼Œdockeræ‰¾ä¸åˆ°ã€‚</p>
<ul>
<li>æœ€ç»ˆçš„ç»“å±€åŠæ³• å¥½åƒæ˜¯å°†copyå»æ‰äº† æ³¨æ„çœ‹æ§åˆ¶å°æ‰“å°çš„ä¿¡æ¯ å…„dei</li>
</ul>
</blockquote>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nsxm7fj30u012etvl.jpg" alt="image-20181107192857396"></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nz8gpnj30ky06g76a.jpg" alt="image-20181107193127019"></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nthrydj30at04rwes.jpg" alt="image-20181107193051806"></p>
<p>DockerFileï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1nvfyymj30io05m3zf.jpg" alt="image-20181107193402453"></p>
<blockquote>
<p>Dockerå°±æ˜¯ç»™ä¸€åå­— gs-spring-bbot</p>
</blockquote>
<p>è´´ä¸€ä¸ªDockerfilrã€‚</p>
<ul>
<li style="list-style: none"><input type="checkbox" checked> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">FROM hub.c.163.com/xbingo/jdk8:latest</span><br><span class="line"></span><br><span class="line">from hub.c.163.com/library/tomcat</span><br><span class="line"></span><br><span class="line">MAINTAINER Freemana2017 1047629166@qq.com</span><br><span class="line"></span><br><span class="line">ADD  atcrodfunding3_ssm-0.0.1-SNAPSHOT.jar app.jar</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</span><br><span class="line"></span><br><span class="line">COPY atcrod.war /usr/local/tomcat/webapps</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">#FROM openjdk:8-jdk-alpine</span><br><span class="line">#VOLUME /tmp</span><br><span class="line">#ADD  atcrodfunding3_ssm-0.0.1-SNAPSHOT.jar app.jar</span><br><span class="line">#ENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</span><br><span class="line">#</span><br><span class="line"> </span><br><span class="line">#FROM hub.c.163.com/xbingo/jdk8:latest</span><br><span class="line">#</span><br><span class="line">#ADD gs-spring-boot-docker-0.1.0.jar app.jar</span><br><span class="line">#</span><br><span class="line">#ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">#è¿™ä¸ª Dockerfile æ–‡ä»¶å¾ˆç®€å•ï¼Œæ„å»º Jdk åŸºç¡€ç¯å¢ƒï¼Œæ·»åŠ  Spring Boot Jar åˆ°é•œåƒä¸­ï¼Œç®€å•è§£é‡Šä¸€ä¸‹:</span><br><span class="line">#</span><br><span class="line">#FROM ï¼Œè¡¨ç¤ºä½¿ç”¨ Jdk8 ç¯å¢ƒ ä¸ºåŸºç¡€é•œåƒï¼Œå¦‚æœé•œåƒä¸æ˜¯æœ¬åœ°çš„ä¼šä» DockerHub è¿›è¡Œä¸‹è½½</span><br><span class="line">#VOLUME ï¼ŒVOLUME æŒ‡å‘äº†ä¸€ä¸ª/tmpçš„ç›®å½•ï¼Œç”±äº Spring Boot ä½¿ç”¨å†…ç½®çš„Tomcatå®¹å™¨ï¼ŒTomcat é»˜è®¤ä½¿ç”¨/tmpä½œä¸ºå·¥ä½œç›®å½•ã€‚è¿™ä¸ªå‘½ä»¤çš„æ•ˆæœæ˜¯ï¼š</span><br><span class="line">#åœ¨å®¿ä¸»æœºçš„/var/lib/dockerç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¹¶æŠŠå®ƒé“¾æ¥åˆ°å®¹å™¨ä¸­çš„/tmpç›®å½•</span><br><span class="line">#ADD ï¼Œæ‹·è´æ–‡ä»¶å¹¶ä¸”é‡å‘½å</span><br><span class="line">#ENTRYPOINT ï¼Œä¸ºäº†ç¼©çŸ­ Tomcat çš„å¯åŠ¨æ—¶é—´ï¼Œæ·»åŠ java.security.egdçš„ç³»ç»Ÿå±æ€§æŒ‡å‘/dev/urandomä½œä¸º ENTRYPOINT</span><br><span class="line">#è¿™æ · Spring Boot é¡¹ç›®æ·»åŠ  Docker ä¾èµ–å°±å®Œæˆäº†ã€‚</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<p>Dockerfile ç”¨çš„warè¦æœ‰Tomcat </p>
<p>è‡ªå·±ç†è§£å§ å¤šçœ‹ä¸€äº›è§†é¢‘ç¬”è®°ä»€ä¹ˆçš„ åæ­£å¾ˆéš¾,,,</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nw5fzmj30u02imtsw.jpg" alt="image-20181107184402451"></p>
<hr>
<hr>
<hr>
<h1 id="ä»¥ä¸Šçš„æ–‡ä»¶æ˜¯ä»githubä¸Šæ‹‰çš„-ç°åœ¨è‡ªå·±æ„å»ºSpringBoot-jarçš„åº”ç”¨"><a href="#ä»¥ä¸Šçš„æ–‡ä»¶æ˜¯ä»githubä¸Šæ‹‰çš„-ç°åœ¨è‡ªå·±æ„å»ºSpringBoot-jarçš„åº”ç”¨" class="headerlink" title="ä»¥ä¸Šçš„æ–‡ä»¶æ˜¯ä»githubä¸Šæ‹‰çš„ ç°åœ¨è‡ªå·±æ„å»ºSpringBoot -jarçš„åº”ç”¨"></a>ä»¥ä¸Šçš„æ–‡ä»¶æ˜¯ä»githubä¸Šæ‹‰çš„ ç°åœ¨è‡ªå·±æ„å»ºSpringBoot -jarçš„åº”ç”¨</h1><blockquote>
<p>é€šè¿‡ç¾¤é‡Œçš„æŒ‡å¯¼ ä¼°è®¡jaræ‰“åŒ…å’Œwaræ‰“åŒ…åŒºåˆ«ä¸å¤§å§</p>
<p>ä¸‹é¢é€šè¿‡SpringBootæ„å»ºDockeréƒ¨ç½²ä¸€ä¸‹è¯•è¯•</p>
<p><a href="https://waylau.com/docker-spring-boot/" target="_blank" rel="noopener">https://waylau.com/docker-spring-boot/</a></p>
<p><a href="http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html" target="_blank" rel="noopener">http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html</a></p>
<p><a href="https://lw900925.github.io/docker/docker-springboot.html" target="_blank" rel="noopener">https://lw900925.github.io/docker/docker-springboot.html</a></p>
<p><a href="https://www.tianmaying.com/tutorial/spring-boot-docker" target="_blank" rel="noopener">https://www.tianmaying.com/tutorial/spring-boot-docker</a></p>
</blockquote>
<blockquote>
<p><a href="https://bingohuang.com/spring-boot-docker/" target="_blank" rel="noopener">https://bingohuang.com/spring-boot-docker/</a></p>
</blockquote>
<blockquote>
<p><a href="https://www.imooc.com/search/?words=docker" target="_blank" rel="noopener">https://www.imooc.com/search/?words=docker</a></p>
</blockquote>
<blockquote>
<p><a href="http://www.ityouknow.com/docker/2018/03/30/docker-machine.html" target="_blank" rel="noopener">http://www.ityouknow.com/docker/2018/03/30/docker-machine.html</a></p>
<p><a href="https://spring.io/guides/gs/spring-boot-docker/" target="_blank" rel="noopener">https://spring.io/guides/gs/spring-boot-docker/</a></p>
</blockquote>
<h2 id="SpringBoot-Docker"><a href="#SpringBoot-Docker" class="headerlink" title="SpringBoot Docker"></a>SpringBoot Docker</h2><blockquote>
<p><a href="https://lw900925.github.io/docker/docker-springboot.html" target="_blank" rel="noopener">https://lw900925.github.io/docker/docker-springboot.html</a></p>
</blockquote>
<p><a href="http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html" target="_blank" rel="noopener">http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html</a> ä¸»è¦ç¯èŠ‚</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nx6s2nj30jf039t96.jpg" alt="image-20181110214317827"></p>
<p><img src="/Users/apple/Library/Application Support/typora-user-images/image-20181115165826700.png" alt="image-20181115165826700"></p>
<p>$ sudo docker tag [ImageId] ccr.ccs.tencentyun.com/[namespace]/[ImageName]:[é•œåƒç‰ˆæœ¬å·]<br>$ sudo docker push ccr.ccs.tencentyun.com/[namespace]/[ImageName]:[é•œåƒç‰ˆæœ¬å·]</p>
<p>â­ï¸</p>
<p> sudo docker tag 5fc4ede68fcd ccr.ccs.tencentyun.com/atcrod/latest</p>
<p> sudo docker push ccr.ccs.tencentyun.com/atcrod/latest</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/07/Docker/Docker-Idea/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/07/Docker/Docker-Idea/" itemprop="url">Docker-Idea</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-07T15:39:20+08:00">
                2018-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/07/Docker/Docker-Idea/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/07/Docker/Docker-Idea/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###1.Docker åœ¨Intellijä¸­çš„ä½¿ç”¨</p>
<ul>
<li><p>Machineçš„å®‰è£…</p>
</li>
<li><p>composeçš„å®‰è£…</p>
</li>
<li><p>Dockerçš„é…ç½®</p>
<p><strong>é¦–å…ˆå­¦ä¹ ä»€ä¹ˆä¸œè¥¿éƒ½è¦ç”¨å®˜ç½‘çš„ä¸œè¥¿</strong></p>
<p><strong>å®‰è£…Dockerçš„æ’ä»¶-çœ‹ç½‘ä¸Šæ•™ç¨‹</strong></p>
<p><strong>çœ‹Dockeræ’ä»¶çš„å®˜ç½‘</strong> <a href="https://www.jetbrains.com/help/idea/docker.html" target="_blank" rel="noopener">hrer</a></p>
<blockquote>
<p>å­¦ä¹ è‹±æ–‡ã€‚ä»»ä½•ä¸œè¥¿å®˜ç½‘éƒ½ç”¨è¯¦ç»†è¯´æ˜çš„</p>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox" checked> å­¦ä¹ Docker</li>
<li style="list-style: none"><input type="checkbox" checked> å­¦ä¹ SpringBootæ•´åˆDocker</li>
<li style="list-style: none"><input type="checkbox" checked> å­¦ä¹ è¿ç»´</li>
</ul>
<p><strong>ä¸‹é¢å¼€å§‹Dockerçš„å­¦ä¹ </strong></p>
<p>1.ç°åœ¨æ’ä»¶</p>
<p>2.çœ‹ç½‘å€çš„æ•™ç¨‹</p>
<p>3.å®‰è£…machinå’Œcompose</p>
<blockquote>
<p>machineå’Œcomposeçš„å®‰è£…å‚è€ƒ</p>
<p>1.Gitbookä¹¦</p>
<p><a href="https://yeasy.gitbooks.io/docker_practice/content/compose/install.html" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/content/compose/install.html</a></p>
<p>2ã€‚å®˜æ–¹æ–‡æ¡£ï¼ˆä¸ºä¸»ï¼‰</p>
<p><a href="https://docs.docker.com/machine/install-machine/" target="_blank" rel="noopener">https://docs.docker.com/machine/install-machine/</a> â­ï¸</p>
<p>ï¼ˆä¸ºä»€ä¹ˆæ¯æ¬¡éƒ½è¦é‡æ–°ä¸‹è½½dockermachineï¼‰</p>
</blockquote>
<blockquote>
<p>Docker-machine env ä¸èƒ½æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ é¦–å…ˆè¦ é‡æ–°ä¸‹è½½Dockermachihe</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base=https://github.com/docker/machine/releases/download/v0.14.0 &amp;&amp;</span><br><span class="line">  curl -L $base/docker-machine-$(uname -s)-$(uname -m) &gt;/usr/local/bin/docker-machine &amp;&amp;</span><br><span class="line">  chmod +x /usr/local/bin/docker-machine</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3.Github</p>
<p><a href="https://github.com/docker/machine/releases" target="_blank" rel="noopener">https://github.com/docker/machine/releases</a></p>
<p><a href="https://github.com/docker/machine" target="_blank" rel="noopener">https://github.com/docker/machine</a></p>
</blockquote>
<h1 id="2-æœ‰äº›ä¸œè¥¿æ”¾åœ¨äº†äº‘æ”¶è—é‡Œé¢"><a href="#2-æœ‰äº›ä¸œè¥¿æ”¾åœ¨äº†äº‘æ”¶è—é‡Œé¢" class="headerlink" title="2.æœ‰äº›ä¸œè¥¿æ”¾åœ¨äº†äº‘æ”¶è—é‡Œé¢"></a>2.æœ‰äº›ä¸œè¥¿æ”¾åœ¨äº†äº‘æ”¶è—é‡Œé¢</h1><h6 id="Dockerçš„ç”¨æˆ·åæ˜¯2018112"><a href="#Dockerçš„ç”¨æˆ·åæ˜¯2018112" class="headerlink" title="Dockerçš„ç”¨æˆ·åæ˜¯2018112"></a>Dockerçš„ç”¨æˆ·åæ˜¯2018112</h6><p>#####å®‰è£…Dockeræ’ä»¶è¦å¼€VPN è¿˜æœ‰è®¿é—®Gitbubä¹Ÿè¦å¼€VPN wiredesçš„</p>
<h6 id="å®‰è£…Dockerè¦å®‰è£…DookerToolBox"><a href="#å®‰è£…Dockerè¦å®‰è£…DookerToolBox" class="headerlink" title="å®‰è£…Dockerè¦å®‰è£…DookerToolBox"></a>å®‰è£…Dockerè¦å®‰è£…DookerToolBox</h6></li>
</ul>
<h1 id="3-Docker"><a href="#3-Docker" class="headerlink" title="3.Docker"></a>3.Docker</h1><p>  ï¼ï¼DockerçœŸæ˜¯ä¸€ä¸ªææ€–çš„ä¸œè¥¿</p>
<p>  ######Dockerçš„å­¦ä¹ èµ„æºGitBooké‡Œé¢çš„Dockerçš„é™„å½•éƒ¨åˆ†</p>
<blockquote>
<p><a href="https://blog.lab99.org/post/docker-2016-07-14-faq.html" target="_blank" rel="noopener">https://blog.lab99.org/post/docker-2016-07-14-faq.html</a></p>
</blockquote>
<h4 id="1-æ— ç‹¬æœ‰å¶é€šè¿‡Docker-SpirngBootçš„å­¦ä¹ äº†è§£äº†TCP-socker-Engine-API-URLçš„å¡«å†™"><a href="#1-æ— ç‹¬æœ‰å¶é€šè¿‡Docker-SpirngBootçš„å­¦ä¹ äº†è§£äº†TCP-socker-Engine-API-URLçš„å¡«å†™" class="headerlink" title="1.æ— ç‹¬æœ‰å¶é€šè¿‡Docker-SpirngBootçš„å­¦ä¹ äº†è§£äº†TCP socker Engine API URLçš„å¡«å†™"></a>1.æ— ç‹¬æœ‰å¶é€šè¿‡Docker-SpirngBootçš„å­¦ä¹ äº†è§£äº†TCP socker Engine API URLçš„å¡«å†™</h4><blockquote>
<p> Dockerå¼€å¯è¿œç¨‹è®¿é—®è¿™æ˜¯è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é—®é¢˜ å®‰è£…äº†socket ä»¥åæƒ³åŠæ³•åˆ é™¤</p>
<p>PSï¼šDockeræœåŠ¡ä¸­è¿›ç¨‹é—´é€šä¿¡é€šè¿‡/var/run/docker.sockå®ç°ï¼Œé»˜è®¤æœåŠ¡ä¸æä¾›ç›‘å¬ç«¯å£ï¼Œå› æ­¤ä½¿ç”¨docker remote api éœ€è¦æ‰‹åŠ¨ç»‘å®šç«¯å£ã€‚æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; `# service docker stop``# docker -d -H unix:``///var/run/docker.sock -H tcp://0.0.0.0:2375`</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>  ###2.ç‚¹å‡»+å·æ·»åŠ ä¸€ä¸ªdockeré…ç½®ï¼Œè¾“å…¥Nameå’ŒEngine API URLï¼ŒURLæ˜¯dockeræœåŠ¡åœ°å€ï¼Œéœ€è¦dockerå¼€å¯è¿œç¨‹è¿æ¥åŠŸèƒ½ã€‚CentOSä¸­åœ¨dockerå¯åŠ¨å‚æ•°é‡Œæ·»åŠ å¦‚ä¸‹é…ç½®å³å¯å¼€å¯è¿œç¨‹è¿æ¥ã€‚</p>
<pre><code>-H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375
</code></pre><hr>
<p>   <em>ä¸‹é¢æ˜¯dockeråœ¨ideaä¸­çš„å®‰è£…</em></p>
<ul>
<li><p>cloudsé‡Œé¢æ²¡æœ‰Dockerã€‚åœ¨Dockerä¸­é…ç½® TCPï¼štcpï¼š//127.0.0.1:2376</p>
</li>
<li><p>æ³¨æ„è¿™ä¸ªæ˜¯é€šè¿‡ç»ˆç«¯å‘½ä»¤å¾—åˆ°çš„</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker-machine env cloudcomb</span><br><span class="line">export DOCKER_TLS_VERIFY=&quot;1&quot;</span><br><span class="line">export DOCKER_HOST=&quot;tcp://192.168.99.101:2376&quot;</span><br><span class="line">export DOCKER_CERT_PATH=&quot;/Users/apple/.docker/machine/machines/cloudcomb&quot;</span><br><span class="line">export DOCKER_MACHINE_NAME=&quot;cloudcomb&quot;</span><br><span class="line"># Run this command to configure your shell:</span><br><span class="line"># eval $(docker-machine env cloudcomb)</span><br></pre></td></tr></table></figure>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1ndoklwj30u602yt9n.jpg" alt="image-20181107213000670"></p>
</li>
<li><p>å°†å‰é¢çš„ç«¯å£æ¢æˆæœ¬åœ°çš„ tcp:127.0.0.1:2376</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nbu2afj30i90f8751.jpg" alt="image-20181107213056424"></p>
</li>
</ul>
<ul>
<li style="list-style: none"><input type="checkbox"> emmç¡ä¸€è§‰èµ·æ¥VPNæ‰“å¼€è¦ç­‰ä¸€ä¼š</li>
<li style="list-style: none"><input type="checkbox"> <img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1ncn0rpj30hz0b4aal.jpg" alt="image-20181108064320954"></li>
</ul>
<p>åœ¨ç»ˆç«¯è¾“å…¥dockerversion</p>
<p>docker-machine envâ€”Host is not running</p>
<h5 id="å­¦ä¹ èµ„æºï¼šé€šè¿‡Githubçš„æœç´¢åŠŸèƒ½ğŸ”-å‘ç°ä¸€äº›å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æºï¼šé€šè¿‡Githubçš„æœç´¢åŠŸèƒ½ğŸ”-å‘ç°ä¸€äº›å­¦ä¹ èµ„æ–™" class="headerlink" title="#å­¦ä¹ èµ„æºï¼šé€šè¿‡Githubçš„æœç´¢åŠŸèƒ½ğŸ” å‘ç°ä¸€äº›å­¦ä¹ èµ„æ–™"></a>#å­¦ä¹ èµ„æºï¼šé€šè¿‡Githubçš„æœç´¢åŠŸèƒ½ğŸ” å‘ç°ä¸€äº›å­¦ä¹ èµ„æ–™</h5><p><a href="https://www.jetbrains.com/help/idea/docker.html" target="_blank" rel="noopener">https://www.jetbrains.com/help/idea/docker.html</a></p>
<p>alip1<code>sudo docker pull ccr.ccs.tencentyun.com/freemana2017/atcrod:latest</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line">VOLUME /tmp</span><br><span class="line"></span><br><span class="line">sudo docker pull ccr.ccs.tencentyun.com/freemana2017/atcrod:latest</span><br><span class="line"></span><br><span class="line">COPY target/tran4spd-1.0-SNAPSHOT.jar resource.jar</span><br><span class="line">RUN bash -c &quot;touch /resource.jar&quot;</span><br><span class="line">EXPOSE 8080</span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;resource.jar&quot;]</span><br><span class="line"></span><br><span class="line"># docker run -d -p 18080:8099 --name docker-resource leesia/resource:1.0</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/07/å¼€å‘é‡åˆ°çš„é—®é¢˜/Hexo/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/07/å¼€å‘é‡åˆ°çš„é—®é¢˜/Hexo/" itemprop="url">Hexoçš„ä½¿ç”¨æ•™ç¨‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-07T15:24:22+08:00">
                2018-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/07/å¼€å‘é‡åˆ°çš„é—®é¢˜/Hexo/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/07/å¼€å‘é‡åˆ°çš„é—®é¢˜/Hexo/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="ä¸»é¢˜copyä¸€ä»½åœ¨appleä¸­"><a href="#ä¸»é¢˜copyä¸€ä»½åœ¨appleä¸­" class="headerlink" title="ä¸»é¢˜copyä¸€ä»½åœ¨appleä¸­"></a>ä¸»é¢˜copyä¸€ä»½åœ¨appleä¸­</h3><h3 id="ä¸éœ€è¦ç»ˆç«¯new-æˆ–è€…-æ ‡é¢˜titleç›´æ¥å¤åˆ¶ä¹Ÿæ˜¯å¯ä»¥çš„"><a href="#ä¸éœ€è¦ç»ˆç«¯new-æˆ–è€…-æ ‡é¢˜titleç›´æ¥å¤åˆ¶ä¹Ÿæ˜¯å¯ä»¥çš„" class="headerlink" title="ä¸éœ€è¦ç»ˆç«¯new æˆ–è€… æ ‡é¢˜titleç›´æ¥å¤åˆ¶ä¹Ÿæ˜¯å¯ä»¥çš„"></a>ä¸éœ€è¦ç»ˆç«¯new æˆ–è€… æ ‡é¢˜titleç›´æ¥å¤åˆ¶ä¹Ÿæ˜¯å¯ä»¥çš„</h3><h3 id="æœ‰æ—¶å€™æœ‰å»¶è¿Ÿ"><a href="#æœ‰æ—¶å€™æœ‰å»¶è¿Ÿ" class="headerlink" title="æœ‰æ—¶å€™æœ‰å»¶è¿Ÿ"></a>æœ‰æ—¶å€™æœ‰å»¶è¿Ÿ</h3><h3 id="ä¸‹é¢å°±æ˜¯å›¾ç‰‡çš„é—®é¢˜å•¦-ç”¨å›¾åºŠipicè§£å†³é—®é¢˜"><a href="#ä¸‹é¢å°±æ˜¯å›¾ç‰‡çš„é—®é¢˜å•¦-ç”¨å›¾åºŠipicè§£å†³é—®é¢˜" class="headerlink" title="ä¸‹é¢å°±æ˜¯å›¾ç‰‡çš„é—®é¢˜å•¦  ç”¨å›¾åºŠipicè§£å†³é—®é¢˜"></a>ä¸‹é¢å°±æ˜¯å›¾ç‰‡çš„é—®é¢˜å•¦  ç”¨å›¾åºŠipicè§£å†³é—®é¢˜</h3><blockquote>
<p><a href="https://www.jianshu.com/p/dbc945b05d55" target="_blank" rel="noopener">https://www.jianshu.com/p/dbc945b05d55</a> PIC </p>
<p><a href="https://sspai.com/post/39965" target="_blank" rel="noopener">https://sspai.com/post/39965</a> å°‘æ•°æ´¾</p>
</blockquote>
<p> ### </p>
<p> <a href="https://hexo.io/zh-cn/docs/front-matter" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/front-matter</a> å­¦ä¹ HexoæŒ‰ç…§è¿™ä¸ªç½‘ç«™é‡Œé¢æœ‰æ•™ç¨‹ å­¦ä¹ ä»»ä½•ä¸œè¥¿éƒ½è¦ä½¿ç”¨å®˜æ–¹æ–‡æ¡£</p>
<p>å…¶ä½™å­¦ä¹ çš„ä¸œè¥¿åœ¨safairæ”¶è—â•éšç¬” hexoé‡Œé¢ çœŸçš„å¥½ç´¯ æ­å»ºè¿™ä¸ªç¯å¢ƒ</p>
<p>æ€»ä¹‹å°±æ˜¯ç…§ç€å®˜ç½‘çš„ä¾‹å­ ç„¶åä½¿ç”¨è¿™ä¸ªæ¨¡ç‰ˆ ç„¶åymlæ–‡ä»¶è¦å†™å…¨ å‘å¤ªå¤šäº† èƒ½å‡ºä¸€æœ¬ä¹¦ å…ˆè¿™æ ·</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fy0ir5f7anj30b20ac74o.jpg" alt="å±å¹•å¿«ç…§ 2018-12-07 ä¸‹åˆ7.18.33"></p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg" alt="2"></p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0lzxy1vnj319g0pbnl8.jpg" alt="image-20181209171302461"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/11/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/13/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg" alt="è¢æµ·é¹">
            
              <p class="site-author-name" itemprop="name">è¢æµ·é¹</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">121</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        


<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">è¢æµ·é¹</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>




<div class="powered-by">
<i class="fa fa-user-md"></i>

<span id="busuanzi_container_site_pv">
    æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
</span>


</div>





  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    

  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<script type="text/javascript" src="/js/src/love.js"></script>


