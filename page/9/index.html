<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Freemana2017">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="Freemana2017">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Freemana2017">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/9/">





  <title>Freemana2017</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>



<a href="https://github.com/Freemana2017" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>







    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Freemana2017</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/11/Spring Boot/SpringBoot-Docker-å°Dè¯¾å ‚/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/11/Spring Boot/SpringBoot-Docker-å°Dè¯¾å ‚/" itemprop="url">SpringBoot Docker å°Dè¯¾å ‚</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-11T10:13:42+08:00">
                2018-11-11
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/11/Spring Boot/SpringBoot-Docker-å°Dè¯¾å ‚/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/11/Spring Boot/SpringBoot-Docker-å°Dè¯¾å ‚/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ„å»ºSpringBoot-åº”ç”¨dockeré•œåƒ"><a href="#æ„å»ºSpringBoot-åº”ç”¨dockeré•œåƒ" class="headerlink" title="æ„å»ºSpringBoot åº”ç”¨dockeré•œåƒ"></a>æ„å»ºSpringBoot åº”ç”¨dockeré•œåƒ</h1><h4 id="1-ç¬¬1è¯¾-é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†"><a href="#1-ç¬¬1è¯¾-é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†" class="headerlink" title="1.ç¬¬1è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†"></a>1.ç¬¬1è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†</h4><blockquote>
<p> å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://spring.io/guides/gs/spring-boot-docker/" target="_blank" rel="noopener">https://spring.io/guides/gs/spring-boot-docker/</a></p>
<h2 id="1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom-xml"><a href="#1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom-xml" class="headerlink" title="1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom.xml"></a>1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom.xml</h2></blockquote>
<pre><code>ç®€ä»‹:ä½¿ç”¨Dockerçš„mavenæ’ä»¶ï¼Œæ„å»ºspringbootåº”ç”¨
 &lt;!--åœ¨mavenæœ€ä¸Šé¢çš„ç”³æ˜çš„åœ°æ–¹--properties--&gt;
     &lt;properties&gt;
       &lt;docker.image.prefix&gt;xdclass&lt;/docker.image.prefix&gt;
    &lt;/properties&gt;

    &lt;build&gt;
    &lt;!--é¡¹ç›®æ‰“åŒ…çš„åç§°--&gt;
        &lt;finalName&gt;docker-demo&lt;/finalName&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;com.spotify&lt;/groupId&gt;
                &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.3.6&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;repository&gt;${docker.image.prefix}/${project.artifactId}&lt;/repository&gt;
                    &lt;buildArgs&gt;
                        &lt;JAR_FILE&gt;target/${project.build.finalName}.jar&lt;/JAR_FILE&gt;
                    &lt;/buildArgs&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    é…ç½®è®²è§£
    Spotify çš„ docker-maven-plugin æ’ä»¶æ˜¯ç”¨mavenæ’ä»¶æ–¹å¼æ„å»ºdockeré•œåƒçš„ã€‚
    ${project.build.finalName} äº§å‡ºç‰©åç§°ï¼Œç¼ºçœä¸º${project.artifactId}-${project.version}
</code></pre><p>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</p>
<blockquote>
<p> <a href="https://blog.csdn.net/TMaskBoy/article/details/82562413" target="_blank" rel="noopener">https://blog.csdn.net/TMaskBoy/article/details/82562413</a></p>
</blockquote>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1qkosbaj30nw10pwj8.jpg" alt="image-20181111112653319"></p>
<h1 id="é«˜èƒ½é¢„è­¦"><a href="#é«˜èƒ½é¢„è­¦" class="headerlink" title="é«˜èƒ½é¢„è­¦"></a>é«˜èƒ½é¢„è­¦</h1><ul>
<li><p>No plugin found for prefix â€˜dockerâ€™ in the current project and in the plugin groups<br>åœ¨Mavençš„é…ç½®æ–‡ä»¶ conf/settings.xmlä¸­æ·»åŠ com.spotify</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;pluginGroups&gt;  </span><br><span class="line">    &lt;pluginGroup&gt;com.spotify&lt;/pluginGroup&gt;  </span><br><span class="line">&lt;/pluginGroups&gt;</span><br><span class="line"></span><br><span class="line">æ³¨æ„settingé…ç½®æ–‡ä»¶åœ¨mavençš„ä»“åº“é‡Œé¢æ‰¾ä¸åˆ° é‡æ–°æ›´æ–°ideaä¸­mavençš„æ’ä»¶ ç„¶å æ›´æ¢.m2ä¸­confä¸­setting.xmlçš„å†…å®¹</span><br></pre></td></tr></table></figure>
</li>
<li><p>#è¯¦ç»†é”™è¯¯å¦‚ä¸‹ï¼šom.spotify.docker.client.shaded.com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of com.spotify.docker.client.messages.RegistryAuth: no String-argument constructor/factory method to deserialize from String value (â€˜swarmâ€™)  </p>
<p>èµ·åˆpom.xmlä¸­docker-maven-pluginçš„ç‰ˆæœ¬æ˜¯1.0.0ï¼Œä½¿ç”¨mvn package docker:build -eæ„å»ºImageå‡ºç°å¦‚ä¸Šå¼‚å¸¸ã€‚<br>ç™¾èˆ¬æœç´¢æ— æœï¼Œåæ¥çœ‹å…¶ä»–çš„Spring Bootæ„å»ºDockeré•œåƒæœ‰ç”¨çš„æ˜¯0.4.3ï¼Œé‚ä¿®æ”¹ä¹‹ã€‚ </p>
<ol start="2">
<li>è§£å†³åŠæ³•</li>
</ol>
<hr>
<h1 id="å°†å°Dè¯¾å ‚é‡Œé¢çš„æ’ä»¶"><a href="#å°†å°Dè¯¾å ‚é‡Œé¢çš„æ’ä»¶" class="headerlink" title="å°†å°Dè¯¾å ‚é‡Œé¢çš„æ’ä»¶"></a>å°†å°Dè¯¾å ‚é‡Œé¢çš„æ’ä»¶</h1></li>
</ul>
<pre><code> &lt;groupId&gt;com.spotify&lt;/groupId&gt;
&lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
&lt;version&gt;1.3.6&lt;/version&gt;
</code></pre><h1 id="æ”¹ä¸ºâ­ï¸â­ï¸"><a href="#æ”¹ä¸ºâ­ï¸â­ï¸" class="headerlink" title="æ”¹ä¸ºâ­ï¸â­ï¸"></a>æ”¹ä¸ºâ­ï¸â­ï¸</h1>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;groupId&gt;com.spotify&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt; â­ï¸ //è¿™è¾¹ä¸æ˜¯dockerfile-maven-pluginäº†è€Œæ˜¯docker-maven-plugin</span><br><span class="line">&lt;version&gt;0.4.13&lt;/version&gt;</span><br></pre></td></tr></table></figure>
<p>   â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ </p>
<h3 id="ç¬¬2è¯¾-é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†"><a href="#ç¬¬2è¯¾-é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†" class="headerlink" title="ç¬¬2è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†"></a>ç¬¬2è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†</h3><blockquote>
<h4 id="æ­¥éª¤1åˆ›å»ºDockerfile-é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc-main-docker-Dockerfile-å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰"><a href="#æ­¥éª¤1åˆ›å»ºDockerfile-é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc-main-docker-Dockerfile-å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰" class="headerlink" title="æ­¥éª¤1åˆ›å»ºDockerfile,é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc/main/docker/Dockerfile,å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰"></a>æ­¥éª¤1åˆ›å»ºDockerfile,é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc/main/docker/Dockerfile,å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰</h4></blockquote>
<pre><code>ç®€ä»‹:æ‰“åŒ…SpringCloudé•œåƒå¹¶ä¸Šä¼ ç§æœ‰ä»“åº“å¹¶éƒ¨ç½²
1ã€ ä»€ä¹ˆæ˜¯Dockerfile : ç”±ä¸€ç³»åˆ—å‘½ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ï¼Œè¿™äº›å‘½ä»¤åº”ç”¨äºåŸºç¡€é•œåƒ, æœ€ç»ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é•œ       åƒ
å®æˆ˜
FROM openjdk:8-jdk-alpine
VOLUME /tmp
ARG JAR_FILE
COPY ${JAR_FILE} app.jar
ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]


å‚æ•°è®²è§£ï¼š
FROM &lt;image&gt;:&lt;tag&gt; éœ€è¦ä¸€ä¸ªåŸºç¡€é•œåƒï¼Œå¯ä»¥æ˜¯å…¬å…±çš„æˆ–è€…æ˜¯ç§æœ‰çš„ï¼Œ åç»­æ„å»ºä¼šåŸºäºæ­¤é•œåƒï¼Œå¦‚æœåŒä¸€ä¸ªDockerfileä¸­å»ºç«‹å¤šä¸ªé•œåƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªFROMæŒ‡ä»¤

VOLUME  é…ç½®ä¸€ä¸ªå…·æœ‰æŒä¹…åŒ–åŠŸèƒ½çš„ç›®å½•ï¼Œä¸»æœº /var/lib/docker ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é“¾æ¥åˆ°å®¹   å™¨çš„/tmpã€‚æ”¹æ­¥éª¤æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ¶‰åŠåˆ°æ–‡ä»¶ç³»ç»Ÿçš„åº”ç”¨å°±å¾ˆæœ‰å¿…è¦äº†ã€‚/tmpç›®å½•ç”¨æ¥æŒä¹…åŒ–åˆ° Docker æ•°æ® æ–‡ä»¶å¤¹ï¼Œå› ä¸º Spring Boot ä½¿ç”¨çš„å†…åµŒ Tomcat å®¹å™¨é»˜è®¤ä½¿ç”¨/tmpä½œä¸ºå·¥ä½œç›®å½• 

ARG  è®¾ç½®ç¼–è¯‘é•œåƒæ—¶åŠ å…¥çš„å‚æ•°ï¼Œ ENV æ˜¯è®¾ç½®å®¹å™¨çš„ç¯å¢ƒå˜é‡
COPY : åªæ”¯æŒå°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ ,è¿˜æœ‰ä¸ªADDæ›´å¼ºå¤§ä½†å¤æ‚ç‚¹
ENTRYPOINT å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤
EXPOSE 8080 æš´éœ²é•œåƒç«¯å£
</code></pre><h3 id="ç¬¬3è¯¾æ„å»ºé•œåƒ"><a href="#ç¬¬3è¯¾æ„å»ºé•œåƒ" class="headerlink" title="ç¬¬3è¯¾æ„å»ºé•œåƒ"></a>ç¬¬3è¯¾æ„å»ºé•œåƒ</h3><pre><code>2ã€æ„å»ºé•œåƒ
        mvn install dockerfile:build
        æ‰“æ ‡ç­¾
        docker tag a1b9fc71720d registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808
        æ¨é€åˆ°é•œåƒä»“åº“
        docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808

        åº”ç”¨æœåŠ¡å™¨æ‹‰å–é•œåƒ
        docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808


        docker run -d --name xdclass_docker_demo1 -p 8099:8080  a1b9fc71720d

        3ã€æŸ¥çœ‹å¯åŠ¨æ—¥å¿— docker logs -f  containerid
</code></pre><h1 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h1><h2 id="1-mvn-install-dockerfile-buildã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆç»ˆç«¯æ²¡æœ‰ç”¨ideaä¸­ç»ˆç«¯å´æœ‰ç”¨-ğŸ˜„å“ˆå“ˆ"><a href="#1-mvn-install-dockerfile-buildã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆç»ˆç«¯æ²¡æœ‰ç”¨ideaä¸­ç»ˆç«¯å´æœ‰ç”¨-ğŸ˜„å“ˆå“ˆ" class="headerlink" title="1.mvn install dockerfile:buildã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆç»ˆç«¯æ²¡æœ‰ç”¨ideaä¸­ç»ˆç«¯å´æœ‰ç”¨ ğŸ˜„å“ˆå“ˆ"></a>1.mvn install dockerfile:buildã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆç»ˆç«¯æ²¡æœ‰ç”¨ideaä¸­ç»ˆç«¯å´æœ‰ç”¨ ğŸ˜„å“ˆå“ˆ</h2><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1qi5qd3j30uw0u0dog.jpg" alt="image-20181111130637806"></p>
<h2 id="2-docker-images"><a href="#2-docker-images" class="headerlink" title="2.docker images"></a>2.docker images</h2><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1qlpbxvj30qw04taax.jpg" alt="image-20181111130706064"></p>
<blockquote>
<p>æ²¡æœ‰åå­—é•œåƒï¼Ÿï¼Ÿæ³¨æ„åœ¨ideaä¸­æµ‹è¯•çš„è¯å°±è¦ç”¨idea ä¸è¦éšå˜æ”¹æˆç»ˆç«¯</p>
</blockquote>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1qj8tx1j314c0b142v.jpg" alt="image-20181111131256001"></p>
<h2 id="3-docker-run-d-â€“name-demo-p-8080-8080-8ef42611e3b0"><a href="#3-docker-run-d-â€“name-demo-p-8080-8080-8ef42611e3b0" class="headerlink" title="3.docker  run -d â€“name demo -p 8080:8080  8ef42611e3b0"></a>3.docker  run -d â€“name demo -p 8080:8080  8ef42611e3b0</h2><blockquote>
<p>å¤‡æ³¨ï¼šè¿è¡Œé•œåƒ â€“name æŒ‡å®šåå­— -d åå°è¿è¡Œ 8ef42611e3b0ï¼šåˆšåˆšæ„å»ºçš„imageçš„ID </p>
<p>name ä¸ä¼šç”¨å°±åˆ«ç”¨</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1qmrfedj31bl03h766.jpg" alt="image-20181111133053363"></p>
</blockquote>
<h3 id="4-docker-ps"><a href="#4-docker-ps" class="headerlink" title="4.docker ps"></a>4.docker ps</h3><blockquote>
<p>æŸ¥çœ‹ä¸€ä¸‹é•œåƒçš„è¿›ç¨‹</p>
</blockquote>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1qm8xnmj30xs02g3zi.jpg" alt="image-20181111133138180"></p>
<p>ï¼Ÿï¼Ÿï¼Ÿæ²¡æœ‰ç¨‹åºã€‚æµ‹è¯•ä¸€ä¸‹</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/10/SpringCloud/springcloud/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/10/SpringCloud/springcloud/" itemprop="url">å°Dè¯¾å ‚SpringCloudç¬”è®°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-10T16:56:31+08:00">
                2018-11-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/10/SpringCloud/springcloud/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/10/SpringCloud/springcloud/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##SpringCloudè¯¾ç¨‹ç¬”è®° </p>
<p>ç¬¬ä¸€ç«  è¯¾ç¨‹ä»‹ç»å’Œå­¦ä¹ è·¯çº¿ </p>
<p>1ã€å¾®æœåŠ¡æ¶æ„SpringCloudè¯¾ç¨‹ä»‹ç»<br>â€‹    ç®€ä»‹ï¼šè¯¾ç¨‹ä»‹ç»å’Œè¯¾ç¨‹å¤§çº²è®²è§£ï¼Œè®²è¯¾é£æ ¼å’Œé‡ç‚¹å†…å®¹ç†è§£æŠ€å·§</p>
<p>2ã€æŠ€æœ¯é€‰å‹å’Œå­¦åæ°´å¹³<br>â€‹    ç®€ä»‹ï¼šè¯¾ç¨‹æ‰€éœ€åŸºç¡€å’ŒæŠ€æœ¯é€‰å‹è®²è§£ï¼Œå­¦å®Œè¯¾ç¨‹å¯ä»¥åˆ°è¾¾æ€æ ·çš„ç¨‹åº¦ï¼Œ<br>â€‹<br>â€‹    1ã€IDEA JDK8 Maven SpringBootåŸºç¡€ Linux<br>â€‹<br>â€‹    2ã€ç†è§£æŒæ¡å¹¶å¼€å‘SpringCloudé‡Œé¢ä¸»æµæ¶æ„å’Œç»„ä»¶çš„åŸºç¡€ä½¿ç”¨ï¼Œè¿˜æœ‰éƒ¨åˆ†æºç åŸç†çš„ç†è§£<br>â€‹<br>    3ã€æŒæ¡å­¦ä¹ çš„æŠ€å·§å’Œè§£å†³é—®é¢˜çš„æ€è·¯</p>
<p>ç¬¬äºŒç«  æ¶æ„æ¼”è¿›å’Œåˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€çŸ¥è¯†</p>
<p>1ã€ä¼ ç»Ÿæ¶æ„æ¼”è¿›åˆ°åˆ†å¸ƒå¼æ¶æ„<br>â€‹    ç®€ä»‹ï¼šè®²è§£å•æœºåº”ç”¨å’Œåˆ†å¸ƒå¼åº”ç”¨æ¶æ„æ¼”è¿›åŸºç¡€çŸ¥è¯† (ç”»å›¾)</p>
<pre><code>    é«˜å¯ç”¨ LVS+keepalive 


1ã€å•ä½“åº”ç”¨ï¼š
    å¼€å‘é€Ÿåº¦æ…¢
    å¯åŠ¨æ—¶é—´é•¿
    ä¾èµ–åºå¤§
    ç­‰ç­‰


2ã€å¾®æœåŠ¡
    æ˜“å¼€å‘ã€ç†è§£å’Œç»´æŠ¤
    ç‹¬ç«‹çš„éƒ¨ç½²å’Œå¯åŠ¨
    ç­‰


    ä¸è¶³ï¼š
        åˆ†å¸ƒå¼ç³»ç»Ÿ-ã€‹åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜
        éœ€è¦ç®¡ç†å¤šä¸ªæœåŠ¡-ã€‹æœåŠ¡æ²»ç†
</code></pre><p>2ã€å¾®æœåŠ¡æ ¸å¿ƒåŸºç¡€è®²è§£<br>â€‹    ç®€ä»‹ï¼šè®²è§£å¾®æœåŠ¡æ ¸å¿ƒçŸ¥è¯† ï¼šç½‘å…³ã€æœåŠ¡å‘ç°æ³¨å†Œã€é…ç½®ä¸­å¿ƒã€é“¾è·¯è¿½è¸ªã€è´Ÿè½½å‡è¡¡å™¨ã€ç†”æ–­<br>â€‹        1ã€ç½‘å…³ï¼šè·¯ç”±è½¬å‘ + è¿‡æ»¤å™¨<br>â€‹                /api/v1/pruduct/      å•†å“æœåŠ¡<br>â€‹                /api/v1/order/        è®¢å•æœåŠ¡<br>â€‹                /api/v1/user/         ç”¨æˆ·æœåŠ¡</p>
<pre><code>2ã€æœåŠ¡æ³¨å†Œå‘ç°ï¼šè°ƒç”¨å’Œè¢«è°ƒç”¨æ–¹çš„ä¿¡æ¯ç»´æŠ¤

3ã€é…ç½®ä¸­å¿ƒï¼šç®¡ç†é…ç½®ï¼ŒåŠ¨æ€æ›´æ–° application.properties

4ã€é“¾è·¯è¿½è¸ªï¼šåˆ†æè°ƒç”¨é“¾è·¯è€—æ—¶
    ä¾‹å­ï¼šä¸‹å•-ã€‹æŸ¥è¯¢å•†å“æœåŠ¡è·å–å•†å“ä»·æ ¼-ã€‹æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯-ã€‹ä¿å­˜æ•°æ®åº“

5ã€è´Ÿè½½å‡è¡¡å™¨ï¼šåˆ†å‘è´Ÿè½½

6ã€ç†”æ–­ï¼šä¿æŠ¤è‡ªå·±å’Œè¢«è°ƒç”¨æ–¹
</code></pre><p>3ã€å¸¸è§çš„å¾®æœåŠ¡æ¡†æ¶<br>â€‹    ç®€ä»‹:è®²è§£å¸¸ç”¨çš„å¾®æœåŠ¡æ¡†æ¶</p>
<pre><code>consumer: è°ƒç”¨æ–¹
provider: è¢«è°ƒç”¨æ–¹
ä¸€ä¸ªæ¥å£ä¸€èˆ¬éƒ½ä¼šå……å½“ä¸¤ä¸ªè§’è‰²ï¼ˆä¸æ˜¯åŒæ—¶å……å½“ï¼‰

1ã€dubbo: zookeeper + dubbo + springmvc/springboot
    å®˜æ–¹åœ°å€ï¼šhttp://dubbo.apache.org/#!/?lang=zh-cn
    é…å¥—
        é€šä¿¡æ–¹å¼ï¼šrpc
        æ³¨å†Œä¸­å¿ƒï¼šzookeper/redis
        é…ç½®ä¸­å¿ƒï¼šdiamond

2ã€springcloud: å…¨å®¶æ¡¶+è½»æ¾åµŒå…¥ç¬¬ä¸‰æ–¹ç»„ä»¶(Netflix å¥ˆé£)
    å®˜ç½‘ï¼šhttp://projects.spring.io/spring-cloud/
    é…å¥—
        é€šä¿¡æ–¹å¼ï¼šhttp restful
        æ³¨å†Œä¸­å¿ƒï¼šeruka/consul
        é…ç½®ä¸­å¿ƒï¼šconfig
        æ–­è·¯å™¨ï¼šhystrix
        ç½‘å…³ï¼šzuul
        åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼šsleuth+zipkin

å­¦ä¹ èµ„æ–™ï¼šhttps://blog.csdn.net/zhangweiwei2020/article/details/78646252
</code></pre><p>4ã€å¾®æœåŠ¡ä¸‹ç”µå•†é¡¹ç›®åŸºç¡€æ¨¡å—è®¾è®¡<br>â€‹    ç®€ä»‹ï¼šå¾®æœåŠ¡ä¸‹ç”µå•†é¡¹ç›®åŸºç¡€æ¨¡å—è®¾è®¡ åˆ†ç¦»å‡ ä¸ªæ¨¡å—ï¼Œè¯¾ç¨‹å›´ç»•è¿™ä¸ªåŸºç¡€é¡¹ç›®è¿›è¡Œå­¦ä¹ <br>â€‹        å°è€Œç²¾çš„æ–¹å¼å­¦ä¹ å¾®æœåŠ¡</p>
<pre><code>1ã€ç”¨æˆ·æœåŠ¡
    1ï¼‰ç”¨æˆ·ä¿¡æ¯æ¥å£
    2ï¼‰ç™»å½•æ¥å£

2ã€å•†å“æœåŠ¡
    1ï¼‰å•†å“åˆ—è¡¨
    2ï¼‰å•†å“è¯¦æƒ…

3ã€è®¢å•æœåŠ¡ 
    1ï¼‰æˆ‘çš„è®¢å•
    2ï¼‰ä¸‹å•æ¥å£
</code></pre><p>=============================================<br>æ›´å¤šå¹²è´§æŠ€æœ¯è®¿é—®å°Dè¯¾å ‚å®˜ç½‘ <a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a><br>å°Dè€å¸ˆä¸ªäººå¾®ä¿¡ï¼šjack794666918</p>
<h1 id="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"><a href="#å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚" class="headerlink" title="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"></a>å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚</h1><p>ç¬¬ä¸‰ç«  SpringCloudæ ¸å¿ƒç»„ä»¶æ³¨å†Œä¸­å¿ƒ</p>
<p>1ã€ä»€ä¹ˆæ˜¯å¾®æœåŠ¡çš„æ³¨å†Œä¸­å¿ƒ<br>â€‹    ç®€ä»‹ï¼šè®²è§£ä»€ä¹ˆæ˜¯æ³¨å†Œä¸­å¿ƒï¼Œå¸¸ç”¨çš„æ³¨å†Œä¸­å¿ƒæœ‰å“ªäº› (ç”»å›¾)<br>â€‹<br>â€‹        ç†è§£æ³¨å†Œä¸­å¿ƒï¼šæœåŠ¡ç®¡ç†,æ ¸å¿ƒæ˜¯æœ‰ä¸ªæœåŠ¡æ³¨å†Œè¡¨ï¼Œå¿ƒè·³æœºåˆ¶åŠ¨æ€ç»´æŠ¤<br>â€‹<br>â€‹        æœåŠ¡æä¾›è€…provider: å¯åŠ¨çš„æ—¶å€™å‘æ³¨å†Œä¸­å¿ƒä¸ŠæŠ¥è‡ªå·±çš„ç½‘ç»œä¿¡æ¯<br>â€‹<br>        æœåŠ¡æ¶ˆè´¹è€…consumer: å¯åŠ¨çš„æ—¶å€™å‘æ³¨å†Œä¸­å¿ƒä¸ŠæŠ¥è‡ªå·±çš„ç½‘ç»œä¿¡æ¯ï¼Œæ‹‰å–providerçš„ç›¸å…³ç½‘ç»œä¿¡æ¯</p>
<pre><code>ä¸ºä»€ä¹ˆè¦ç”¨ï¼š
    å¾®æœåŠ¡åº”ç”¨å’Œæœºå™¨è¶Šæ¥è¶Šå¤šï¼Œè°ƒç”¨æ–¹éœ€è¦çŸ¥é“æ¥å£çš„ç½‘ç»œåœ°å€ï¼Œå¦‚æœé é…ç½®æ–‡ä»¶çš„æ–¹å¼å»æ§åˆ¶ç½‘ç»œåœ°å€ï¼Œå¯¹äºåŠ¨æ€æ–°å¢æœºå™¨ï¼Œç»´æŠ¤å¸¦æ¥å¾ˆå¤§é—®é¢˜

ä¸»æµçš„æ³¨å†Œä¸­å¿ƒï¼š
    zookeeperã€Eurekaã€consulã€etcd ç­‰
</code></pre><p>â€‹        </p>
<p>2ã€åˆ†å¸ƒå¼åº”ç”¨çŸ¥è¯†CAPç†è®ºçŸ¥è¯†<br>â€‹    ç®€ä»‹ï¼šè®²è§£åˆ†å¸ƒå¼æ ¸å¿ƒçŸ¥è¯†CAPç†è®º</p>
<pre><code>CAPå®šç†ï¼š
    æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒConsistencyï¼ˆä¸€è‡´æ€§ï¼‰ã€ Availabilityï¼ˆå¯ç”¨æ€§ï¼‰ã€Partition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ï¼Œä¸‰è€…ä¸å¯åŒæ—¶è·å¾—ã€‚




ä¸€è‡´æ€§ï¼ˆCï¼‰ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ•°æ®å¤‡ä»½ï¼Œåœ¨åŒä¸€æ—¶åˆ»æ˜¯å¦åŒæ ·çš„å€¼ã€‚ï¼ˆæ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çš„æ•°æ®å®Œå…¨ä¸€è‡´ï¼Œè¶Šå¤šèŠ‚ç‚¹ï¼Œæ•°æ®åŒæ­¥è¶Šè€—æ—¶ï¼‰
</code></pre><p>â€‹<br>â€‹        å¯ç”¨æ€§ï¼ˆAï¼‰ï¼šè´Ÿè½½è¿‡å¤§åï¼Œé›†ç¾¤æ•´ä½“æ˜¯å¦è¿˜èƒ½å“åº”å®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚ã€‚ï¼ˆæœåŠ¡ä¸€ç›´å¯ç”¨ï¼Œè€Œä¸”æ˜¯æ­£å¸¸å“åº”æ—¶é—´ï¼‰</p>
<pre><code>åˆ†åŒºå®¹é”™æ€§ï¼ˆPï¼‰ï¼šåˆ†åŒºå®¹å¿æ€§ï¼Œå°±æ˜¯é«˜å¯ç”¨æ€§ï¼Œä¸€ä¸ªèŠ‚ç‚¹å´©äº†ï¼Œå¹¶ä¸å½±å“å…¶å®ƒçš„èŠ‚ç‚¹ï¼ˆ100ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‚äº†å‡ ä¸ªï¼Œä¸å½±å“æœåŠ¡ï¼Œè¶Šå¤šæœºå™¨è¶Šå¥½ï¼‰


CAPç†è®ºå°±æ˜¯è¯´åœ¨åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œæœ€å¤šåªèƒ½å®ç°ä¸Šé¢çš„ä¸¤ç‚¹ã€‚è€Œç”±äºå½“å‰çš„ç½‘ç»œç¡¬ä»¶è‚¯å®šä¼šå‡ºç°å»¶è¿Ÿä¸¢åŒ…ç­‰é—®é¢˜ï¼Œæ‰€ä»¥åˆ†åŒºå®¹å¿æ€§æ˜¯æˆ‘ä»¬å¿…é¡»éœ€è¦å®ç°çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´è¿›è¡Œæƒè¡¡
</code></pre><p>â€‹        </p>
<p>3ã€åˆ†å¸ƒå¼ç³»ç»ŸCAPåŸç†å¸¸è§é¢è¯•é¢˜å’Œæ³¨å†Œä¸­å¿ƒé€‰æ‹©<br>â€‹        ç®€ä»‹:è®²è§£CAPåŸåˆ™åœ¨é¢è¯•ä¸­å›ç­”å’Œæ³¨å†Œä¸­å¿ƒé€‰æ‹©</p>
<pre><code>C A æ»¡è¶³çš„æƒ…å†µä¸‹ï¼ŒPä¸èƒ½æ»¡è¶³çš„åŸå› ï¼š
    æ•°æ®åŒæ­¥(C)éœ€è¦æ—¶é—´ï¼Œä¹Ÿè¦æ­£å¸¸çš„æ—¶é—´å†…å“åº”(A)ï¼Œé‚£ä¹ˆæœºå™¨æ•°é‡å°±è¦å°‘ï¼Œæ‰€ä»¥På°±ä¸æ»¡è¶³

CP æ»¡è¶³çš„æƒ…å†µä¸‹ï¼ŒAä¸èƒ½æ»¡è¶³çš„åŸå› ï¼š
    æ•°æ®åŒæ­¥(C)éœ€è¦æ—¶é—´, æœºå™¨æ•°é‡ä¹Ÿå¤š(P)ï¼Œä½†æ˜¯åŒæ­¥æ•°æ®éœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥ä¸èƒ½å†æ­£å¸¸æ—¶é—´å†…å“åº”ï¼Œæ‰€ä»¥Aå°±ä¸æ»¡è¶³

AP æ»¡è¶³çš„æƒ…å†µä¸‹ï¼ŒCä¸èƒ½æ»¡è¶³çš„åŸå› ï¼š
    æœºå™¨æ•°é‡ä¹Ÿå¤š(P)ï¼Œæ­£å¸¸çš„æ—¶é—´å†…å“åº”(A)ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¸èƒ½åŠæ—¶åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œæ‰€ä»¥Cä¸æ»¡è¶³

æ³¨å†Œä¸­å¿ƒé€‰æ‹©ï¼š
    Zookeeperï¼šCPè®¾è®¡ï¼Œä¿è¯äº†ä¸€è‡´æ€§ï¼Œé›†ç¾¤æ­å»ºçš„æ—¶å€™ï¼ŒæŸä¸ªèŠ‚ç‚¹å¤±æ•ˆï¼Œåˆ™ä¼šè¿›è¡Œé€‰ä¸¾è¡Œçš„leaderï¼Œæˆ–è€…åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹ä¸å¯ç”¨ï¼Œåˆ™æ— æ³•æä¾›æœåŠ¡ï¼Œå› æ­¤å¯ç”¨æ€§æ²¡æ³•æ»¡è¶³

    Eurekaï¼šAPåŸåˆ™ï¼Œæ— ä¸»ä»èŠ‚ç‚¹ï¼Œä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œè‡ªåŠ¨åˆ‡æ¢å…¶ä»–èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨ï¼Œå»ä¸­å¿ƒåŒ–



ç»“è®ºï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­P,è‚¯å®šè¦æ»¡è¶³ï¼Œæ‰€ä»¥åªèƒ½åœ¨CAä¸­äºŒé€‰ä¸€
    æ²¡æœ‰æœ€å¥½çš„é€‰æ‹©ï¼Œæœ€å¥½çš„é€‰æ‹©æ˜¯æ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥è¿›è¡Œæ¶æ„è®¾è®¡

    å¦‚æœè¦æ±‚ä¸€è‡´æ€§ï¼Œåˆ™é€‰æ‹©zookeeperï¼Œå¦‚é‡‘èè¡Œä¸š

    å¦‚æœè¦å»å¯ç”¨æ€§ï¼Œåˆ™Eurekaï¼Œå¦‚ç”µå•†ç³»ç»Ÿ
</code></pre><p>4ã€SpringCloudå¾®æœåŠ¡æ ¸å¿ƒç»„ä»¶Eurekaä»‹ç»å’Œé—­æºåå½±å“<br>â€‹    ç®€ä»‹ï¼š<br>â€‹        SpringCloudä½“ç³»ä»‹ç»<br>â€‹            å®˜æ–¹åœ°å€ï¼š<a href="http://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">http://projects.spring.io/spring-cloud/</a></p>
<pre><code>    Eurekaçš„åŸºç¡€çŸ¥è¯†--&gt;ç”»å›¾è®²è§£äº¤äº’æµç¨‹ï¼ŒæœåŠ¡æä¾›è€…&lt;--&gt;æœåŠ¡æ¶ˆè´¹è€… ;

    Eureka 2.xé—­æºåé€‰æ‹©

å‚è€ƒï¼šhttps://www.jianshu.com/p/d32ae141f680
     https://blog.csdn.net/zjcjava/article/details/78608892
</code></pre><p>5ã€æœåŠ¡æ³¨å†Œå’Œå‘ç°Eureka Serveræ­å»ºå®æˆ˜<br>â€‹    ç®€ä»‹ï¼šä½¿ç”¨IDEAæ­å»ºEurekaæœåŠ¡ä¸­å¿ƒServerç«¯å¹¶å¯åŠ¨ï¼Œé¡¹ç›®åŸºæœ¬éª¨æ¶ä»‹ç»<br>â€‹<br>â€‹    å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#spring-cloud-eureka-server" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#spring-cloud-eureka-server</a><br>â€‹<br>â€‹    ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®<br>â€‹    ç¬¬äºŒæ­¥: æ·»åŠ æ³¨è§£ @EnableEurekaServer<br>â€‹    ç¬¬ä¸‰æ­¥ï¼šå¢åŠ é…ç½®application.yml<br>â€‹            server:<br>â€‹              port: 8761<br>â€‹<br>            eureka:<br>              instance:<br>                hostname: localhost<br>              client:</p>
<pre><code>          #å£°æ˜è‡ªå·±æ˜¯ä¸ªæœåŠ¡ç«¯
            registerWithEureka: false
            fetchRegistry: false
            serviceUrl:
              defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/

ç¬¬å››æ­¥ï¼šè®¿é—®æ³¨å†Œä¸­å¿ƒé¡µé¢

mavenåœ°å€: https://www.cnblogs.com/sword-successful/p/6408281.html
</code></pre><p>6ã€æœåŠ¡æ³¨å†Œå’Œå‘ç°ä¹‹Eureka Clientæ­å»ºå•†å“æœåŠ¡å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šæ­å»ºç”¨å•†å“æœåŠ¡ï¼Œå¹¶å°†æœåŠ¡æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</p>
<pre><code>1ã€åˆ›å»ºä¸€ä¸ªSpirngBootåº”ç”¨ï¼Œå¢åŠ æœåŠ¡æ³¨å†Œå’Œå‘ç°ä¾èµ–
2ã€æ¨¡æ‹Ÿå•†å“ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­

3ã€å¼€å‘å•†å“åˆ—è¡¨æ¥å£ï¼Œå•†å“è¯¦æƒ…æ¥å£

4ã€é…ç½®æ–‡ä»¶åŠ å…¥æ³¨å†Œä¸­å¿ƒåœ°å€
    ä½¿ç”¨eurekaå®¢æˆ·ç«¯ å®˜æ–¹æ–‡æ¡£ï¼šhttp://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#netflix-eureka-client-starter
</code></pre><p>7ã€EurekaæœåŠ¡æ³¨å†Œä¸­å¿ƒé…ç½®æ§åˆ¶å°é—®é¢˜å¤„ç†<br>â€‹    ç®€ä»‹ï¼šè®²è§£æœåŠ¡æ³¨å†Œä¸­å¿ƒç®¡ç†åå°ï¼Œï¼ˆåç»­è¿˜ä¼šç»†è®²ï¼‰</p>
<pre><code>é—®é¢˜ï¼šeurekaç®¡ç†åå°å‡ºç°ä¸€ä¸²çº¢è‰²å­—ä½“ï¼šæ˜¯è­¦å‘Šï¼Œè¯´æ˜æœ‰æœåŠ¡ä¸Šçº¿ç‡ä½

EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&apos;RE NOT. RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE.

å…³é—­æ£€æŸ¥æ–¹æ³•ï¼šeurekaæœåŠ¡ç«¯é…ç½®æ–‡ä»¶åŠ å…¥
server:
    enable-self-preservation: false
æ³¨æ„ï¼šè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ç¦æ­¢å…³é—­ï¼Œé»˜è®¤æ˜¯å¼€å¯çŠ¶æ€true
</code></pre><p>â€‹<br>â€‹    é—®é¢˜äºŒï¼šä¸ºä»€ä¹ˆåªåŠ ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒåœ°å€ï¼Œå°±å¯ä»¥æ³¨å†Œ<br>â€‹    By having spring-cloud-starter-netflix-eureka-client on the classpath, your application automatically registers with the Eureka Server. Configuration is required to locate the Eureka server, as shown in the following example:</p>
<p>ç¬¬å››ç«  æœåŠ¡æ¶ˆè´¹è€…ribbonå’Œfeignå®æˆ˜å’Œæ³¨å†Œä¸­å¿ƒé«˜å¯ç”¨</p>
<p>1ã€å¸¸ç”¨çš„æœåŠ¡é—´è°ƒç”¨æ–¹å¼è®²è§£<br>â€‹    ç®€ä»‹ï¼šè®²è§£å¸¸ç”¨çš„æœåŠ¡é—´çš„è°ƒç”¨æ–¹å¼</p>
<pre><code>RPC:
    è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œåƒè°ƒç”¨æœ¬åœ°æœåŠ¡(æ–¹æ³•)ä¸€æ ·è°ƒç”¨æœåŠ¡å™¨çš„æœåŠ¡
    æ”¯æŒåŒæ­¥ã€å¼‚æ­¥è°ƒç”¨
    å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹TCPè¿æ¥ï¼Œå¯ä»¥ä¸€æ¬¡å»ºç«‹ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥å¤šä¸ªè°ƒç”¨å¤ç”¨ä¸€æ¬¡é“¾æ¥

    PRCæ•°æ®åŒ…å°
        protobuf
        thrift
    rpcï¼šç¼–è§£ç ï¼Œåºåˆ—åŒ–ï¼Œé“¾æ¥ï¼Œä¸¢åŒ…ï¼Œåè®®


Rest(Http):
    httpè¯·æ±‚ï¼Œæ”¯æŒå¤šç§åè®®å’ŒåŠŸèƒ½
    å¼€å‘æ–¹ä¾¿æˆæœ¬ä½

    httpæ•°æ®åŒ…å¤§

    javaå¼€å‘ï¼šHttpClientï¼ŒURLConnection
</code></pre><p>2ã€å¾®æœåŠ¡è°ƒç”¨æ–¹å¼ä¹‹ribbonå®æˆ˜ è®¢å•è°ƒç”¨å•†å“æœåŠ¡<br>â€‹    ç®€ä»‹ï¼šå®æˆ˜ç”µå•†é¡¹ç›® è®¢å•æœåŠ¡ è°ƒç”¨å•†å“æœåŠ¡è·å–å•†å“ä¿¡æ¯<br>â€‹        1ã€åˆ›å»ºorder_serviceé¡¹ç›®<br>â€‹        2ã€å¼€å‘ä¼ªä¸‹å•æ¥å£<br>â€‹        3ã€ä½¿ç”¨ribbon. (ç±»ä¼¼httpClient,URLConnection) </p>
<pre><code>    å¯åŠ¨ç±»å¢åŠ æ³¨è§£
      @Bean
      @LoadBalanced
      public RestTemplate restTemplate() {
           return new RestTemplate();
      }
4ã€æ ¹æ®åç§°è¿›è¡Œè°ƒç”¨å•†å“ï¼Œè·å–å•†å“è¯¦æƒ…
</code></pre><p>3ã€é«˜çº§ç¯‡å¹…ä¹‹Ribbonè´Ÿè½½å‡è¡¡æºç åˆ†æå®æˆ˜<br>â€‹    ç®€ä»‹: è®²è§£ribbonæœåŠ¡é—´è°ƒç”¨è´Ÿè½½å‡è¡¡æºç åˆ†æ<br>â€‹        1ã€å®Œå–„ä¸‹å•æ¥å£<br>â€‹        2ã€åˆ†æ@LoadBalanced<br>â€‹            1ï¼‰é¦–å…ˆä»æ³¨å†Œä¸­å¿ƒè·å–providerçš„åˆ—è¡¨<br>â€‹            2ï¼‰é€šè¿‡ä¸€å®šçš„ç­–ç•¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹</p>
<pre><code>3ï¼‰å†è¿”å›ç»™restTemplateè°ƒç”¨
</code></pre><p>=============================================<br>æ›´å¤šå¹²è´§æŠ€æœ¯è®¿é—®å°Dè¯¾å ‚å®˜ç½‘ <a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a><br>å°Dè€å¸ˆä¸ªäººå¾®ä¿¡ï¼šjack794666918</p>
<h1 id="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-1"><a href="#å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-1" class="headerlink" title="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"></a>å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚</h1><p>4ã€é«˜çº§ç¯‡å¹…ä¹‹æœåŠ¡é—´è°ƒç”¨ä¹‹è´Ÿè½½å‡è¡¡ç­–ç•¥è°ƒæ•´å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šå®æˆ˜è°ƒæ•´é»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥å®æˆ˜</p>
<pre><code>è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼šhttp://cloud.spring.io/spring-cloud-static/Finchley.RELEASE/single/spring-cloud.html#_customizing_the_ribbon_client_by_setting_properties

åœ¨é…ç½®æ–‡ä»¶ymlé‡Œé¢ï¼Œè‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥
    #è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥
    product-service:
      ribbon:
        NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule

ç­–ç•¥é€‰æ‹©ï¼š
    1ã€å¦‚æœæ¯ä¸ªæœºå™¨é…ç½®ä¸€æ ·ï¼Œåˆ™å»ºè®®ä¸ä¿®æ”¹ç­–ç•¥ (æ¨è)
    2ã€å¦‚æœéƒ¨åˆ†æœºå™¨é…ç½®å¼ºï¼Œåˆ™å¯ä»¥æ”¹ä¸º WeightedResponseTimeRule
</code></pre><p>5ã€å¾®æœåŠ¡è°ƒç”¨æ–¹å¼ä¹‹feign å®æˆ˜ è®¢å•è°ƒç”¨å•†å“æœåŠ¡<br>â€‹    ç®€ä»‹ï¼šæ”¹é€ ç”µå•†é¡¹ç›® è®¢å•æœåŠ¡ è°ƒç”¨å•†å“æœåŠ¡è·å–å•†å“ä¿¡æ¯<br>â€‹        Feignï¼š ä¼ªRPCå®¢æˆ·ç«¯(æœ¬è´¨è¿˜æ˜¯ç”¨http)<br>â€‹        å®˜æ–¹æ–‡æ¡£: <a href="https://cloud.spring.io/spring-cloud-openfeign/" target="_blank" rel="noopener">https://cloud.spring.io/spring-cloud-openfeign/</a></p>
<pre><code>1ã€ä½¿ç”¨feignæ­¥éª¤è®²è§£ï¼ˆæ–°æ—§ç‰ˆæœ¬ä¾èµ–åç§°ä¸ä¸€æ ·ï¼‰
    åŠ å…¥ä¾èµ–
         &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;
        &lt;/dependency&gt;
    å¯åŠ¨ç±»å¢åŠ @EnableFeignClients
    å¢åŠ ä¸€ä¸ªæ¥å£ å¹¶@FeignClient(name=&quot;product-service&quot;)

2ã€ç¼–ç å®æˆ˜


3ã€æ³¨æ„ç‚¹ï¼š
    1ã€è·¯å¾„
    2ã€Httpæ–¹æ³•å¿…é¡»å¯¹åº”
    3ã€ä½¿ç”¨requestBodyï¼Œåº”è¯¥ä½¿ç”¨@PostMapping
    4ã€å¤šä¸ªå‚æ•°çš„æ—¶å€™ï¼Œé€šè¿‡@RequestParamï¼ˆ&quot;id&quot;) int id)æ–¹å¼è°ƒç”¨
</code></pre><p>6ã€Feignæ ¸å¿ƒæºç è§£è¯»å’ŒæœåŠ¡è°ƒç”¨æ–¹å¼ribbonå’ŒFeigné€‰æ‹©<br>â€‹    ç®€ä»‹: è®²è§£Feignæ ¸å¿ƒæºç è§£è¯»å’Œ æœåŠ¡é—´çš„è°ƒç”¨æ–¹å¼ribbonã€feigné€‰æ‹©<br>â€‹<br>â€‹        1ã€ribbonå’Œfeignä¸¤ä¸ªçš„åŒºåˆ«å’Œé€‰æ‹©<br>â€‹            é€‰æ‹©feign<br>â€‹                é»˜è®¤é›†æˆäº†ribbon<br>â€‹                å†™èµ·æ¥æ›´åŠ æ€è·¯æ¸…æ™°å’Œæ–¹ä¾¿<br>â€‹                é‡‡ç”¨æ³¨è§£æ–¹å¼è¿›è¡Œé…ç½®ï¼Œé…ç½®ç†”æ–­ç­‰æ–¹å¼æ–¹ä¾¿<br>â€‹<br>â€‹        2ã€è¶…æ—¶é…ç½®<br>â€‹            é»˜è®¤optons readtimeoutæ˜¯60ï¼Œä½†æ˜¯ç”±äºhystrixé»˜è®¤æ˜¯1ç§’è¶…æ—¶<br>â€‹    </p>
<pre><code>#ä¿®æ”¹è°ƒç”¨è¶…æ—¶æ—¶é—´
feign:
  client:
    config:
      default:
        connectTimeout: 2000
        readTimeout: 2000

æ¨¡æ‹Ÿæ¥å£å“åº”æ…¢ï¼Œçº¿ç¨‹ç¡çœ æ–°çš„æ–¹å¼
  try {
        TimeUnit.SECONDS.sleep(1);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
</code></pre><p>ç¬¬äº”ç«  äº’è”ç½‘æ¶æ„æœåŠ¡é™çº§ç†”æ–­ Hystrix å®æˆ˜</p>
<p>1ã€åˆ†å¸ƒå¼æ ¸å¿ƒçŸ¥è¯†ä¹‹ç†”æ–­ã€é™çº§è®²è§£<br>â€‹    ç®€ä»‹ï¼šç³»ç»Ÿè´Ÿè½½è¿‡é«˜ï¼Œçªå‘æµé‡æˆ–è€…ç½‘ç»œç­‰å„ç§å¼‚å¸¸æƒ…å†µä»‹ç»ï¼Œå¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆ</p>
<pre><code>1ã€ç†”æ–­ï¼š
    ä¿é™©ä¸ï¼Œç†”æ–­æœåŠ¡ï¼Œä¸ºäº†é˜²æ­¢æ•´ä¸ªç³»ç»Ÿæ•…éšœï¼ŒåŒ…å«å­å’Œä¸‹æ¸¸æœåŠ¡

    ä¸‹å•æœåŠ¡ -ã€‹å•†å“æœåŠ¡
            -ã€‹ç”¨æˆ·æœåŠ¡ ï¼ˆå‡ºç°å¼‚å¸¸-ã€‹ç†”æ–­ï¼‰

2ã€é™çº§ï¼š
    æŠ›å¼ƒä¸€äº›éæ ¸å¿ƒçš„æ¥å£å’Œæ•°æ®

    æ—…è¡Œç®±çš„ä¾‹å­ï¼šåªå¸¦æ ¸å¿ƒçš„ç‰©å“ï¼ŒæŠ›å¼ƒéæ ¸å¿ƒçš„ï¼Œç­‰æœ‰æ¡ä»¶çš„æ—¶å€™å†å»æºå¸¦è¿™äº›ç‰©å“
</code></pre><p>â€‹<br>â€‹    3ã€ç†”æ–­å’Œé™çº§äº’ç›¸äº¤é›†<br>â€‹        ç›¸åŒç‚¹ï¼š<br>â€‹            1ï¼‰ä»å¯ç”¨æ€§å’Œå¯é æ€§è§¦å‘ï¼Œä¸ºäº†é˜²æ­¢ç³»ç»Ÿå´©æºƒ<br>â€‹            2ï¼‰æœ€ç»ˆè®©ç”¨æˆ·ä½“éªŒåˆ°çš„æ˜¯æŸäº›åŠŸèƒ½æš‚æ—¶ä¸èƒ½ç”¨<br>â€‹<br>â€‹        ä¸åŒç‚¹<br>â€‹            1ï¼‰æœåŠ¡ç†”æ–­ä¸€èˆ¬æ˜¯ä¸‹æ¸¸æœåŠ¡æ•…éšœå¯¼è‡´çš„ï¼Œè€ŒæœåŠ¡é™çº§ä¸€èˆ¬æ˜¯ä»æ•´ä½“ç³»ç»Ÿè´Ÿè·è€ƒè™‘ï¼Œç”±è°ƒç”¨æ–¹æ§åˆ¶</p>
<p>2ã€Netflixå¼€æºç»„ä»¶æ–­è·¯å™¨Hystrixä»‹ç»<br>â€‹    ç®€ä»‹ï¼šä»‹ç»HystrixåŸºç¡€çŸ¥è¯†å’Œä½¿ç”¨åœºæ™¯<br>â€‹<br>â€‹    æ–‡æ¡£åœ°å€ï¼š<br>â€‹        <a href="https://github.com/Netflix/Hystrix" target="_blank" rel="noopener">https://github.com/Netflix/Hystrix</a><br>â€‹        <a href="https://github.com/Netflix/Hystrix/wiki" target="_blank" rel="noopener">https://github.com/Netflix/Hystrix/wiki</a><br>â€‹<br>â€‹    1ã€ä»€ä¹ˆæ˜¯Hystrixï¼Ÿ<br>â€‹        1ï¼‰hystrixå¯¹åº”çš„ä¸­æ–‡åå­—æ˜¯â€œè±ªçŒªâ€<br>â€‹<br>        2ï¼‰hystrix    è‹±[hÉªstâ€™rÉªks] ç¾[hÉªstâ€™rÉªks]</p>
<p>â€‹<br>â€‹    2ã€ä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ<br>â€‹        åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿé‡Œï¼Œä¸€ä¸ªæœåŠ¡ä¾èµ–å¤šä¸ªæœåŠ¡ï¼Œå¯èƒ½å­˜åœ¨æŸä¸ªæœåŠ¡è°ƒç”¨å¤±è´¥ï¼Œ<br>â€‹        æ¯”å¦‚è¶…æ—¶ã€å¼‚å¸¸ç­‰ï¼Œå¦‚ä½•èƒ½å¤Ÿä¿è¯åœ¨ä¸€ä¸ªä¾èµ–å‡ºé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå¯¼è‡´æ•´ä½“æœåŠ¡å¤±è´¥ï¼Œ<br>â€‹        é€šè¿‡Hystrixå°±å¯ä»¥è§£å†³<br>â€‹<br>â€‹        <a href="http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#_circuit_breaker_hystrix_clients" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-netflix/single/spring-cloud-netflix.html#_circuit_breaker_hystrix_clients</a><br>â€‹<br>    3ã€æä¾›äº†ç†”æ–­ã€éš”ç¦»ã€Fallbackã€cacheã€ç›‘æ§ç­‰åŠŸèƒ½</p>
<pre><code>4ã€ç†”æ–­åæ€ä¹ˆå¤„ç†ï¼Ÿ
    å‡ºç°é”™è¯¯ä¹‹åå¯ä»¥ fallback é”™è¯¯çš„å¤„ç†ä¿¡æ¯

    å…œåº•æ•°æ®
</code></pre><p>3ã€Feignç»“åˆHystrixæ–­è·¯å™¨å¼€å‘å®æˆ˜ã€Šä¸Šã€‹<br>â€‹    ç®€ä»‹ï¼šè®²è§£SpringCloudæ•´åˆæ–­è·¯å™¨çš„ä½¿ç”¨ï¼Œç”¨æˆ·æœåŠ¡å¼‚å¸¸æƒ…å†µ</p>
<pre><code>1ã€åŠ å…¥ä¾èµ–

æ³¨æ„ï¼šç½‘ä¸Šæ–°æ—§ç‰ˆæœ¬é—®é¢˜ï¼Œæ‰€ä»¥è¦ä»¥å®˜ç½‘ä¸ºä¸»ï¼Œä¸ç„¶éƒ¨åˆ†æ³¨è§£ä¼šä¸¢å¤±
æœ€æ–°ç‰ˆæœ¬ 2.0

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;
    &lt;/dependency&gt;


2ã€å¢åŠ æ³¨è§£
    å¯åŠ¨ç±»é‡Œé¢å¢åŠ æ³¨è§£
    @EnableCircuitBreaker

    æ³¨è§£è¶Šæ¥è¶Šå¤š-ã€‹ SpringCloudApplicationæ³¨è§£

3ã€APIæ¥å£ç¼–ç å®æˆ˜
  ç†”æ–­-ã€‹é™çº§

    1ï¼‰æœ€å¤–å±‚apiä½¿ç”¨ï¼Œå¥½æ¯”å¼‚å¸¸å¤„ç†ï¼ˆç½‘ç»œå¼‚å¸¸ï¼Œå‚æ•°æˆ–è€…å†…éƒ¨è°ƒç”¨é—®é¢˜ï¼‰
        apiæ–¹æ³•ä¸Šå¢åŠ  @HystrixCommand(fallbackMethod = &quot;saveOrderFail&quot;)

        ç¼–å†™fallbackæ–¹æ³•å®ç°ï¼Œæ–¹æ³•ç­¾åä¸€å®šè¦å’Œapiæ–¹æ³•ç­¾åä¸€è‡´ï¼ˆæ³¨æ„ç‚¹ï¼ï¼ï¼ï¼‰
</code></pre><p>â€‹        </p>
<pre><code>è¡¥å……ï¼š ä¿®æ”¹mavenä»“åº“åœ°å€
pom.xmlä¸­ä¿®æ”¹

&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;nexus-aliyun&lt;/id&gt;
        &lt;name&gt;Nexus aliyun&lt;/name&gt;
        &lt;layout&gt;default&lt;/layout&gt;
        &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;/enabled&gt;
        &lt;/snapshots&gt;
        &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/releases&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre><p>4ã€Feignç»“åˆHystrixæ–­è·¯å™¨å¼€å‘å®æˆ˜ã€Šä¸‹ã€‹<br>â€‹    ç®€ä»‹ï¼šè®²è§£SpringCloudæ•´åˆæ–­è·¯å™¨çš„ä½¿ç”¨ï¼Œç”¨æˆ·æœåŠ¡å¼‚å¸¸æƒ…å†µ<br>â€‹    1ã€feignç»“åˆHystrix<br>â€‹<br>â€‹        1ï¼‰å¼€å¯feignæ”¯æŒhystrix  (æ³¨æ„ï¼Œä¸€å®šè¦å¼€å¯ï¼Œæ—§ç‰ˆæœ¬é»˜è®¤æ”¯æŒï¼Œæ–°ç‰ˆæœ¬é»˜è®¤å…³é—­)<br>â€‹            feign:<br>â€‹              hystrix:<br>â€‹                enabled: true<br>â€‹<br>â€‹        2ï¼‰FeignClient(name=â€xxxâ€, fallback=xxx.class ), classéœ€è¦ç»§æ‰¿å½“å‰FeignClientçš„ç±»</p>
<p>5ã€ç†”æ–­é™çº§æœåŠ¡å¼‚å¸¸æŠ¥è­¦é€šçŸ¥å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šå®Œå–„æœåŠ¡ç†”æ–­å¤„ç†ï¼ŒæŠ¥è­¦æœºåˆ¶å®Œå–„</p>
<pre><code>1ã€åŠ å…¥redisä¾èµ–
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
    &lt;/dependency&gt;
2ã€é…ç½®redisé“¾æ¥ä¿¡æ¯
  redis:
    database: 0
    host: 127.0.0.1
    port: 6379
    timeout: 2000

3ã€ä½¿ç”¨

    //ç›‘æ§æŠ¥è­¦
    String saveOrderKye = &quot;save-order&quot;;
    String sendValue = redisTemplate.opsForValue().get(saveOrderKye);
    final String ip = request.getRemoteAddr();
    new Thread( ()-&gt;{
        if (StringUtils.isBlank(sendValue)) {
            System.out.println(&quot;ç´§æ€¥çŸ­ä¿¡ï¼Œç”¨æˆ·ä¸‹å•å¤±è´¥ï¼Œè¯·ç¦»å¼€æŸ¥æ‰¾åŸå› ,ipåœ°å€æ˜¯=&quot;+ip);
            //å‘é€ä¸€ä¸ªhttpè¯·æ±‚ï¼Œè°ƒç”¨çŸ­ä¿¡æœåŠ¡ TODO
            redisTemplate.opsForValue().set(saveOrderKye, &quot;save-order-fail&quot;, 20, TimeUnit.SECONDS);
        }else{
            System.out.println(&quot;å·²ç»å‘é€è¿‡çŸ­ä¿¡ï¼Œ20ç§’å†…ä¸é‡å¤å‘é€&quot;);
        }
    }).start();
</code></pre><p>6ã€é«˜çº§ç¯‡å¹…ä¹‹æ·±å…¥æºç å‰–æHystrixé™çº§ç­–ç•¥å’Œè°ƒæ•´<br>â€‹    ç®€ä»‹ï¼šæºç åˆ†æHystrixé™çº§ç­–ç•¥å’Œè°ƒæ•´</p>
<pre><code>1ã€æŸ¥çœ‹é»˜è®¤è®²è§£ç­–ç•¥ HystrixCommandProperties
    1ï¼‰execution.isolation.strategy   éš”ç¦»ç­–ç•¥
        THREAD çº¿ç¨‹æ± éš”ç¦» ï¼ˆé»˜è®¤ï¼‰
        SEMAPHORE ä¿¡å·é‡
            ä¿¡å·é‡é€‚ç”¨äºæ¥å£å¹¶å‘é‡é«˜çš„æƒ…å†µï¼Œå¦‚æ¯ç§’æ•°åƒæ¬¡è°ƒç”¨çš„æƒ…å†µï¼Œå¯¼è‡´çš„çº¿ç¨‹å¼€é”€è¿‡é«˜ï¼Œé€šå¸¸åªé€‚ç”¨äºéç½‘ç»œè°ƒç”¨ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«

    2ï¼‰execution.isolation.thread.timeoutInMilliseconds  è¶…æ—¶æ—¶é—´
        é»˜è®¤ 1000æ¯«ç§’

    3ï¼‰execution.timeout.enabled æ˜¯å¦å¼€å¯è¶…æ—¶é™åˆ¶ ï¼ˆä¸€å®šä¸è¦ç¦ç”¨ï¼‰


    4ï¼‰execution.isolation.semaphore.maxConcurrentRequests éš”ç¦»ç­–ç•¥ä¸º ä¿¡å·é‡çš„æ—¶å€™ï¼Œå¦‚æœè¾¾åˆ°æœ€å¤§å¹¶å‘æ•°æ—¶ï¼Œåç»­è¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œé»˜è®¤æ˜¯10


å®˜æ–¹æ–‡æ¡£:
    https://github.com/Netflix/Hystrix/wiki/Configuration#execution.isolation.strategy

2ã€è°ƒæ•´ç­–ç•¥
    è¶…æ—¶æ—¶é—´è°ƒæ•´

hystrix:
  command:
    default:
      execution:
        isolation:
          thread:
            timeoutInMilliseconds: 4000
</code></pre><p>7ã€æ–­è·¯å™¨Dashboardç›‘æ§ä»ªè¡¨ç›˜å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šè®²è§£æ–­è·¯å™¨DashboardåŸºç¡€ä½¿ç”¨å’ŒæŸ¥çœ‹<br>â€‹    1ã€åŠ å…¥ä¾èµ–<br>â€‹         <dependency><br>â€‹            <groupid>org.springframework.cloud</groupid><br>â€‹            <artifactid>spring-cloud-starter-netflix-hystrix-dashboard</artifactid><br>â€‹        </dependency></p>
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
    &lt;/dependency&gt;

2ã€å¯åŠ¨ç±»å¢åŠ æ³¨è§£
    @EnableHystrixDashboard
</code></pre><p>â€‹<br>â€‹    3ã€é…ç½®æ–‡ä»¶å¢åŠ endpoint<br>management:<br>  endpoints:<br>â€‹    web:<br>â€‹      exposure:<br>â€‹        include: â€œ*â€</p>
<pre><code>4ã€è®¿é—®å…¥å£
    http://localhost:8781/hystrix

    Hystrix Dashboardè¾“å…¥ï¼š http://localhost:8781/actuator/hystrix.stream 
</code></pre><p>â€‹<br>â€‹    å‚è€ƒèµ„æ–™<br>â€‹        é»˜è®¤å¼€å¯ç›‘æ§é…ç½®<br>â€‹        <a href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-actuator" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-actuator</a><br>â€‹<br>â€‹        é…ç½®æ–‡ä»¶ç±»ï¼š<br>â€‹            spring-configuration-metadata.json</p>
<p>8ã€æ–­è·¯å™¨ç›‘æ§ä»ªè¡¨å‚æ•°è®²è§£å’Œæ¨¡æ‹Ÿç†”æ–­<br>â€‹    ç®€ä»‹ï¼šè®²è§£ æ–­è·¯å™¨ç›‘æ§ä»ªè¡¨ç›˜å‚æ•°å’Œæ¨¡æ‹Ÿç†”æ–­</p>
<pre><code>1ã€sse  server-send-eventæ¨é€åˆ°å‰ç«¯

èµ„æ–™ï¼šhttps://github.com/Netflix/Hystrix/wiki/Dashboard
</code></pre><p>ç¬¬å…­ç«  å¾®æœåŠ¡ç½‘å…³zuulå¼€å‘å®æˆ˜ </p>
<p>1ã€å¾®æœåŠ¡ç½‘å…³ä»‹ç»å’Œä½¿ç”¨åœºæ™¯<br>â€‹    ç®€ä»‹ï¼šè®²è§£ç½‘å…³çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯ (ç”»å›¾)<br>â€‹<br>â€‹    1ï¼‰ä»€ä¹ˆæ˜¯ç½‘å…³<br>â€‹        API Gatewayï¼Œæ˜¯ç³»ç»Ÿçš„å”¯ä¸€å¯¹å¤–çš„å…¥å£ï¼Œä»‹äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„ä¸­é—´å±‚ï¼Œå¤„ç†éä¸šåŠ¡åŠŸèƒ½ æä¾›è·¯ç”±è¯·æ±‚ã€é‰´æƒã€ç›‘æ§ã€ç¼“å­˜ã€é™æµç­‰åŠŸèƒ½<br>â€‹<br>â€‹            ç»Ÿä¸€æ¥å…¥<br>â€‹                æ™ºèƒ½è·¯ç”±<br>â€‹                ABæµ‹è¯•ã€ç°åº¦æµ‹è¯•<br>â€‹                è´Ÿè½½å‡è¡¡ã€å®¹ç¾å¤„ç†<br>â€‹                æ—¥å¿—åŸ‹ç‚¹ï¼ˆç±»ä¼¼Nignxæ—¥å¿—ï¼‰<br>â€‹<br>            æµé‡ç›‘æ§<br>                é™æµå¤„ç†<br>                æœåŠ¡é™çº§</p>
<pre><code>        å®‰å…¨é˜²æŠ¤
            é‰´æƒå¤„ç†
            ç›‘æ§
            æœºå™¨ç½‘ç»œéš”ç¦»


2ï¼‰ä¸»æµçš„ç½‘å…³
    zuulï¼šæ˜¯Netflixå¼€æºçš„å¾®æœåŠ¡ç½‘å…³ï¼Œå’ŒEureka,Ribbon,Hystrixç­‰ç»„ä»¶é…åˆä½¿ç”¨ï¼ŒZuul 2.0æ¯”1.0çš„æ€§èƒ½æé«˜å¾ˆå¤š

    kong: ç”±Mashapeå…¬å¸å¼€æºçš„ï¼ŒåŸºäºNginxçš„API gateway

    nginx+luaï¼šæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨,luaæ˜¯è„šæœ¬è¯­è¨€ï¼Œè®©Nginxæ‰§è¡ŒLuaè„šæœ¬ï¼Œå¹¶ä¸”é«˜å¹¶å‘ã€éé˜»å¡çš„å¤„ç†å„ç§è¯·æ±‚
</code></pre><p>2ã€SpringCloudçš„ç½‘å…³ç»„ä»¶zuulåŸºæœ¬ä½¿ç”¨<br>â€‹    ç®€ä»‹ï¼šè®²è§£zuulç½‘å…³åŸºæœ¬ä½¿ç”¨</p>
<pre><code>1ã€åŠ å…¥ä¾èµ–


2ã€å¯åŠ¨ç±»åŠ å…¥æ³¨è§£ @EnableZuulProxy
    é»˜è®¤é›†æˆæ–­è·¯å™¨  @EnableCircuitBreaker

    é»˜è®¤è®¿é—®è§„åˆ™  
        http://gateway:port/service-id/**

            ä¾‹å­ï¼šé»˜è®¤ /order-service/api/v1/order/save?user_id=2&amp;product_id=1
                 è‡ªå®šä¹‰ /xdclass_order/api/v1/order/save?user_id=2&amp;product_id=1

    è‡ªå®šä¹‰è·¯ç”±è½¬å‘ï¼š
        zuul:
         routes:
             order-service: /apigateway/**


    ç¯å¢ƒéš”ç¦»é…ç½®ï¼š
        éœ€æ±‚ ï¼šä¸æƒ³è®©é»˜è®¤çš„æœåŠ¡å¯¹å¤–æš´éœ²æ¥å£
            /order-service/api/v1/order/save

        é…ç½®ï¼š
        zuul: 
            ignored-patterns:
                - /*-service/api/v1/order/save
</code></pre><p>3ã€é«˜çº§ç¯‡å¹…ä¹‹Zuulå¸¸ç”¨é—®é¢˜åˆ†æå’Œç½‘å…³è¿‡æ»¤å™¨åŸç†åˆ†æ</p>
<pre><code>ç®€ä»‹ï¼šè®²è§£Zuulç½‘å…³åŸç†å’Œè¿‡æ»¤å™¨ç”Ÿå‘½å‘¨æœŸï¼Œ

1ã€è·¯ç”±åç§°å®šä¹‰é—®é¢˜
    è·¯ç”±æ˜ å°„é‡å¤è¦†ç›–é—®é¢˜

2ã€Httpè¯·æ±‚å¤´è¿‡æ»¤é—®é¢˜

3ã€è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºé—®é¢˜ ï¼Œè¿‡æ»¤å™¨çš„orderå€¼è¶Šå°ï¼Œè¶Šå…ˆæ‰§è¡Œ


4ã€å…±äº«RequestContextï¼Œä¸Šä¸‹æ–‡å¯¹è±¡
</code></pre><p>4ã€è‡ªå®šä¹‰Zuulè¿‡æ»¤å™¨å®ç°ç™»å½•é‰´æƒå®æˆ˜<br>â€‹    ç®€ä»‹ï¼šè‡ªå®šä¹‰Zuulè¿‡æ»¤å™¨å®ç°ç™»å½•é‰´æƒå®æˆ˜</p>
<pre><code>1ã€æ–°å»ºä¸€ä¸ªfilteråŒ…

2ã€æ–°å»ºä¸€ä¸ªç±»ï¼Œå®ç°ZuulFilterï¼Œé‡å†™é‡Œé¢çš„æ–¹æ³•

3ã€åœ¨ç±»é¡¶éƒ¨åŠ æ³¨è§£ï¼Œ@Component,è®©Springæ‰«æ
</code></pre><p>5ã€é«˜çº§ç¯‡å¹…ä¹‹é«˜å¹¶å‘æƒ…å†µä¸‹æ¥å£é™æµç‰¹æŠ€<br>â€‹    ç®€ä»‹ï¼šè°·æ­Œguavaæ¡†æ¶ä»‹ç»ï¼Œç½‘å…³é™æµä½¿ç”¨</p>
<pre><code>1ã€nginxå±‚é™æµ

2ã€ç½‘å…³å±‚é™æµ
</code></pre><p>6ã€Zuulå¾®æœåŠ¡ç½‘å…³é›†ç¾¤æ­å»º<br>â€‹    ç®€ä»‹ï¼šå¾®æœåŠ¡ç½‘å…³Zullé›†ç¾¤æ­å»º</p>
<pre><code>1ã€nginx+lvs+keepalive 
https://www.cnblogs.com/liuyisai/p/5990645.html
</code></pre><p>ç¬¬ä¸ƒç«  åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç³»ç»ŸSleuthå’ŒZipKinå®æˆ˜<br>â€‹    </p>
<pre><code>1ã€å¾®æœåŠ¡ä¸‹çš„é“¾è·¯è¿½è¸ªè®²è§£å’Œé‡è¦æ€§
    ç®€ä»‹ï¼šè®²è§£ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç³»ç»Ÿï¼ŒåŠä½¿ç”¨å¥½å¤„




2ã€SpringCloudçš„é“¾è·¯è¿½è¸ªç»„ä»¶Sleuthå®æˆ˜
    ç®€ä»‹ï¼šè®²è§£åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç»„ä»¶Sleuthå®æˆ˜

    1ã€å®˜æ–¹æ–‡æ¡£
    http://cloud.spring.io/spring-cloud-static/Finchley.SR1/single/spring-cloud.html#sleuth-adding-project

    2ã€ä»€ä¹ˆæ˜¯Sleuth
        ä¸€ä¸ªç»„ä»¶ï¼Œä¸“é—¨ç”¨äºè®°å½•é“¾è·¯æ•°æ®çš„å¼€æºç»„ä»¶

        [order-service,96f95a0dd81fe3ab,852ef4cfcdecabf3,false]

        1ã€ç¬¬ä¸€ä¸ªå€¼ï¼Œspring.application.nameçš„å€¼

        2ã€ç¬¬äºŒä¸ªå€¼ï¼Œ96f95a0dd81fe3ab ï¼Œsleuthç”Ÿæˆçš„ä¸€ä¸ªIDï¼Œå«Trace IDï¼Œç”¨æ¥æ ‡è¯†ä¸€æ¡è¯·æ±‚é“¾è·¯ï¼Œä¸€æ¡è¯·æ±‚é“¾è·¯ä¸­åŒ…å«ä¸€ä¸ªTrace IDï¼Œå¤šä¸ªSpan ID

        3ã€ç¬¬ä¸‰ä¸ªå€¼ï¼Œ852ef4cfcdecabf3ã€spanid åŸºæœ¬çš„å·¥ä½œå•å…ƒï¼Œè·å–å…ƒæ•°æ®ï¼Œå¦‚å‘é€ä¸€ä¸ªhttp

        4ã€ç¬¬å››ä¸ªå€¼ï¼šfalseï¼Œæ˜¯å¦è¦å°†è¯¥ä¿¡æ¯è¾“å‡ºåˆ°zipkinæœåŠ¡ä¸­æ¥æ”¶é›†å’Œå±•ç¤ºã€‚

    3ã€æ·»åŠ ä¾èµ–
        &lt;dependency&gt;
         &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
         &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;
         &lt;/dependency&gt;






3ã€SpringCloudçš„é“¾è·¯è¿½è¸ªç»„ä»¶Sleuthå¸¸è§é—®é¢˜è¯´æ˜
    ç®€ä»‹ï¼šè®²è§£åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç»„ä»¶Sleuthå¸¸è§é—®é¢˜è¯´æ˜
</code></pre><p>â€‹      </p>
<pre><code>4ã€å¯è§†åŒ–é“¾è·¯è¿½è¸ªç³»ç»ŸZipkinéƒ¨ç½²
    ç®€ä»‹ï¼šè®²è§£Zipkinçš„ä»‹ç»å’Œéƒ¨ç½²
    1ã€ä»€ä¹ˆæ˜¯zipkin
        å®˜ç½‘ï¼šhttps://zipkin.io/
        å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„APMå·¥å…·ï¼ˆApplication Performance Managementï¼‰,åŸºäºGoogle Dapperçš„åŸºç¡€å®ç°ï¼Œå’Œsleuthç»“åˆå¯ä»¥æä¾›å¯è§†åŒ–webç•Œé¢åˆ†æè°ƒç”¨é“¾è·¯è€—æ—¶æƒ…å†µ            

    2ã€åŒç±»äº§å“
        é¹°çœ¼ï¼ˆEagleEyeï¼‰
        CAT
        twitterå¼€æºzipkinï¼Œç»“åˆsleuth
        Pinpointï¼Œè¿ç”¨JavaAgentå­—èŠ‚ç å¢å¼ºæŠ€æœ¯
        StackDriver Trace (Google) 

    3ã€å¼€å§‹ä½¿ç”¨
        https://github.com/openzipkin/zipkin
        https://zipkin.io/pages/quickstart.html

        zipkinç»„æˆï¼šCollectorã€Storageã€Restful APIã€Web UIç»„æˆ

    4ã€çŸ¥è¯†æ‹“å±•ï¼šOpenTracing
    OpenTracing å·²è¿›å…¥ CNCFï¼Œæ­£åœ¨ä¸ºå…¨çƒçš„åˆ†å¸ƒå¼è¿½è¸ªï¼Œæä¾›ç»Ÿä¸€çš„æ¦‚å¿µå’Œæ•°æ®æ ‡å‡†ã€‚ 
    é€šè¿‡æä¾›å¹³å°æ— å…³ã€å‚å•†æ— å…³çš„ APIï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ–¹ä¾¿çš„æ·»åŠ ï¼ˆæˆ–æ›´æ¢ï¼‰è¿½è¸ªç³»ç»Ÿçš„å®ç°ã€‚


    æ¨èé˜…è¯»ï¼š
        http://blog.daocloud.io/cncf-3/
        https://www.zhihu.com/question/27994350
        https://yq.aliyun.com/articles/514488?utm_content=m_43347







5ã€é«˜çº§ç¯‡å¹…ä¹‹é“¾è·¯è¿½è¸ªç»„ä»¶Zipkin+Sleuthå®æˆ˜
    ç®€ä»‹ï¼šä½¿ç”¨Zipkin+Sleuthä¸šåŠ¡åˆ†æè°ƒç”¨é“¾è·¯åˆ†æå®æˆ˜

    1ã€æ–‡æ¡£
    http://cloud.spring.io/spring-cloud-static/Finchley.SR1/single/spring-cloud.html#_sleuth_with_zipkin_via_http

      sleuthæ”¶é›†è·Ÿè¸ªä¿¡æ¯é€šè¿‡httpè¯·æ±‚å‘é€ç»™zipkin serverï¼Œzipkinserverè¿›è¡Œè·Ÿè¸ªä¿¡æ¯çš„å­˜å‚¨ä»¥åŠæä¾›Rest APIå³å¯ï¼ŒZipkin UIè°ƒç”¨å…¶APIæ¥å£è¿›è¡Œæ•°æ®å±•ç¤º

      é»˜è®¤å­˜å‚¨æ˜¯å†…å­˜ï¼Œå¯ä¹Ÿç”¨mysqlã€æˆ–è€…elasticsearchç­‰å­˜å‚¨

    2ã€åŠ å…¥ä¾èµ–
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;
    &lt;/dependency&gt;

    é‡Œé¢åŒ…å« spring-cloud-starter-sleuthã€spring-cloud-sleuth-zipkin

    3ã€æ–‡æ¡£è¯´æ˜ï¼šhttp://cloud.spring.io/spring-cloud-static/Finchley.SR1/single/spring-cloud.html#_features_2

    4ã€é…ç½®zipkin.base-url

    5ã€é…ç½®é‡‡æ ·ç™¾åˆ†é—­spring.sleuth.sampler


    æ¨èèµ„æ–™ï¼š
        https://blog.csdn.net/jrn1012/article/details/77837710
</code></pre><p>=============================================<br>æ›´å¤šå¹²è´§æŠ€æœ¯è®¿é—®å°Dè¯¾å ‚å®˜ç½‘ <a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a><br>å°Dè€å¸ˆä¸ªäººå¾®ä¿¡ï¼šjack794666918</p>
<h1 id="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-2"><a href="#å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-2" class="headerlink" title="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"></a>å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚</h1><p>â€‹<br>ç¬¬å…«ç«  å¾®æœåŠ¡æ ¸å¿ƒçŸ¥è¯†åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒConfigå®æˆ˜<br>â€‹<br>â€‹    1ã€å¾®æœåŠ¡ä¸‹çš„åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ<br>â€‹        ç®€ä»‹ï¼šè®²è§£ä»€ä¹ˆæ˜¯é…ç½®ä¸­å¿ƒåŠä½¿ç”¨å‰åçš„å¥½å¤„ (ç”»å›¾)<br>â€‹        ä»€ä¹ˆæ˜¯é…ç½®ä¸­å¿ƒï¼š<br>â€‹            ä¸€å¥è¯ï¼šç»Ÿä¸€ç®¡ç†é…ç½®, å¿«é€Ÿåˆ‡æ¢å„ä¸ªç¯å¢ƒçš„é…ç½®<br>â€‹<br>â€‹        ç›¸å…³äº§å“ï¼š<br>â€‹            ç™¾åº¦çš„disconf<br>â€‹                åœ°å€:<a href="https://github.com/knightliao/disconf" target="_blank" rel="noopener">https://github.com/knightliao/disconf</a><br>â€‹<br>            é˜¿é‡Œçš„diamand<br>                åœ°å€ï¼š<a href="https://github.com/takeseem/diamond" target="_blank" rel="noopener">https://github.com/takeseem/diamond</a></p>
<pre><code>        springcloudçš„configs-server:
            åœ°å€ï¼šhttp://cloud.spring.io/spring-cloud-config/


    æ¨èå¹²è´§æ–‡ç« ï¼šhttp://jm.taobao.org/2016/09/28/an-article-about-config-center/





2ã€SpringCloudçš„é…ç½®ä¸­å¿ƒç»„ä»¶config-serverå®æˆ˜
    ç®€ä»‹ï¼šè®²è§£SpringCloudé…ç½®ä¸­å¿ƒconfig-serverå®æˆ˜
    1ã€æ–°å»ºé¡¹ç›®ï¼Œåˆ›å»ºconfig-server
    2ã€å¯åŠ¨ç±»å¢åŠ æ³¨è§£
        @EnableConfigServer












3ã€ä½¿ç”¨gitæœåŠ¡å™¨ç»“åˆConfigæ­å»ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ
    ç®€ä»‹ï¼šè®²è§£ä½¿ç”¨gitæœåŠ¡å™¨ç»“åˆConfigæ­å»ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ

    1ã€é»˜è®¤ä½¿ç”¨gitå­˜å‚¨é…ç½®ä¸­å¿ƒ
        ä½¿ç”¨gitæœåŠ¡å™¨ï¼Œå¯ä»¥è‡ªå·±æ­å»ºgitlabæœåŠ¡å™¨
        æˆ–è€…ä½¿ç”¨githubã€å¼€æºä¸­å›½gitã€é˜¿é‡Œäº‘git

        794666918@qq.com
        xdclass.net123

        https://gitee.com/waitforxy/config_cloud.git

    2ã€é…ç½®æ–‡ä»¶æ·»åŠ é…ç½®
        spring:
          application:
            name: config-server
        #gité…ç½®
          cloud:
            config:
              server:
                git:
                  uri: https://gitee.com/waitforxy/config_cloud
                  username: 794666918@qq.com
                  password: xdclass.net123
                  #è¶…æ—¶æ—¶é—´
                  timeout: 5
                    #åˆ†æ”¯
                    default-label: master


    3ã€è®¿é—®æ–¹å¼ï¼ˆä¸€å®šè¦æ³¨æ„è¯­æ³•ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œä¼šå‡ºé”™ï¼‰
        å¤šç§è®¿é—®è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡å¯åŠ¨æ—¥å¿—å»æŸ¥çœ‹
        ä¾‹å­ http://localhost:9100/product-service.yml

        /{name}-{profiles}.properties
        /{name}-{profiles}.yml
        /{name}-{profiles}.json
        /{label}/{name}-{profiles}.yml

        name æœåŠ¡å™¨åç§°
        profile ç¯å¢ƒåç§°ï¼Œå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§
        lable ä»“åº“åˆ†æ”¯ã€é»˜è®¤masteråˆ†æ”¯
</code></pre><p>4ã€åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯ä½¿ç”¨å®æˆ˜<br>â€‹    ç®€ä»‹ï¼šå¾®æœåŠ¡é‡Œé¢å®¢æˆ·ç«¯æ¥å…¥é…ç½®ä¸­å¿ƒå®æˆ˜<br>â€‹        å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html#_spring_cloud_config_client" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-config/single/spring-cloud-config.html#_spring_cloud_config_client</a><br>â€‹<br>â€‹        1ã€åŠ å…¥ä¾èµ–<br>â€‹             <dependency><br>â€‹                <groupid>org.springframework.cloud</groupid><br>â€‹                <artifactid>spring-cloud-config-client</artifactid><br>â€‹            </dependency><br>â€‹<br>â€‹         2ã€ä¿®æ”¹å¯¹åº”æœåŠ¡çš„é…ç½®æ–‡ä»¶,æŠŠapplication.yml æ”¹ä¸º bootstrap.yml<br>â€‹            #æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€<br>â€‹            eureka:<br>â€‹              client:<br>â€‹                serviceUrl:<br>â€‹                  defaultZone: <a href="http://localhost:8761/eureka/" target="_blank" rel="noopener">http://localhost:8761/eureka/</a><br>â€‹    </p>
<pre><code>    #æœåŠ¡çš„åç§°
    spring:
      application:
        name: product-service
      #æŒ‡å®šä»å“ªä¸ªé…ç½®ä¸­å¿ƒè¯»å–
      cloud:
        config:
          discovery:
            service-id: CONFIG-SERVER
            enabled: true
          profile: test
          #å»ºè®®ç”¨lableå»åŒºåˆ†ç¯å¢ƒï¼Œé»˜è®¤æ˜¯lableæ˜¯masteråˆ†æ”¯
          #label: test

æ³¨æ„ç‚¹ï¼š
    1.é…ç½®æ–‡ä»¶è¦ç”¨bootstrap.yml
    2.é»˜è®¤è¯»å–æ–‡ä»¶åæ˜¯ æœåŠ¡åç§°
</code></pre><p>ç¬¬ä¹ç«  å¾®æœåŠ¡æ¶ˆæ¯æ€»çº¿Busç»“åˆæ¶ˆæ¯é˜Ÿåˆ—RabbitMQå®æˆ˜</p>
<pre><code>1ã€æ¶ˆæ¯æ€»çº¿Busä»‹ç»å’Œä½¿ç”¨åœºæ™¯
    ç®€ä»‹ï¼šè®²è§£æ¶ˆæ¯æ€»çº¿Busä»‹ç»å’Œä½¿ç”¨åœºæ™¯
    1ã€ä»€ä¹ˆæ˜¯æ¶ˆæ¯
        ä¸€ä¸ªäº‹ä»¶ï¼Œéœ€è¦å¹¿æ’­æˆ–è€…å•ç‹¬ä¼ é€’ç»™æŸä¸ªæ¥å£

    2ã€ä¸ºä»€ä¹ˆä½¿ç”¨è¿™ä¸ª
        é…ç½®æ›´æ–°äº†ï¼Œä½†æ˜¯å…¶ä»–ç³»ç»Ÿä¸çŸ¥é“æ˜¯å¦æ›´æ–°









2ã€æ¶ˆæ¯é˜Ÿåˆ—å’ŒRabbitMQåŸºç¡€ä»‹ç»
    ç®€ä»‹ï¼šæ¶ˆæ¯é˜Ÿåˆ—å’ŒRabbitMQåŸºç¡€ä»‹ç»

        1ã€æ¶ˆæ¯é˜Ÿåˆ—ä»‹ç»
            å‚è€ƒï¼šhttps://www.cnblogs.com/linjiqin/p/5720865.html

        2ã€åŒç±»äº§å“
            ActiveMQ
            RocketMQ
            Kafka
            ç­‰

        3ã€SpringCloudé»˜è®¤æ¨èä½¿ç”¨RabbitMQ


        4ã€RabbitMQä»‹ç»    
            å®˜æ–¹æ–‡æ¡£ï¼šhttp://www.rabbitmq.com/getstarted.html
            ä¸­æ–‡æ–‡æ¡£ï¼šhttp://rabbitmq.mr-ping.com/





3ã€å®æˆ˜ç³»åˆ—ä½¿ç”¨Dockeræ­å»ºRabbitMQ3.7
    ç®€ä»‹ï¼šä½¿ç”¨Dockerå®‰è£…RabbitMQ

    1ã€å¦‚æœå¯¹Dockeræ²¡åŸºç¡€ï¼Œè¯¾ç¨‹åç»­æœ‰è®²è§£Dockerï¼Œå¯ä»¥å…ˆè·³è½¬è¿‡å»å­¦ä¹ Docker
    2ã€å®‰è£…æ­¥éª¤
        1)æ‹‰å–é•œåƒï¼šdocker pull rabbitmq:management
        2)æŸ¥çœ‹å½“å‰é•œåƒåˆ—è¡¨ï¼šdocker images
        3)åˆ é™¤æŒ‡å®šé•œåƒï¼šdocker rmi  IMAGE_ID  (å¦‚æœéœ€è¦å¼ºåˆ¶åˆ é™¤åŠ  -f)

        4)åˆ›å»ºå®¹å™¨
        docker run -d --name=&quot;myrabbitmq&quot; -p 5671:5671 -p 15672:15672 rabbitmq:management

        å‚æ•°è®²è§£: 
            run: åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤
             -d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ID
             -p: ç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£
             --name=&quot;rabbitmq&quot;: ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°


    3ã€RabbitMQé»˜è®¤åˆ›å»ºäº†ä¸€ä¸ª guest ç”¨æˆ·ï¼Œå¯†ç ä¹Ÿæ˜¯ guest, å¦‚æœè®¿é—®ä¸äº†è®°å¾—æŸ¥çœ‹é˜²ç«å¢™ï¼Œç«¯å£æˆ–è€…äº‘æœåŠ¡å™¨çš„å®‰å…¨ç»„
      ç®¡ç†åå°ï¼šhttp://127.0.0.1:15672


å…¶ä»–å®‰è£…æ–¹å¼ï¼š
Linuxå®‰è£…ï¼šhttps://blog.csdn.net/qq_34021712/article/details/72567786
windowså®‰è£…ï¼šhttp://www.rabbitmq.com/install-windows.html

https://blog.csdn.net/liyuejin/article/details/78410586





4ã€é«˜çº§ç¯‡å¹…æ¶ˆæ¯æ€»çº¿æ•´åˆé…ç½®ä¸­å¿ƒæ¶æ„æµç¨‹å›¾
    ç®€ä»‹ï¼šè®²è§£æ¶ˆæ¯æ€»çº¿Busç»“åˆconfigç»„ä»¶æ­å»ºé…ç½®ä¸­å¿ƒé¡¹ç›®æ¶æ„å›¾å’Œæ“ä½œæµç¨‹

        å¯åŠ¨
        rabbitmqï¼š docker run -d -p 5672:5672 -p 15672:15672 rabbitmq:management
        rabbitmqé»˜è®¤æ˜¯5672,æ‰€ä»¥æ”¹ä¸º5672ç«¯å£

        1ã€config-clientåŠ å…¥ä¾èµ–

            &lt;!--é…ç½®ä¸­å¿ƒç»“åˆæ¶ˆæ¯é˜Ÿåˆ—--&gt;

            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
            &lt;/dependency&gt;

            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;
            &lt;/dependency&gt;
</code></pre><p>â€‹<br>â€‹            å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://cloud.spring.io/spring-cloud-bus/single/spring-cloud-bus.html#_bus_refresh_endpoint" target="_blank" rel="noopener">http://cloud.spring.io/spring-cloud-bus/single/spring-cloud-bus.html#_bus_refresh_endpoint</a><br>â€‹            æ–‡æ¡£é‡Œé¢ æš´éœ²ç«¯ç‚¹ management.endpoints.web.exposure.include=bus-refresh<br>â€‹<br>â€‹            2ã€åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ å…³äºRabbitMQçš„è¿æ¥(å¦‚æœæ˜¯æœ¬æœºï¼Œåˆ™å¯ä»¥ç›´æ¥å¯åŠ¨ï¼Œé‡‡ç”¨é»˜è®¤è¿æ¥é…ç½®)<br>â€‹                spring:<br>â€‹                  rabbitmq:<br>â€‹                    host: localhost<br>â€‹                    port: 5672<br>â€‹                    username: guest<br>â€‹                    password: guest<br>â€‹            </p>
<pre><code>            #æš´éœ²å…¨éƒ¨çš„ç›‘æ§ä¿¡æ¯
            management:
              endpoints:
                web:
                  exposure:
                    include: &quot;*&quot;

        3ã€éœ€è¦åˆ·æ–°é…ç½®çš„åœ°æ–¹ï¼Œå¢åŠ æ³¨è§£ 
            @RefreshScope

        4ã€è®¿é—®éªŒè¯ postæ–¹å¼ï¼š
            http://localhost:8773/actuator/bus-refresh


        5ã€åŠ¨æ€åˆ·æ–°é…ç½®: åœ¨å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒä½¿ç”¨ï¼Œå°½é‡å°‘åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨








5ã€å¾®æœåŠ¡ç›¸å…³é¡¹ç›®æ”¹é€ é…ç½®ä¸­å¿ƒ
ç®€ä»‹ï¼šæŠŠè¯¾ç¨‹é¡¹ç›®æ”¹é€ æˆé…ç½®ä¸­å¿ƒè®²è§£

1ã€gité‡Œé¢æ–°å¢å¯¹åº”é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œéƒ½è¦æ·»åŠ ä¸‹é¢çš„é…ç½®
    #æœåŠ¡çš„åç§°
    spring:
      rabbitmq:
        host: localhost
        port: 5672
        username: guest
        password: guest

    #æš´éœ²å…¨éƒ¨çš„ç›‘æ§ä¿¡æ¯
    management:
      endpoints:
        web:
          exposure:
            include: &quot;*&quot;
</code></pre><p>â€‹<br>â€‹    2ã€é¡¹ç›®é‡Œé¢æ·»åŠ mavenä¾èµ–<br>â€‹<br>â€‹        <!--é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯--><br>â€‹        <dependency><br>â€‹            <groupid>org.springframework.cloud</groupid><br>â€‹            <artifactid>spring-cloud-config-client</artifactid><br>â€‹        </dependency><br>â€‹<br>        <!--config server--></p>
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-starter-bus-amqp&lt;/artifactId&gt;
    &lt;/dependency&gt;


3ã€ä¿®æ”¹application.propertiesä¸ºbootstrap.yml å¹¶æ‹·è´é…ç½®æ–‡ä»¶

        #æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€
        eureka:
          client:
            serviceUrl:
              defaultZone: http://localhost:8761/eureka/

        #æœåŠ¡çš„åç§°
        spring:
          application:
            name: order-service
          #æŒ‡å®šä»å“ªä¸ªé…ç½®ä¸­å¿ƒè¯»å–
          cloud:
            config:
              discovery:
                service-id: CONFIG-SERVER
                enabled: true
              profile: test

4ã€å„ä¸ªé¡¹ç›®å¯åŠ¨é¡ºåº
    1ï¼‰æ³¨å†Œä¸­å¿ƒ
    2ï¼‰é…ç½®ä¸­å¿ƒ
    3ï¼‰å¯¹åº”çš„æœåŠ¡ï¼šå•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ã€‚ã€‚ã€‚
    4ï¼‰å¯åŠ¨ç½‘å…³
</code></pre><p>ç¬¬åç« ã€SpringCloudè¯¾ç¨‹å†…å®¹ä¸ŠåŠéƒ¨åˆ†æ€»ç»“<br>â€‹    </p>
<pre><code>1ã€å¾®æœåŠ¡æ ¸å¿ƒçŸ¥è¯†å†…å®¹å›é¡¾

ç®€ä»‹ï¼šå›é¡¾SpringCloudå‰é¢10ç« çš„åŸºç¡€å†…å®¹

    1)ä»‹ç»å¾®æœåŠ¡çš„åŸºç¡€çŸ¥è¯†ï¼Œæ ¸å¿ƒç»„ä»¶ï¼ŒCAPåŸç†

    2ï¼‰SpringCloudæ³¨å†Œä¸­å¿ƒ Eureka

    3ï¼‰product-service / order-service

    4) ä¼ªRPC Ribbon / feign 

    5) hystrixç†”æ–­

    6) æœåŠ¡ç½‘å…³ä»‹ç»ï¼Œzuul

    7ï¼‰é…ç½®ä¸­å¿ƒconfig-server
</code></pre><p>â€‹    </p>
<pre><code>2ã€å¾®æœåŠ¡ä¸‹åŠéƒ¨åˆ†çŸ¥è¯† äº‘æœåŠ¡å™¨å’ŒDockerå®¹å™¨
    ç®€ä»‹ï¼šè®²è§£äº‘æœåŠ¡å™¨å’Œå®¹å™¨çŸ¥è¯†
</code></pre><p>â€‹    </p>
<p>ç¬¬åä¸€ç«  é˜¿é‡Œäº‘ECSæœåŠ¡å™¨ä»‹ç»å’Œç½‘ç»œçŸ¥è¯†è®²è§£</p>
<pre><code>1ã€äº‘æœåŠ¡å™¨ä»‹ç»å’Œé˜¿é‡Œäº‘æœåŠ¡å™¨ECSæœåŠ¡å™¨é€‰è´­
    ç®€ä»‹ï¼šä»€ä¹ˆæ˜¯äº‘æœåŠ¡å™¨åŠç›®å‰ä¸»è¦çš„å‡ ä¸ªå‚å•†ä»‹ç»
    1ã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€äºšé©¬é€Šäº‘
    é˜¿é‡Œäº‘ï¼šhttps://www.aliyun.com/
    è…¾è®¯äº‘ï¼šhttps://cloud.tencent.com/
    äºšé©¬é€Šäº‘ï¼šhttps://aws.amazon.com/
</code></pre><p>â€‹<br>â€‹    2ã€é˜¿é‡Œäº‘æœåŠ¡å™¨è¿œç¨‹ç™»å½•å’Œå¸¸ç”¨å·¥å…·<br>â€‹        ç®€ä»‹ï¼šè®²è§£é˜¿é‡Œäº‘æœåŠ¡å™¨ç™»å½•ä½¿ç”¨å’Œå¸¸è§ç»ˆç«¯å·¥å…·<br>â€‹        1ã€windowså·¥å…·   puttyï¼Œxshell, security<br>â€‹            å‚è€ƒèµ„æ–™ï¼š<br>â€‹                <a href="https://jingyan.baidu.com/article/e75057f210c6dcebc91a89dd.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/e75057f210c6dcebc91a89dd.html</a><br>â€‹                <a href="https://www.jb51.net/softjc/88235.html" target="_blank" rel="noopener">https://www.jb51.net/softjc/88235.html</a><br>â€‹<br>â€‹        2ã€è‹¹æœç³»ç»ŸMACï¼š é€šè¿‡ç»ˆç«¯ç™»å½•<br>â€‹            ssh root@ip  å›è½¦åè¾“å…¥å¯†ç <br>â€‹            ssh <a href="mailto:root@120.25.1.38" target="_blank" rel="noopener">root@120.25.1.38</a><br>â€‹<br>        3ã€å¯ä»¥å°è¯•è‡ªå·±é€šè¿‡ç™¾åº¦è¿›è¡Œæ‰¾æ–‡æ¡£ï¼Œ å®‰è£…mysql jdk  nginx maven git redis elk </p>
<p>3ã€äº’è”ç½‘æ¶æ„çŸ¥è¯†ä¹‹ç½‘ç«™éƒ¨ç½²ä¸Šçº¿åŸºç¡€å‡†å¤‡<br>â€‹    ç®€ä»‹ï¼šè®²è§£åº”ç”¨éƒ¨ç½²åˆ°å¯ä»¥å…¬ç½‘è®¿é—®éœ€è¦æ­¥éª¤</p>
<pre><code>1ã€ä¸€ä¸ªhttpè¯·æ±‚çš„æ•…äº‹

2ã€ä»€ä¹ˆæ˜¯cnameå’Œaè®°å½•
        Aè®°å½•å’ŒCNAMEåªå¯ä»¥åŒæ—¶ç”Ÿæ•ˆä¸€ä¸ªï¼ŒAè®°å½•ä¼˜å…ˆ

3ã€åŸŸåå’Œipçš„å…³ç³»ï¼ŒDNSä½œç”¨


å‚è€ƒèµ„æ–™ï¼š
    https://blog.csdn.net/benbenzhuhwp/article/details/44704319

    https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=0&amp;rsv_idx=1&amp;ch=1&amp;tn=98050039_dg&amp;wd=%E4%B8%80%E4%B8%AAhttp%E8%AF%B7%E6%B1%82%E7%9A%84%E8%AF%A6%E7%BB%86%E8%BF%87%E7%A8%8B&amp;rsv_pq=80a65c5f00005961&amp;rsv_t=a5fcWreuJzILdSwr4gI8pFqlO7HSu5BlhjwalyVzPiV9w2L%2BKEj78pPi1Qn6Vx4wXxI&amp;rqlang=cn&amp;rsv_enter=1&amp;rsv_sug3=8&amp;rsv_sug1=8&amp;rsv_sug7=100&amp;sug=%25E4%25B8%2580%25E4%25B8%25AAhttp%25E8%25AF%25B7%25E6%25B1%2582%25E7%259A%2584%25E8%25AF%25A6%25E7%25BB%2586%25E8%25BF%2587%25E7%25A8%258B&amp;rsv_n=1
</code></pre><p>4ã€åŸŸåè´­ä¹°å’Œé…ç½®è§£æå®æˆ˜<br>â€‹    ç®€ä»‹ï¼šåŸŸåè´­ä¹°å’Œé…ç½®è§£æå®æˆ˜</p>
<pre><code>1ã€è´­ä¹°åŸŸåï¼Œå¤‡æ¡ˆ
    é˜¿é‡Œäº‘ å¤‡æ¡ˆåœ°å€ï¼šhttps://beian.aliyun.com/

2ã€è´­ä¹°æœåŠ¡å™¨ï¼Œé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ï¼Œäºšé©¬é€Šäº‘aws

3ã€é…ç½®åŸŸåè§£æåˆ°æœåŠ¡å™¨
</code></pre><p>â€‹    </p>
<p>â€‹<br>ç¬¬åäºŒç«  å¾®æœåŠ¡å¿…å¤‡æŠ€èƒ½Dockerå®¹å™¨åŸºç¡€ç¯‡å¹…<br>â€‹<br>â€‹    1ã€å¾®æœåŠ¡ä¸‹çš„Dockerä»‹ç»å’Œä½¿ç”¨åœºæ™¯<br>â€‹        ç®€ä»‹ï¼šDockerä»‹ç»å’Œä½¿ç”¨åœºæ™¯<br>â€‹<br>â€‹        1ã€ä»€ä¹ˆæ˜¯Dokcer<br>â€‹            ç™¾ç§‘:ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼›<br>â€‹<br>            ä½¿ç”¨goè¯­è¨€ç¼–å†™ï¼Œåœ¨LCXï¼ˆlinuxå®¹å™¨ï¼‰åŸºç¡€ä¸Šè¿›è¡Œçš„å°è£…</p>
<pre><code>        ç®€å•æ¥è¯´ï¼š
            1ï¼‰å°±æ˜¯å¯ä»¥å¿«é€Ÿéƒ¨ç½²å¯åŠ¨åº”ç”¨
            2ï¼‰å®ç°è™šæ‹ŸåŒ–ï¼Œå®Œæ•´èµ„æºéš”ç¦»
            3ï¼‰ä¸€æ¬¡ç¼–å†™ï¼Œå››å¤„è¿è¡Œï¼ˆæœ‰ä¸€å®šçš„é™åˆ¶ï¼Œæ¯”å¦‚Dockeræ˜¯åŸºäºLinux 64bitçš„ï¼Œæ— æ³•åœ¨32bitçš„linux/Windows/unixç¯å¢ƒä¸‹ä½¿ç”¨ï¼‰

    2ã€ä¸ºä»€ä¹ˆè¦ç”¨
        1ã€æä¾›ä¸€æ¬¡æ€§çš„ç¯å¢ƒï¼Œå‡å¦‚éœ€è¦å®‰è£…Mysqlï¼Œåˆ™éœ€è¦å®‰è£…å¾ˆå¤šä¾èµ–åº“ã€ç‰ˆæœ¬ç­‰ï¼Œå¦‚æœä½¿ç”¨Dockeråˆ™é€šè¿‡é•œåƒå°±å¯ä»¥ç›´æ¥å¯åŠ¨è¿è¡Œ   

        2ã€å¿«é€ŸåŠ¨æ€æ‰©å®¹ï¼Œä½¿ç”¨dockeréƒ¨ç½²äº†ä¸€ä¸ªåº”ç”¨ï¼Œå¯ä»¥åˆ¶ä½œæˆé•œåƒï¼Œç„¶åé€šè¿‡Dokcerå¿«é€Ÿå¯åŠ¨

        3ã€ç»„å»ºå¾®æœåŠ¡æ¶æ„ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæœºå™¨ä¸Šæ¨¡æ‹Ÿå‡ºå¤šä¸ªå¾®æœåŠ¡ï¼Œå¯åŠ¨å¤šä¸ªåº”ç”¨

        4ã€æ›´å¥½çš„èµ„æºéš”ç¦»å’Œå…±äº«

        ä¸€å¥è¯ï¼šå¼€ç®±å³ç”¨ï¼Œå¿«é€Ÿéƒ¨ç½²ï¼Œå¯ç§»æ¤æ€§å¼ºï¼Œç¯å¢ƒéš”ç¦»







2ã€Linuxäº‘æœåŠ¡å™¨Centos7å®‰è£…Dockerå®æˆ˜
    ç®€ä»‹ï¼šè®²è§£é˜¿é‡Œäº‘ECSæœåŠ¡å®‰è£…Dockerå®æˆ˜
    Linux Standard Baseçš„ç¼©å†™ï¼Œlsb_releaseå‘½ä»¤ç”¨æ¥æ˜¾ç¤ºLSBå’Œç‰¹å®šç‰ˆæœ¬çš„ç›¸å…³ä¿¡æ¯
    å‘½ä»¤ï¼š lsb_release -a 

    é˜¿é‡Œäº‘å®‰è£…æ‰‹å†Œï¼š
    https://help.aliyun.com/document_detail/51853.html?spm=a2c4g.11186623.6.820.RaToNY

    å¸¸è§é—®é¢˜ï¼š
    https://blog.csdn.net/daluguishou/article/details/52080250






3ã€Dockerä»“åº“ã€é•œåƒã€å®¹å™¨æ ¸å¿ƒçŸ¥è¯†è®²è§£
    ç®€ä»‹ï¼šå¿«é€ŸæŒæ¡DokceråŸºç¡€çŸ¥è¯†ï¼Œ

    1ã€æ¦‚å¿µï¼š
        Docker é•œåƒ - Docker imagesï¼š
                 å®¹å™¨è¿è¡Œæ—¶çš„åªè¯»æ¨¡æ¿ï¼Œæ“ä½œç³»ç»Ÿ+è½¯ä»¶è¿è¡Œç¯å¢ƒ+ç”¨æˆ·ç¨‹åº

                 class User{
                     private String userName;
                     private int age;
                 }


        Docker å®¹å™¨ - Docker containersï¼š
                å®¹å™¨åŒ…å«äº†æŸä¸ªåº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„å…¨éƒ¨ç¯å¢ƒ

                 User user = new User()


        Docker ä»“åº“ - Docker registeriesï¼š 
                ç”¨æ¥ä¿å­˜é•œåƒï¼Œæœ‰å…¬æœ‰å’Œç§æœ‰ä»“åº“ï¼Œå¥½æ¯”Mavençš„ä¸­å¤®ä»“åº“å’Œæœ¬åœ°ç§æœ
                é•œåƒä»“åº“ï¼š    

                ï¼ˆå‚è€ƒï¼‰é…ç½®å›½å†…é•œåƒä»“åº“ï¼šhttps://blog.csdn.net/zzy1078689276/article/details/77371782

        å¯¹æ¯”é¢å‘å¯¹è±¡çš„æ–¹å¼
        Dokcer é‡Œé¢çš„é•œåƒ : Javaé‡Œé¢çš„ç±» Class
        Docker é‡Œé¢çš„å®¹å™¨ : Javaé‡Œé¢çš„å¯¹è±¡ Object
        é€šè¿‡ç±»åˆ›å»ºå¯¹è±¡ï¼Œé€šè¿‡é•œåƒåˆ›å»ºå®¹å™¨


4ã€Dockerå®¹å™¨å¸¸è§å‘½ä»¤å®æˆ˜
    ç®€ä»‹ï¼šè®²è§£Dockeråœ¨äº‘æœåŠ¡ä¸Šçš„å®é™…åº”ç”¨
    1ã€ å¸¸ç”¨å‘½ä»¤ï¼ˆå®‰è£…éƒ¨ç½²å¥½Dokceråï¼Œæ‰§è¡Œçš„å‘½ä»¤æ˜¯dockerå¼€å¤´ï¼‰,xxxæ˜¯é•œåƒåç§°

        æœç´¢é•œåƒï¼šdocker search xxx

        åˆ—å‡ºå½“å‰ç³»ç»Ÿå­˜åœ¨çš„é•œåƒï¼šdocker images

        æ‹‰å–é•œåƒï¼šdocker pull xxx
            xxxæ˜¯å…·ä½“æŸä¸ªé•œåƒåç§°(æ ¼å¼ REPOSITORY:TAG)
            REPOSITORYï¼šè¡¨ç¤ºé•œåƒçš„ä»“åº“æº,TAGï¼šé•œåƒçš„æ ‡ç­¾

        è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼šdocker run -d --name &quot;xdclass_mq&quot; -p 5672:5672 -p 15672:15672 rabbitmq:management
            docker run - è¿è¡Œä¸€ä¸ªå®¹å™¨
            -d åå°è¿è¡Œ
            -p ç«¯å£æ˜ å°„
            rabbitmq:management  (æ ¼å¼ REPOSITORY:TAG)ï¼Œå¦‚æœä¸æŒ‡å®štagï¼Œé»˜è®¤ä½¿ç”¨æœ€æ–°çš„
            --name &quot;xxx&quot;

        åˆ—ä¸¾å½“å‰è¿è¡Œçš„å®¹å™¨ï¼šdocker ps

        æ£€æŸ¥å®¹å™¨å†…éƒ¨ä¿¡æ¯ï¼šdocker inspect å®¹å™¨åç§°

        åˆ é™¤é•œåƒï¼šdocker rmi IMAGE_NAME
             å¼ºåˆ¶ç§»é™¤é•œåƒä¸ç®¡æ˜¯å¦æœ‰å®¹å™¨ä½¿ç”¨è¯¥é•œåƒ å¢åŠ  -f å‚æ•°ï¼Œ

        åœæ­¢æŸä¸ªå®¹å™¨ï¼šdocker stop å®¹å™¨åç§°

        å¯åŠ¨æŸä¸ªå®¹å™¨ï¼šdocker start å®¹å™¨åç§°

        ç§»é™¤æŸä¸ªå®¹å™¨ï¼š docker rm å®¹å™¨åç§° ï¼ˆå®¹å™¨å¿…é¡»æ˜¯åœæ­¢çŠ¶æ€ï¼‰


    æ–‡æ¡£ï¼š
        https://blog.csdn.net/permike/article/details/51879578







5ã€å®æˆ˜åº”ç”¨ä¹‹ä½¿ç”¨Dockeréƒ¨ç½²NginxæœåŠ¡å™¨
    ç®€ä»‹ï¼šè®²è§£ä½¿ç”¨Dockeréƒ¨ç½²NginxæœåŠ¡å™¨å®æˆ˜
    1ã€è·å–é•œåƒ 
        docker run (é¦–å…ˆä¼šä»æœ¬åœ°æ‰¾é•œåƒï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥å¯åŠ¨ï¼Œæ²¡æœ‰çš„è¯ï¼Œä»é•œåƒä»“åº“æ‹‰èµ·ï¼Œå†å¯åŠ¨)

        docker search nignx
    2ã€åˆ—ä¸¾
        docker images
    3ã€æ‹‰å–
        docker pull nignx
    3ã€å¯åŠ¨
        docker run -d --name &quot;xdclass_nginx&quot; -p 8088:80 nginx
        docker run -d --name &quot;xdclass_nginx2&quot; -p 8089:80 nginx
        docker run -d --name &quot;xdclass_nginx3&quot; -p 8090:80 nginx
    4ã€è®¿é—®
        å¦‚æœæ˜¯é˜¿é‡Œäº‘æœåŠ¡ï¼Œè®°å¾—é…ç½®å®‰å…¨ç»„ï¼Œè…¾è®¯äº‘ä¹Ÿéœ€è¦é…ç½®ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªé˜²ç«å¢™







6ã€å…¬å¸ä¸­Dockeré•œåƒä»“åº“ä½¿ç”¨è®²è§£
    ç®€ä»‹ï¼šè®²è§£ä¸€èˆ¬å…¬å¸ä¸­é•œåƒä»“åº“åœ¨çš„ä½¿ç”¨

    1ã€ä¸ºå•¥è¦ç”¨é•œåƒä»“åº“


    2ã€å®˜æ–¹å…¬å…±é•œåƒä»“åº“å’Œç§æœ‰é•œåƒä»“åº“
        å…¬å…±é•œåƒä»“åº“ï¼š
                å®˜æ–¹ï¼šhttps://hub.docker.com/ï¼ŒåŸºäºå„ä¸ªè½¯ä»¶å¼€å‘æˆ–è€…æœ‰è½¯ä»¶æä¾›å•†å¼€å‘çš„
                éå®˜æ–¹ï¼šå…¶ä»–ç»„ç»‡æˆ–è€…å…¬å¸å¼€å‘çš„é•œåƒï¼Œä¾›å¤§å®¶å…è´¹è¯•ç”¨

        ç§æœ‰é•œåƒä»“åº“ï¼š
                ç”¨äºå­˜æ”¾å…¬å¸å†…éƒ¨çš„é•œåƒï¼Œä¸æä¾›ç»™å¤–éƒ¨è¯•ç”¨ï¼› 

                SpringCloud å¼€å‘äº†ä¸€ä¸ªæ”¯ä»˜ç³»ç»Ÿ -ã€‹åšæˆä¸€ä¸ªé•œåƒ ï¼ˆæ“ä½œç³»ç»Ÿ+è½¯ä»¶è¿è¡Œç¯å¢ƒ+ç”¨æˆ·ç¨‹åºï¼‰






7ã€é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºè‡ªå·±çš„é•œåƒä»“åº“
    ç®€ä»‹ï¼šä½¿ç”¨é˜¿é‡Œäº‘æ­å»ºè‡ªå·±çš„é•œåƒä»“åº“

    1ã€é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼šhttps://dev.aliyun.com/search.html

    ç‚¹å‡»ç®¡ç†æ§åˆ¶å°-ã€‹åˆæ¬¡ä½¿ç”¨ä¼šæç¤ºå¼€é€šï¼Œç„¶åè®¾ç½®å¯†ç 
    xdclass.net123


    2ã€ä½¿ç”¨é˜¿é‡Œäº‘ç§æœ‰é•œåƒä»“åº“
        1)ç™»å½•ï¼š docker login --username=794666918@qq.com registry.cn-shenzhen.aliyuncs.com

        2) æ¨é€æœ¬åœ°é•œåƒï¼š
        docker tag [ImageId] registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:[é•œåƒç‰ˆæœ¬å·]
        ä¾‹å­ï¼š
        docker tag 2f415b0e9a6e registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:xd_rabbitmq-v1.0.2

        docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:xd_rabbitmq-v1.0.2

        3)æ‹‰å–é•œåƒ
            çº¿ä¸ŠæœåŠ¡å™¨æ‹‰å–é•œåƒï¼š
                docker login --username=794666918@qq.com registry.cn-shenzhen.aliyuncs.com

                docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:xd_rabbitmq-v1.0.2

                å¯åŠ¨å®¹å™¨ï¼š
                docker run -d --name &quot;xdclass_mq&quot; -p 5672:5672 -p 15672:15672 2f415b0e9a6e
</code></pre><p>ç¬¬åä¸‰ç«  å¾®æœåŠ¡é«˜çº§ç¯‡å¹…SpringCloudå’ŒDockeræ•´åˆéƒ¨ç½²<br>â€‹<br>â€‹    ç¬¬1è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸Šé›†<br>â€‹<br>â€‹    ç®€ä»‹:ä½¿ç”¨Dockerçš„mavenæ’ä»¶ï¼Œæ„å»ºspringbootåº”ç”¨<br>â€‹<br>    å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://spring.io/guides/gs/spring-boot-docker/" target="_blank" rel="noopener">https://spring.io/guides/gs/spring-boot-docker/</a></p>
<pre><code>1ã€æ­¥éª¤ï¼šmavené‡Œé¢æ·»åŠ é…ç½®pom.xml

     &lt;properties&gt;
       &lt;docker.image.prefix&gt;xdclass&lt;/docker.image.prefix&gt;
    &lt;/properties&gt;

    &lt;build&gt;
        &lt;finalName&gt;docker-demo&lt;/finalName&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;com.spotify&lt;/groupId&gt;
                &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.3.6&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;repository&gt;${docker.image.prefix}/${project.artifactId}&lt;/repository&gt;
                    &lt;buildArgs&gt;
                        &lt;JAR_FILE&gt;target/${project.build.finalName}.jar&lt;/JAR_FILE&gt;
                    &lt;/buildArgs&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    é…ç½®è®²è§£
    Spotify çš„ docker-maven-plugin æ’ä»¶æ˜¯ç”¨mavenæ’ä»¶æ–¹å¼æ„å»ºdockeré•œåƒçš„ã€‚
    ${project.build.finalName} äº§å‡ºç‰©åç§°ï¼Œç¼ºçœä¸º${project.artifactId}-${project.version}
</code></pre><p>=============================================<br>æ›´å¤šå¹²è´§æŠ€æœ¯è®¿é—®å°Dè¯¾å ‚å®˜ç½‘ <a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a><br>å°Dè€å¸ˆä¸ªäººå¾®ä¿¡ï¼šjack794666918</p>
<h1 id="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-3"><a href="#å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚-3" class="headerlink" title="å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚"></a>å…¬ä¼—å·æœç´¢ï¼šå°Dè¯¾å ‚</h1><pre><code>ç¬¬2è¯¾ é«˜çº§ç¯‡å¹…ä¹‹æ„å»ºSpringBootåº”ç”¨dockeré•œåƒä¸‹é›†

        ç®€ä»‹:æ‰“åŒ…SpringCloudé•œåƒå¹¶ä¸Šä¼ ç§æœ‰ä»“åº“å¹¶éƒ¨ç½²

        1ã€åˆ›å»ºDockerfile,é»˜è®¤æ˜¯æ ¹ç›®å½•ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹ä¸ºsrc/main/docker/Dockerfile,å¦‚æœä¿®åˆ™éœ€è¦åˆ¶å®šè·¯å¾„ï¼‰
            ä»€ä¹ˆæ˜¯Dockerfile : ç”±ä¸€ç³»åˆ—å‘½ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ï¼Œè¿™äº›å‘½ä»¤åº”ç”¨äºåŸºç¡€é•œåƒ, æœ€ç»ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ

            FROM openjdk:8-jdk-alpine
            VOLUME /tmp
            ARG JAR_FILE
            COPY ${JAR_FILE} app.jar
            ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]


            å‚æ•°è®²è§£ï¼š
            FROM &lt;image&gt;:&lt;tag&gt; éœ€è¦ä¸€ä¸ªåŸºç¡€é•œåƒï¼Œå¯ä»¥æ˜¯å…¬å…±çš„æˆ–è€…æ˜¯ç§æœ‰çš„ï¼Œ åç»­æ„å»ºä¼šåŸºäºæ­¤é•œåƒï¼Œå¦‚æœåŒä¸€ä¸ªDockerfileä¸­å»ºç«‹å¤šä¸ªé•œåƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªFROMæŒ‡ä»¤

            VOLUME  é…ç½®ä¸€ä¸ªå…·æœ‰æŒä¹…åŒ–åŠŸèƒ½çš„ç›®å½•ï¼Œä¸»æœº /var/lib/docker ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é“¾æ¥åˆ°å®¹å™¨çš„/tmpã€‚æ”¹æ­¥éª¤æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ¶‰åŠåˆ°æ–‡ä»¶ç³»ç»Ÿçš„åº”ç”¨å°±å¾ˆæœ‰å¿…è¦äº†ã€‚/tmpç›®å½•ç”¨æ¥æŒä¹…åŒ–åˆ° Docker æ•°æ®æ–‡ä»¶å¤¹ï¼Œå› ä¸º Spring Boot ä½¿ç”¨çš„å†…åµŒ Tomcat å®¹å™¨é»˜è®¤ä½¿ç”¨/tmpä½œä¸ºå·¥ä½œç›®å½• 

            ARG  è®¾ç½®ç¼–è¯‘é•œåƒæ—¶åŠ å…¥çš„å‚æ•°ï¼Œ ENV æ˜¯è®¾ç½®å®¹å™¨çš„ç¯å¢ƒå˜é‡
            COPY : åªæ”¯æŒå°†æœ¬åœ°æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨ ,è¿˜æœ‰ä¸ªADDæ›´å¼ºå¤§ä½†å¤æ‚ç‚¹
            ENTRYPOINT å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤
            EXPOSE 8080 æš´éœ²é•œåƒç«¯å£
        2ã€æ„å»ºé•œåƒ
        mvn install dockerfile:build
        æ‰“æ ‡ç­¾
        docker tag a1b9fc71720d registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808
        æ¨é€åˆ°é•œåƒä»“åº“
        docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808

        åº”ç”¨æœåŠ¡å™¨æ‹‰å–é•œåƒ
        docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:docker-demo-v201808


        docker run -d --name xdclass_docker_demo1 -p 8099:8080  a1b9fc71720d

        3ã€æŸ¥çœ‹å¯åŠ¨æ—¥å¿— docker logs -f  containerid

        æ–‡æ¡£ï¼šhttps://yeasy.gitbooks.io/docker_practice/image/dockerfile/











ç¬¬3è¯¾ å®æˆ˜ç³»åˆ—ä¹‹æ³¨å†Œä¸­å¿ƒæ‰“åŒ…Dockeré•œåƒ
    ç®€ä»‹ï¼šè®²è§£ä½¿ç”¨Dockeræ‰“åŒ…æ³¨å†Œä¸­å¿ƒï¼Œä¸Šä¼ ç§æœ‰é•œåƒä»“åº“å¹¶éƒ¨ç½²

    1ã€æ–°å¢mavenæ’ä»¶
        &lt;properties&gt;
           &lt;docker.image.prefix&gt;xdclass&lt;/docker.image.prefix&gt;
        &lt;/properties&gt;

        &lt;build&gt;
            &lt;finalName&gt;docker-demo&lt;/finalName&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;com.spotify&lt;/groupId&gt;
                    &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;
                    &lt;version&gt;1.3.6&lt;/version&gt;
                    &lt;configuration&gt;
                        &lt;repository&gt;${docker.image.prefix}/${project.artifactId}&lt;/repository&gt;
                        &lt;buildArgs&gt;
                            &lt;JAR_FILE&gt;target/${project.build.finalName}.jar&lt;/JAR_FILE&gt;
                        &lt;/buildArgs&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/build&gt;

    2ã€æ–°å»ºDockerfile
            FROM openjdk:8-jdk-alpine
            VOLUME /tmp
            ARG JAR_FILE
            COPY ${JAR_FILE} app.jar
            ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]

    3ã€æ‰“åŒ…ï¼š
        mvn install dockerfile:build

    4ã€æ¨é€é˜¿é‡Œäº‘é•œåƒä»“åº“

    é˜¿é‡Œäº‘é•œåƒä»“åº“ï¼šhttps://dev.aliyun.com/search.html
</code></pre><p>docker tag 062d2ddf272a registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:eureka-v20180825<br>docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:eureka-v20180825<br>docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:eureka-v20180825</p>
<pre><code>    5ã€æŸ¥çœ‹æ—¥å¿— docker logs -f  containerid






ç¬¬4è¯¾ å®æˆ˜ç³»åˆ—ä¹‹éƒ¨ç½²RabbitMQå’Œé…ç½®ä¸­å¿ƒæ‰“åŒ…Dockeré•œåƒ
    ç®€ä»‹ï¼šè®²è§£ä½¿ç”¨Dockeræ‰“åŒ…é…ç½®ä¸­å¿ƒï¼Œå’Œéƒ¨ç½²RabbitMQ

    1ã€æœåŠ¡åœ°å€ ssh root@47.106.120.173

    éƒ¨ç½²    rabbitmqï¼š docker run -d -p 5672:5672 -p 15672:15672 rabbitmq:management

    2ã€æ¨é€é•œåƒ

    docker tag 0f636543904e registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:config-server-v20180825

    docker push registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:config-server-v20180825

    docker pull registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:config-server-v20180825



5ã€å¸¸è§é—®é¢˜å¤„ç†ä¹‹å‡çº§äº‘æœåŠ¡å™¨
    ç®€ä»‹ï¼šå¤„ç†ä¸ŠèŠ‚è¯¾å‡ºç°çš„é—®é¢˜ï¼Œå‡çº§æœåŠ¡å™¨æ³¨æ„äº‹é¡¹

    1ã€å‡çº§äº‘æœåŠ¡å™¨é…ç½®ï¼ˆè´­ä¹°é…ç½®åéœ€è¦é‡å¯æœºå™¨æ‰ç”Ÿæ•ˆï¼‰

    2ã€å¯åŠ¨å®Œæˆåï¼Œéœ€è¦å¼€å¯docker
        æŒ‡ä»¤ï¼š systemctl  start docker

    3ã€æ‰€æœ‰å¯¹å¤–çš„éƒ½è¦ç»è¿‡ç½‘å…³æ‰å¯ä»¥å¯¹å¤–ï¼Œåº”ç”¨é—´é€šä¿¡(é™¤éè·¨æœºæˆ¿)éƒ½ç”¨å†…ç½‘é€šä¿¡









6ã€å®æˆ˜ç³»åˆ—ä¹‹Dockeréƒ¨ç½²Redis
    ç®€ä»‹ï¼šä½¿ç”¨Dockerå®‰è£…redis
    1ã€æœç´¢é•œåƒ docker search redis

    2ã€æ‹‰å– docker pull docker.io/redis

    3ã€å¯åŠ¨ docker run --name &quot;xd_redis&quot; -p 6379:6379 -d 4e8db158f18d
    å‚è€ƒï¼š
    docker run --name &quot;xd_redis&quot; -p 6379:6379 -d 4e8db158f18d --requirepass &quot;123456&quot; -v $PWD/data:/data

    4ã€è®¿é—®rediså®¹å™¨é‡Œé¢ï¼Œè¿›è¡Œæ“ä½œ
    docker exec -it 295058d2b92e redis-cli










7ã€ç”Ÿäº§ç¯å¢ƒå¸¸è§é—®é¢˜ä¹‹é…ç½®ä¸­å¿ƒè®¿é—®
    ç®€ä»‹ï¼šè®²è§£ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å¸¸è§é—®é¢˜ï¼Œé…ç½®ä¸­å¿ƒè®¿é—®è·¯å¾„å˜åŒ–

    1ã€é…ç½®ä¸­å¿ƒè®¿é—®å‡ºé”™ï¼Œè·¯å¾„ä¸å¯¹

       è§£å†³ï¼šä¿®æ”¹æ‰€æœ‰çš„æ³¨å†Œä¸­å¿ƒï¼Œå¢åŠ ä¸‹é¢é…ç½®
    instance:
    instance-id: ${spring.cloud.client.ip-address}:${server.port}
    prefer-ip-address: true



    docker tag 50a12cd66210 registry.cn-shenzhen.aliyuncs.com/xdclass/xdclass_images:config-server-v20180826








8ã€å®æˆ˜ç³»åˆ—ä¹‹æ‰“åŒ…Dockeré•œåƒæ‰“åŒ…å•†å“æœåŠ¡å’Œè®¢å•æœåŠ¡ã€ç½‘å…³ 
   ç®€ä»‹:æ‰“åŒ…Dockeré•œåƒéƒ¨ç½²å•†å“æœåŠ¡å’Œè®¢å•æœåŠ¡ã€ç½‘å…³

   æ³¨æ„ï¼š
   1ã€mavenæ‰“åŒ…æ„å»ºï¼Œä¼šè§¦å‘å•å…ƒæµ‹è¯•ï¼Œéƒ¨åˆ†æƒ…å†µå¯ä»¥è·³è¿‡ï¼Œ
   mvn install -Dmaven.test.skip=true dockerfile:build

   2ã€ç”Ÿäº§ç¯å¢ƒä¸èƒ½ç”¨localhost æˆ–è€… 127.0.0.1, ä¸€å®šè¦ç”¨å†…ç½‘é€šä¿¡ip (è™šæ‹Ÿä¸»æœºæ˜ å°„ hosts)










 9ã€å®æˆ˜ç³»åˆ—äº‘æœåŠ¡å™¨éƒ¨ç½²ç½‘å…³ã€è®¢å•ã€å•†å“æœåŠ¡
     ç®€ä»‹ï¼šäº‘æœåŠ¡éƒ¨ç½²å•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ã€ç½‘å…³æœåŠ¡

     1ã€æ‹‰å–é•œåƒã€å¯åŠ¨



     è®¿é—®è·¯å¾„
     http://47.106.120.173:8781/api/v1/order/save?product_id=5&amp;user_id=5

     http://47.106.120.173:9000/apigateway/order/api/v1/order/save?user_id=5&amp;product_id=3&amp;token=232serer
</code></pre><p>ç¬¬åå››ç«  è¯¾ç¨‹æ€»ç»“å’Œå¸¸è§é—®é¢˜å¤„ç†</p>
<pre><code>1ã€SpringCloudå¾®æœåŠ¡å¸¸è§é—®é¢˜å’Œè§£å†³æ€è·¯
ç®€ä»‹ï¼šè®²è§£SpringCloudå¼€å‘å®æˆ˜å¸¸è§é—®é¢˜ï¼ŒåŠè§£å†³æ€è·¯

    1ã€æŠ€æœ¯é€‰æ‹©ï¼šSpringCloudå…¨å®¶æ¡¶ï¼Œæ¯ä¸ªç»„ä»¶åˆæœ‰å¤šä¸ªæ›¿ä»£ï¼Œæ”¹æ€ä¹ˆé€‰æ‹©

        1ï¼‰é€‰æ‹©çš„æ—¶å€™æ ¹æ®å…¬å¸é‡Œé¢å›¢é˜Ÿäººå‘˜ç†Ÿæ‚‰ç¨‹åº¦ï¼Œé™ä½å­¦ä¹ æˆæœ¬
        2ï¼‰é€‰æ‹©ç¤¾åŒºæ´»è·ƒçš„å¹¶ä¸”æ–‡æ¡£ç›¸å¯¹è¾ƒå¤šçš„ï¼Œæ€ä¹ˆåˆ¤æ–­æ´»è·ƒï¼Œå¯ä»¥çœ‹githubä¸Šä»£ç æäº¤å’Œstartæ•°

    2ã€äº‘æœåŠ¡é€‰æ‹©ï¼š è…¾è®¯äº‘ï¼Œé˜¿é‡Œäº‘ ï¼Œé‡åˆ°é—®é¢˜å¯ä»¥æäº¤å·¥å•ï¼Œæœ‰ä¸“äººè·Ÿè¿›
</code></pre><p>â€‹<br>â€‹        3ã€éƒ¨ç½²äº†åº”ç”¨ï¼Œä½†æ˜¯è®¿é—®ä¸äº†<br>â€‹            è§£å†³æ€è·¯ï¼š<br>â€‹                1)æŸ¥çœ‹åº”ç”¨å¯åŠ¨æ˜¯å¦æ­£å¸¸ï¼Œå¦‚æœæœ‰é”™è¯¯æ—¥å¿—ï¼Œå¤åˆ¶é”™è¯¯æ—¥å¿—å»ç™¾åº¦æœç´¢ï¼ï¼ï¼ï¼ï¼ï¼ï¼ç‰¹åˆ«é‡è¦<br>â€‹<br>â€‹                2ï¼‰å¯åŠ¨æ­£å¸¸ï¼Œåˆ™å…ˆåœ¨æœ¬æœºä½¿ç”¨ CURL â€œ<a href="http://lcoalhost:8080/api/v1/user/find&quot;" target="_blank" rel="noopener">http://lcoalhost:8080/api/v1/user/find&quot;</a>  è®¿é—®å¯¹åº”çš„æ¥å£ï¼Œçœ‹æ˜¯å¦æœ‰å“åº”<br>â€‹<br>                3ï¼‰å¯åŠ¨æ­£å¸¸ï¼Œä¸”curlæœ‰å“åº”ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦æœ‰å…³é—­é˜²ç«å¢™ï¼Œæˆ–è€…å¼€æ”¾å¯¹åº”çš„è®¿é—®ç«¯å£ï¼Œå¼€æ”¾ç«¯å£æ‰å¯ä»¥è®¿é—®</p>
<pre><code>            4ï¼‰è…¾è®¯äº‘å’Œé˜¿é‡Œäº‘éƒ½æ˜¯æœ‰å®‰å…¨ç»„ï¼Œç±»ä¼¼å¤–å±‚é˜²ç«å¢™ï¼Œä¸€å®šè¦å»webæ§åˆ¶å°æ£€æŸ¥æ˜¯å¦æœ‰å¼€å¯ç«¯å£



    4ã€å†…ç½‘å’Œå¤–ç½‘è®¿é—®ï¼Œé‰´æƒé—®é¢˜å®‰å…¨é—®é¢˜

            1ï¼‰æ‰€æœ‰åº”ç”¨åªèƒ½é€šè¿‡ç½‘å…³æä¾›å¯¹å¤–è®¿é—®çš„å…¥å£

            2ï¼‰åº”ç”¨ç¨‹åºä¹‹é—´é€šè®¯ï¼Œé‡‡ç”¨å†…ç½‘


    5ã€ç¨‹åºå‡ºé”™æˆ–è€…å¼‚å¸¸: å¤åˆ¶é”™è¯¯æ—¥å¿—å»ç™¾åº¦æœç´¢ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šäººä¼šé‡åˆ°ç±»ä¼¼çš„é”™è¯¯ï¼Œå¤šç§¯ç´¯ï¼Œç‰¹åˆ«å¼ºè°ƒ







2ã€è¯¾ç¨‹æ€»ç»“å’Œåç»­æŠ€æœ¯è§„åˆ’
ç®€ä»‹ï¼šæ€»ç»“SpringCloudè¯¾ç¨‹å’Œå¾®æœåŠ¡åç»­è¯¾ç¨‹è§„åˆ’

    1ã€springCloudå…¨å®¶æ¡¶ï¼ŒæŠ€æœ¯é€‰æ‹©å’ŒçŸ¥è¯†ç‚¹ç‰¹åˆ«å¤šï¼Œä¸€å®šè¦å­¦ä¼šè®°ç¬”è®°ï¼Œå¾®æœåŠ¡æ›´å¤šå…³æ³¨çš„æ˜¯é‡Œé¢æ¶æ„å’Œæ•°æ®æµè½¬ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ä¸šåŠ¡ã€‚

    2ã€SpringCloudæ¶æ„è¿™äº›é…ç½®ï¼Œä¸€èˆ¬ä½¿ç”¨ä¸€æ¬¡åå°±ä¸ä¼šå¤šæ¬¡ä¿®æ”¹äº†ï¼Œè¿›å…¥å…¬å¸ä¸»è¦è¿˜æ˜¯å¼€å‘ä¸šåŠ¡ï¼Œä¸šåŠ¡å¼€å‘ä¸€èˆ¬éƒ½ç”¨springbootï¼Œæ¯”è¾ƒå°‘è®©æ–°äººæ­å»ºSpringCloudçš„æ¶æ„


    3ã€å¼€å‘ä¸šåŠ¡ï¼Œæ— éå°±æ˜¯CRUDï¼Œå¢åˆ æ”¹æŸ¥ï¼Œåªä¸è¿‡æ˜¯åˆçº§å’Œé«˜çº§çš„åŒºåˆ«ï¼Œå°è£…æˆé€šç”¨å’Œä¸é€šç”¨çš„åŒºåˆ«
</code></pre><p>â€‹<br>â€‹        4ã€å¾®æœåŠ¡å’Œå®¹å™¨ç››è¡Œçš„æƒ…å†µä¸‹ï¼Œå®¹å™¨ç¼–æ’å’Œè‡ªåŠ¨ç¼©æ‰©å®¹è¶Šæ¥è¶Šé‡è¦<br>â€‹<br>â€‹            å¯ä»¥å…³æ³¨ï¼šk8s / service mesh /server less ç­‰æŠ€æœ¯</p>
<p>â€‹<br>â€‹        æ€»ç»“ï¼š<br>â€‹            1ï¼‰åç»­ä¼šæ¨å‡ºå¯¹åº”çš„è¯¾ç¨‹ï¼Œè¿˜æœ‰é¡¹ç›®å®æˆ˜ç³»åˆ—ï¼Œå¤§å®¶è®°å¾—å…³æ³¨ å°Dè¯¾å ‚ï¼Œå®˜ç½‘ ï¼š<a href="https://xdclass.net" target="_blank" rel="noopener">https://xdclass.net</a>,<br>â€‹<br>â€‹            2ï¼‰ä¹Ÿå¯ä»¥åŠ æˆ‘å¾®ä¿¡äº¤æµï¼š jack794666918<br>â€‹<br>            3ï¼‰è´­ä¹°å¯¹åº”çš„è¯¾ç¨‹åï¼Œè®°å¾—è¿›æˆ‘ä»¬å°Dè¯¾å ‚å®˜æ–¹çš„äº¤æµç¾¤ï¼Œæˆ‘ä¼šåœ¨é‡Œé¢åˆ†äº«ä¸»æµæŠ€æœ¯å’Œç­”ç–‘ï¼Œé¢è¯•ç»éªŒç­‰ç­‰ï¼Œè¿˜ä¼šåŒæ­¥æ›´æ–°èµ„æ–™å’Œè¿˜è¶…çº§å¹²è´§åˆ†äº« </p>
<p>=============================================</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/å¸¸è§é—®é¢˜æ€»ç»“/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/å¸¸è§é—®é¢˜æ€»ç»“/" itemprop="url">å¸¸è§é—®é¢˜æ€»ç»“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-09T17:14:16+08:00">
                2018-11-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/å¸¸è§é—®é¢˜æ€»ç»“/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/å¸¸è§é—®é¢˜æ€»ç»“/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>å‰ç«¯å‘åç«¯ä¼ å€¼ï¼š</p>
<ul>
<li><p>Button å’Œform</p>
</li>
<li><ul>
<li><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">goUpdatePage</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.location.href = <span class="string">"$&#123;pageContext.request.contextPath&#125;/user/editcontroller?id="</span> + id;</span><br><span class="line">&#125;      </span><br><span class="line"> &lt;button type=<span class="string">"button"</span> onclick=<span class="string">"goUpdatePage($&#123;user.id&#125;)"</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-primary btn-xs"</span>&gt;</span><br><span class="line">    &lt;i</span><br><span class="line">            <span class="class"><span class="keyword">class</span></span>=<span class="string">" glyphicon glyphicon-pencil"</span>&gt;&lt;/i&gt;&lt;/button&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>å¼€å‘ä¸­serviceå±‚ å¿…é¡»è¦å†™ @serviceæ³¨è§£</p>
</li>
<li><p>âš ï¸serviceä¸­ä¸è¦åŠ @serviceã€‚åœ¨serviceçš„å®ç°serviceimlä¸­åŠ @serviceæ³¨è§£</p>
</li>
<li><p>å¼€å‘çš„é¡ºåº ä»å‰ç«¯ä¼ å€¼åˆ°Controller å†åˆ° service å†åˆ°serviceimpl å†åˆ°userdao å†åˆ°mybatis.xmlå†åˆ°æ•°æ®åº“ æ•°æ®åº“è¿”å›å‰ç«¯é¡µé¢</p>
</li>
<li><p>å¼•å…¥mybatis çš„å¤šä¸ªmapperçš„é…ç½®æ–‡ä»¶ mapper.xml  Spring Boot çš„æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mybatis.mapper-locations=classpath:mybatis/mapper/*.xml</span><br></pre></td></tr></table></figure>
</li>
<li><p>###ideaè­¦å‘Šï¼šField injection is not recommended</p>
</li>
<li><p>####Springbootå¼€å‘ Daoä¸­UserDao RoleDaoä¸­è¦åŠ  @Mapperæ³¨è§£</p>
<p># </p>
</li>
<li><h1 id=""><a href="#" class="headerlink" title=""></a><img src="/Users/apple/Desktop/å±å¹•å¿«ç…§ 2018-11-14 ä¸‹åˆ1.19.50.png" alt="å±å¹•å¿«ç…§ 2018-11-14 ä¸‹åˆ1.19.50"></h1></li>
<li><p>importå’Œopené¡¹ç›®æ˜¯ä¸ä¸€æ ·çš„ å‡ºç°ä¸Šé¢çš„æƒ…å†µè¦importä¸€ä¸‹å•Š å…„ide</p>
</li>
<li><h3 id="Caused-by-org-apache-ibatis-type-TypeException-Could-not-resolve-type-alias-â€˜BaseResultMapâ€™"><a href="#Caused-by-org-apache-ibatis-type-TypeException-Could-not-resolve-type-alias-â€˜BaseResultMapâ€™" class="headerlink" title="Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias â€˜BaseResultMapâ€™"></a>Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias â€˜BaseResultMapâ€™</h3></li>
<li><p>Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Ca</p>
<blockquote>
<p> çœ‹åˆ°é‚£ä¸ª<strong>resultType</strong>äº†ä¹ˆï¼Œå°±æ˜¯å®ƒæƒ¹çš„ç¥¸ï¼Œè¿™é‡ŒæŠŠ<strong>resultType</strong>æ”¹ä¸º<strong>resultMap</strong>å°±OKå•¦ï¼Œé‡å¯tomcatï¼Œæœ¨æœ‰å¼‚å¸¸å•¦</p>
</blockquote>
</li>
</ul>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxtic1bppsj309801naa1.jpg" alt="image-20181114135152950"></p>
<blockquote>
<p>è·³è½¬è§†å›¾ ç”¨å­—ç¬¦ä¸²å“ˆ </p>
</blockquote>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxtic5ntolj305505g3yh.jpg" alt="image-20181117115951176"></p>
<p>å¼€å‘ä¸­å‰ç«¯çš„imgè¦æ”¾åˆ°å’Œæ¡†æ¶çš„åŒä¸€ç›®å½•åŠä¸‹é¢å“ˆã€‚å…„die</p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection connection = ConnectionUtils.getConnection();</span><br></pre></td></tr></table></figure>
<p>ç”¨ç±».æ–¹æ³•ï¼ˆï¼‰.var å¯ä»¥ç›´æ¥è¿”å›è¯¥å¯¹è±¡çš„è¿”å›å¯¹è±¡</p>
<p>Sting s=â€testâ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(s);===s.sout</span><br></pre></td></tr></table></figure>
<p><img src="../../../../Users/apple/Library/Application Support/typora-user-images/image-20190131103713601.png" alt="image-20190131103713601"></p>
<hr>
<h1 id="æ—¶é—´é—®é¢˜"><a href="#æ—¶é—´é—®é¢˜" class="headerlink" title="æ—¶é—´é—®é¢˜"></a>æ—¶é—´é—®é¢˜</h1><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g008jkl0ryj30k40boq4n.jpg" alt="image-20190209160806502"></p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_34160679/article/details/80651027" target="_blank" rel="noopener">https://blog.csdn.net/qq_34160679/article/details/80651027</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc.url     = jdbc:mysql:/xxx:3306/zhongfubang?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=Asia/Shanghai</span><br></pre></td></tr></table></figure>
<h1 id="Linux-æ— æ³•ä½¿ç”¨å‘½ä»¤"><a href="#Linux-æ— æ³•ä½¿ç”¨å‘½ä»¤" class="headerlink" title="Linux æ— æ³•ä½¿ç”¨å‘½ä»¤"></a>Linux æ— æ³•ä½¿ç”¨å‘½ä»¤</h1><h2 id="export-PATH-usr-local-sbin-usr-local-bin-sbin-bin-usr-sbin-usr-bin-root-bin"><a href="#export-PATH-usr-local-sbin-usr-local-bin-sbin-bin-usr-sbin-usr-bin-root-bin" class="headerlink" title="export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin"></a>export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</h2><p>ä¿®æ”¹/etc/profileæ–‡ä»¶ï¼Œé…ç½®mavenç¯å¢ƒå˜é‡æ—¶å€™å‡ºé—®é¢˜äº†ï¼Œå¿˜è®°åŠ äº† $PATH: ç„¶åsource /etc/profile æ¥ä¸‹æ¥å°±æ˜¯ ll,ls,vimå‘½ä»¤éƒ½ç”¨ä¸äº†ã€‚ã€‚ã€‚å®³çš„æˆ‘ä»¥ä¸º<a href="https://www.baidu.com/s?wd=xshell&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank" rel="noopener">xshell</a>æˆ‘æ›´æ–°äº†å‘¢ï¼Œå¸è½½é‡è£…äº†è¿˜æ˜¯æ²¡ç”¨ã€‚</p>
<p><img src="https://img-blog.csdnimg.cn/20181204225756905.png" alt="img"></p>
<p>è§£å†³åŠæ³•å¦‚ä¸‹å›¾ï¼Œæ‰§è¡Œè¿™ä¸¤æ¡å‘½ä»¤ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g0g5vwo6mtj30j6014mx0.jpg" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line"> </span><br><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/Iterm2é…ç½®/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/Iterm2é…ç½®/" itemprop="url">ITerm2çš„é…ç½®</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-09T09:58:44+08:00">
                2018-11-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/Iterm2é…ç½®/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/09/å¼€å‘é‡åˆ°çš„é—®é¢˜/Iterm2é…ç½®/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ITerm2çš„é…ç½®é—®é¢˜"><a href="#ITerm2çš„é…ç½®é—®é¢˜" class="headerlink" title="ITerm2çš„é…ç½®é—®é¢˜"></a>ITerm2çš„é…ç½®é—®é¢˜</h2><h1 id="æ¯æ¬¡vimçš„æ—¶å€™ä¸€å®šè¦sourceä¸€ä¸‹-å•Š-xiong-die"><a href="#æ¯æ¬¡vimçš„æ—¶å€™ä¸€å®šè¦sourceä¸€ä¸‹-å•Š-xiong-die" class="headerlink" title="æ¯æ¬¡vimçš„æ—¶å€™ä¸€å®šè¦sourceä¸€ä¸‹ å•Š xiong die"></a>æ¯æ¬¡vimçš„æ—¶å€™ä¸€å®šè¦sourceä¸€ä¸‹ å•Š xiong die</h1><blockquote>
<p>å­¦ä¹ èµ„æº</p>
<p><a href="https://www.jianshu.com/p/9c3439cc3bdb" target="_blank" rel="noopener">https://www.jianshu.com/p/9c3439cc3bdb</a> ç®€ä¹¦</p>
<p><a href="https://github.com/sirius1024/iterm2-with-oh-my-zsh" target="_blank" rel="noopener">https://github.com/sirius1024/iterm2-with-oh-my-zsh</a> Github</p>
<p><a href="https://www.cnblogs.com/xishuai/p/mac-iterm2.html" target="_blank" rel="noopener">https://www.cnblogs.com/xishuai/p/mac-iterm2.html</a> åšå®¢å›­</p>
<p><a href="https://blog.csdn.net/z3512498/article/details/51245853" target="_blank" rel="noopener">https://blog.csdn.net/z3512498/article/details/51245853</a> CSDN æ”¹å˜ç”¨æˆ·å </p>
<blockquote>
<p>å¿…é¡»è¦ä½¿ç”¨vimçš„å‘½ä»¤ä¿®æ”¹é…ç½®</p>
</blockquote>
</blockquote>
<h3 id="å¸¸è§çš„å‘½ä»¤"><a href="#å¸¸è§çš„å‘½ä»¤" class="headerlink" title="å¸¸è§çš„å‘½ä»¤"></a>å¸¸è§çš„å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.zshrc</span><br><span class="line">source ~/.zshrc  ï¼ˆsoucreé…ç½®æ–‡ä»¶ è®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼‰</span><br><span class="line">æ–‡ä»¶æ”¾åœ¨itermgitä¸‹é¢ å¿…é¡»è¦åœ¨ä¸»é¢˜å¯ä»¥ä½¿ç”¨çš„æƒ…å†µä¸‹ è¿›è¡Œä»¥ä¸Šçš„é…ç½®</span><br><span class="line">å¿«æ·é”®å†²çª å–è¯ copyå¤±æ•ˆ</span><br></pre></td></tr></table></figure>
<h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><ul>
<li>å®‰è£…å®Œæˆåï¼Œåœ¨/binç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªzshçš„æ–‡ä»¶ã€‚</li>
</ul>
<p>Macç³»ç»Ÿé»˜è®¤ä½¿ç”¨dashä½œä¸ºç»ˆç«¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ä¿®æ”¹é»˜è®¤ä½¿ç”¨zshï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³ä¿®æ”¹å›é»˜è®¤dashï¼ŒåŒæ ·ä½¿ç”¨chshå‘½ä»¤å³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/bash</span><br></pre></td></tr></table></figure>
<p>export MAVEN_HOME=/Java/apache-maven-3.5.4 </p>
<p>export PATH=${PATH}:${MAVEN_HOME}/bin </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/08/Docker/Docker-web/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/08/Docker/Docker-web/" itemprop="url">docker-web</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-08T10:20:30+08:00">
                2018-11-08
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/08/Docker/Docker-web/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/08/Docker/Docker-web/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p> å­¦ä¹ åœ°å€* <a href="https://www.imooc.com/video/14624ï¼ˆæ…•è¯¾ç½‘ï¼‰-6âƒ£åˆ˜æœå›½" target="_blank" rel="noopener">https://www.imooc.com/video/14624ï¼ˆæ…•è¯¾ç½‘ï¼‰-6âƒ£åˆ˜æœå›½</a></p>
</blockquote>
<p>#ç¬¬ä¸€ä¸ª java webé¡¹ç›® ï¼ˆSpringBoot é¡¹ç›®æ‰“åŒ…æˆä¸€ä¸ªwaråŒ…çš„æ–¹å¼ï¼‰</p>
<h3 id="ä¸€åˆ¶ä½œè‡ªå·±çš„æ™¯è±¡"><a href="#ä¸€åˆ¶ä½œè‡ªå·±çš„æ™¯è±¡" class="headerlink" title="ä¸€åˆ¶ä½œè‡ªå·±çš„æ™¯è±¡"></a>ä¸€åˆ¶ä½œè‡ªå·±çš„æ™¯è±¡</h3><ul>
<li><p>Dockerfile</p>
</li>
<li><p>docker build</p>
<hr>
<ul>
<li>é¦–å…ˆéœ€è¦ä¸€ä¸ªwaræ–‡ä»¶ æ‹·è´åœ¨æ¡Œé¢ä¸Š</li>
</ul>
<blockquote>
<p>Docker images</p>
</blockquote>
</li>
</ul>
<h5 id="1-å»ºç«‹ä¸€ä¸ªDockerfile"><a href="#1-å»ºç«‹ä¸€ä¸ªDockerfile" class="headerlink" title="1.å»ºç«‹ä¸€ä¸ªDockerfile"></a>1.å»ºç«‹ä¸€ä¸ªDockerfile</h5><blockquote>
<p>vim Dockerfile</p>
</blockquote>
<h6 id="2-ä¸‹è½½Tomcaté•œåƒ"><a href="#2-ä¸‹è½½Tomcaté•œåƒ" class="headerlink" title="2. ä¸‹è½½Tomcaté•œåƒ"></a>2. ä¸‹è½½Tomcaté•œåƒ</h6><blockquote>
<p>ç½‘æ˜“é•œåƒä¸­å¿ƒ æ‰¾Tomcatçš„é•œåƒ <a href="https://c.163yun.com/hub#/m/home/" target="_blank" rel="noopener">https://c.163yun.com/hub#/m/home/</a></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1o7j48uj30z90583z1.jpg" alt="image-20181108171728002"></p>
</blockquote>
<p>ï¼ˆåŒ…æ‹¬JDK Tomcatï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull hub.c.163.com/library/tomcat:latest</span><br></pre></td></tr></table></figure>
<p> <img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1ocd68lj30p10bjdik.jpg" alt="image-20181108172737831"></p>
<p>ç«™åœ¨å·¨äººçš„è‚©ä¸Š</p>
<h5 id="3-ç¼–è¾‘Dockerfile"><a href="#3-ç¼–è¾‘Dockerfile" class="headerlink" title="3.ç¼–è¾‘Dockerfile"></a>3.ç¼–è¾‘Dockerfile</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åœ¨Macç»ˆç«¯ä¸­ä½¿ç”¨vimç¼–è¾‘æ–‡ä»¶æ­¥éª¤</span><br><span class="line">1.  cd   æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„  &lt;å›è»Š&gt;</span><br><span class="line">2. è¼¸å…¥  vim æ–‡ä»¶å &lt;å›è»Š&gt;</span><br><span class="line">3. æŒ‰ä¸‹ i éµä¾†ç¼–è¾‘æ–‡æœ¬æ–‡å­—</span><br><span class="line">4. é€€å‡ºvimç·¨è¼¯å™¨ï¼š</span><br><span class="line">     ä¸ä¿å­˜å¹¶é€€å‡º  &lt;ESC&gt;   :q!   &lt;å›è»Š&gt;</span><br><span class="line">     ä¿å­˜å¹¶é€€å‡º     &lt;ESC&gt;   :wq   &lt;å›è»Š&gt;</span><br></pre></td></tr></table></figure>
<p>from hub.c.163.com/library/tomcat</p>
<p>MAINTAINER Freemana2017 <a href="mailto:1047629166@qq.com" target="_blank" rel="noopener">1047629166@qq.com</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/apple/Desktop/Dockerweb</span><br><span class="line">ls</span><br><span class="line">&gt; mv atcrodfunding3_ssm-0.0.1-SNAPSHOT.war atcrod.war</span><br><span class="line">mv atcrodfunding3_ssm-0.0.1-SNAPSHOT.war atcrod.war (ç”¨MV é‡æ–°å‘½åä¸€ä¸‹)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>è¿›å…¥æ–‡ä»¶å¤¹é‡Œé¢ ç¼–å†™Dockerfile</p>
</li>
<li><p>å­¦ä¼šçœ‹é•œåƒçš„è¯´æ˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">How to use this image.</span><br><span class="line"></span><br><span class="line">Run the default Tomcat server (CMD [\&quot;catalina.sh\&quot;, \&quot;run\&quot;]):</span><br><span class="line"></span><br><span class="line">$ docker run -it --rm tomcat:8.0</span><br><span class="line">You can test it by visiting http://container-ip:8080 in a browser or, if you need access outside the host, on port 8888:</span><br><span class="line"></span><br><span class="line">$ docker run -it --rm -p 8888:8080 tomcat:8.0</span><br><span class="line">You can then go to http://localhost:8888 or http://host-ip:8888 in a browser.</span><br><span class="line"></span><br><span class="line">The default Tomcat environment in the image for versions 7 and 8 is:</span><br><span class="line"></span><br><span class="line">â­ï¸CATALINA_BASE:   /usr/local/tomcat</span><br><span class="line">â­ï¸CATALINA_HOME:   /usr/local/tomcat</span><br><span class="line">CATALINA_TMPDIR: /usr/local/tomcat/temp</span><br><span class="line">JRE_HOME:        /usr</span><br><span class="line">CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1ã€‚ç¼–å†™Dockerfile-æ–‡ä»¶â€“Dockerfile"><a href="#1ã€‚ç¼–å†™Dockerfile-æ–‡ä»¶â€“Dockerfile" class="headerlink" title="1ã€‚ç¼–å†™Dockerfile æ–‡ä»¶â€“Dockerfile"></a>1ã€‚ç¼–å†™Dockerfile æ–‡ä»¶â€“Dockerfile</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from hub.c.163.com/library/tomcat</span><br><span class="line"></span><br><span class="line">MAINTAINER Freemana2017 1047629166@qq.com</span><br><span class="line"></span><br><span class="line">COPY atcrod.war /usr/local/tomcat/webapps</span><br></pre></td></tr></table></figure>
<h3 id="2-åˆ›å»ºé•œåƒ-â€“docker-build"><a href="#2-åˆ›å»ºé•œåƒ-â€“docker-build" class="headerlink" title="2.åˆ›å»ºé•œåƒ â€“docker build"></a>2.åˆ›å»ºé•œåƒ â€“docker build</h3><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1obbfgjj30hu07q0uk.jpg" alt="image-20181108174858497"></p>
<h3 id="3-æŸ¥çœ‹é•œåƒâ€“docker-images"><a href="#3-æŸ¥çœ‹é•œåƒâ€“docker-images" class="headerlink" title="3.æŸ¥çœ‹é•œåƒâ€“docker images"></a>3.æŸ¥çœ‹é•œåƒâ€“docker images</h3><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1o9fhwsj30uh03s3zp.jpg" alt="image-20181108174929561"></p>
<h2 id="4-ç»™é•œåƒå†™åå­—-docker-build-t-atcrod-latest"><a href="#4-ç»™é•œåƒå†™åå­—-docker-build-t-atcrod-latest" class="headerlink" title="4.ç»™é•œåƒå†™åå­— docker build -t atcrod:latest ."></a>4.ç»™é•œåƒå†™åå­— docker build -t atcrod:latest .</h2><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1obvr9lj30l7080q4p.jpg" alt="image-20181108175158795"></p>
<h3 id="5-å†æ¬¡æŸ¥çœ‹é•œåƒ-docker-images"><a href="#5-å†æ¬¡æŸ¥çœ‹é•œåƒ-docker-images" class="headerlink" title="5.å†æ¬¡æŸ¥çœ‹é•œåƒ docker images"></a>5.å†æ¬¡æŸ¥çœ‹é•œåƒ docker images</h3><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1ocxbkbj30wq049mym.jpg" alt="image-20181108175309803"></p>
<hr>
<hr>
<hr>
<hr>
<h1 id="äºŒè¿è¡Œè‡ªå·±çš„å®¹å™¨"><a href="#äºŒè¿è¡Œè‡ªå·±çš„å®¹å™¨" class="headerlink" title="###äºŒè¿è¡Œè‡ªå·±çš„å®¹å™¨"></a>###äºŒè¿è¡Œè‡ªå·±çš„å®¹å™¨</h1><h3 id="1-docker-run-d-p-8888-8080-atcrod"><a href="#1-docker-run-d-p-8888-8080-atcrod" class="headerlink" title="1.docker run -d -p 8888:8080 atcrod"></a>1.docker run -d -p 8888:8080 atcrod</h3><blockquote>
<p>8888æœ¬æœºçš„ç«¯å£å·ã€‚8080Tomcatçš„ç«¯å£å· å»163.comæŸ¥è¯¢ atcrodé•œåƒçš„åå­—</p>
</blockquote>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1oaw0vvj30mx01it99.jpg" alt="image-20181108175738036"></p>
<h4 id="2-docker-ps"><a href="#2-docker-ps" class="headerlink" title="2.docker ps"></a>2.docker ps</h4><blockquote>
<p>æŸ¥çœ‹Tomcatçš„è¿›ç¨‹ æ£€æŸ¥å®¹å™¨æ˜¯ä¸æ˜¯å¯åŠ¨å•¦</p>
</blockquote>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1o9yl4qj310e0283z9.jpg" alt="image-20181108175751244"></p>
<h3 id="3-netstat-na-grep-8888"><a href="#3-netstat-na-grep-8888" class="headerlink" title="3.netstat -na|grep 8888"></a>3.netstat -na|grep 8888</h3><blockquote>
<p>æ£€æŸ¥ç«¯å£æ˜¯ä¸æ˜¯å­˜åœ¨äº†  è¾“å…¥localhost:8888æµ‹è¯•Tomcatæ˜¯å¦å¯åŠ¨å•¦</p>
</blockquote>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1oagkq1j30os02oq3i.jpg" alt="image-20181108180034419"></p>
<hr>
<hr>
<hr>
<hr>
<hr>
<h1 id="âš ï¸-ä»¥ä¸Šåªæ˜¯webé¡¹ç›®åœ¨Dockerä¸­çš„éƒ¨ç½²é¡¹ç›®"><a href="#âš ï¸-ä»¥ä¸Šåªæ˜¯webé¡¹ç›®åœ¨Dockerä¸­çš„éƒ¨ç½²é¡¹ç›®" class="headerlink" title="âš ï¸ ä»¥ä¸Šåªæ˜¯webé¡¹ç›®åœ¨Dockerä¸­çš„éƒ¨ç½²é¡¹ç›®"></a>âš ï¸ ä»¥ä¸Šåªæ˜¯webé¡¹ç›®åœ¨Dockerä¸­çš„éƒ¨ç½²é¡¹ç›®</h1><h1 id="3-Docker-éƒ¨ç½²SpringBoot-webé¡¹ç›®"><a href="#3-Docker-éƒ¨ç½²SpringBoot-webé¡¹ç›®" class="headerlink" title="3.Docker éƒ¨ç½²SpringBoot webé¡¹ç›®"></a>3.Docker éƒ¨ç½²SpringBoot webé¡¹ç›®</h1><blockquote>
<p>å­¦ä¹ èµ„æºæ±‡æ€»</p>
<p><a href="http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html" target="_blank" rel="noopener">http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html</a></p>
<p><a href="https://blog.csdn.net/weixin_39800144/article/details/79214978" target="_blank" rel="noopener">https://blog.csdn.net/weixin_39800144/article/details/79214978</a></p>
<p><a href="https://blog.csdn.net/weixin_39800144/article/details/79213276" target="_blank" rel="noopener">https://blog.csdn.net/weixin_39800144/article/details/79213276</a></p>
<p><a href="https://bingohuang.com/spring-boot-docker/" target="_blank" rel="noopener">https://bingohuang.com/spring-boot-docker/</a></p>
</blockquote>
<blockquote>
<p>FROM java:8</p>
<p>VOLUME /tmp</p>
<p>COPY target/tran4spd-1.0-SNAPSHOT.jar resource.jar.   #è¿™è¾¹æ”¾çš„æ˜¯Dockeréƒ¨ç½²çš„jaråŒ…çš„ä½ç½® ç»å¯¹è·¯å¾„</p>
<p>RUN bash -c â€œtouch /resource.jarâ€</p>
<p>EXPOSE 8080</p>
<p>ENTRYPOINT [â€œjavaâ€,â€-jarâ€,â€resource.jarâ€]</p>
<p># docker run -d -p 18080:8099 â€“name docker-resource leesia/resource:1.0</p>
</blockquote>
<p> æ³¨æ„java-jaræ— æ³•è¿è¡ŒTomcatè¦å¤–ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/servlet-api --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.5&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>##æ–‡ä»¶è·¯å¾„ä¸è¦ç”¨ä¸­æ–‡ï¼ï¼ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/07/Docker/Docker-SpringBoot/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/07/Docker/Docker-SpringBoot/" itemprop="url">Docker SpringBoot</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-07T18:04:37+08:00">
                2018-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/SpringBoot/" itemprop="url" rel="index">
                    <span itemprop="name">SpringBoot</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/07/Docker/Docker-SpringBoot/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/07/Docker/Docker-SpringBoot/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="DockerMachineåº”ç”¨"><a href="#DockerMachineåº”ç”¨" class="headerlink" title="DockerMachineåº”ç”¨"></a>DockerMachineåº”ç”¨</h2><h4 id="æ³¨æ„æ•´ä¸ªè¿‡ç¨‹è¦ç­‰å¾…ä¸€ä¸‹"><a href="#æ³¨æ„æ•´ä¸ªè¿‡ç¨‹è¦ç­‰å¾…ä¸€ä¸‹" class="headerlink" title="æ³¨æ„æ•´ä¸ªè¿‡ç¨‹è¦ç­‰å¾…ä¸€ä¸‹"></a>æ³¨æ„æ•´ä¸ªè¿‡ç¨‹è¦ç­‰å¾…ä¸€ä¸‹</h4><blockquote>
<p>å‚è€ƒ<a href="https://study.163.com/course/courseLearn.htm?courseId=1002892012#/learn/video?lessonId=1003309140&amp;courseId=1002892012" target="_blank" rel="noopener">https://study.163.com/course/courseLearn.htm?courseId=1002892012#/learn/video?lessonId=1003309140&amp;courseId=1002892012</a></p>
<p>ç½‘æ˜“äº‘è¯¾å ‚ åŠ¨æ‰‹ç©Docker</p>
</blockquote>
<ul>
<li>å®‰è£…DockerMachine</li>
<li>docker-machine ls    tcp://192.168.99.100:2376   nameï¼šcloudcomb</li>
</ul>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nhvbpxj30v502gq3j.jpg" alt="image-20181107181833492"></p>
<ul>
<li><p>docker-machine create â€“driver virtualbox cloudcomb </p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1niejwmj314m0j0agt.jpg" alt="image-20181107181903652"></p>
</li>
<li><p>Docker-machine env cloudcomb</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nnekkpj30oe05ngnb.jpg" alt="image-20181107182121568"></p>
</li>
</ul>
<p>âš ï¸ç¬¬å››ä¸ªå˜é‡evalè¯´çš„æ˜¯å½“å‰Dockermachineçš„åå­—æ˜¯â€”cloudcomb</p>
<ul>
<li><p>eval $(docker-machine env cloudcomb) æ‹·è´æ”¾åˆ°åº•ä¸‹</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1njfqr1j30nw01mdg7.jpg" alt="image-20181107182325486"></p>
</li>
<li><p>ä½¿ç”¨ç½‘æ˜“èœ‚å·¢</p>
</li>
<li><p>Docker run hub.c163.com/library/busybox:latest echon hello world ï¼ˆunableã€‚ã€‚è¿™ä¸ªè¿‡ç¨‹è¦ç­‰å¾…å•Šï¼‰â­ï¸</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nuv8l5j30uv05vq53.jpg" alt="image-20181107182746194"></p>
</li>
<li><p>docker-machine rm cloudcomb åˆ é™¤docker-machine</p>
</li>
</ul>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nr9y6gj30vk06atak.jpg" alt="image-20181107182909832"></p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1no2f8zj310i0iywgq.jpg" alt="image-20181107183004383"></p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nya7tbj30vj0gvwh6.jpg" alt="image-20181107183018420"></p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1npbkc8j30vb0dowgf.jpg" alt="image-20181107183034881"></p>
<h1 id="SpringBootæ•´åˆDocker"><a href="#SpringBootæ•´åˆDocker" class="headerlink" title="SpringBootæ•´åˆDocker"></a>SpringBootæ•´åˆDocker</h1><blockquote>
<p>Emmmm.ç­‰æˆ‘æœ‰é’±äº† æŠŠXnipå»æ‰å“ˆå“ˆ</p>
</blockquote>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1npwdhcj30qd1niq9k.jpg" alt="image-20181107183409783"></p>
<ul>
<li><p>ä¸‹è½½æºç <a href="https://github.com/bingohuang/spring-boot-docker" target="_blank" rel="noopener">https://github.com/bingohuang/spring-boot-docker</a></p>
<blockquote>
<p>Git é€šè¿‡å‘½ä»¤è¡Œä¸‹è½½æ–‡ä»¶ å…ˆcdä¸€ä¸‹æŒ‡å®šä¸€ä¸‹ä¸‹è½½çš„è·¯å¾„</p>
</blockquote>
</li>
<li><p>å¯¼å…¥é¡¹ç›®åˆ°Idea ç„¶åæŸ¥çœ‹ä¸€ä¸‹æºç </p>
</li>
<li><p>è¿è¡Œä¸€ä¸‹é¡¹ç›®ï¼ˆè®¿é—®ä¸€ä¸‹ æµ‹è¯•ä¸€ä¸‹ï¼‰</p>
<h2 id="Docker-SpringBootéƒ¨ç½²é¡¹ç›®"><a href="#Docker-SpringBootéƒ¨ç½²é¡¹ç›®" class="headerlink" title="Docker SpringBootéƒ¨ç½²é¡¹ç›®"></a>Docker SpringBootéƒ¨ç½²é¡¹ç›®</h2></li>
</ul>
<p>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</p>
<h3 id="1-installé¡¹ç›®"><a href="#1-installé¡¹ç›®" class="headerlink" title="1.installé¡¹ç›®"></a>1.installé¡¹ç›®</h3><p>  <img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nqqkndj308301d0sq.jpg" alt="image-20181107185602118"></p>
<blockquote>
<p>æ‰¾åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶ æ”¾åˆ°æ¡Œé¢ä¸Š</p>
</blockquote>
<h3 id="2-å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå¥½åƒè¦æŠŠjaræ”¹åæˆgs-spring-boot-docker-0-0-1-jar"><a href="#2-å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå¥½åƒè¦æŠŠjaræ”¹åæˆgs-spring-boot-docker-0-0-1-jar" class="headerlink" title="2.å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå¥½åƒè¦æŠŠjaræ”¹åæˆgs-spring-boot-docker-0.0.1.jar"></a>2.å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸‹ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå¥½åƒè¦æŠŠjaræ”¹åæˆgs-spring-boot-docker-0.0.1.jar</h3><p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1nypf5ij309k01jglr.jpg" alt="image-20181107191351622"></p>
<h3 id="3-cdåˆ°æ–‡ä»¶ä¸‹-lsä¸€ä¸‹"><a href="#3-cdåˆ°æ–‡ä»¶ä¸‹-lsä¸€ä¸‹" class="headerlink" title="3.cdåˆ°æ–‡ä»¶ä¸‹ lsä¸€ä¸‹"></a>3.cdåˆ°æ–‡ä»¶ä¸‹ lsä¸€ä¸‹</h3><h3 id="4-æ‰§è¡Œ-Ë›docker-version"><a href="#4-æ‰§è¡Œ-Ë›docker-version" class="headerlink" title="4.æ‰§è¡Œ  Ë›docker version"></a>4.æ‰§è¡Œ  Ë›docker version</h3><p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nu3j80j30gp0dcwgb.jpg" alt="image-20181107191444666"></p>
<h3 id="5-æ‰§è¡Œ-docker-machine-env"><a href="#5-æ‰§è¡Œ-docker-machine-env" class="headerlink" title="5.æ‰§è¡Œ docker-machine env"></a>5.æ‰§è¡Œ docker-machine env</h3><p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nmu4mmj30m405agn2.jpg" alt="image-20181107191515590"></p>
<h3 id="6-æ‰§è¡Œeval-docker-machine-env-ï¼ˆå¤åˆ¶åé¢çš„ç¬¬å››æ¡ï¼‰"><a href="#6-æ‰§è¡Œeval-docker-machine-env-ï¼ˆå¤åˆ¶åé¢çš„ç¬¬å››æ¡ï¼‰" class="headerlink" title="6.æ‰§è¡Œeval $(docker-machine env)ï¼ˆå¤åˆ¶åé¢çš„ç¬¬å››æ¡ï¼‰"></a>6.æ‰§è¡Œeval $(docker-machine env)ï¼ˆå¤åˆ¶åé¢çš„ç¬¬å››æ¡ï¼‰</h3><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nkk2c6j30j6015q39.jpg" alt="image-20181107191547911"></p>
<p>tcp://192.168.99.100:2376192.168.99.100</p>
<p> tcp://127.0.0.1:2376 tcp://127.0.0.1:2376</p>
<p>###7.docker versionï¼ˆæ²¡æœ‰-ï¼‰</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nwvgcbj30ib0de40e.jpg" alt="image-20181107191658043"></p>
<h3 id="8-lsä¸€ä¸‹ç›®å½•"><a href="#8-lsä¸€ä¸‹ç›®å½•" class="headerlink" title="8.lsä¸€ä¸‹ç›®å½•"></a>8.lsä¸€ä¸‹ç›®å½•</h3><p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nk29s4j30k301l0t2.jpg" alt="image-20181107191730046"></p>
<h3 id="9-docker-build-t-cloudcomb-sun-1-0"><a href="#9-docker-build-t-cloudcomb-sun-1-0" class="headerlink" title="9.docker build -t cloudcomb/sun:1.0 ."></a>9.docker build -t cloudcomb/sun:1.0 .</h3><blockquote>
<p> ï¼ˆæ¡Œé¢ä¸Šè¦æœ‰jaråŒ…å’Œdockerfilede æ–‡ä»¶ï¼‰</p>
</blockquote>
<p><img src="/Users/apple/Library/Application Support/typora-user-images/image-20181107191826890.png" alt="image-20181107191826890"></p>
<blockquote>
<p>æ­¤æ—¶æŠ¥é”™ æ²¡æœ‰gs-spring-boot-docker.jaræ–‡ä»¶ å…¶å®lsçš„æ—¶å€™å°±åº”è¯¥æ˜¯gs-spring-boot-docker.jar è¿™å„¿æ˜¯ä¸ªbugã€‚</p>
<p>è§£å†³åŠæ³• æ”¹jaråŒ…å æ·»åŠ gså‰ç¼€</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://docker.mirrors.ustc.edu.cn</span><br></pre></td></tr></table></figure>
<h3 id="10ã€‚docker-build-t-cloudcomb-sun-1-0-ï¼ˆå¤§ä½¬è¯´è¿™ä¸€æ­¥æ˜¯æ‹‰å–é•œåƒã€‚ç”¨åŠ é€Ÿå™¨-æ”¹ååé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨å¤§ä½¬ç½‘æ˜“äº‘çš„Dokceré•œåƒ"><a href="#10ã€‚docker-build-t-cloudcomb-sun-1-0-ï¼ˆå¤§ä½¬è¯´è¿™ä¸€æ­¥æ˜¯æ‹‰å–é•œåƒã€‚ç”¨åŠ é€Ÿå™¨-æ”¹ååé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨å¤§ä½¬ç½‘æ˜“äº‘çš„Dokceré•œåƒ" class="headerlink" title="10ã€‚docker build -t cloudcomb/sun:1.0 .ï¼ˆå¤§ä½¬è¯´è¿™ä¸€æ­¥æ˜¯æ‹‰å–é•œåƒã€‚ç”¨åŠ é€Ÿå™¨ æ”¹ååé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨å¤§ä½¬ç½‘æ˜“äº‘çš„Dokceré•œåƒ"></a>10ã€‚docker build -t cloudcomb/sun:1.0 .ï¼ˆå¤§ä½¬è¯´è¿™ä¸€æ­¥æ˜¯æ‹‰å–é•œåƒã€‚ç”¨åŠ é€Ÿå™¨ æ”¹ååé‡æ–°æ‰§è¡Œå‘½ä»¤ï¼‰æˆ‘ä»¬å¯ä»¥ç”¨å¤§ä½¬ç½‘æ˜“äº‘çš„Dokceré•œåƒ</h3><p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nxqi67j30u00d5jv6.jpg" alt="image-20181107192039326"></p>
<h3 id="11-docker-images-a"><a href="#11-docker-images-a" class="headerlink" title="11. docker images -a"></a>11. docker images -a</h3><p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nl3117j30rv04k3zz.jpg" alt="image-20181107192154611"></p>
<h3 id="12-docker-run-p-1024-8080-t-cloudcomb-sun-1-0"><a href="#12-docker-run-p-1024-8080-t-cloudcomb-sun-1-0" class="headerlink" title="12.docker run -p 1024:8080 -t cloudcomb/sun:1.0 ."></a>12.docker run -p 1024:8080 -t cloudcomb/sun:1.0 .</h3><blockquote>
<p>æ³¨æ„ cloudcombå’Œå‰é¢çš„cloudcombè¦ä¸€ä¸€å¯¹åº”</p>
<p>1024 ä¸8080æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»</p>
<p>Error: Unable to access jarfile /app.jar</p>
<p>â­ï¸ ADD user-server-0.0.1-SNAPSHOT.jar app.jar è¦å’Œpomçš„<artifactid>user-server</artifactid></p>
<p>ä¿æŒåå­—ä¸€æ ·ï¼Œä¸ç„¶mavenæ‰“å‡ºæ¥çš„åŒ…ï¼Œdockeræ‰¾ä¸åˆ°ã€‚</p>
<ul>
<li>æœ€ç»ˆçš„ç»“å±€åŠæ³• å¥½åƒæ˜¯å°†copyå»æ‰äº† æ³¨æ„çœ‹æ§åˆ¶å°æ‰“å°çš„ä¿¡æ¯ å…„dei</li>
</ul>
</blockquote>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1nsxm7fj30u012etvl.jpg" alt="image-20181107192857396"></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nz8gpnj30ky06g76a.jpg" alt="image-20181107193127019"></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nthrydj30at04rwes.jpg" alt="image-20181107193051806"></p>
<p>DockerFileï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fxv1nvfyymj30io05m3zf.jpg" alt="image-20181107193402453"></p>
<blockquote>
<p>Dockerå°±æ˜¯ç»™ä¸€åå­— gs-spring-bbot</p>
</blockquote>
<p>è´´ä¸€ä¸ªDockerfilrã€‚</p>
<ul>
<li style="list-style: none"><input type="checkbox" checked> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">FROM hub.c.163.com/xbingo/jdk8:latest</span><br><span class="line"></span><br><span class="line">from hub.c.163.com/library/tomcat</span><br><span class="line"></span><br><span class="line">MAINTAINER Freemana2017 1047629166@qq.com</span><br><span class="line"></span><br><span class="line">ADD  atcrodfunding3_ssm-0.0.1-SNAPSHOT.jar app.jar</span><br><span class="line"></span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</span><br><span class="line"></span><br><span class="line">COPY atcrod.war /usr/local/tomcat/webapps</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">#FROM openjdk:8-jdk-alpine</span><br><span class="line">#VOLUME /tmp</span><br><span class="line">#ADD  atcrodfunding3_ssm-0.0.1-SNAPSHOT.jar app.jar</span><br><span class="line">#ENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</span><br><span class="line">#</span><br><span class="line"> </span><br><span class="line">#FROM hub.c.163.com/xbingo/jdk8:latest</span><br><span class="line">#</span><br><span class="line">#ADD gs-spring-boot-docker-0.1.0.jar app.jar</span><br><span class="line">#</span><br><span class="line">#ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">#è¿™ä¸ª Dockerfile æ–‡ä»¶å¾ˆç®€å•ï¼Œæ„å»º Jdk åŸºç¡€ç¯å¢ƒï¼Œæ·»åŠ  Spring Boot Jar åˆ°é•œåƒä¸­ï¼Œç®€å•è§£é‡Šä¸€ä¸‹:</span><br><span class="line">#</span><br><span class="line">#FROM ï¼Œè¡¨ç¤ºä½¿ç”¨ Jdk8 ç¯å¢ƒ ä¸ºåŸºç¡€é•œåƒï¼Œå¦‚æœé•œåƒä¸æ˜¯æœ¬åœ°çš„ä¼šä» DockerHub è¿›è¡Œä¸‹è½½</span><br><span class="line">#VOLUME ï¼ŒVOLUME æŒ‡å‘äº†ä¸€ä¸ª/tmpçš„ç›®å½•ï¼Œç”±äº Spring Boot ä½¿ç”¨å†…ç½®çš„Tomcatå®¹å™¨ï¼ŒTomcat é»˜è®¤ä½¿ç”¨/tmpä½œä¸ºå·¥ä½œç›®å½•ã€‚è¿™ä¸ªå‘½ä»¤çš„æ•ˆæœæ˜¯ï¼š</span><br><span class="line">#åœ¨å®¿ä¸»æœºçš„/var/lib/dockerç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¹¶æŠŠå®ƒé“¾æ¥åˆ°å®¹å™¨ä¸­çš„/tmpç›®å½•</span><br><span class="line">#ADD ï¼Œæ‹·è´æ–‡ä»¶å¹¶ä¸”é‡å‘½å</span><br><span class="line">#ENTRYPOINT ï¼Œä¸ºäº†ç¼©çŸ­ Tomcat çš„å¯åŠ¨æ—¶é—´ï¼Œæ·»åŠ java.security.egdçš„ç³»ç»Ÿå±æ€§æŒ‡å‘/dev/urandomä½œä¸º ENTRYPOINT</span><br><span class="line">#è¿™æ · Spring Boot é¡¹ç›®æ·»åŠ  Docker ä¾èµ–å°±å®Œæˆäº†ã€‚</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<p>Dockerfile ç”¨çš„warè¦æœ‰Tomcat </p>
<p>è‡ªå·±ç†è§£å§ å¤šçœ‹ä¸€äº›è§†é¢‘ç¬”è®°ä»€ä¹ˆçš„ åæ­£å¾ˆéš¾,,,</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fxv1nw5fzmj30u02imtsw.jpg" alt="image-20181107184402451"></p>
<hr>
<hr>
<hr>
<h1 id="ä»¥ä¸Šçš„æ–‡ä»¶æ˜¯ä»githubä¸Šæ‹‰çš„-ç°åœ¨è‡ªå·±æ„å»ºSpringBoot-jarçš„åº”ç”¨"><a href="#ä»¥ä¸Šçš„æ–‡ä»¶æ˜¯ä»githubä¸Šæ‹‰çš„-ç°åœ¨è‡ªå·±æ„å»ºSpringBoot-jarçš„åº”ç”¨" class="headerlink" title="ä»¥ä¸Šçš„æ–‡ä»¶æ˜¯ä»githubä¸Šæ‹‰çš„ ç°åœ¨è‡ªå·±æ„å»ºSpringBoot -jarçš„åº”ç”¨"></a>ä»¥ä¸Šçš„æ–‡ä»¶æ˜¯ä»githubä¸Šæ‹‰çš„ ç°åœ¨è‡ªå·±æ„å»ºSpringBoot -jarçš„åº”ç”¨</h1><blockquote>
<p>é€šè¿‡ç¾¤é‡Œçš„æŒ‡å¯¼ ä¼°è®¡jaræ‰“åŒ…å’Œwaræ‰“åŒ…åŒºåˆ«ä¸å¤§å§</p>
<p>ä¸‹é¢é€šè¿‡SpringBootæ„å»ºDockeréƒ¨ç½²ä¸€ä¸‹è¯•è¯•</p>
<p><a href="https://waylau.com/docker-spring-boot/" target="_blank" rel="noopener">https://waylau.com/docker-spring-boot/</a></p>
<p><a href="http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html" target="_blank" rel="noopener">http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html</a></p>
<p><a href="https://lw900925.github.io/docker/docker-springboot.html" target="_blank" rel="noopener">https://lw900925.github.io/docker/docker-springboot.html</a></p>
<p><a href="https://www.tianmaying.com/tutorial/spring-boot-docker" target="_blank" rel="noopener">https://www.tianmaying.com/tutorial/spring-boot-docker</a></p>
</blockquote>
<blockquote>
<p><a href="https://bingohuang.com/spring-boot-docker/" target="_blank" rel="noopener">https://bingohuang.com/spring-boot-docker/</a></p>
</blockquote>
<blockquote>
<p><a href="https://www.imooc.com/search/?words=docker" target="_blank" rel="noopener">https://www.imooc.com/search/?words=docker</a></p>
</blockquote>
<blockquote>
<p><a href="http://www.ityouknow.com/docker/2018/03/30/docker-machine.html" target="_blank" rel="noopener">http://www.ityouknow.com/docker/2018/03/30/docker-machine.html</a></p>
<p><a href="https://spring.io/guides/gs/spring-boot-docker/" target="_blank" rel="noopener">https://spring.io/guides/gs/spring-boot-docker/</a></p>
</blockquote>
<h2 id="SpringBoot-Docker"><a href="#SpringBoot-Docker" class="headerlink" title="SpringBoot Docker"></a>SpringBoot Docker</h2><blockquote>
<p><a href="https://lw900925.github.io/docker/docker-springboot.html" target="_blank" rel="noopener">https://lw900925.github.io/docker/docker-springboot.html</a></p>
</blockquote>
<p><a href="http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html" target="_blank" rel="noopener">http://www.ityouknow.com/springboot/2018/03/19/spring-boot-docker.html</a> ä¸»è¦ç¯èŠ‚</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nx6s2nj30jf039t96.jpg" alt="image-20181110214317827"></p>
<p><img src="/Users/apple/Library/Application Support/typora-user-images/image-20181115165826700.png" alt="image-20181115165826700"></p>
<p>$ sudo docker tag [ImageId] ccr.ccs.tencentyun.com/[namespace]/[ImageName]:[é•œåƒç‰ˆæœ¬å·]<br>$ sudo docker push ccr.ccs.tencentyun.com/[namespace]/[ImageName]:[é•œåƒç‰ˆæœ¬å·]</p>
<p>â­ï¸</p>
<p> sudo docker tag 5fc4ede68fcd ccr.ccs.tencentyun.com/atcrod/latest</p>
<p> sudo docker push ccr.ccs.tencentyun.com/atcrod/latest</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/07/Docker/Docker-Idea/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/07/Docker/Docker-Idea/" itemprop="url">Docker-Idea</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-07T15:39:20+08:00">
                2018-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/07/Docker/Docker-Idea/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/07/Docker/Docker-Idea/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>###1.Docker åœ¨Intellijä¸­çš„ä½¿ç”¨</p>
<ul>
<li><p>Machineçš„å®‰è£…</p>
</li>
<li><p>composeçš„å®‰è£…</p>
</li>
<li><p>Dockerçš„é…ç½®</p>
<p><strong>é¦–å…ˆå­¦ä¹ ä»€ä¹ˆä¸œè¥¿éƒ½è¦ç”¨å®˜ç½‘çš„ä¸œè¥¿</strong></p>
<p><strong>å®‰è£…Dockerçš„æ’ä»¶-çœ‹ç½‘ä¸Šæ•™ç¨‹</strong></p>
<p><strong>çœ‹Dockeræ’ä»¶çš„å®˜ç½‘</strong> <a href="https://www.jetbrains.com/help/idea/docker.html" target="_blank" rel="noopener">hrer</a></p>
<blockquote>
<p>å­¦ä¹ è‹±æ–‡ã€‚ä»»ä½•ä¸œè¥¿å®˜ç½‘éƒ½ç”¨è¯¦ç»†è¯´æ˜çš„</p>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox" checked> å­¦ä¹ Docker</li>
<li style="list-style: none"><input type="checkbox" checked> å­¦ä¹ SpringBootæ•´åˆDocker</li>
<li style="list-style: none"><input type="checkbox" checked> å­¦ä¹ è¿ç»´</li>
</ul>
<p><strong>ä¸‹é¢å¼€å§‹Dockerçš„å­¦ä¹ </strong></p>
<p>1.ç°åœ¨æ’ä»¶</p>
<p>2.çœ‹ç½‘å€çš„æ•™ç¨‹</p>
<p>3.å®‰è£…machinå’Œcompose</p>
<blockquote>
<p>machineå’Œcomposeçš„å®‰è£…å‚è€ƒ</p>
<p>1.Gitbookä¹¦</p>
<p><a href="https://yeasy.gitbooks.io/docker_practice/content/compose/install.html" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/content/compose/install.html</a></p>
<p>2ã€‚å®˜æ–¹æ–‡æ¡£ï¼ˆä¸ºä¸»ï¼‰</p>
<p><a href="https://docs.docker.com/machine/install-machine/" target="_blank" rel="noopener">https://docs.docker.com/machine/install-machine/</a> â­ï¸</p>
<p>ï¼ˆä¸ºä»€ä¹ˆæ¯æ¬¡éƒ½è¦é‡æ–°ä¸‹è½½dockermachineï¼‰</p>
</blockquote>
<blockquote>
<p>Docker-machine env ä¸èƒ½æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ é¦–å…ˆè¦ é‡æ–°ä¸‹è½½Dockermachihe</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base=https://github.com/docker/machine/releases/download/v0.14.0 &amp;&amp;</span><br><span class="line">  curl -L $base/docker-machine-$(uname -s)-$(uname -m) &gt;/usr/local/bin/docker-machine &amp;&amp;</span><br><span class="line">  chmod +x /usr/local/bin/docker-machine</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3.Github</p>
<p><a href="https://github.com/docker/machine/releases" target="_blank" rel="noopener">https://github.com/docker/machine/releases</a></p>
<p><a href="https://github.com/docker/machine" target="_blank" rel="noopener">https://github.com/docker/machine</a></p>
</blockquote>
<h1 id="2-æœ‰äº›ä¸œè¥¿æ”¾åœ¨äº†äº‘æ”¶è—é‡Œé¢"><a href="#2-æœ‰äº›ä¸œè¥¿æ”¾åœ¨äº†äº‘æ”¶è—é‡Œé¢" class="headerlink" title="2.æœ‰äº›ä¸œè¥¿æ”¾åœ¨äº†äº‘æ”¶è—é‡Œé¢"></a>2.æœ‰äº›ä¸œè¥¿æ”¾åœ¨äº†äº‘æ”¶è—é‡Œé¢</h1><h6 id="Dockerçš„ç”¨æˆ·åæ˜¯2018112"><a href="#Dockerçš„ç”¨æˆ·åæ˜¯2018112" class="headerlink" title="Dockerçš„ç”¨æˆ·åæ˜¯2018112"></a>Dockerçš„ç”¨æˆ·åæ˜¯2018112</h6><p>#####å®‰è£…Dockeræ’ä»¶è¦å¼€VPN è¿˜æœ‰è®¿é—®Gitbubä¹Ÿè¦å¼€VPN wiredesçš„</p>
<h6 id="å®‰è£…Dockerè¦å®‰è£…DookerToolBox"><a href="#å®‰è£…Dockerè¦å®‰è£…DookerToolBox" class="headerlink" title="å®‰è£…Dockerè¦å®‰è£…DookerToolBox"></a>å®‰è£…Dockerè¦å®‰è£…DookerToolBox</h6></li>
</ul>
<h1 id="3-Docker"><a href="#3-Docker" class="headerlink" title="3.Docker"></a>3.Docker</h1><p>  ï¼ï¼DockerçœŸæ˜¯ä¸€ä¸ªææ€–çš„ä¸œè¥¿</p>
<p>  ######Dockerçš„å­¦ä¹ èµ„æºGitBooké‡Œé¢çš„Dockerçš„é™„å½•éƒ¨åˆ†</p>
<blockquote>
<p><a href="https://blog.lab99.org/post/docker-2016-07-14-faq.html" target="_blank" rel="noopener">https://blog.lab99.org/post/docker-2016-07-14-faq.html</a></p>
</blockquote>
<h4 id="1-æ— ç‹¬æœ‰å¶é€šè¿‡Docker-SpirngBootçš„å­¦ä¹ äº†è§£äº†TCP-socker-Engine-API-URLçš„å¡«å†™"><a href="#1-æ— ç‹¬æœ‰å¶é€šè¿‡Docker-SpirngBootçš„å­¦ä¹ äº†è§£äº†TCP-socker-Engine-API-URLçš„å¡«å†™" class="headerlink" title="1.æ— ç‹¬æœ‰å¶é€šè¿‡Docker-SpirngBootçš„å­¦ä¹ äº†è§£äº†TCP socker Engine API URLçš„å¡«å†™"></a>1.æ— ç‹¬æœ‰å¶é€šè¿‡Docker-SpirngBootçš„å­¦ä¹ äº†è§£äº†TCP socker Engine API URLçš„å¡«å†™</h4><blockquote>
<p> Dockerå¼€å¯è¿œç¨‹è®¿é—®è¿™æ˜¯è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é—®é¢˜ å®‰è£…äº†socket ä»¥åæƒ³åŠæ³•åˆ é™¤</p>
<p>PSï¼šDockeræœåŠ¡ä¸­è¿›ç¨‹é—´é€šä¿¡é€šè¿‡/var/run/docker.sockå®ç°ï¼Œé»˜è®¤æœåŠ¡ä¸æä¾›ç›‘å¬ç«¯å£ï¼Œå› æ­¤ä½¿ç”¨docker remote api éœ€è¦æ‰‹åŠ¨ç»‘å®šç«¯å£ã€‚æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; `# service docker stop``# docker -d -H unix:``///var/run/docker.sock -H tcp://0.0.0.0:2375`</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>  ###2.ç‚¹å‡»+å·æ·»åŠ ä¸€ä¸ªdockeré…ç½®ï¼Œè¾“å…¥Nameå’ŒEngine API URLï¼ŒURLæ˜¯dockeræœåŠ¡åœ°å€ï¼Œéœ€è¦dockerå¼€å¯è¿œç¨‹è¿æ¥åŠŸèƒ½ã€‚CentOSä¸­åœ¨dockerå¯åŠ¨å‚æ•°é‡Œæ·»åŠ å¦‚ä¸‹é…ç½®å³å¯å¼€å¯è¿œç¨‹è¿æ¥ã€‚</p>
<pre><code>-H unix:///var/run/docker.sock -H tcp://0.0.0.0:2375
</code></pre><hr>
<p>   <em>ä¸‹é¢æ˜¯dockeråœ¨ideaä¸­çš„å®‰è£…</em></p>
<ul>
<li><p>cloudsé‡Œé¢æ²¡æœ‰Dockerã€‚åœ¨Dockerä¸­é…ç½® TCPï¼štcpï¼š//127.0.0.1:2376</p>
</li>
<li><p>æ³¨æ„è¿™ä¸ªæ˜¯é€šè¿‡ç»ˆç«¯å‘½ä»¤å¾—åˆ°çš„</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker-machine env cloudcomb</span><br><span class="line">export DOCKER_TLS_VERIFY=&quot;1&quot;</span><br><span class="line">export DOCKER_HOST=&quot;tcp://192.168.99.101:2376&quot;</span><br><span class="line">export DOCKER_CERT_PATH=&quot;/Users/apple/.docker/machine/machines/cloudcomb&quot;</span><br><span class="line">export DOCKER_MACHINE_NAME=&quot;cloudcomb&quot;</span><br><span class="line"># Run this command to configure your shell:</span><br><span class="line"># eval $(docker-machine env cloudcomb)</span><br></pre></td></tr></table></figure>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fxv1ndoklwj30u602yt9n.jpg" alt="image-20181107213000670"></p>
</li>
<li><p>å°†å‰é¢çš„ç«¯å£æ¢æˆæœ¬åœ°çš„ tcp:127.0.0.1:2376</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1nbu2afj30i90f8751.jpg" alt="image-20181107213056424"></p>
</li>
</ul>
<ul>
<li style="list-style: none"><input type="checkbox"> emmç¡ä¸€è§‰èµ·æ¥VPNæ‰“å¼€è¦ç­‰ä¸€ä¼š</li>
<li style="list-style: none"><input type="checkbox"> <img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fxv1ncn0rpj30hz0b4aal.jpg" alt="image-20181108064320954"></li>
</ul>
<p>åœ¨ç»ˆç«¯è¾“å…¥dockerversion</p>
<p>docker-machine envâ€”Host is not running</p>
<h5 id="å­¦ä¹ èµ„æºï¼šé€šè¿‡Githubçš„æœç´¢åŠŸèƒ½ğŸ”-å‘ç°ä¸€äº›å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æºï¼šé€šè¿‡Githubçš„æœç´¢åŠŸèƒ½ğŸ”-å‘ç°ä¸€äº›å­¦ä¹ èµ„æ–™" class="headerlink" title="#å­¦ä¹ èµ„æºï¼šé€šè¿‡Githubçš„æœç´¢åŠŸèƒ½ğŸ” å‘ç°ä¸€äº›å­¦ä¹ èµ„æ–™"></a>#å­¦ä¹ èµ„æºï¼šé€šè¿‡Githubçš„æœç´¢åŠŸèƒ½ğŸ” å‘ç°ä¸€äº›å­¦ä¹ èµ„æ–™</h5><p><a href="https://www.jetbrains.com/help/idea/docker.html" target="_blank" rel="noopener">https://www.jetbrains.com/help/idea/docker.html</a></p>
<p>alip1<code>sudo docker pull ccr.ccs.tencentyun.com/freemana2017/atcrod:latest</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line">VOLUME /tmp</span><br><span class="line"></span><br><span class="line">sudo docker pull ccr.ccs.tencentyun.com/freemana2017/atcrod:latest</span><br><span class="line"></span><br><span class="line">COPY target/tran4spd-1.0-SNAPSHOT.jar resource.jar</span><br><span class="line">RUN bash -c &quot;touch /resource.jar&quot;</span><br><span class="line">EXPOSE 8080</span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;resource.jar&quot;]</span><br><span class="line"></span><br><span class="line"># docker run -d -p 18080:8099 --name docker-resource leesia/resource:1.0</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/07/å¼€å‘é‡åˆ°çš„é—®é¢˜/Hexo/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/07/å¼€å‘é‡åˆ°çš„é—®é¢˜/Hexo/" itemprop="url">Hexoçš„ä½¿ç”¨æ•™ç¨‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-07T15:24:22+08:00">
                2018-11-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/07/å¼€å‘é‡åˆ°çš„é—®é¢˜/Hexo/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/11/07/å¼€å‘é‡åˆ°çš„é—®é¢˜/Hexo/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="ä¸»é¢˜copyä¸€ä»½åœ¨appleä¸­"><a href="#ä¸»é¢˜copyä¸€ä»½åœ¨appleä¸­" class="headerlink" title="ä¸»é¢˜copyä¸€ä»½åœ¨appleä¸­"></a>ä¸»é¢˜copyä¸€ä»½åœ¨appleä¸­</h3><h3 id="ä¸éœ€è¦ç»ˆç«¯new-æˆ–è€…-æ ‡é¢˜titleç›´æ¥å¤åˆ¶ä¹Ÿæ˜¯å¯ä»¥çš„"><a href="#ä¸éœ€è¦ç»ˆç«¯new-æˆ–è€…-æ ‡é¢˜titleç›´æ¥å¤åˆ¶ä¹Ÿæ˜¯å¯ä»¥çš„" class="headerlink" title="ä¸éœ€è¦ç»ˆç«¯new æˆ–è€… æ ‡é¢˜titleç›´æ¥å¤åˆ¶ä¹Ÿæ˜¯å¯ä»¥çš„"></a>ä¸éœ€è¦ç»ˆç«¯new æˆ–è€… æ ‡é¢˜titleç›´æ¥å¤åˆ¶ä¹Ÿæ˜¯å¯ä»¥çš„</h3><h3 id="æœ‰æ—¶å€™æœ‰å»¶è¿Ÿ"><a href="#æœ‰æ—¶å€™æœ‰å»¶è¿Ÿ" class="headerlink" title="æœ‰æ—¶å€™æœ‰å»¶è¿Ÿ"></a>æœ‰æ—¶å€™æœ‰å»¶è¿Ÿ</h3><h3 id="ä¸‹é¢å°±æ˜¯å›¾ç‰‡çš„é—®é¢˜å•¦-ç”¨å›¾åºŠipicè§£å†³é—®é¢˜"><a href="#ä¸‹é¢å°±æ˜¯å›¾ç‰‡çš„é—®é¢˜å•¦-ç”¨å›¾åºŠipicè§£å†³é—®é¢˜" class="headerlink" title="ä¸‹é¢å°±æ˜¯å›¾ç‰‡çš„é—®é¢˜å•¦  ç”¨å›¾åºŠipicè§£å†³é—®é¢˜"></a>ä¸‹é¢å°±æ˜¯å›¾ç‰‡çš„é—®é¢˜å•¦  ç”¨å›¾åºŠipicè§£å†³é—®é¢˜</h3><blockquote>
<p><a href="https://www.jianshu.com/p/dbc945b05d55" target="_blank" rel="noopener">https://www.jianshu.com/p/dbc945b05d55</a> PIC </p>
<p><a href="https://sspai.com/post/39965" target="_blank" rel="noopener">https://sspai.com/post/39965</a> å°‘æ•°æ´¾</p>
</blockquote>
<p> ### </p>
<p> <a href="https://hexo.io/zh-cn/docs/front-matter" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/front-matter</a> å­¦ä¹ HexoæŒ‰ç…§è¿™ä¸ªç½‘ç«™é‡Œé¢æœ‰æ•™ç¨‹ å­¦ä¹ ä»»ä½•ä¸œè¥¿éƒ½è¦ä½¿ç”¨å®˜æ–¹æ–‡æ¡£</p>
<p>å…¶ä½™å­¦ä¹ çš„ä¸œè¥¿åœ¨safairæ”¶è—â•éšç¬” hexoé‡Œé¢ çœŸçš„å¥½ç´¯ æ­å»ºè¿™ä¸ªç¯å¢ƒ</p>
<p>æ€»ä¹‹å°±æ˜¯ç…§ç€å®˜ç½‘çš„ä¾‹å­ ç„¶åä½¿ç”¨è¿™ä¸ªæ¨¡ç‰ˆ ç„¶åymlæ–‡ä»¶è¦å†™å…¨ å‘å¤ªå¤šäº† èƒ½å‡ºä¸€æœ¬ä¹¦ å…ˆè¿™æ ·</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fy0ir5f7anj30b20ac74o.jpg" alt="å±å¹•å¿«ç…§ 2018-12-07 ä¸‹åˆ7.18.33"></p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg" alt="2"></p>
<p><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0lzxy1vnj319g0pbnl8.jpg" alt="image-20181209171302461"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/06/Spring Boot/Spring Boot/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è¢æµ·é¹">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Freemana2017">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/06/Spring Boot/Spring Boot/" itemprop="url">SpringBoot é›·ä¸°é˜³</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-06T21:09:34+08:00">
                2018-03-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/06/Spring Boot/Spring Boot/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/03/06/Spring Boot/Spring Boot/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ä¸€ã€Spring-Boot-å…¥é—¨"><a href="#ä¸€ã€Spring-Boot-å…¥é—¨" class="headerlink" title="ä¸€ã€Spring Boot å…¥é—¨"></a><strong>ä¸€ã€</strong>Spring Boot å…¥é—¨</h1><h2 id="1ã€Spring-Boot-ç®€ä»‹"><a href="#1ã€Spring-Boot-ç®€ä»‹" class="headerlink" title="1ã€Spring Boot ç®€ä»‹"></a>1ã€Spring Boot ç®€ä»‹</h2><blockquote>
<p>ç®€åŒ–Springåº”ç”¨å¼€å‘çš„ä¸€ä¸ªæ¡†æ¶ï¼›</p>
<p>æ•´ä¸ªSpringæŠ€æœ¯æ ˆçš„ä¸€ä¸ªå¤§æ•´åˆï¼›</p>
<p>J2EEå¼€å‘çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼›</p>
</blockquote>
<h2 id="2ã€å¾®æœåŠ¡"><a href="#2ã€å¾®æœåŠ¡" class="headerlink" title="2ã€å¾®æœåŠ¡"></a>2ã€å¾®æœåŠ¡</h2><p>2014ï¼Œmartin fowler</p>
<p>å¾®æœåŠ¡ï¼šæ¶æ„é£æ ¼ï¼ˆæœåŠ¡å¾®åŒ–ï¼‰</p>
<p>ä¸€ä¸ªåº”ç”¨åº”è¯¥æ˜¯ä¸€ç»„å°å‹æœåŠ¡ï¼›å¯ä»¥é€šè¿‡HTTPçš„æ–¹å¼è¿›è¡Œäº’é€šï¼›</p>
<p>å•ä½“åº”ç”¨ï¼šALL IN ONE</p>
<p>å¾®æœåŠ¡ï¼šæ¯ä¸€ä¸ªåŠŸèƒ½å…ƒç´ æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªå¯ç‹¬ç«‹æ›¿æ¢å’Œç‹¬ç«‹å‡çº§çš„è½¯ä»¶å•å…ƒï¼›</p>
<p><a href="https://martinfowler.com/articles/microservices.html#MicroservicesAndSoa" target="_blank" rel="noopener">è¯¦ç»†å‚ç…§å¾®æœåŠ¡æ–‡æ¡£</a></p>
<h2 id="3ã€ç¯å¢ƒå‡†å¤‡"><a href="#3ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3ã€ç¯å¢ƒå‡†å¤‡"></a>3ã€ç¯å¢ƒå‡†å¤‡</h2><p><a href="http://www.gulixueyuan.com/" target="_blank" rel="noopener">http://www.gulixueyuan.com/</a> è°·ç²’å­¦é™¢</p>
<p>ç¯å¢ƒçº¦æŸ</p>
<p>â€“jdk1.8ï¼šSpring Boot æ¨èjdk1.7åŠä»¥ä¸Šï¼›java version â€œ1.8.0_112â€</p>
<p>â€“maven3.xï¼šmaven 3.3ä»¥ä¸Šç‰ˆæœ¬ï¼›Apache Maven 3.3.9</p>
<p>â€“IntelliJIDEA2017ï¼šIntelliJ IDEA 2017.2.2 x64ã€STS</p>
<p>â€“SpringBoot 1.5.9.RELEASEï¼š1.5.9ï¼›</p>
<p>ç»Ÿä¸€ç¯å¢ƒï¼›</p>
<h3 id="1ã€MAVENè®¾ç½®ï¼›"><a href="#1ã€MAVENè®¾ç½®ï¼›" class="headerlink" title="1ã€MAVENè®¾ç½®ï¼›"></a>1ã€MAVENè®¾ç½®ï¼›</h3><p>ç»™maven çš„settings.xmlé…ç½®æ–‡ä»¶çš„profilesæ ‡ç­¾æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.8<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2ã€IDEAè®¾ç½®"><a href="#2ã€IDEAè®¾ç½®" class="headerlink" title="2ã€IDEAè®¾ç½®"></a>2ã€IDEAè®¾ç½®</h3><p>æ•´åˆmavenè¿›æ¥ï¼›</p>
<p><img src="images/æœç‹—æˆªå›¾20180129151045.png" alt="ideaè®¾ç½®"></p>
<p><img src="images/æœç‹—æˆªå›¾20180129151112.png" alt="images/"></p>
<h2 id="4ã€Spring-Boot-HelloWorld"><a href="#4ã€Spring-Boot-HelloWorld" class="headerlink" title="4ã€Spring Boot HelloWorld"></a>4ã€Spring Boot HelloWorld</h2><p>ä¸€ä¸ªåŠŸèƒ½ï¼š</p>
<p>æµè§ˆå™¨å‘é€helloè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥å—è¯·æ±‚å¹¶å¤„ç†ï¼Œå“åº”Hello Worldå­—ç¬¦ä¸²ï¼›</p>
<h3 id="1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰"><a href="#1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰" class="headerlink" title="1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰"></a>1ã€åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹ï¼›ï¼ˆjarï¼‰</h3><h3 id="2ã€å¯¼å…¥spring-bootç›¸å…³çš„ä¾èµ–"><a href="#2ã€å¯¼å…¥spring-bootç›¸å…³çš„ä¾èµ–" class="headerlink" title="2ã€å¯¼å…¥spring bootç›¸å…³çš„ä¾èµ–"></a>2ã€å¯¼å…¥spring bootç›¸å…³çš„ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring-Bootåº”ç”¨"><a href="#3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring-Bootåº”ç”¨" class="headerlink" title="3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring Bootåº”ç”¨"></a>3ã€ç¼–å†™ä¸€ä¸ªä¸»ç¨‹åºï¼›å¯åŠ¨Spring Bootåº”ç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@SpringBootApplication</span> æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldMainApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Springåº”ç”¨å¯åŠ¨èµ·æ¥</span></span><br><span class="line">        SpringApplication.run(HelloWorldMainApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service"><a href="#4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service" class="headerlink" title="4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service"></a>4ã€ç¼–å†™ç›¸å…³çš„Controllerã€Service</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello World!"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•"><a href="#5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•" class="headerlink" title="5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•"></a>5ã€è¿è¡Œä¸»ç¨‹åºæµ‹è¯•</h3><h3 id="6ã€ç®€åŒ–éƒ¨ç½²"><a href="#6ã€ç®€åŒ–éƒ¨ç½²" class="headerlink" title="6ã€ç®€åŒ–éƒ¨ç½²"></a>6ã€ç®€åŒ–éƒ¨ç½²</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„jaråŒ…ï¼›--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å°†è¿™ä¸ªåº”ç”¨æ‰“æˆjaråŒ…ï¼Œç›´æ¥ä½¿ç”¨java -jarçš„å‘½ä»¤è¿›è¡Œæ‰§è¡Œï¼›</p>
<h2 id="5ã€Hello-Worldæ¢ç©¶"><a href="#5ã€Hello-Worldæ¢ç©¶" class="headerlink" title="5ã€Hello Worldæ¢ç©¶"></a>5ã€Hello Worldæ¢ç©¶</h2><h3 id="1ã€POMæ–‡ä»¶"><a href="#1ã€POMæ–‡ä»¶" class="headerlink" title="1ã€POMæ–‡ä»¶"></a>1ã€POMæ–‡ä»¶</h3><h4 id="1ã€çˆ¶é¡¹ç›®"><a href="#1ã€çˆ¶é¡¹ç›®" class="headerlink" title="1ã€çˆ¶é¡¹ç›®"></a>1ã€çˆ¶é¡¹ç›®</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">ä»–çš„çˆ¶é¡¹ç›®æ˜¯</span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../../spring-boot-dependencies<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">ä»–æ¥çœŸæ­£ç®¡ç†Spring Bootåº”ç”¨é‡Œé¢çš„æ‰€æœ‰ä¾èµ–ç‰ˆæœ¬ï¼›</span><br></pre></td></tr></table></figure>
<p>Spring Bootçš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼›</p>
<p>ä»¥åæˆ‘ä»¬å¯¼å…¥ä¾èµ–é»˜è®¤æ˜¯ä¸éœ€è¦å†™ç‰ˆæœ¬ï¼›ï¼ˆæ²¡æœ‰åœ¨dependenciesé‡Œé¢ç®¡ç†çš„ä¾èµ–è‡ªç„¶éœ€è¦å£°æ˜ç‰ˆæœ¬å·ï¼‰</p>
<h4 id="2ã€å¯åŠ¨å™¨"><a href="#2ã€å¯åŠ¨å™¨" class="headerlink" title="2ã€å¯åŠ¨å™¨"></a>2ã€å¯åŠ¨å™¨</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>spring-boot-starter</strong>-==web==ï¼š</p>
<p>â€‹    spring-boot-starterï¼šspring-bootåœºæ™¯å¯åŠ¨å™¨ï¼›å¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶ï¼›</p>
<p>Spring Bootå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªçš„startersï¼ˆå¯åŠ¨å™¨ï¼‰ï¼Œåªéœ€è¦åœ¨é¡¹ç›®é‡Œé¢å¼•å…¥è¿™äº›starterç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ã€‚è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆåœºæ™¯çš„å¯åŠ¨å™¨</p>
<h3 id="2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»"><a href="#2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»" class="headerlink" title="2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»"></a>2ã€ä¸»ç¨‹åºç±»ï¼Œä¸»å…¥å£ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@SpringBootApplication</span> æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorldMainApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Springåº”ç”¨å¯åŠ¨èµ·æ¥</span></span><br><span class="line">        SpringApplication.run(HelloWorldMainApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@<strong>SpringBootApplication</strong>:    Spring Bootåº”ç”¨æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±»ï¼ŒSpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„mainæ–¹æ³•æ¥å¯åŠ¨SpringBootåº”ç”¨ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(excludeFilters = &#123;</span><br><span class="line">      <span class="meta">@Filter</span>(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span><br><span class="line">      <span class="meta">@Filter</span>(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication &#123;</span><br></pre></td></tr></table></figure>
<p>@<strong>SpringBootConfiguration</strong>:Spring Bootçš„é…ç½®ç±»ï¼›</p>
<p>â€‹        æ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpring Bootçš„é…ç½®ç±»ï¼›</p>
<p>â€‹        @<strong>Configuration</strong>:é…ç½®ç±»ä¸Šæ¥æ ‡æ³¨è¿™ä¸ªæ³¨è§£ï¼›</p>
<p>â€‹            é…ç½®ç±» â€”â€“  é…ç½®æ–‡ä»¶ï¼›é…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼›@Component</p>
<p>@<strong>EnableAutoConfiguration</strong>ï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼›</p>
<p>â€‹        ä»¥å‰æˆ‘ä»¬éœ€è¦é…ç½®çš„ä¸œè¥¿ï¼ŒSpring Bootå¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®ï¼›@<strong>EnableAutoConfiguration</strong>å‘Šè¯‰SpringBootå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼›è¿™æ ·è‡ªåŠ¨é…ç½®æ‰èƒ½ç”Ÿæ•ˆï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import</span>(EnableAutoConfigurationImportSelector.class)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoConfiguration &#123;</span><br></pre></td></tr></table></figure>
<p>â€‹          @<strong>AutoConfigurationPackage</strong>ï¼šè‡ªåŠ¨é…ç½®åŒ…</p>
<p>â€‹        @<strong>Import</strong>(AutoConfigurationPackages.Registrar.class)ï¼š</p>
<p>â€‹        Springçš„åº•å±‚æ³¨è§£@Importï¼Œç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ï¼›å¯¼å…¥çš„ç»„ä»¶ç”±AutoConfigurationPackages.Registrar.classï¼›</p>
<p>==å°†ä¸»é…ç½®ç±»ï¼ˆ@SpringBootApplicationæ ‡æ³¨çš„ç±»ï¼‰çš„æ‰€åœ¨åŒ…åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶æ‰«æåˆ°Springå®¹å™¨ï¼›==</p>
<p>â€‹    @<strong>Import</strong>(EnableAutoConfigurationImportSelector.class)ï¼›</p>
<p>â€‹        ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ï¼Ÿ</p>
<p>â€‹        <strong>EnableAutoConfigurationImportSelector</strong>ï¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨ï¼›</p>
<p>â€‹        å°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›ï¼›è¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼›</p>
<p>â€‹        ä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆxxxAutoConfigurationï¼‰ï¼›å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶ï¼›        <img src="images/æœç‹—æˆªå›¾20180129224104.png" alt="è‡ªåŠ¨é…ç½®ç±»"></p>
<p>æœ‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œå…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶ç­‰çš„å·¥ä½œï¼›</p>
<p>â€‹        SpringFactoriesLoader.loadFactoryNames(EnableAutoConfiguration.class,classLoader)ï¼›</p>
<p>==Spring Bootåœ¨å¯åŠ¨çš„æ—¶å€™ä»ç±»è·¯å¾„ä¸‹çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼ï¼Œå°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œï¼›==ä»¥å‰æˆ‘ä»¬éœ€è¦è‡ªå·±é…ç½®çš„ä¸œè¥¿ï¼Œè‡ªåŠ¨é…ç½®ç±»éƒ½å¸®æˆ‘ä»¬ï¼›</p>
<p>J2EEçš„æ•´ä½“æ•´åˆè§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨spring-boot-autoconfigure-1.5.9.RELEASE.jarï¼›</p>
<p>â€‹        </p>
<p>==Springæ³¨è§£ç‰ˆï¼ˆè°·ç²’å­¦é™¢ï¼‰==</p>
<h2 id="6ã€ä½¿ç”¨Spring-Initializerå¿«é€Ÿåˆ›å»ºSpring-Booté¡¹ç›®"><a href="#6ã€ä½¿ç”¨Spring-Initializerå¿«é€Ÿåˆ›å»ºSpring-Booté¡¹ç›®" class="headerlink" title="6ã€ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®"></a>6ã€ä½¿ç”¨Spring Initializerå¿«é€Ÿåˆ›å»ºSpring Booté¡¹ç›®</h2><h3 id="1ã€IDEAï¼šä½¿ç”¨-Spring-Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®"><a href="#1ã€IDEAï¼šä½¿ç”¨-Spring-Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®" class="headerlink" title="1ã€IDEAï¼šä½¿ç”¨ Spring Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®"></a>1ã€IDEAï¼šä½¿ç”¨ Spring Initializerå¿«é€Ÿåˆ›å»ºé¡¹ç›®</h3><p>IDEéƒ½æ”¯æŒä½¿ç”¨Springçš„é¡¹ç›®åˆ›å»ºå‘å¯¼å¿«é€Ÿåˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼›</p>
<p>é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼›å‘å¯¼ä¼šè”ç½‘åˆ›å»ºSpring Booté¡¹ç›®ï¼›</p>
<p>é»˜è®¤ç”Ÿæˆçš„Spring Booté¡¹ç›®ï¼›</p>
<ul>
<li>ä¸»ç¨‹åºå·²ç»ç”Ÿæˆå¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æˆ‘ä»¬è‡ªå·±çš„é€»è¾‘</li>
<li>resourcesæ–‡ä»¶å¤¹ä¸­ç›®å½•ç»“æ„<ul>
<li>staticï¼šä¿å­˜æ‰€æœ‰çš„é™æ€èµ„æºï¼› js css  imagesï¼›</li>
<li>templatesï¼šä¿å­˜æ‰€æœ‰çš„æ¨¡æ¿é¡µé¢ï¼›ï¼ˆSpring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒJSPé¡µé¢ï¼‰ï¼›å¯ä»¥ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼ˆfreemarkerã€thymeleafï¼‰ï¼›</li>
<li>application.propertiesï¼šSpring Bootåº”ç”¨çš„é…ç½®æ–‡ä»¶ï¼›å¯ä»¥ä¿®æ”¹ä¸€äº›é»˜è®¤è®¾ç½®ï¼›</li>
</ul>
</li>
</ul>
<h3 id="2ã€STSä½¿ç”¨-Spring-Starter-Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®"><a href="#2ã€STSä½¿ç”¨-Spring-Starter-Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®" class="headerlink" title="2ã€STSä½¿ç”¨ Spring Starter Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®"></a>2ã€STSä½¿ç”¨ Spring Starter Projectå¿«é€Ÿåˆ›å»ºé¡¹ç›®</h3><hr>
<h1 id="äºŒã€é…ç½®æ–‡ä»¶"><a href="#äºŒã€é…ç½®æ–‡ä»¶" class="headerlink" title="äºŒã€é…ç½®æ–‡ä»¶"></a>äºŒã€é…ç½®æ–‡ä»¶</h1><h2 id="1ã€é…ç½®æ–‡ä»¶"><a href="#1ã€é…ç½®æ–‡ä»¶" class="headerlink" title="1ã€é…ç½®æ–‡ä»¶"></a>1ã€é…ç½®æ–‡ä»¶</h2><p>SpringBootä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶åæ˜¯å›ºå®šçš„ï¼›</p>
<p>â€¢application.properties</p>
<p>â€¢application.yml</p>
<p>é…ç½®æ–‡ä»¶çš„ä½œç”¨ï¼šä¿®æ”¹SpringBootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼›SpringBootåœ¨åº•å±‚éƒ½ç»™æˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½ï¼›</p>
<p>YAMLï¼ˆYAML Ainâ€™t Markup Languageï¼‰</p>
<p>â€‹    YAML  A Markup Languageï¼šæ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€</p>
<p>â€‹    YAML   isnâ€™t Markup Languageï¼šä¸æ˜¯ä¸€ä¸ªæ ‡è®°è¯­è¨€ï¼›</p>
<p>æ ‡è®°è¯­è¨€ï¼š</p>
<p>â€‹    ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼›å¤§å¤šéƒ½ä½¿ç”¨çš„æ˜¯  <strong>xxxx.xml</strong>æ–‡ä»¶ï¼›</p>
<p>â€‹    YAMLï¼š<strong>ä»¥æ•°æ®ä¸ºä¸­å¿ƒ</strong>ï¼Œæ¯”jsonã€xmlç­‰æ›´é€‚åˆåšé…ç½®æ–‡ä»¶ï¼›</p>
<p>â€‹    YAMLï¼šé…ç½®ä¾‹å­</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8081</span></span><br></pre></td></tr></table></figure>
<p>â€‹    XMLï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">port</span>&gt;</span>8081<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2ã€YAMLè¯­æ³•ï¼š"><a href="#2ã€YAMLè¯­æ³•ï¼š" class="headerlink" title="2ã€YAMLè¯­æ³•ï¼š"></a>2ã€YAMLè¯­æ³•ï¼š</h2><h3 id="1ã€åŸºæœ¬è¯­æ³•"><a href="#1ã€åŸºæœ¬è¯­æ³•" class="headerlink" title="1ã€åŸºæœ¬è¯­æ³•"></a>1ã€åŸºæœ¬è¯­æ³•</h3><p>k:(ç©ºæ ¼)vï¼šè¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹ï¼ˆç©ºæ ¼å¿…é¡»æœ‰ï¼‰ï¼›</p>
<p>ä»¥<strong>ç©ºæ ¼</strong>çš„ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼›åªè¦æ˜¯å·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªå±‚çº§çš„</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">    port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">    path:</span> <span class="string">/hello</span></span><br></pre></td></tr></table></figure>
<p>å±æ€§å’Œå€¼ä¹Ÿæ˜¯å¤§å°å†™æ•æ„Ÿï¼›</p>
<h3 id="2ã€å€¼çš„å†™æ³•"><a href="#2ã€å€¼çš„å†™æ³•" class="headerlink" title="2ã€å€¼çš„å†™æ³•"></a>2ã€å€¼çš„å†™æ³•</h3><h4 id="å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰"><a href="#å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰" class="headerlink" title="å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰"></a>å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰</h4><p>â€‹    k: vï¼šå­—é¢ç›´æ¥æ¥å†™ï¼›</p>
<p>â€‹        å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸Šå•å¼•å·æˆ–è€…åŒå¼•å·ï¼›</p>
<p>â€‹        â€œâ€ï¼šåŒå¼•å·ï¼›ä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼›ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€</p>
<p>â€‹                name:   â€œzhangsan \n lisiâ€ï¼šè¾“å‡ºï¼›zhangsan æ¢è¡Œ  lisi</p>
<p>â€‹        â€˜â€™ï¼šå•å¼•å·ï¼›ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®</p>
<p>â€‹                name:   â€˜zhangsan \n lisiâ€™ï¼šè¾“å‡ºï¼›zhangsan \n  lisi</p>
<h4 id="å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š"><a href="#å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š" class="headerlink" title="å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š"></a>å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ï¼š</h4><p>â€‹    k: vï¼šåœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼çš„å…³ç³»ï¼›æ³¨æ„ç¼©è¿›</p>
<p>â€‹        å¯¹è±¡è¿˜æ˜¯k: vçš„æ–¹å¼</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">friends:</span></span><br><span class="line">		<span class="attr">lastName:</span> <span class="string">zhangsan</span></span><br><span class="line">		<span class="attr">age:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>
<p>è¡Œå†…å†™æ³•ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">friends:</span> <span class="string">&#123;lastName:</span> <span class="string">zhangsan,age:</span> <span class="number">18</span><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š"><a href="#æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š" class="headerlink" title="æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š"></a>æ•°ç»„ï¼ˆListã€Setï¼‰ï¼š</h4><p>ç”¨- å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">cat</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">dog</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">pig</span></span><br></pre></td></tr></table></figure>
<p>è¡Œå†…å†™æ³•</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pets:</span> <span class="string">[cat,dog,pig]</span></span><br></pre></td></tr></table></figure>
<h2 id="3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥"><a href="#3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥" class="headerlink" title="3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥"></a>3ã€é…ç½®æ–‡ä»¶å€¼æ³¨å…¥</h2><p>é…ç½®æ–‡ä»¶</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line"><span class="attr">    lastName:</span> <span class="string">hello</span></span><br><span class="line"><span class="attr">    age:</span> <span class="number">18</span></span><br><span class="line"><span class="attr">    boss:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    birth:</span> <span class="number">2017</span><span class="string">/12/12</span></span><br><span class="line"><span class="attr">    maps:</span> <span class="string">&#123;k1:</span> <span class="string">v1,k2:</span> <span class="number">12</span><span class="string">&#125;</span></span><br><span class="line"><span class="attr">    lists:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">lisi</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">zhaoliu</span></span><br><span class="line"><span class="attr">    dog:</span></span><br><span class="line"><span class="attr">      name:</span> <span class="string">å°ç‹—</span></span><br><span class="line"><span class="attr">      age:</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>javaBeanï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ConfigurationProperties</span>ï¼šå‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®šï¼›</span></span><br><span class="line"><span class="comment"> *      prefix = "person"ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½å®¹å™¨æä¾›çš„<span class="doctag">@ConfigurationProperties</span>åŠŸèƒ½ï¼›</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œä»¥åç¼–å†™é…ç½®å°±æœ‰æç¤ºäº†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤º--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç "><a href="#1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç " class="headerlink" title="1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç "></a>1ã€propertiesé…ç½®æ–‡ä»¶åœ¨ideaä¸­é»˜è®¤utf-8å¯èƒ½ä¼šä¹±ç </h4><p>è°ƒæ•´</p>
<p><img src="images/æœç‹—æˆªå›¾20180130161620.png" alt="ideaé…ç½®ä¹±ç "></p>
<h4 id="2ã€-Valueè·å–å€¼å’Œ-ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ"><a href="#2ã€-Valueè·å–å€¼å’Œ-ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ" class="headerlink" title="2ã€@Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ"></a>2ã€@Valueè·å–å€¼å’Œ@ConfigurationPropertiesè·å–å€¼æ¯”è¾ƒ</h4><table>
<thead>
<tr>
<th></th>
<th>@ConfigurationProperties</th>
<th>@Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŠŸèƒ½</td>
<td>æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§</td>
<td>ä¸€ä¸ªä¸ªæŒ‡å®š</td>
</tr>
<tr>
<td>æ¾æ•£ç»‘å®šï¼ˆæ¾æ•£è¯­æ³•ï¼‰</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>SpEL</td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒ</td>
</tr>
<tr>
<td>JSR303æ•°æ®æ ¡éªŒ</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>å¤æ‚ç±»å‹å°è£…</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
</tbody>
</table>
<p>é…ç½®æ–‡ä»¶ymlè¿˜æ˜¯propertiesä»–ä»¬éƒ½èƒ½è·å–åˆ°å€¼ï¼›</p>
<p>å¦‚æœè¯´ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨æŸä¸ªä¸šåŠ¡é€»è¾‘ä¸­éœ€è¦è·å–ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„æŸé¡¹å€¼ï¼Œä½¿ç”¨@Valueï¼›</p>
<p>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªjavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨@ConfigurationPropertiesï¼›</p>
<h4 id="3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ"><a href="#3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ" class="headerlink" title="3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ"></a>3ã€é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;bean class="Person"&gt;</span></span><br><span class="line"><span class="comment">     *      &lt;property name="lastName" value="å­—é¢é‡/$&#123;key&#125;ä»ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼/#&#123;SpEL&#125;"&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">     * &lt;bean/&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//lastNameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼</span></span><br><span class="line">    <span class="meta">@Email</span></span><br><span class="line">    <span class="comment">//@Value("$&#123;person.last-name&#125;")</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="comment">//@Value("#&#123;11*2&#125;")</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">//@Value("true")</span></span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br></pre></td></tr></table></figure>
<h4 id="4ã€-PropertySource-amp-ImportResource-amp-Bean"><a href="#4ã€-PropertySource-amp-ImportResource-amp-Bean" class="headerlink" title="4ã€@PropertySource&amp;@ImportResource&amp;@Bean"></a>4ã€@PropertySource&amp;@ImportResource&amp;@Bean</h4><p>@<strong>PropertySource</strong>ï¼šåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ConfigurationProperties</span>ï¼šå‘Šè¯‰SpringBootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®šï¼›</span></span><br><span class="line"><span class="comment"> *      prefix = "person"ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½å®¹å™¨æä¾›çš„<span class="doctag">@ConfigurationProperties</span>åŠŸèƒ½ï¼›</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@ConfigurationProperties</span>(prefix = "person")é»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼ï¼›</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PropertySource</span>(value = &#123;<span class="string">"classpath:person.properties"</span>&#125;)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)</span><br><span class="line"><span class="comment">//@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;bean class="Person"&gt;</span></span><br><span class="line"><span class="comment">     *      &lt;property name="lastName" value="å­—é¢é‡/$&#123;key&#125;ä»ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼/#&#123;SpEL&#125;"&gt;&lt;/property&gt;</span></span><br><span class="line"><span class="comment">     * &lt;bean/&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">//lastNameå¿…é¡»æ˜¯é‚®ç®±æ ¼å¼</span></span><br><span class="line">   <span class="comment">// @Email</span></span><br><span class="line">    <span class="comment">//@Value("$&#123;person.last-name&#125;")</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="comment">//@Value("#&#123;11*2&#125;")</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">//@Value("true")</span></span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br></pre></td></tr></table></figure>
<p>@<strong>ImportResource</strong>ï¼šå¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶é‡Œé¢çš„å†…å®¹ç”Ÿæ•ˆï¼›</p>
<p>Spring Booté‡Œé¢æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«ï¼›</p>
<p>æƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŠ è½½è¿›æ¥ï¼›@<strong>ImportResource</strong>æ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource</span>(locations = &#123;<span class="string">"classpath:beans.xml"</span>&#125;)</span><br><span class="line">å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶è®©å…¶ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure>
<p>ä¸æ¥ç¼–å†™Springçš„é…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"helloService"</span> <span class="attr">class</span>=<span class="string">"com.atguigu.springboot.service.HelloService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>SpringBootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼ï¼›æ¨èä½¿ç”¨å…¨æ³¨è§£çš„æ–¹å¼</p>
<p>1ã€é…ç½®ç±»<strong>@Configuration</strong>â€”â€”&gt;Springé…ç½®æ–‡ä»¶</p>
<p>2ã€ä½¿ç”¨<strong>@Bean</strong>ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Configuration</span>ï¼šæŒ‡æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼›å°±æ˜¯æ¥æ›¿ä»£ä¹‹å‰çš„Springé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * åœ¨é…ç½®æ–‡ä»¶ä¸­ç”¨&lt;bean&gt;&lt;bean/&gt;æ ‡ç­¾æ·»åŠ ç»„ä»¶</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAppConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°†æ–¹æ³•çš„è¿”å›å€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼›å®¹å™¨ä¸­è¿™ä¸ªç»„ä»¶é»˜è®¤çš„idå°±æ˜¯æ–¹æ³•å</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HelloService <span class="title">helloService02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"é…ç½®ç±»@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶äº†..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> HelloService();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>##4ã€é…ç½®æ–‡ä»¶å ä½ç¬¦</p>
<h3 id="1ã€éšæœºæ•°"><a href="#1ã€éšæœºæ•°" class="headerlink" title="1ã€éšæœºæ•°"></a>1ã€éšæœºæ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&#123;random.value&#125;ã€$&#123;random.<span class="keyword">int</span>&#125;ã€$&#123;random.<span class="keyword">long</span>&#125;</span><br><span class="line">$&#123;random.<span class="keyword">int</span>(<span class="number">10</span>)&#125;ã€$&#123;random.<span class="keyword">int</span>[<span class="number">1024</span>,<span class="number">65536</span>]&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨-æŒ‡å®šé»˜è®¤å€¼"><a href="#2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨-æŒ‡å®šé»˜è®¤å€¼" class="headerlink" title="2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨:æŒ‡å®šé»˜è®¤å€¼"></a>2ã€å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ˜¯ç”¨:æŒ‡å®šé»˜è®¤å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">person.last-name=å¼ ä¸‰$&#123;random.uuid&#125;</span><br><span class="line">person.age=$&#123;random.int&#125;</span><br><span class="line">person.birth=2017/12/15</span><br><span class="line">person.boss=false</span><br><span class="line">person.maps.k1=v1</span><br><span class="line">person.maps.k2=14</span><br><span class="line">person.lists=a,b,c</span><br><span class="line">person.dog.name=$&#123;person.hello:hello&#125;_dog</span><br><span class="line">person.dog.age=15</span><br></pre></td></tr></table></figure>
<h2 id="5ã€Profile"><a href="#5ã€Profile" class="headerlink" title="5ã€Profile"></a>5ã€Profile</h2><h3 id="1ã€å¤šProfileæ–‡ä»¶"><a href="#1ã€å¤šProfileæ–‡ä»¶" class="headerlink" title="1ã€å¤šProfileæ–‡ä»¶"></a>1ã€å¤šProfileæ–‡ä»¶</h3><p>æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™çš„æ—¶å€™ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯   application-{profile}.properties/yml</p>
<p>é»˜è®¤ä½¿ç”¨application.propertiesçš„é…ç½®ï¼›</p>
<h3 id="2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼"><a href="#2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼" class="headerlink" title="2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼"></a>2ã€ymlæ”¯æŒå¤šæ–‡æ¡£å—æ–¹å¼</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span></span><br><span class="line"><span class="attr">    active:</span> <span class="string">prod</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">prod</span>  <span class="comment">#æŒ‡å®šå±äºå“ªä¸ªç¯å¢ƒ</span></span><br></pre></td></tr></table></figure>
<h3 id="3ã€æ¿€æ´»æŒ‡å®šprofile"><a href="#3ã€æ¿€æ´»æŒ‡å®šprofile" class="headerlink" title="3ã€æ¿€æ´»æŒ‡å®šprofile"></a>3ã€æ¿€æ´»æŒ‡å®šprofile</h3><p>â€‹    1ã€åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š  spring.profiles.active=dev</p>
<p>â€‹    2ã€å‘½ä»¤è¡Œï¼š</p>
<p>â€‹        java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar â€“spring.profiles.active=devï¼›</p>
<p>â€‹        å¯ä»¥ç›´æ¥åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œé…ç½®ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°</p>
<p>â€‹    3ã€è™šæ‹Ÿæœºå‚æ•°ï¼›</p>
<p>â€‹        -Dspring.profiles.active=dev</p>
<h2 id="6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"><a href="#6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®" class="headerlink" title="6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®"></a>6ã€é…ç½®æ–‡ä»¶åŠ è½½ä½ç½®</h2><p>springboot å¯åŠ¨ä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.propertiesæˆ–è€…application.ymlæ–‡ä»¶ä½œä¸ºSpring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶</p>
<p>â€“file:./config/</p>
<p>â€“file:./</p>
<p>â€“classpath:/config/</p>
<p>â€“classpath:/</p>
<p>ä¼˜å…ˆçº§ç”±é«˜åˆ°åº•ï¼Œé«˜ä¼˜å…ˆçº§çš„é…ç½®ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼›</p>
<p>SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼›<strong>äº’è¡¥é…ç½®</strong>ï¼›</p>
<p>==æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶ä½ç½®==</p>
<p><strong>é¡¹ç›®æ‰“åŒ…å¥½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›æŒ‡å®šé…ç½®æ–‡ä»¶å’Œé»˜è®¤åŠ è½½çš„è¿™äº›é…ç½®æ–‡ä»¶å…±åŒèµ·ä½œç”¨å½¢æˆäº’è¡¥é…ç½®ï¼›</strong></p>
<p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar â€“spring.config.location=G:/application.properties</p>
<h2 id="7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº"><a href="#7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº" class="headerlink" title="7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº"></a>7ã€å¤–éƒ¨é…ç½®åŠ è½½é¡ºåº</h2><p><strong>==SpringBootä¹Ÿå¯ä»¥ä»ä»¥ä¸‹ä½ç½®åŠ è½½é…ç½®ï¼› ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼›é«˜ä¼˜å…ˆçº§çš„é…ç½®è¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼Œæ‰€æœ‰çš„é…ç½®ä¼šå½¢æˆäº’è¡¥é…ç½®==</strong></p>
<p><strong>1.å‘½ä»¤è¡Œå‚æ•°</strong></p>
<p>æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè¿›è¡ŒæŒ‡å®š</p>
<p>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar â€“server.port=8087  â€“server.context-path=/abc</p>
<p>å¤šä¸ªé…ç½®ç”¨ç©ºæ ¼åˆ†å¼€ï¼› â€“é…ç½®é¡¹=å€¼</p>
<p>2.æ¥è‡ªjava:comp/envçš„JNDIå±æ€§</p>
<p>3.Javaç³»ç»Ÿå±æ€§ï¼ˆSystem.getProperties()ï¼‰</p>
<p>4.æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡</p>
<p>5.RandomValuePropertySourceé…ç½®çš„random.*å±æ€§å€¼</p>
<p>==<strong>ç”±jaråŒ…å¤–å‘jaråŒ…å†…è¿›è¡Œå¯»æ‰¾ï¼›</strong>==</p>
<p>==<strong>ä¼˜å…ˆåŠ è½½å¸¦profile</strong>==</p>
<p><strong>6.jaråŒ…å¤–éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></p>
<p><strong>7.jaråŒ…å†…éƒ¨çš„application-{profile}.propertiesæˆ–application.yml(å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></p>
<p>==<strong>å†æ¥åŠ è½½ä¸å¸¦profile</strong>==</p>
<p><strong>8.jaråŒ…å¤–éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></p>
<p><strong>9.jaråŒ…å†…éƒ¨çš„application.propertiesæˆ–application.yml(ä¸å¸¦spring.profile)é…ç½®æ–‡ä»¶</strong></p>
<p>10.@Configurationæ³¨è§£ç±»ä¸Šçš„@PropertySource</p>
<p>11.é€šè¿‡SpringApplication.setDefaultPropertiesæŒ‡å®šçš„é»˜è®¤å±æ€§</p>
<p>æ‰€æœ‰æ”¯æŒçš„é…ç½®åŠ è½½æ¥æºï¼›</p>
<p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#boot-features-external-config" target="_blank" rel="noopener">å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></p>
<h2 id="8ã€è‡ªåŠ¨é…ç½®åŸç†"><a href="#8ã€è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="8ã€è‡ªåŠ¨é…ç½®åŸç†"></a>8ã€è‡ªåŠ¨é…ç½®åŸç†</h2><p>é…ç½®æ–‡ä»¶åˆ°åº•èƒ½å†™ä»€ä¹ˆï¼Ÿæ€ä¹ˆå†™ï¼Ÿè‡ªåŠ¨é…ç½®åŸç†ï¼›</p>
<p><a href="https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/reference/htmlsingle/#common-application-properties" target="_blank" rel="noopener">é…ç½®æ–‡ä»¶èƒ½é…ç½®çš„å±æ€§å‚ç…§</a></p>
<h3 id="1ã€è‡ªåŠ¨é…ç½®åŸç†ï¼š"><a href="#1ã€è‡ªåŠ¨é…ç½®åŸç†ï¼š" class="headerlink" title="1ã€è‡ªåŠ¨é…ç½®åŸç†ï¼š"></a>1ã€<strong>è‡ªåŠ¨é…ç½®åŸç†ï¼š</strong></h3><p>1ï¼‰ã€SpringBootå¯åŠ¨çš„æ—¶å€™åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½ ==@EnableAutoConfiguration==</p>
<p><strong>2ï¼‰ã€@EnableAutoConfiguration ä½œç”¨ï¼š</strong></p>
<ul>
<li>åˆ©ç”¨EnableAutoConfigurationImportSelectorç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶ï¼Ÿ</li>
</ul>
<ul>
<li><p>å¯ä»¥æŸ¥çœ‹selectImports()æ–¹æ³•çš„å†…å®¹ï¼›</p>
</li>
<li><p>List<string> configurations = getCandidateConfigurations(annotationMetadata,      attributes);è·å–å€™é€‰çš„é…ç½®</string></p>
<ul>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SpringFactoriesLoader.loadFactoryNames()</span><br><span class="line">æ‰«ææ‰€æœ‰jaråŒ…ç±»è·¯å¾„ä¸‹  META-INF/spring.factories</span><br><span class="line">æŠŠæ‰«æåˆ°çš„è¿™äº›æ–‡ä»¶çš„å†…å®¹åŒ…è£…æˆpropertieså¯¹è±¡</span><br><span class="line">ä»propertiesä¸­è·å–åˆ°EnableAutoConfiguration.classç±»ï¼ˆç±»åï¼‰å¯¹åº”çš„å€¼ï¼Œç„¶åæŠŠä»–ä»¬æ·»åŠ åœ¨å®¹å™¨ä¸­</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><strong>==å°† ç±»è·¯å¾„ä¸‹  META-INF/spring.factories é‡Œé¢é…ç½®çš„æ‰€æœ‰EnableAutoConfigurationçš„å€¼åŠ å…¥åˆ°äº†å®¹å™¨ä¸­ï¼›==</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"># Auto Configure</span><br><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mobile.DeviceResolverAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mobile.DeviceDelegatingViewResolverAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mobile.SitePreferenceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.reactor.ReactorAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.SecurityFilterAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.FallbackWebSecurityAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.security.oauth2.OAuth2AutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.social.SocialWebAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.social.FacebookAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.social.LinkedInAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.social.TwitterAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.WebClientAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ªè¿™æ ·çš„  xxxAutoConfigurationç±»éƒ½æ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼›ç”¨ä»–ä»¬æ¥åšè‡ªåŠ¨é…ç½®ï¼›</p>
<p>3ï¼‰ã€æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼›</p>
<p>4ï¼‰ã€ä»¥<strong>HttpEncodingAutoConfigurationï¼ˆHttpç¼–ç è‡ªåŠ¨é…ç½®ï¼‰</strong>ä¸ºä¾‹è§£é‡Šè‡ªåŠ¨é…ç½®åŸç†ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>   <span class="comment">//è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œä»¥å‰ç¼–å†™çš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(HttpEncodingProperties.class)  <span class="comment">//å¯åŠ¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›å°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpEncodingPropertiesç»‘å®šèµ·æ¥ï¼›å¹¶æŠŠHttpEncodingPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span> <span class="comment">//Springåº•å±‚@Conditionalæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆï¼‰ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼›    åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œå½“å‰é…ç½®ç±»ç”Ÿæ•ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(CharacterEncodingFilter.class)  <span class="comment">//åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±»CharacterEncodingFilterï¼›SpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(prefix = <span class="string">"spring.http.encoding"</span>, value = <span class="string">"enabled"</span>, matchIfMissing = <span class="keyword">true</span>)  <span class="comment">//åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®  spring.http.encoding.enabledï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„</span></span><br><span class="line"><span class="comment">//å³ä½¿æˆ‘ä»¬é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®pring.http.encoding.enabled=trueï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ï¼›</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingAutoConfiguration</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">//ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº†</span></span><br><span class="line">  	<span class="keyword">private</span> <span class="keyword">final</span> HttpEncodingProperties properties;</span><br><span class="line">  </span><br><span class="line">   <span class="comment">//åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‹¿</span></span><br><span class="line">  	<span class="function"><span class="keyword">public</span> <span class="title">HttpEncodingAutoConfiguration</span><span class="params">(HttpEncodingProperties properties)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.properties = properties;</span><br><span class="line">	&#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Bean</span>   <span class="comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–</span></span><br><span class="line">	<span class="meta">@ConditionalOnMissingBean</span>(CharacterEncodingFilter.class) <span class="comment">//åˆ¤æ–­å®¹å™¨æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Ÿ</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> CharacterEncodingFilter <span class="title">characterEncodingFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		CharacterEncodingFilter filter = <span class="keyword">new</span> OrderedCharacterEncodingFilter();</span><br><span class="line">		filter.setEncoding(<span class="keyword">this</span>.properties.getCharset().name());</span><br><span class="line">		filter.setForceRequestEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.REQUEST));</span><br><span class="line">		filter.setForceResponseEncoding(<span class="keyword">this</span>.properties.shouldForce(Type.RESPONSE));</span><br><span class="line">		<span class="keyword">return</span> filter;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ</p>
<p>ä¸€ä½†è¿™ä¸ªé…ç½®ç±»ç”Ÿæ•ˆï¼›è¿™ä¸ªé…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼›è¿™äº›ç»„ä»¶çš„å±æ€§æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ï¼›</p>
<p>5ï¼‰ã€æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§éƒ½æ˜¯åœ¨xxxxPropertiesç±»ä¸­å°è£…è€…â€˜ï¼›é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„è¿™ä¸ªå±æ€§ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.http.encoding"</span>)  <span class="comment">//ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpEncodingProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_CHARSET = Charset.forName(<span class="string">"UTF-8"</span>);</span><br></pre></td></tr></table></figure>
<p><strong>ç²¾é«“ï¼š</strong></p>
<p>â€‹    <strong>1ï¼‰ã€SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»</strong></p>
<p>â€‹    <strong>2ï¼‰ã€æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»ï¼›</strong></p>
<p>â€‹    <strong>3ï¼‰ã€æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼›ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶æœ‰ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¥é…ç½®äº†ï¼‰</strong></p>
<p>â€‹    <strong>4ï¼‰ã€ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼ï¼›</strong></p>
<p>xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›</p>
<p>ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p>
<p>xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼›</p>
<h3 id="2ã€ç»†èŠ‚"><a href="#2ã€ç»†èŠ‚" class="headerlink" title="2ã€ç»†èŠ‚"></a>2ã€ç»†èŠ‚</h3><h4 id="1ã€-Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„-Conditionalä½œç”¨ï¼‰"><a href="#1ã€-Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„-Conditionalä½œç”¨ï¼‰" class="headerlink" title="1ã€@Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰"></a>1ã€@Conditionalæ´¾ç”Ÿæ³¨è§£ï¼ˆSpringæ³¨è§£ç‰ˆåŸç”Ÿçš„@Conditionalä½œç”¨ï¼‰</h4><p>ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®é…é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆï¼›</p>
<table>
<thead>
<tr>
<th>@Conditionalæ‰©å±•æ³¨è§£</th>
<th>ä½œç”¨ï¼ˆåˆ¤æ–­æ˜¯å¦æ»¡è¶³å½“å‰æŒ‡å®šæ¡ä»¶ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>@ConditionalOnJava</td>
<td>ç³»ç»Ÿçš„javaç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚</td>
</tr>
<tr>
<td>@ConditionalOnBean</td>
<td>å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®šBeanï¼›</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBeanï¼›</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>æ»¡è¶³SpELè¡¨è¾¾å¼æŒ‡å®š</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>ç³»ç»Ÿä¸­æœ‰æŒ‡å®šçš„ç±»</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>ç³»ç»Ÿä¸­æ²¡æœ‰æŒ‡å®šçš„ç±»</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªæŒ‡å®šçš„Beanï¼Œæˆ–è€…è¿™ä¸ªBeanæ˜¯é¦–é€‰Bean</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>ç³»ç»Ÿä¸­æŒ‡å®šçš„å±æ€§æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŒ‡å®šèµ„æºæ–‡ä»¶</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>å½“å‰æ˜¯webç¯å¢ƒ</td>
</tr>
<tr>
<td>@ConditionalOnNotWebApplication</td>
<td>å½“å‰ä¸æ˜¯webç¯å¢ƒ</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>JNDIå­˜åœ¨æŒ‡å®šé¡¹</td>
</tr>
</tbody>
</table>
<p><strong>è‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆï¼›</strong></p>
<p>æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</p>
<p><strong>==æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯ç”¨  debug=trueå±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Š==</strong>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">=========================</span><br><span class="line">AUTO-CONFIGURATION REPORT</span><br><span class="line">=========================</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Positive matches:ï¼ˆè‡ªåŠ¨é…ç½®ç±»å¯ç”¨çš„ï¼‰</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">   DispatcherServletAutoConfiguration matched:</span><br><span class="line">      - <span class="meta">@ConditionalOnClass</span> found required <span class="class"><span class="keyword">class</span> '<span class="title">org</span>.<span class="title">springframework</span>.<span class="title">web</span>.<span class="title">servlet</span>.<span class="title">DispatcherServlet</span>'</span>; <span class="meta">@ConditionalOnMissingClass</span> <span class="function">did not find unwanted <span class="title">class</span> <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function">      - @<span class="title">ConditionalOnWebApplication</span> <span class="params">(required)</span> found <span class="title">StandardServletEnvironment</span> <span class="params">(OnWebApplicationCondition)</span></span></span><br><span class="line"><span class="function">        </span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">Negative matches:ï¼ˆæ²¡æœ‰å¯åŠ¨ï¼Œæ²¡æœ‰åŒ¹é…æˆåŠŸçš„è‡ªåŠ¨é…ç½®ç±»ï¼‰</span></span><br><span class="line"><span class="function">-----------------</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   ActiveMQAutoConfiguration:</span></span><br><span class="line"><span class="function">      Did not match:</span></span><br><span class="line"><span class="function">         - @ConditionalOnClass did not find required classes 'javax.jms.ConnectionFactory', 'org.apache.activemq.ActiveMQConnectionFactory' <span class="params">(OnClassCondition)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">   AopAutoConfiguration:</span></span><br><span class="line"><span class="function">      Did not match:</span></span><br><span class="line"><span class="function">         - @ConditionalOnClass did not find required classes 'org.aspectj.lang.annotation.Aspect', 'org.aspectj.lang.reflect.Advice' <span class="params">(OnClassCondition)</span></span></span><br></pre></td></tr></table></figure>
<h1 id="ä¸‰ã€æ—¥å¿—"><a href="#ä¸‰ã€æ—¥å¿—" class="headerlink" title="ä¸‰ã€æ—¥å¿—"></a>ä¸‰ã€æ—¥å¿—</h1><h2 id="1ã€æ—¥å¿—æ¡†æ¶"><a href="#1ã€æ—¥å¿—æ¡†æ¶" class="headerlink" title="1ã€æ—¥å¿—æ¡†æ¶"></a>1ã€æ—¥å¿—æ¡†æ¶</h2><p> å°å¼ ï¼›å¼€å‘ä¸€ä¸ªå¤§å‹ç³»ç»Ÿï¼›</p>
<p>â€‹        1ã€System.out.println(â€œâ€)ï¼›å°†å…³é”®æ•°æ®æ‰“å°åœ¨æ§åˆ¶å°ï¼›å»æ‰ï¼Ÿå†™åœ¨ä¸€ä¸ªæ–‡ä»¶ï¼Ÿ</p>
<p>â€‹        2ã€æ¡†æ¶æ¥è®°å½•ç³»ç»Ÿçš„ä¸€äº›è¿è¡Œæ—¶ä¿¡æ¯ï¼›æ—¥å¿—æ¡†æ¶ ï¼›  zhanglogging.jarï¼›</p>
<p>â€‹        3ã€é«˜å¤§ä¸Šçš„å‡ ä¸ªåŠŸèƒ½ï¼Ÿå¼‚æ­¥æ¨¡å¼ï¼Ÿè‡ªåŠ¨å½’æ¡£ï¼Ÿxxxxï¼Ÿ  zhanglogging-good.jarï¼Ÿ</p>
<p>â€‹        4ã€å°†ä»¥å‰æ¡†æ¶å¸ä¸‹æ¥ï¼Ÿæ¢ä¸Šæ–°çš„æ¡†æ¶ï¼Œé‡æ–°ä¿®æ”¹ä¹‹å‰ç›¸å…³çš„APIï¼›zhanglogging-prefect.jarï¼›</p>
<p>â€‹        5ã€JDBCâ€”æ•°æ®åº“é©±åŠ¨ï¼›</p>
<p>â€‹            å†™äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£å±‚ï¼›æ—¥å¿—é—¨é¢ï¼ˆæ—¥å¿—çš„ä¸€ä¸ªæŠ½è±¡å±‚ï¼‰ï¼›logging-abstract.jarï¼›</p>
<p>â€‹            ç»™é¡¹ç›®ä¸­å¯¼å…¥å…·ä½“çš„æ—¥å¿—å®ç°å°±è¡Œäº†ï¼›æˆ‘ä»¬ä¹‹å‰çš„æ—¥å¿—æ¡†æ¶éƒ½æ˜¯å®ç°çš„æŠ½è±¡å±‚ï¼›</p>
<p><strong>å¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶ï¼›</strong></p>
<p>JULã€JCLã€Jboss-loggingã€logbackã€log4jã€log4j2ã€slf4jâ€¦.</p>
<table>
<thead>
<tr>
<th>æ—¥å¿—é—¨é¢  ï¼ˆæ—¥å¿—çš„æŠ½è±¡å±‚ï¼‰</th>
<th>æ—¥å¿—å®ç°</th>
</tr>
</thead>
<tbody>
<tr>
<td><del>JCLï¼ˆJakarta  Commons Loggingï¼‰</del>    SLF4jï¼ˆSimple  Logging Facade for Javaï¼‰    <strong><del>jboss-logging</del></strong></td>
<td>Log4j  JULï¼ˆjava.util.loggingï¼‰  Log4j2  <strong>Logback</strong></td>
</tr>
</tbody>
</table>
<p>å·¦è¾¹é€‰ä¸€ä¸ªé—¨é¢ï¼ˆæŠ½è±¡å±‚ï¼‰ã€å³è¾¹æ¥é€‰ä¸€ä¸ªå®ç°ï¼›</p>
<p>æ—¥å¿—é—¨é¢ï¼š  SLF4Jï¼›</p>
<p>æ—¥å¿—å®ç°ï¼šLogbackï¼›</p>
<p>SpringBootï¼šåº•å±‚æ˜¯Springæ¡†æ¶ï¼ŒSpringæ¡†æ¶é»˜è®¤æ˜¯ç”¨JCLï¼›â€˜</p>
<p>â€‹    <strong>==SpringBooté€‰ç”¨ SLF4jå’Œlogbackï¼›==</strong></p>
<h2 id="2ã€SLF4jä½¿ç”¨"><a href="#2ã€SLF4jä½¿ç”¨" class="headerlink" title="2ã€SLF4jä½¿ç”¨"></a>2ã€SLF4jä½¿ç”¨</h2><h3 id="1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j-https-www-slf4j-org"><a href="#1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j-https-www-slf4j-org" class="headerlink" title="1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j   https://www.slf4j.org"></a>1ã€å¦‚ä½•åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨SLF4j   <a href="https://www.slf4j.org" target="_blank" rel="noopener">https://www.slf4j.org</a></h3><p>ä»¥åå¼€å‘çš„æ—¶å€™ï¼Œæ—¥å¿—è®°å½•æ–¹æ³•çš„è°ƒç”¨ï¼Œä¸åº”è¯¥æ¥ç›´æ¥è°ƒç”¨æ—¥å¿—çš„å®ç°ç±»ï¼Œè€Œæ˜¯è°ƒç”¨æ—¥å¿—æŠ½è±¡å±‚é‡Œé¢çš„æ–¹æ³•ï¼›</p>
<p>ç»™ç³»ç»Ÿé‡Œé¢å¯¼å…¥slf4jçš„jarå’Œ  logbackçš„å®ç°jar</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Logger logger = LoggerFactory.getLogger(HelloWorld.class);</span><br><span class="line">    logger.info(<span class="string">"Hello World"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å›¾ç¤ºï¼›</p>
<p><img src="images/concrete-bindings.png" alt="images/concrete-bindings.png"></p>
<p>æ¯ä¸€ä¸ªæ—¥å¿—çš„å®ç°æ¡†æ¶éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨slf4jä»¥åï¼Œ<strong>é…ç½®æ–‡ä»¶è¿˜æ˜¯åšæˆæ—¥å¿—å®ç°æ¡†æ¶è‡ªå·±æœ¬èº«çš„é…ç½®æ–‡ä»¶ï¼›</strong></p>
<h3 id="2ã€é—ç•™é—®é¢˜"><a href="#2ã€é—ç•™é—®é¢˜" class="headerlink" title="2ã€é—ç•™é—®é¢˜"></a>2ã€é—ç•™é—®é¢˜</h3><p>aï¼ˆslf4j+logbackï¼‰: Springï¼ˆcommons-loggingï¼‰ã€Hibernateï¼ˆjboss-loggingï¼‰ã€MyBatisã€xxxx</p>
<p>ç»Ÿä¸€æ—¥å¿—è®°å½•ï¼Œå³ä½¿æ˜¯åˆ«çš„æ¡†æ¶å’Œæˆ‘ä¸€èµ·ç»Ÿä¸€ä½¿ç”¨slf4jè¿›è¡Œè¾“å‡ºï¼Ÿ</p>
<p><img src="images/legacy.png" alt=""></p>
<p><strong>å¦‚ä½•è®©ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ—¥å¿—éƒ½ç»Ÿä¸€åˆ°slf4jï¼›</strong></p>
<p>==1ã€å°†ç³»ç»Ÿä¸­å…¶ä»–æ—¥å¿—æ¡†æ¶å…ˆæ’é™¤å‡ºå»ï¼›==</p>
<p>==2ã€ç”¨ä¸­é—´åŒ…æ¥æ›¿æ¢åŸæœ‰çš„æ—¥å¿—æ¡†æ¶ï¼›==</p>
<p>==3ã€æˆ‘ä»¬å¯¼å…¥slf4jå…¶ä»–çš„å®ç°==</p>
<h2 id="3ã€SpringBootæ—¥å¿—å…³ç³»"><a href="#3ã€SpringBootæ—¥å¿—å…³ç³»" class="headerlink" title="3ã€SpringBootæ—¥å¿—å…³ç³»"></a>3ã€SpringBootæ—¥å¿—å…³ç³»</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>SpringBootä½¿ç”¨å®ƒæ¥åšæ—¥å¿—åŠŸèƒ½ï¼›</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åº•å±‚ä¾èµ–å…³ç³»</p>
<p><img src="images/æœç‹—æˆªå›¾20180131220946.png" alt=""></p>
<p>æ€»ç»“ï¼š</p>
<p>â€‹    1ï¼‰ã€SpringBootåº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è¿›è¡Œæ—¥å¿—è®°å½•</p>
<p>â€‹    2ï¼‰ã€SpringBootä¹ŸæŠŠå…¶ä»–çš„æ—¥å¿—éƒ½æ›¿æ¢æˆäº†slf4jï¼›</p>
<p>â€‹    3ï¼‰ã€ä¸­é—´æ›¿æ¢åŒ…ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"rawtypes"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">LogFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> String UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J = <span class="string">"http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> LogFactory logFactory = <span class="keyword">new</span> SLF4JLogFactory();</span><br></pre></td></tr></table></figure>
<p><img src="images/æœç‹—æˆªå›¾20180131221411.png" alt=""></p>
<p>â€‹    4ï¼‰ã€å¦‚æœæˆ‘ä»¬è¦å¼•å…¥å…¶ä»–æ¡†æ¶ï¼Ÿä¸€å®šè¦æŠŠè¿™ä¸ªæ¡†æ¶çš„é»˜è®¤æ—¥å¿—ä¾èµ–ç§»é™¤æ‰ï¼Ÿ</p>
<p>â€‹            Springæ¡†æ¶ç”¨çš„æ˜¯commons-loggingï¼›</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>==SpringBootèƒ½è‡ªåŠ¨é€‚é…æ‰€æœ‰çš„æ—¥å¿—ï¼Œè€Œä¸”åº•å±‚ä½¿ç”¨slf4j+logbackçš„æ–¹å¼è®°å½•æ—¥å¿—ï¼Œå¼•å…¥å…¶ä»–æ¡†æ¶çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªæ¡†æ¶ä¾èµ–çš„æ—¥å¿—æ¡†æ¶æ’é™¤æ‰å³å¯ï¼›==</strong></p>
<h2 id="4ã€æ—¥å¿—ä½¿ç”¨ï¼›"><a href="#4ã€æ—¥å¿—ä½¿ç”¨ï¼›" class="headerlink" title="4ã€æ—¥å¿—ä½¿ç”¨ï¼›"></a>4ã€æ—¥å¿—ä½¿ç”¨ï¼›</h2><h3 id="1ã€é»˜è®¤é…ç½®"><a href="#1ã€é»˜è®¤é…ç½®" class="headerlink" title="1ã€é»˜è®¤é…ç½®"></a>1ã€é»˜è®¤é…ç½®</h3><p>SpringBooté»˜è®¤å¸®æˆ‘ä»¬é…ç½®å¥½äº†æ—¥å¿—ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®°å½•å™¨</span></span><br><span class="line">Logger logger = LoggerFactory.getLogger(getClass());</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//System.out.println();</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//æ—¥å¿—çš„çº§åˆ«ï¼›</span></span><br><span class="line">	<span class="comment">//ç”±ä½åˆ°é«˜   trace&lt;debug&lt;info&lt;warn&lt;error</span></span><br><span class="line">	<span class="comment">//å¯ä»¥è°ƒæ•´è¾“å‡ºçš„æ—¥å¿—çº§åˆ«ï¼›æ—¥å¿—å°±åªä¼šåœ¨è¿™ä¸ªçº§åˆ«ä»¥ä»¥åçš„é«˜çº§åˆ«ç”Ÿæ•ˆ</span></span><br><span class="line">	logger.trace(<span class="string">"è¿™æ˜¯traceæ—¥å¿—..."</span>);</span><br><span class="line">	logger.debug(<span class="string">"è¿™æ˜¯debugæ—¥å¿—..."</span>);</span><br><span class="line">	<span class="comment">//SpringBooté»˜è®¤ç»™æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯infoçº§åˆ«çš„ï¼Œæ²¡æœ‰æŒ‡å®šçº§åˆ«çš„å°±ç”¨SpringBooté»˜è®¤è§„å®šçš„çº§åˆ«ï¼›rootçº§åˆ«</span></span><br><span class="line">	logger.info(<span class="string">"è¿™æ˜¯infoæ—¥å¿—..."</span>);</span><br><span class="line">	logger.warn(<span class="string">"è¿™æ˜¯warnæ—¥å¿—..."</span>);</span><br><span class="line">	logger.error(<span class="string">"è¿™æ˜¯erroræ—¥å¿—..."</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š
    %dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ
    %threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ
    %-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦
    %logger{50} è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚ 
    %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ
    %næ˜¯æ¢è¡Œç¬¦
--&gt;
%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n
</code></pre><p>SpringBootä¿®æ”¹æ—¥å¿—çš„é»˜è®¤é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">logging.level.com.atguigu=trace</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#logging.path=</span><br><span class="line"># ä¸æŒ‡å®šè·¯å¾„åœ¨å½“å‰é¡¹ç›®ä¸‹ç”Ÿæˆspringboot.logæ—¥å¿—</span><br><span class="line"># å¯ä»¥æŒ‡å®šå®Œæ•´çš„è·¯å¾„ï¼›</span><br><span class="line">#logging.file=G:/springboot.log</span><br><span class="line"></span><br><span class="line"># åœ¨å½“å‰ç£ç›˜çš„æ ¹è·¯å¾„ä¸‹åˆ›å»ºspringæ–‡ä»¶å¤¹å’Œé‡Œé¢çš„logæ–‡ä»¶å¤¹ï¼›ä½¿ç”¨Â spring.log ä½œä¸ºé»˜è®¤æ–‡ä»¶</span><br><span class="line">logging.path=/spring/log</span><br><span class="line"></span><br><span class="line">#  åœ¨æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çš„æ ¼å¼</span><br><span class="line">logging.pattern.console=%d&#123;yyyy-MM-dd&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n</span><br><span class="line"># æŒ‡å®šæ–‡ä»¶ä¸­æ—¥å¿—è¾“å‡ºçš„æ ¼å¼</span><br><span class="line">logging.pattern.file=%d&#123;yyyy-MM-dd&#125; === [%thread] === %-5level === %logger&#123;50&#125; ==== %msg%n</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>logging.file</th>
<th>logging.path</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>(none)</td>
<td>(none)</td>
<td></td>
<td>åªåœ¨æ§åˆ¶å°è¾“å‡º</td>
</tr>
<tr>
<td>æŒ‡å®šæ–‡ä»¶å</td>
<td>(none)</td>
<td>my.log</td>
<td>è¾“å‡ºæ—¥å¿—åˆ°my.logæ–‡ä»¶</td>
</tr>
<tr>
<td>(none)</td>
<td>æŒ‡å®šç›®å½•</td>
<td>/var/log</td>
<td>è¾“å‡ºåˆ°æŒ‡å®šç›®å½•çš„ spring.log æ–‡ä»¶ä¸­</td>
</tr>
</tbody>
</table>
<h3 id="2ã€æŒ‡å®šé…ç½®"><a href="#2ã€æŒ‡å®šé…ç½®" class="headerlink" title="2ã€æŒ‡å®šé…ç½®"></a>2ã€æŒ‡å®šé…ç½®</h3><p>ç»™ç±»è·¯å¾„ä¸‹æ”¾ä¸Šæ¯ä¸ªæ—¥å¿—æ¡†æ¶è‡ªå·±çš„é…ç½®æ–‡ä»¶å³å¯ï¼›SpringBootå°±ä¸ä½¿ç”¨ä»–é»˜è®¤é…ç½®çš„äº†</p>
<table>
<thead>
<tr>
<th>Logging System</th>
<th>Customization</th>
</tr>
</thead>
<tbody>
<tr>
<td>Logback</td>
<td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td>
</tr>
<tr>
<td>Log4j2</td>
<td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td><code>logging.properties</code></td>
</tr>
</tbody>
</table>
<p>logback.xmlï¼šç›´æ¥å°±è¢«æ—¥å¿—æ¡†æ¶è¯†åˆ«äº†ï¼›</p>
<p><strong>logback-spring.xml</strong>ï¼šæ—¥å¿—æ¡†æ¶å°±ä¸ç›´æ¥åŠ è½½æ—¥å¿—çš„é…ç½®é¡¹ï¼Œç”±SpringBootè§£ææ—¥å¿—é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨SpringBootçš„é«˜çº§ProfileåŠŸèƒ½</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"staging"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- configuration to be enabled when the "staging" profile is active --&gt;</span></span><br><span class="line">  	å¯ä»¥æŒ‡å®šæŸæ®µé…ç½®åªåœ¨æŸä¸ªç¯å¢ƒä¸‹ç”Ÿæ•ˆ</span><br><span class="line"><span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"stdout"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        æ—¥å¿—è¾“å‡ºæ ¼å¼ï¼š</span></span><br><span class="line"><span class="comment">			%dè¡¨ç¤ºæ—¥æœŸæ—¶é—´ï¼Œ</span></span><br><span class="line"><span class="comment">			%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ</span></span><br><span class="line"><span class="comment">			%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦</span></span><br><span class="line"><span class="comment">			%logger&#123;50&#125; è¡¨ç¤ºloggeråå­—æœ€é•¿50ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²ã€‚ </span></span><br><span class="line"><span class="comment">			%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ</span></span><br><span class="line"><span class="comment">			%næ˜¯æ¢è¡Œç¬¦</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.PatternLayout"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"dev"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ----&gt; [%thread] ---&gt; %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">"!dev"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; ==== [%thread] ==== %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨logback.xmlä½œä¸ºæ—¥å¿—é…ç½®æ–‡ä»¶ï¼Œè¿˜è¦ä½¿ç”¨profileåŠŸèƒ½ï¼Œä¼šæœ‰ä»¥ä¸‹é”™è¯¯</p>
<p> <code>no applicable action for [springProfile]</code></p>
<h2 id="5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶"><a href="#5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶" class="headerlink" title="5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶"></a>5ã€åˆ‡æ¢æ—¥å¿—æ¡†æ¶</h2><p>å¯ä»¥æŒ‰ç…§slf4jçš„æ—¥å¿—é€‚é…å›¾ï¼Œè¿›è¡Œç›¸å…³çš„åˆ‡æ¢ï¼›</p>
<p>slf4j+log4jçš„æ–¹å¼ï¼›</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åˆ‡æ¢ä¸ºlog4j2</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="å››ã€Webå¼€å‘"><a href="#å››ã€Webå¼€å‘" class="headerlink" title="å››ã€Webå¼€å‘"></a>å››ã€Webå¼€å‘</h1><h2 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><p>ä½¿ç”¨SpringBootï¼›</p>
<p><strong>1ï¼‰ã€åˆ›å»ºSpringBootåº”ç”¨ï¼Œé€‰ä¸­æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼›</strong></p>
<p><strong>2ï¼‰ã€SpringBootå·²ç»é»˜è®¤å°†è¿™äº›åœºæ™¯é…ç½®å¥½äº†ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå°‘é‡é…ç½®å°±å¯ä»¥è¿è¡Œèµ·æ¥</strong></p>
<p><strong>3ï¼‰ã€è‡ªå·±ç¼–å†™ä¸šåŠ¡ä»£ç ï¼›</strong></p>
<p><strong>è‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ</strong></p>
<p>è¿™ä¸ªåœºæ™¯SpringBootå¸®æˆ‘ä»¬é…ç½®äº†ä»€ä¹ˆï¼Ÿèƒ½ä¸èƒ½ä¿®æ”¹ï¼Ÿèƒ½ä¿®æ”¹å“ªäº›é…ç½®ï¼Ÿèƒ½ä¸èƒ½æ‰©å±•ï¼Ÿxxx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xxxxAutoConfigurationï¼šå¸®æˆ‘ä»¬ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç»„ä»¶ï¼›</span><br><span class="line">xxxxProperties:é…ç½®ç±»æ¥å°è£…é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼›</span><br></pre></td></tr></table></figure>
<h2 id="2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›"><a href="#2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›" class="headerlink" title="2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›"></a>2ã€SpringBootå¯¹é™æ€èµ„æºçš„æ˜ å°„è§„åˆ™ï¼›</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.resources"</span>, ignoreUnknownFields = <span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceProperties</span> <span class="keyword">implements</span> <span class="title">ResourceLoaderAware</span> </span>&#123;</span><br><span class="line">  <span class="comment">//å¯ä»¥è®¾ç½®å’Œé™æ€èµ„æºæœ‰å…³çš„å‚æ•°ï¼Œç¼“å­˜æ—¶é—´ç­‰</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">WebMvcAuotConfigurationï¼š</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">			logger.debug(<span class="string">"Default resource handling disabled"</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		Integer cachePeriod = <span class="keyword">this</span>.resourceProperties.getCachePeriod();</span><br><span class="line">		<span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">"/webjars/**"</span>)) &#123;</span><br><span class="line">			customizeResourceHandlerRegistration(</span><br><span class="line">					registry.addResourceHandler(<span class="string">"/webjars/**"</span>)</span><br><span class="line">							.addResourceLocations(</span><br><span class="line">									<span class="string">"classpath:/META-INF/resources/webjars/"</span>)</span><br><span class="line">					.setCachePeriod(cachePeriod));</span><br><span class="line">		&#125;</span><br><span class="line">		String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">         	<span class="comment">//é™æ€èµ„æºæ–‡ä»¶å¤¹æ˜ å°„</span></span><br><span class="line">		<span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">			customizeResourceHandlerRegistration(</span><br><span class="line">					registry.addResourceHandler(staticPathPattern)</span><br><span class="line">							.addResourceLocations(</span><br><span class="line">									<span class="keyword">this</span>.resourceProperties.getStaticLocations())</span><br><span class="line">					.setCachePeriod(cachePeriod));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//é…ç½®æ¬¢è¿é¡µæ˜ å°„</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title">welcomePageHandlerMapping</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">			ResourceProperties resourceProperties)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> WelcomePageHandlerMapping(resourceProperties.getWelcomePage(),</span><br><span class="line">				<span class="keyword">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//é…ç½®å–œæ¬¢çš„å›¾æ ‡</span></span><br><span class="line">	<span class="meta">@Configuration</span></span><br><span class="line">	<span class="meta">@ConditionalOnProperty</span>(value = <span class="string">"spring.mvc.favicon.enabled"</span>, matchIfMissing = <span class="keyword">true</span>)</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">FaviconConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">final</span> ResourceProperties resourceProperties;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">FaviconConfiguration</span><span class="params">(ResourceProperties resourceProperties)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.resourceProperties = resourceProperties;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> SimpleUrlHandlerMapping <span class="title">faviconHandlerMapping</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			SimpleUrlHandlerMapping mapping = <span class="keyword">new</span> SimpleUrlHandlerMapping();</span><br><span class="line">			mapping.setOrder(Ordered.HIGHEST_PRECEDENCE + <span class="number">1</span>);</span><br><span class="line">             	<span class="comment">//æ‰€æœ‰  **/favicon.ico </span></span><br><span class="line">			mapping.setUrlMap(Collections.singletonMap(<span class="string">"**/favicon.ico"</span>,</span><br><span class="line">					faviconRequestHandler()));</span><br><span class="line">			<span class="keyword">return</span> mapping;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title">faviconRequestHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			ResourceHttpRequestHandler requestHandler = <span class="keyword">new</span> ResourceHttpRequestHandler();</span><br><span class="line">			requestHandler</span><br><span class="line">					.setLocations(<span class="keyword">this</span>.resourceProperties.getFaviconLocations());</span><br><span class="line">			<span class="keyword">return</span> requestHandler;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>==1ï¼‰ã€æ‰€æœ‰ /webjars/** ï¼Œéƒ½å» classpath:/META-INF/resources/webjars/ æ‰¾èµ„æºï¼›==</p>
<p>â€‹    webjarsï¼šä»¥jaråŒ…çš„æ–¹å¼å¼•å…¥é™æ€èµ„æºï¼›</p>
<p><a href="http://www.webjars.org/" target="_blank" rel="noopener">http://www.webjars.org/</a></p>
<p><img src="images/æœç‹—æˆªå›¾20180203181751.png" alt=""></p>
<p>localhost:8080/webjars/jquery/3.3.1/jquery.js</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼•å…¥jquery-webjar--&gt;</span>åœ¨è®¿é—®çš„æ—¶å€™åªéœ€è¦å†™webjarsä¸‹é¢èµ„æºçš„åç§°å³å¯</span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>==2ï¼‰ã€â€/**â€ è®¿é—®å½“å‰é¡¹ç›®çš„ä»»ä½•èµ„æºï¼Œéƒ½å»ï¼ˆé™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼‰æ‰¾æ˜ å°„==</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;classpath:/META-INF/resources/&quot;, </span><br><span class="line">&quot;classpath:/resources/&quot;,</span><br><span class="line">&quot;classpath:/static/&quot;, </span><br><span class="line">&quot;classpath:/public/&quot; </span><br><span class="line">&quot;/&quot;ï¼šå½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„</span><br></pre></td></tr></table></figure>
<p>localhost:8080/abc ===  å»é™æ€èµ„æºæ–‡ä»¶å¤¹é‡Œé¢æ‰¾abc</p>
<p>==3ï¼‰ã€æ¬¢è¿é¡µï¼› é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰index.htmlé¡µé¢ï¼›è¢«â€/**â€æ˜ å°„ï¼›==</p>
<p>â€‹    localhost:8080/   æ‰¾indexé¡µé¢</p>
<p>==4ï¼‰ã€æ‰€æœ‰çš„ **/favicon.ico  éƒ½æ˜¯åœ¨é™æ€èµ„æºæ–‡ä»¶ä¸‹æ‰¾ï¼›==</p>
<h2 id="3ã€æ¨¡æ¿å¼•æ“"><a href="#3ã€æ¨¡æ¿å¼•æ“" class="headerlink" title="3ã€æ¨¡æ¿å¼•æ“"></a>3ã€æ¨¡æ¿å¼•æ“</h2><p>JSPã€Velocityã€Freemarkerã€Thymeleaf</p>
<p><img src="images/template-engine.png" alt=""></p>
<p>SpringBootæ¨èçš„Thymeleafï¼›</p>
<p>è¯­æ³•æ›´ç®€å•ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼›</p>
<h3 id="1ã€å¼•å…¥thymeleafï¼›"><a href="#1ã€å¼•å…¥thymeleafï¼›" class="headerlink" title="1ã€å¼•å…¥thymeleafï¼›"></a>1ã€å¼•å…¥thymeleafï¼›</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          	2.1.6</span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">åˆ‡æ¢thymeleafç‰ˆæœ¬</span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">thymeleaf.version</span>&gt;</span>3.0.9.RELEASE<span class="tag">&lt;/<span class="name">thymeleaf.version</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- å¸ƒå±€åŠŸèƒ½çš„æ”¯æŒç¨‹åº  thymeleaf3ä¸»ç¨‹åº  layout2ä»¥ä¸Šç‰ˆæœ¬ --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- thymeleaf2   layout1--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">thymeleaf-layout-dialect.version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2ã€Thymeleafä½¿ç”¨"><a href="#2ã€Thymeleafä½¿ç”¨" class="headerlink" title="2ã€Thymeleafä½¿ç”¨"></a>2ã€Thymeleafä½¿ç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.thymeleaf"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeleafProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_ENCODING = Charset.forName(<span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> MimeType DEFAULT_CONTENT_TYPE = MimeType.valueOf(<span class="string">"text/html"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PREFIX = <span class="string">"classpath:/templates/"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_SUFFIX = <span class="string">".html"</span>;</span><br><span class="line">  	<span class="comment">//</span></span><br></pre></td></tr></table></figure>
<p>åªè¦æˆ‘ä»¬æŠŠHTMLé¡µé¢æ”¾åœ¨classpath:/templates/ï¼Œthymeleafå°±èƒ½è‡ªåŠ¨æ¸²æŸ“ï¼›</p>
<p>ä½¿ç”¨ï¼š</p>
<p>1ã€å¯¼å…¥thymeleafçš„åç§°ç©ºé—´</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>2ã€ä½¿ç”¨thymeleafè¯­æ³•ï¼›</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆåŠŸï¼<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--th:text å°†divé‡Œé¢çš„æ–‡æœ¬å†…å®¹è®¾ç½®ä¸º --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">"$&#123;hello&#125;"</span>&gt;</span>è¿™æ˜¯æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3ã€è¯­æ³•è§„åˆ™"><a href="#3ã€è¯­æ³•è§„åˆ™" class="headerlink" title="3ã€è¯­æ³•è§„åˆ™"></a>3ã€è¯­æ³•è§„åˆ™</h3><p>1ï¼‰ã€th:textï¼›æ”¹å˜å½“å‰å…ƒç´ é‡Œé¢çš„æ–‡æœ¬å†…å®¹ï¼›</p>
<p>â€‹    thï¼šä»»æ„htmlå±æ€§ï¼›æ¥æ›¿æ¢åŸç”Ÿå±æ€§çš„å€¼</p>
<p><img src="images/2018-02-04_123955.png" alt=""></p>
<p>2ï¼‰ã€è¡¨è¾¾å¼ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">Simple expressions:ï¼ˆè¡¨è¾¾å¼è¯­æ³•ï¼‰</span><br><span class="line">    Variable Expressions: $&#123;...&#125;ï¼šè·å–å˜é‡å€¼ï¼›OGNLï¼›</span><br><span class="line">    		1ï¼‰ã€è·å–å¯¹è±¡çš„å±æ€§ã€è°ƒç”¨æ–¹æ³•</span><br><span class="line">    		2ï¼‰ã€ä½¿ç”¨å†…ç½®çš„åŸºæœ¬å¯¹è±¡ï¼š</span><br><span class="line">    			#ctx : the context object.</span><br><span class="line">    			#vars: the context variables.</span><br><span class="line">                #locale : the context locale.</span><br><span class="line">                #request : (only in Web Contexts) the HttpServletRequest object.</span><br><span class="line">                #response : (only in Web Contexts) the HttpServletResponse object.</span><br><span class="line">                #session : (only in Web Contexts) the HttpSession object.</span><br><span class="line">                #servletContext : (only in Web Contexts) the ServletContext object.</span><br><span class="line">                </span><br><span class="line">                $&#123;session.foo&#125;</span><br><span class="line">            3ï¼‰ã€å†…ç½®çš„ä¸€äº›å·¥å…·å¯¹è±¡ï¼š</span><br><span class="line">#execInfo : information about the template being processed.</span><br><span class="line">#messages : methods for obtaining externalized messages inside variables expressions, in the same way as they would be obtained using #&#123;â€¦&#125; syntax.</span><br><span class="line">#uris : methods for escaping parts of URLs/URIs</span><br><span class="line">#conversions : methods for executing the configured conversion service (if any).</span><br><span class="line">#dates : methods for java.util.Date objects: formatting, component extraction, etc.</span><br><span class="line">#calendars : analogous to #dates , but for java.util.Calendar objects.</span><br><span class="line">#numbers : methods for formatting numeric objects.</span><br><span class="line">#strings : methods for String objects: contains, startsWith, prepending/appending, etc.</span><br><span class="line">#objects : methods for objects in general.</span><br><span class="line">#bools : methods for boolean evaluation.</span><br><span class="line">#arrays : methods for arrays.</span><br><span class="line">#lists : methods for lists.</span><br><span class="line">#sets : methods for sets.</span><br><span class="line">#maps : methods for maps.</span><br><span class="line">#aggregates : methods for creating aggregates on arrays or collections.</span><br><span class="line">#ids : methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).</span><br><span class="line"></span><br><span class="line">    Selection Variable Expressions: *&#123;...&#125;ï¼šé€‰æ‹©è¡¨è¾¾å¼ï¼šå’Œ$&#123;&#125;åœ¨åŠŸèƒ½ä¸Šæ˜¯ä¸€æ ·ï¼›</span><br><span class="line">    	è¡¥å……ï¼šé…åˆ th:object=&quot;$&#123;session.user&#125;ï¼š</span><br><span class="line">   &lt;div th:object=&quot;$&#123;session.user&#125;&quot;&gt;</span><br><span class="line">    &lt;p&gt;Name: &lt;span th:text=&quot;*&#123;firstName&#125;&quot;&gt;Sebastian&lt;/span&gt;.&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Surname: &lt;span th:text=&quot;*&#123;lastName&#125;&quot;&gt;Pepper&lt;/span&gt;.&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Nationality: &lt;span th:text=&quot;*&#123;nationality&#125;&quot;&gt;Saturn&lt;/span&gt;.&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    Message Expressions: #&#123;...&#125;ï¼šè·å–å›½é™…åŒ–å†…å®¹</span><br><span class="line">    Link URL Expressions: @&#123;...&#125;ï¼šå®šä¹‰URLï¼›</span><br><span class="line">    		@&#123;/order/process(execId=$&#123;execId&#125;,execType=&apos;FAST&apos;)&#125;</span><br><span class="line">    Fragment Expressions: ~&#123;...&#125;ï¼šç‰‡æ®µå¼•ç”¨è¡¨è¾¾å¼</span><br><span class="line">    		&lt;div th:insert=&quot;~&#123;commons :: main&#125;&quot;&gt;...&lt;/div&gt;</span><br><span class="line">    		</span><br><span class="line">Literalsï¼ˆå­—é¢é‡ï¼‰</span><br><span class="line">      Text literals: &apos;one text&apos; , &apos;Another one!&apos; ,â€¦</span><br><span class="line">      Number literals: 0 , 34 , 3.0 , 12.3 ,â€¦</span><br><span class="line">      Boolean literals: true , false</span><br><span class="line">      Null literal: null</span><br><span class="line">      Literal tokens: one , sometext , main ,â€¦</span><br><span class="line">Text operations:ï¼ˆæ–‡æœ¬æ“ä½œï¼‰</span><br><span class="line">    String concatenation: +</span><br><span class="line">    Literal substitutions: |The name is $&#123;name&#125;|</span><br><span class="line">Arithmetic operations:ï¼ˆæ•°å­¦è¿ç®—ï¼‰</span><br><span class="line">    Binary operators: + , - , * , / , %</span><br><span class="line">    Minus sign (unary operator): -</span><br><span class="line">Boolean operations:ï¼ˆå¸ƒå°”è¿ç®—ï¼‰</span><br><span class="line">    Binary operators: and , or</span><br><span class="line">    Boolean negation (unary operator): ! , not</span><br><span class="line">Comparisons and equality:ï¼ˆæ¯”è¾ƒè¿ç®—ï¼‰</span><br><span class="line">    Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )</span><br><span class="line">    Equality operators: == , != ( eq , ne )</span><br><span class="line">Conditional operators:æ¡ä»¶è¿ç®—ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰</span><br><span class="line">    If-then: (if) ? (then)</span><br><span class="line">    If-then-else: (if) ? (then) : (else)</span><br><span class="line">    Default: (value) ?: (defaultvalue)</span><br><span class="line">Special tokens:</span><br><span class="line">    No-Operation: _</span><br></pre></td></tr></table></figure>
<h2 id="4ã€SpringMVCè‡ªåŠ¨é…ç½®"><a href="#4ã€SpringMVCè‡ªåŠ¨é…ç½®" class="headerlink" title="4ã€SpringMVCè‡ªåŠ¨é…ç½®"></a>4ã€SpringMVCè‡ªåŠ¨é…ç½®</h2><p><a href="https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/1.5.10.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications</a></p>
<h3 id="1-Spring-MVC-auto-configuration"><a href="#1-Spring-MVC-auto-configuration" class="headerlink" title="1. Spring MVC auto-configuration"></a>1. Spring MVC auto-configuration</h3><p>Spring Boot è‡ªåŠ¨é…ç½®å¥½äº†SpringMVC</p>
<p>ä»¥ä¸‹æ˜¯SpringBootå¯¹SpringMVCçš„é»˜è®¤é…ç½®:<strong>==ï¼ˆWebMvcAutoConfigurationï¼‰==</strong></p>
<ul>
<li><p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</p>
<ul>
<li>è‡ªåŠ¨é…ç½®äº†ViewResolverï¼ˆè§†å›¾è§£æå™¨ï¼šæ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å¾—åˆ°è§†å›¾å¯¹è±¡ï¼ˆViewï¼‰ï¼Œè§†å›¾å¯¹è±¡å†³å®šå¦‚ä½•æ¸²æŸ“ï¼ˆè½¬å‘ï¼Ÿé‡å®šå‘ï¼Ÿï¼‰ï¼‰</li>
<li>ContentNegotiatingViewResolverï¼šç»„åˆæ‰€æœ‰çš„è§†å›¾è§£æå™¨çš„ï¼›</li>
<li>==å¦‚ä½•å®šåˆ¶ï¼šæˆ‘ä»¬å¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªè§†å›¾è§£æå™¨ï¼›è‡ªåŠ¨çš„å°†å…¶ç»„åˆè¿›æ¥ï¼›==</li>
</ul>
</li>
<li><p>Support for serving static resources, including support for WebJars (see below).é™æ€èµ„æºæ–‡ä»¶å¤¹è·¯å¾„,webjars</p>
</li>
<li><p>Static <code>index.html</code> support. é™æ€é¦–é¡µè®¿é—®</p>
</li>
<li><p>Custom <code>Favicon</code> support (see below).  favicon.ico</p>
</li>
</ul>
<ul>
<li><p>è‡ªåŠ¨æ³¨å†Œäº† of <code>Converter</code>, <code>GenericConverter</code>, <code>Formatter</code> beans.</p>
<ul>
<li>Converterï¼šè½¬æ¢å™¨ï¼›  public String hello(User user)ï¼šç±»å‹è½¬æ¢ä½¿ç”¨Converter</li>
<li><code>Formatter</code>  æ ¼å¼åŒ–å™¨ï¼›  2017.12.17===Dateï¼›</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(prefix = <span class="string">"spring.mvc"</span>, name = <span class="string">"date-format"</span>)<span class="comment">//åœ¨æ–‡ä»¶ä¸­é…ç½®æ—¥æœŸæ ¼å¼åŒ–çš„è§„åˆ™</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Formatter&lt;Date&gt; <span class="title">dateFormatter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> DateFormatter(<span class="keyword">this</span>.mvcProperties.getDateFormat());<span class="comment">//æ—¥æœŸæ ¼å¼åŒ–ç»„ä»¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹    ==è‡ªå·±æ·»åŠ çš„æ ¼å¼åŒ–å™¨è½¬æ¢å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¾åœ¨å®¹å™¨ä¸­å³å¯==</p>
<ul>
<li><p>Support for <code>HttpMessageConverters</code> (see below).</p>
<ul>
<li><p>HttpMessageConverterï¼šSpringMVCç”¨æ¥è½¬æ¢Httpè¯·æ±‚å’Œå“åº”çš„ï¼›Userâ€”Jsonï¼›</p>
</li>
<li><p><code>HttpMessageConverters</code> æ˜¯ä»å®¹å™¨ä¸­ç¡®å®šï¼›è·å–æ‰€æœ‰çš„HttpMessageConverterï¼›</p>
<p>==è‡ªå·±ç»™å®¹å™¨ä¸­æ·»åŠ HttpMessageConverterï¼Œåªéœ€è¦å°†è‡ªå·±çš„ç»„ä»¶æ³¨å†Œå®¹å™¨ä¸­ï¼ˆ@Bean,@Componentï¼‰==</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>Automatic registration of <code>MessageCodesResolver</code> (see below).å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™</p>
</li>
<li><p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (see below).</p>
<p>==æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªConfigurableWebBindingInitializeræ¥æ›¿æ¢é»˜è®¤çš„ï¼›ï¼ˆæ·»åŠ åˆ°å®¹å™¨ï¼‰==</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åˆå§‹åŒ–WebDataBinderï¼›</span><br><span class="line">è¯·æ±‚æ•°æ®=====JavaBeanï¼›</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>org.springframework.boot.autoconfigure.webï¼šwebçš„æ‰€æœ‰è‡ªåŠ¨åœºæ™¯ï¼›</strong></p>
<p>If you want to keep Spring Boot MVC features, and you just want to add additional <a href="https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle#mvc" target="_blank" rel="noopener">MVC configuration</a> (interceptors, formatters, view controllers etc.) you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurerAdapter</code>, but <strong>without</strong> <code>@EnableWebMvc</code>. If you wish to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code> or <code>ExceptionHandlerExceptionResolver</code> you can declare a <code>WebMvcRegistrationsAdapter</code> instance providing such components.</p>
<p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>.</p>
<h3 id="2ã€æ‰©å±•SpringMVC"><a href="#2ã€æ‰©å±•SpringMVC" class="headerlink" title="2ã€æ‰©å±•SpringMVC"></a>2ã€æ‰©å±•SpringMVC</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">"/hello"</span> <span class="attr">view-name</span>=<span class="string">"success"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/hello"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>==ç¼–å†™ä¸€ä¸ªé…ç½®ç±»ï¼ˆ@Configurationï¼‰ï¼Œæ˜¯WebMvcConfigurerAdapterç±»å‹ï¼›ä¸èƒ½æ ‡æ³¨@EnableWebMvc==</strong>;</p>
<p>æ—¢ä¿ç•™äº†æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ï¼Œä¹Ÿèƒ½ç”¨æˆ‘ä»¬æ‰©å±•çš„é…ç½®ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨WebMvcConfigurerAdapterå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// super.addViewControllers(registry);</span></span><br><span class="line">        <span class="comment">//æµè§ˆå™¨å‘é€ /atguigu è¯·æ±‚æ¥åˆ° success</span></span><br><span class="line">        registry.addViewController(<span class="string">"/atguigu"</span>).setViewName(<span class="string">"success"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸç†ï¼š</p>
<p>â€‹    1ï¼‰ã€WebMvcAutoConfigurationæ˜¯SpringMVCçš„è‡ªåŠ¨é…ç½®ç±»</p>
<p>â€‹    2ï¼‰ã€åœ¨åšå…¶ä»–è‡ªåŠ¨é…ç½®æ—¶ä¼šå¯¼å…¥ï¼›@Import(<strong>EnableWebMvcConfiguration</strong>.class)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EnableWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">DelegatingWebMvcConfiguration</span> </span>&#123;</span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">final</span> WebMvcConfigurerComposite configurers = <span class="keyword">new</span> WebMvcConfigurerComposite();</span><br><span class="line"></span><br><span class="line"> <span class="comment">//ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„WebMvcConfigurer</span></span><br><span class="line">     <span class="meta">@Autowired</span>(required = <span class="keyword">false</span>)</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigurers</span><span class="params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">if</span> (!CollectionUtils.isEmpty(configurers)) &#123;</span><br><span class="line">             <span class="keyword">this</span>.configurers.addWebMvcConfigurers(configurers);</span><br><span class="line">           	<span class="comment">//ä¸€ä¸ªå‚è€ƒå®ç°ï¼›å°†æ‰€æœ‰çš„WebMvcConfigurerç›¸å…³é…ç½®éƒ½æ¥ä¸€èµ·è°ƒç”¨ï¼›  </span></span><br><span class="line">           	<span class="meta">@Override</span></span><br><span class="line">            <span class="comment">// public void addViewControllers(ViewControllerRegistry registry) &#123;</span></span><br><span class="line">             <span class="comment">//    for (WebMvcConfigurer delegate : this.delegates) &#123;</span></span><br><span class="line">              <span class="comment">//       delegate.addViewControllers(registry);</span></span><br><span class="line">              <span class="comment">//   &#125;</span></span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹    3ï¼‰ã€å®¹å™¨ä¸­æ‰€æœ‰çš„WebMvcConfigureréƒ½ä¼šä¸€èµ·èµ·ä½œç”¨ï¼›</p>
<p>â€‹    4ï¼‰ã€æˆ‘ä»¬çš„é…ç½®ç±»ä¹Ÿä¼šè¢«è°ƒç”¨ï¼›</p>
<p>â€‹    æ•ˆæœï¼šSpringMVCçš„è‡ªåŠ¨é…ç½®å’Œæˆ‘ä»¬çš„æ‰©å±•é…ç½®éƒ½ä¼šèµ·ä½œç”¨ï¼›</p>
<h3 id="3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›"><a href="#3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›" class="headerlink" title="3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›"></a>3ã€å…¨é¢æ¥ç®¡SpringMVCï¼›</h3><p>SpringBootå¯¹SpringMVCçš„è‡ªåŠ¨é…ç½®ä¸éœ€è¦äº†ï¼Œæ‰€æœ‰éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±é…ç½®ï¼›æ‰€æœ‰çš„SpringMVCçš„è‡ªåŠ¨é…ç½®éƒ½å¤±æ•ˆäº†</p>
<p><strong>æˆ‘ä»¬éœ€è¦åœ¨é…ç½®ç±»ä¸­æ·»åŠ @EnableWebMvcå³å¯ï¼›</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨WebMvcConfigurerAdapterå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// super.addViewControllers(registry);</span></span><br><span class="line">        <span class="comment">//æµè§ˆå™¨å‘é€ /atguigu è¯·æ±‚æ¥åˆ° success</span></span><br><span class="line">        registry.addViewController(<span class="string">"/atguigu"</span>).setViewName(<span class="string">"success"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŸç†ï¼š</p>
<p>ä¸ºä»€ä¹ˆ@EnableWebMvcè‡ªåŠ¨é…ç½®å°±å¤±æ•ˆäº†ï¼›</p>
<p>1ï¼‰@EnableWebMvcçš„æ ¸å¿ƒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import</span>(DelegatingWebMvcConfiguration.class)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableWebMvc &#123;</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ã€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ã€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123; Servlet.class, DispatcherServlet.class,</span><br><span class="line">		WebMvcConfigurerAdapter.class &#125;)</span><br><span class="line"><span class="comment">//å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»æ‰ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(WebMvcConfigurationSupport.class)</span><br><span class="line"><span class="meta">@AutoConfigureOrder</span>(Ordered.HIGHEST_PRECEDENCE + <span class="number">10</span>)</span><br><span class="line"><span class="meta">@AutoConfigureAfter</span>(&#123; DispatcherServletAutoConfiguration.class,</span><br><span class="line">		ValidationAutoConfiguration.class &#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>&#123;</span><br></pre></td></tr></table></figure>
<p>4ï¼‰ã€@EnableWebMvcå°†WebMvcConfigurationSupportç»„ä»¶å¯¼å…¥è¿›æ¥ï¼›</p>
<p>5ï¼‰ã€å¯¼å…¥çš„WebMvcConfigurationSupportåªæ˜¯SpringMVCæœ€åŸºæœ¬çš„åŠŸèƒ½ï¼›</p>
<h2 id="5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"><a href="#5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®" class="headerlink" title="5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®"></a>5ã€å¦‚ä½•ä¿®æ”¹SpringBootçš„é»˜è®¤é…ç½®</h2><p>æ¨¡å¼ï¼š</p>
<p>â€‹    1ï¼‰ã€SpringBootåœ¨è‡ªåŠ¨é…ç½®å¾ˆå¤šç»„ä»¶çš„æ—¶å€™ï¼Œå…ˆçœ‹å®¹å™¨ä¸­æœ‰æ²¡æœ‰ç”¨æˆ·è‡ªå·±é…ç½®çš„ï¼ˆ@Beanã€@Componentï¼‰å¦‚æœæœ‰å°±ç”¨ç”¨æˆ·é…ç½®çš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰è‡ªåŠ¨é…ç½®ï¼›å¦‚æœæœ‰äº›ç»„ä»¶å¯ä»¥æœ‰å¤šä¸ªï¼ˆViewResolverï¼‰å°†ç”¨æˆ·é…ç½®çš„å’Œè‡ªå·±é»˜è®¤çš„ç»„åˆèµ·æ¥ï¼›</p>
<p>â€‹    2ï¼‰ã€åœ¨SpringBootä¸­ä¼šæœ‰éå¸¸å¤šçš„xxxConfigurerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œæ‰©å±•é…ç½®</p>
<p>â€‹    3ï¼‰ã€åœ¨SpringBootä¸­ä¼šæœ‰å¾ˆå¤šçš„xxxCustomizerå¸®åŠ©æˆ‘ä»¬è¿›è¡Œå®šåˆ¶é…ç½®</p>
<h2 id="6ã€RestfulCRUD"><a href="#6ã€RestfulCRUD" class="headerlink" title="6ã€RestfulCRUD"></a>6ã€RestfulCRUD</h2><h3 id="1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ"><a href="#1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ" class="headerlink" title="1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ"></a>1ï¼‰ã€é»˜è®¤è®¿é—®é¦–é¡µ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨WebMvcConfigurerAdapterå¯ä»¥æ¥æ‰©å±•SpringMVCçš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment">//@EnableWebMvc   ä¸è¦æ¥ç®¡SpringMVC</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// super.addViewControllers(registry);</span></span><br><span class="line">        <span class="comment">//æµè§ˆå™¨å‘é€ /atguigu è¯·æ±‚æ¥åˆ° success</span></span><br><span class="line">        registry.addViewController(<span class="string">"/atguigu"</span>).setViewName(<span class="string">"success"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‰€æœ‰çš„WebMvcConfigurerAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨</span></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurerAdapter <span class="title">webMvcConfigurerAdapter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        WebMvcConfigurerAdapter adapter = <span class="keyword">new</span> WebMvcConfigurerAdapter() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">                registry.addViewController(<span class="string">"/"</span>).setViewName(<span class="string">"login"</span>);</span><br><span class="line">                registry.addViewController(<span class="string">"/index.html"</span>).setViewName(<span class="string">"login"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> adapter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2ï¼‰ã€å›½é™…åŒ–"><a href="#2ï¼‰ã€å›½é™…åŒ–" class="headerlink" title="2ï¼‰ã€å›½é™…åŒ–"></a>2ï¼‰ã€å›½é™…åŒ–</h3><p><strong>1ï¼‰ã€ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼›</strong></p>
<p>2ï¼‰ã€ä½¿ç”¨ResourceBundleMessageSourceç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶</p>
<p>3ï¼‰ã€åœ¨é¡µé¢ä½¿ç”¨fmt:messageå–å‡ºå›½é™…åŒ–å†…å®¹</p>
<p>æ­¥éª¤ï¼š</p>
<p>1ï¼‰ã€ç¼–å†™å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼ŒæŠ½å–é¡µé¢éœ€è¦æ˜¾ç¤ºçš„å›½é™…åŒ–æ¶ˆæ¯</p>
<p><img src="images/æœç‹—æˆªå›¾20180211130721.png" alt=""></p>
<p>2ï¼‰ã€SpringBootè‡ªåŠ¨é…ç½®å¥½äº†ç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç»„ä»¶ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.messages"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageSourceAutoConfiguration</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Comma-separated list of basenames (essentially a fully-qualified classpath</span></span><br><span class="line"><span class="comment">	 * location), each following the ResourceBundle convention with relaxed support for</span></span><br><span class="line"><span class="comment">	 * slash based locations. If it doesn't contain a package qualifier (such as</span></span><br><span class="line"><span class="comment">	 * "org.mypackage"), it will be resolved from the classpath root.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> String basename = <span class="string">"messages"</span>;  </span><br><span class="line">    <span class="comment">//æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å¯ä»¥ç›´æ¥æ”¾åœ¨ç±»è·¯å¾„ä¸‹å«messages.propertiesï¼›</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> MessageSource <span class="title">messageSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		ResourceBundleMessageSource messageSource = <span class="keyword">new</span> ResourceBundleMessageSource();</span><br><span class="line">		<span class="keyword">if</span> (StringUtils.hasText(<span class="keyword">this</span>.basename)) &#123;</span><br><span class="line">            <span class="comment">//è®¾ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„åŸºç¡€åï¼ˆå»æ‰è¯­è¨€å›½å®¶ä»£ç çš„ï¼‰</span></span><br><span class="line">			messageSource.setBasenames(StringUtils.commaDelimitedListToStringArray(</span><br><span class="line">					StringUtils.trimAllWhitespace(<span class="keyword">this</span>.basename)));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.encoding != <span class="keyword">null</span>) &#123;</span><br><span class="line">			messageSource.setDefaultEncoding(<span class="keyword">this</span>.encoding.name());</span><br><span class="line">		&#125;</span><br><span class="line">		messageSource.setFallbackToSystemLocale(<span class="keyword">this</span>.fallbackToSystemLocale);</span><br><span class="line">		messageSource.setCacheSeconds(<span class="keyword">this</span>.cacheSeconds);</span><br><span class="line">		messageSource.setAlwaysUseMessageFormat(<span class="keyword">this</span>.alwaysUseMessageFormat);</span><br><span class="line">		<span class="keyword">return</span> messageSource;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ã€å»é¡µé¢è·å–å›½é™…åŒ–çš„å€¼ï¼›</p>
<p><img src="images/æœç‹—æˆªå›¾20180211134506.png" alt=""></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>  <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, shrink-to-fit=no"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Signin Template for Bootstrap<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- Bootstrap core CSS --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"asserts/css/bootstrap.min.css"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/webjars/bootstrap/4.0.0/css/bootstrap.css&#125;"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- Custom styles for this template --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"asserts/css/signin.css"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/asserts/css/signin.css&#125;"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">"text-center"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-signin"</span> <span class="attr">action</span>=<span class="string">"dashboard.html"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"mb-4"</span> <span class="attr">th:src</span>=<span class="string">"@&#123;/asserts/img/bootstrap-solid.svg&#125;"</span> <span class="attr">src</span>=<span class="string">"asserts/img/bootstrap-solid.svg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">width</span>=<span class="string">"72"</span> <span class="attr">height</span>=<span class="string">"72"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"h3 mb-3 font-weight-normal"</span> <span class="attr">th:text</span>=<span class="string">"#&#123;login.tip&#125;"</span>&gt;</span>Please sign in<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"sr-only"</span> <span class="attr">th:text</span>=<span class="string">"#&#123;login.username&#125;"</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Username"</span> <span class="attr">th:placeholder</span>=<span class="string">"#&#123;login.username&#125;"</span> <span class="attr">required</span>=<span class="string">""</span> <span class="attr">autofocus</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"sr-only"</span> <span class="attr">th:text</span>=<span class="string">"#&#123;login.password&#125;"</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"Password"</span> <span class="attr">th:placeholder</span>=<span class="string">"#&#123;login.password&#125;"</span> <span class="attr">required</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"checkbox mb-3"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">          		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"remember-me"</span>/&gt;</span> [[#&#123;login.remember&#125;]]</span><br><span class="line">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-lg btn-primary btn-block"</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">th:text</span>=<span class="string">"#&#123;login.btn&#125;"</span>&gt;</span>Sign in<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"mt-5 mb-3 text-muted"</span>&gt;</span>Â© 2017-2018<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-sm"</span>&gt;</span>ä¸­æ–‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-sm"</span>&gt;</span>English<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼šæ ¹æ®æµè§ˆå™¨è¯­è¨€è®¾ç½®çš„ä¿¡æ¯åˆ‡æ¢äº†å›½é™…åŒ–ï¼›</p>
<p>åŸç†ï¼š</p>
<p>â€‹    å›½é™…åŒ–Localeï¼ˆåŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›LocaleResolverï¼ˆè·å–åŒºåŸŸä¿¡æ¯å¯¹è±¡ï¼‰ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">		<span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">		<span class="meta">@ConditionalOnProperty</span>(prefix = <span class="string">"spring.mvc"</span>, name = <span class="string">"locale"</span>)</span><br><span class="line">		<span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">this</span>.mvcProperties</span><br><span class="line">					.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) &#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">new</span> FixedLocaleResolver(<span class="keyword">this</span>.mvcProperties.getLocale());</span><br><span class="line">			&#125;</span><br><span class="line">			AcceptHeaderLocaleResolver localeResolver = <span class="keyword">new</span> AcceptHeaderLocaleResolver();</span><br><span class="line">			localeResolver.setDefaultLocale(<span class="keyword">this</span>.mvcProperties.getLocale());</span><br><span class="line">			<span class="keyword">return</span> localeResolver;</span><br><span class="line">		&#125;</span><br><span class="line">é»˜è®¤çš„å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´å¸¦æ¥çš„åŒºåŸŸä¿¡æ¯è·å–Localeè¿›è¡Œå›½é™…åŒ–</span><br></pre></td></tr></table></figure>
<p>4ï¼‰ã€ç‚¹å‡»é“¾æ¥åˆ‡æ¢å›½é™…åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯ä»¥åœ¨è¿æ¥ä¸Šæºå¸¦åŒºåŸŸä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLocaleResolver</span> <span class="keyword">implements</span> <span class="title">LocaleResolver</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Locale <span class="title">resolveLocale</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        String l = request.getParameter(<span class="string">"l"</span>);</span><br><span class="line">        Locale locale = Locale.getDefault();</span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.isEmpty(l))&#123;</span><br><span class="line">            String[] split = l.split(<span class="string">"_"</span>);</span><br><span class="line">            locale = <span class="keyword">new</span> Locale(split[<span class="number">0</span>],split[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> locale;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLocale</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Locale locale)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LocaleResolver <span class="title">localeResolver</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyLocaleResolver();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3ï¼‰ã€ç™»é™†"><a href="#3ï¼‰ã€ç™»é™†" class="headerlink" title="3ï¼‰ã€ç™»é™†"></a>3ï¼‰ã€ç™»é™†</h3><p>å¼€å‘æœŸé—´æ¨¡æ¿å¼•æ“é¡µé¢ä¿®æ”¹ä»¥åï¼Œè¦å®æ—¶ç”Ÿæ•ˆ</p>
<p>1ï¼‰ã€ç¦ç”¨æ¨¡æ¿å¼•æ“çš„ç¼“å­˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ç¦ç”¨ç¼“å­˜</span><br><span class="line">spring.thymeleaf.cache=false</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ã€é¡µé¢ä¿®æ”¹å®Œæˆä»¥åctrl+f9ï¼šé‡æ–°ç¼–è¯‘ï¼›</p>
<p>ç™»é™†é”™è¯¯æ¶ˆæ¯çš„æ˜¾ç¤º</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: red"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;msg&#125;"</span> <span class="attr">th:if</span>=<span class="string">"$&#123;not #strings.isEmpty(msg)&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥"><a href="#4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥" class="headerlink" title="4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥"></a>4ï¼‰ã€æ‹¦æˆªå™¨è¿›è¡Œç™»é™†æ£€æŸ¥</h3><p>æ‹¦æˆªå™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»é™†æ£€æŸ¥ï¼Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginHandlerInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Object user = request.getSession().getAttribute(<span class="string">"loginUser"</span>);</span><br><span class="line">        <span class="keyword">if</span>(user == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//æœªç™»é™†ï¼Œè¿”å›ç™»é™†é¡µé¢</span></span><br><span class="line">            request.setAttribute(<span class="string">"msg"</span>,<span class="string">"æ²¡æœ‰æƒé™è¯·å…ˆç™»é™†"</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">"/index.html"</span>).forward(request,response);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//å·²ç™»é™†ï¼Œæ”¾è¡Œè¯·æ±‚</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨å†Œæ‹¦æˆªå™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰€æœ‰çš„WebMvcConfigurerAdapterç»„ä»¶éƒ½ä¼šä¸€èµ·èµ·ä½œç”¨</span></span><br><span class="line">  <span class="meta">@Bean</span> <span class="comment">//å°†ç»„ä»¶æ³¨å†Œåœ¨å®¹å™¨</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> WebMvcConfigurerAdapter <span class="title">webMvcConfigurerAdapter</span><span class="params">()</span></span>&#123;</span><br><span class="line">      WebMvcConfigurerAdapter adapter = <span class="keyword">new</span> WebMvcConfigurerAdapter() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">              registry.addViewController(<span class="string">"/"</span>).setViewName(<span class="string">"login"</span>);</span><br><span class="line">              registry.addViewController(<span class="string">"/index.html"</span>).setViewName(<span class="string">"login"</span>);</span><br><span class="line">              registry.addViewController(<span class="string">"/main.html"</span>).setViewName(<span class="string">"dashboard"</span>);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">//æ³¨å†Œæ‹¦æˆªå™¨</span></span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">              <span class="comment">//super.addInterceptors(registry);</span></span><br><span class="line">              <span class="comment">//é™æ€èµ„æºï¼›  *.css , *.js</span></span><br><span class="line">              <span class="comment">//SpringBootå·²ç»åšå¥½äº†é™æ€èµ„æºæ˜ å°„</span></span><br><span class="line">              registry.addInterceptor(<span class="keyword">new</span> LoginHandlerInterceptor()).addPathPatterns(<span class="string">"/**"</span>)</span><br><span class="line">                      .excludePathPatterns(<span class="string">"/index.html"</span>,<span class="string">"/"</span>,<span class="string">"/user/login"</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">return</span> adapter;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨"><a href="#5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨" class="headerlink" title="5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨"></a>5ï¼‰ã€CRUD-å‘˜å·¥åˆ—è¡¨</h3><p>å®éªŒè¦æ±‚ï¼š</p>
<p>1ï¼‰ã€RestfulCRUDï¼šCRUDæ»¡è¶³Resté£æ ¼ï¼›</p>
<p>URIï¼š  /èµ„æºåç§°/èµ„æºæ ‡è¯†       HTTPè¯·æ±‚æ–¹å¼åŒºåˆ†å¯¹èµ„æºCRUDæ“ä½œ</p>
<table>
<thead>
<tr>
<th></th>
<th>æ™®é€šCRUDï¼ˆuriæ¥åŒºåˆ†æ“ä½œï¼‰</th>
<th>RestfulCRUD</th>
</tr>
</thead>
<tbody>
<tr>
<td>æŸ¥è¯¢</td>
<td>getEmp</td>
<td>empâ€”GET</td>
</tr>
<tr>
<td>æ·»åŠ </td>
<td>addEmp?xxx</td>
<td>empâ€”POST</td>
</tr>
<tr>
<td>ä¿®æ”¹</td>
<td>updateEmp?id=xxx&amp;xxx=xx</td>
<td>emp/{id}â€”PUT</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>deleteEmp?id=1</td>
<td>emp/{id}â€”DELETE</td>
</tr>
</tbody>
</table>
<p>2ï¼‰ã€å®éªŒçš„è¯·æ±‚æ¶æ„;</p>
<table>
<thead>
<tr>
<th>å®éªŒåŠŸèƒ½</th>
<th>è¯·æ±‚URI</th>
<th>è¯·æ±‚æ–¹å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥</td>
<td>emps</td>
<td>GET</td>
</tr>
<tr>
<td>æŸ¥è¯¢æŸä¸ªå‘˜å·¥(æ¥åˆ°ä¿®æ”¹é¡µé¢)</td>
<td>emp/1</td>
<td>GET</td>
</tr>
<tr>
<td>æ¥åˆ°æ·»åŠ é¡µé¢</td>
<td>emp</td>
<td>GET</td>
</tr>
<tr>
<td>æ·»åŠ å‘˜å·¥</td>
<td>emp</td>
<td>POST</td>
</tr>
<tr>
<td>æ¥åˆ°ä¿®æ”¹é¡µé¢ï¼ˆæŸ¥å‡ºå‘˜å·¥è¿›è¡Œä¿¡æ¯å›æ˜¾ï¼‰</td>
<td>emp/1</td>
<td>GET</td>
</tr>
<tr>
<td>ä¿®æ”¹å‘˜å·¥</td>
<td>emp</td>
<td>PUT</td>
</tr>
<tr>
<td>åˆ é™¤å‘˜å·¥</td>
<td>emp/1</td>
<td>DELETE</td>
</tr>
</tbody>
</table>
<p>3ï¼‰ã€å‘˜å·¥åˆ—è¡¨ï¼š</p>
<h4 id="thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–"><a href="#thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–" class="headerlink" title="thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–"></a>thymeleafå…¬å…±é¡µé¢å…ƒç´ æŠ½å–</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1ã€æŠ½å–å…¬å…±ç‰‡æ®µ</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">"copy"</span>&gt;</span></span><br><span class="line">&amp;copy; 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">2ã€å¼•å…¥å…¬å…±ç‰‡æ®µ</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"~&#123;footer :: copy&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">~&#123;templatename::selector&#125;ï¼šæ¨¡æ¿å::é€‰æ‹©å™¨</span><br><span class="line">~&#123;templatename::fragmentname&#125;:æ¨¡æ¿å::ç‰‡æ®µå</span><br><span class="line"></span><br><span class="line">3ã€é»˜è®¤æ•ˆæœï¼š</span><br><span class="line">insertçš„å…¬å…±ç‰‡æ®µåœ¨divæ ‡ç­¾ä¸­</span><br><span class="line">å¦‚æœä½¿ç”¨th:insertç­‰å±æ€§è¿›è¡Œå¼•å…¥ï¼Œå¯ä»¥ä¸ç”¨å†™~&#123;&#125;ï¼š</span><br><span class="line">è¡Œå†…å†™æ³•å¯ä»¥åŠ ä¸Šï¼š[[~&#123;&#125;]];[(~&#123;&#125;)]ï¼›</span><br></pre></td></tr></table></figure>
<p>ä¸‰ç§å¼•å…¥å…¬å…±ç‰‡æ®µçš„thå±æ€§ï¼š</p>
<p><strong>th:insert</strong>ï¼šå°†å…¬å…±ç‰‡æ®µæ•´ä¸ªæ’å…¥åˆ°å£°æ˜å¼•å…¥çš„å…ƒç´ ä¸­</p>
<p><strong>th:replace</strong>ï¼šå°†å£°æ˜å¼•å…¥çš„å…ƒç´ æ›¿æ¢ä¸ºå…¬å…±ç‰‡æ®µ</p>
<p><strong>th:include</strong>ï¼šå°†è¢«å¼•å…¥çš„ç‰‡æ®µçš„å†…å®¹åŒ…å«è¿›è¿™ä¸ªæ ‡ç­¾ä¸­</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">th:fragment</span>=<span class="string">"copy"</span>&gt;</span></span><br><span class="line">&amp;copy; 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"></span><br><span class="line">å¼•å…¥æ–¹å¼</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:include</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">æ•ˆæœ</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    &amp;copy; 2011 The Good Thymes Virtual Grocery</span><br><span class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">&amp;copy; 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">&amp;copy; 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¼•å…¥ç‰‡æ®µçš„æ—¶å€™ä¼ å…¥å‚æ•°ï¼š </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"col-md-2 d-none d-md-block bg-light sidebar"</span> <span class="attr">id</span>=<span class="string">"sidebar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sidebar-sticky"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav flex-column"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"nav-item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"nav-link active"</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">th:class</span>=<span class="string">"$&#123;activeUri=='main.html'?'nav-link active':'nav-link'&#125;"</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/main.html&#125;"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">width</span>=<span class="string">"24"</span> <span class="attr">height</span>=<span class="string">"24"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 24 24"</span> <span class="attr">fill</span>=<span class="string">"none"</span> <span class="attr">stroke</span>=<span class="string">"currentColor"</span> <span class="attr">stroke-width</span>=<span class="string">"2"</span> <span class="attr">stroke-linecap</span>=<span class="string">"round"</span> <span class="attr">stroke-linejoin</span>=<span class="string">"round"</span> <span class="attr">class</span>=<span class="string">"feather feather-home"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">"9 22 9 12 15 12 15 22"</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Dashboard <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sr-only"</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥ä¾§è¾¹æ ;ä¼ å…¥å‚æ•°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"commons/bar::#sidebar(activeUri='emps')"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ "><a href="#6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ " class="headerlink" title="6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ "></a>6ï¼‰ã€CRUD-å‘˜å·¥æ·»åŠ </h3><p>æ·»åŠ é¡µé¢</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>LastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"zhangsan"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"zhangsan@atguigu.com"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-check form-check-inline"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-check-input"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span>  <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"form-check-label"</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-check form-check-inline"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-check-input"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span>  <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"form-check-label"</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>department<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>3<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>4<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span>&gt;</span>5<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Birth<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"zhangsan"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æäº¤çš„æ•°æ®æ ¼å¼ä¸å¯¹ï¼šç”Ÿæ—¥ï¼šæ—¥æœŸï¼›</p>
<p>2017-12-12ï¼›2017/12/12ï¼›2017.12.12ï¼›</p>
<p>æ—¥æœŸçš„æ ¼å¼åŒ–ï¼›SpringMVCå°†é¡µé¢æäº¤çš„å€¼éœ€è¦è½¬æ¢ä¸ºæŒ‡å®šçš„ç±»å‹;</p>
<p>2017-12-12â€”Dateï¼› ç±»å‹è½¬æ¢ï¼Œæ ¼å¼åŒ–;</p>
<p>é»˜è®¤æ—¥æœŸæ˜¯æŒ‰ç…§/çš„æ–¹å¼ï¼›</p>
<h3 id="7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹"><a href="#7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹" class="headerlink" title="7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹"></a>7ï¼‰ã€CRUD-å‘˜å·¥ä¿®æ”¹</h3><p>ä¿®æ”¹æ·»åŠ äºŒåˆä¸€è¡¨å•</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--éœ€è¦åŒºåˆ†æ˜¯å‘˜å·¥ä¿®æ”¹è¿˜æ˜¯æ·»åŠ ï¼›--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">"@&#123;/emp&#125;"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å‘é€putè¯·æ±‚ä¿®æ”¹å‘˜å·¥æ•°æ®--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">1ã€SpringMVCä¸­é…ç½®HiddenHttpMethodFilter;ï¼ˆSpringBootè‡ªåŠ¨é…ç½®å¥½çš„ï¼‰</span></span><br><span class="line"><span class="comment">2ã€é¡µé¢åˆ›å»ºä¸€ä¸ªpostè¡¨å•</span></span><br><span class="line"><span class="comment">3ã€åˆ›å»ºä¸€ä¸ªinputé¡¹ï¼Œname="_method";å€¼å°±æ˜¯æˆ‘ä»¬æŒ‡å®šçš„è¯·æ±‚æ–¹å¼</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">value</span>=<span class="string">"put"</span> <span class="attr">th:if</span>=<span class="string">"$&#123;emp!=null&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">th:if</span>=<span class="string">"$&#123;emp!=null&#125;"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;emp.id&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>LastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"lastName"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"zhangsan"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;emp!=null&#125;?$&#123;emp.lastName&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"zhangsan@atguigu.com"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;emp!=null&#125;?$&#123;emp.email&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-check form-check-inline"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-check-input"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">th:checked</span>=<span class="string">"$&#123;emp!=null&#125;?$&#123;emp.gender==1&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"form-check-label"</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-check form-check-inline"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-check-input"</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"0"</span> <span class="attr">th:checked</span>=<span class="string">"$&#123;emp!=null&#125;?$&#123;emp.gender==0&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"form-check-label"</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>department<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æäº¤çš„æ˜¯éƒ¨é—¨çš„id--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"department.id"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">th:selected</span>=<span class="string">"$&#123;emp!=null&#125;?$&#123;dept.id == emp.department.id&#125;"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;dept.id&#125;"</span> <span class="attr">th:each</span>=<span class="string">"dept:$&#123;depts&#125;"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;dept.departmentName&#125;"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Birth<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"birth"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">placeholder</span>=<span class="string">"zhangsan"</span> <span class="attr">th:value</span>=<span class="string">"$&#123;emp!=null&#125;?$&#123;#dates.format(emp.birth, 'yyyy-MM-dd HH:mm')&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp!=null&#125;?'ä¿®æ”¹':'æ·»åŠ '"</span>&gt;</span>æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="8ï¼‰ã€CRUD-å‘˜å·¥åˆ é™¤"><a href="#8ï¼‰ã€CRUD-å‘˜å·¥åˆ é™¤" class="headerlink" title="8ï¼‰ã€CRUD-å‘˜å·¥åˆ é™¤"></a>8ï¼‰ã€CRUD-å‘˜å·¥åˆ é™¤</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"emp:$&#123;emps&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp.id&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>[[$&#123;emp.lastName&#125;]]<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp.email&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp.gender&#125;==0?'å¥³':'ç”·'"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;emp.department.departmentName&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#dates.format(emp.birth, 'yyyy-MM-dd HH:mm')&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn btn-sm btn-primary"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/emp/&#125;+$&#123;emp.id&#125;"</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">th:attr</span>=<span class="string">"del_uri=@&#123;/emp/&#125;+$&#123;emp.id&#125;"</span> <span class="attr">class</span>=<span class="string">"btn btn-sm btn-danger deleteBtn"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">".deleteBtn"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//åˆ é™¤å½“å‰å‘˜å·¥çš„</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#deleteEmpForm"</span>).attr(<span class="string">"action"</span>,$(<span class="keyword">this</span>).attr(<span class="string">"del_uri"</span>)).submit();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="7ã€é”™è¯¯å¤„ç†æœºåˆ¶"><a href="#7ã€é”™è¯¯å¤„ç†æœºåˆ¶" class="headerlink" title="7ã€é”™è¯¯å¤„ç†æœºåˆ¶"></a>7ã€é”™è¯¯å¤„ç†æœºåˆ¶</h2><h3 id="1ï¼‰ã€SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶"><a href="#1ï¼‰ã€SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶" class="headerlink" title="1ï¼‰ã€SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶"></a>1ï¼‰ã€SpringBooté»˜è®¤çš„é”™è¯¯å¤„ç†æœºåˆ¶</h3><p>é»˜è®¤æ•ˆæœï¼š</p>
<p>â€‹        1ï¼‰ã€æµè§ˆå™¨ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤çš„é”™è¯¯é¡µé¢</p>
<p><img src="images/æœç‹—æˆªå›¾20180226173408.png" alt=""></p>
<p>  æµè§ˆå™¨å‘é€è¯·æ±‚çš„è¯·æ±‚å¤´ï¼š</p>
<p><img src="images/æœç‹—æˆªå›¾20180226180347.png" alt=""></p>
<p>â€‹        2ï¼‰ã€å¦‚æœæ˜¯å…¶ä»–å®¢æˆ·ç«¯ï¼Œé»˜è®¤å“åº”ä¸€ä¸ªjsonæ•°æ®</p>
<p><img src="images/æœç‹—æˆªå›¾20180226173527.png" alt=""></p>
<p>â€‹        <img src="images/æœç‹—æˆªå›¾20180226180504.png" alt=""></p>
<p>åŸç†ï¼š</p>
<p>â€‹    å¯ä»¥å‚ç…§ErrorMvcAutoConfigurationï¼›é”™è¯¯å¤„ç†çš„è‡ªåŠ¨é…ç½®ï¼›</p>
<pre><code>ç»™å®¹å™¨ä¸­æ·»åŠ äº†ä»¥ä¸‹ç»„ä»¶
</code></pre><p>â€‹    1ã€DefaultErrorAttributesï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å¸®æˆ‘ä»¬åœ¨é¡µé¢å…±äº«ä¿¡æ¯ï¼›</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getErrorAttributes</span><span class="params">(RequestAttributes requestAttributes,</span></span></span><br><span class="line"><span class="function"><span class="params">			<span class="keyword">boolean</span> includeStackTrace)</span> </span>&#123;</span><br><span class="line">		Map&lt;String, Object&gt; errorAttributes = <span class="keyword">new</span> LinkedHashMap&lt;String, Object&gt;();</span><br><span class="line">		errorAttributes.put(<span class="string">"timestamp"</span>, <span class="keyword">new</span> Date());</span><br><span class="line">		addStatus(errorAttributes, requestAttributes);</span><br><span class="line">		addErrorDetails(errorAttributes, requestAttributes, includeStackTrace);</span><br><span class="line">		addPath(errorAttributes, requestAttributes);</span><br><span class="line">		<span class="keyword">return</span> errorAttributes;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹    2ã€BasicErrorControllerï¼šå¤„ç†é»˜è®¤/errorè¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BasicErrorController</span> <span class="keyword">extends</span> <span class="title">AbstractErrorController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(produces = <span class="string">"text/html"</span>)<span class="comment">//äº§ç”Ÿhtmlç±»å‹çš„æ•°æ®ï¼›æµè§ˆå™¨å‘é€çš„è¯·æ±‚æ¥åˆ°è¿™ä¸ªæ–¹æ³•å¤„ç†</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">errorHtml</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">			HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">		HttpStatus status = getStatus(request);</span><br><span class="line">		Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes(</span><br><span class="line">				request, isIncludeStackTrace(request, MediaType.TEXT_HTML)));</span><br><span class="line">		response.setStatus(status.value());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å»å“ªä¸ªé¡µé¢ä½œä¸ºé”™è¯¯é¡µé¢ï¼›åŒ…å«é¡µé¢åœ°å€å’Œé¡µé¢å†…å®¹</span></span><br><span class="line">		ModelAndView modelAndView = resolveErrorView(request, response, status, model);</span><br><span class="line">		<span class="keyword">return</span> (modelAndView == <span class="keyword">null</span> ? <span class="keyword">new</span> ModelAndView(<span class="string">"error"</span>, model) : modelAndView);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping</span></span><br><span class="line">	<span class="meta">@ResponseBody</span>    <span class="comment">//äº§ç”Ÿjsonæ•°æ®ï¼Œå…¶ä»–å®¢æˆ·ç«¯æ¥åˆ°è¿™ä¸ªæ–¹æ³•å¤„ç†ï¼›</span></span><br><span class="line">	<span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) &#123;</span><br><span class="line">		Map&lt;String, Object&gt; body = getErrorAttributes(request,</span><br><span class="line">				isIncludeStackTrace(request, MediaType.ALL));</span><br><span class="line">		HttpStatus status = getStatus(request);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(body, status);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹    3ã€ErrorPageCustomizerï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;error.path:/error&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String path = <span class="string">"/error"</span>;  ç³»ç»Ÿå‡ºç°é”™è¯¯ä»¥åæ¥åˆ°errorè¯·æ±‚è¿›è¡Œå¤„ç†ï¼›ï¼ˆweb.xmlæ³¨å†Œçš„é”™è¯¯é¡µé¢è§„åˆ™ï¼‰</span><br></pre></td></tr></table></figure>
<p>â€‹    4ã€DefaultErrorViewResolverï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(HttpServletRequest request, HttpStatus status,</span></span></span><br><span class="line"><span class="function"><span class="params">			Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">		ModelAndView modelAndView = resolve(String.valueOf(status), model);</span><br><span class="line">		<span class="keyword">if</span> (modelAndView == <span class="keyword">null</span> &amp;&amp; SERIES_VIEWS.containsKey(status.series())) &#123;</span><br><span class="line">			modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> modelAndView;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> ModelAndView <span class="title">resolve</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//é»˜è®¤SpringBootå¯ä»¥å»æ‰¾åˆ°ä¸€ä¸ªé¡µé¢ï¼Ÿ  error/404</span></span><br><span class="line">		String errorViewName = <span class="string">"error/"</span> + viewName;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//æ¨¡æ¿å¼•æ“å¯ä»¥è§£æè¿™ä¸ªé¡µé¢åœ°å€å°±ç”¨æ¨¡æ¿å¼•æ“è§£æ</span></span><br><span class="line">		TemplateAvailabilityProvider provider = <span class="keyword">this</span>.templateAvailabilityProviders</span><br><span class="line">				.getProvider(errorViewName, <span class="keyword">this</span>.applicationContext);</span><br><span class="line">		<span class="keyword">if</span> (provider != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//æ¨¡æ¿å¼•æ“å¯ç”¨çš„æƒ…å†µä¸‹è¿”å›åˆ°errorViewNameæŒ‡å®šçš„è§†å›¾åœ°å€</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(errorViewName, model);</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">//æ¨¡æ¿å¼•æ“ä¸å¯ç”¨ï¼Œå°±åœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾errorViewNameå¯¹åº”çš„é¡µé¢   error/404.html</span></span><br><span class="line">		<span class="keyword">return</span> resolveResource(errorViewName, model);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹    æ­¥éª¤ï¼š</p>
<p>â€‹        ä¸€ä½†ç³»ç»Ÿå‡ºç°4xxæˆ–è€…5xxä¹‹ç±»çš„é”™è¯¯ï¼›ErrorPageCustomizerå°±ä¼šç”Ÿæ•ˆï¼ˆå®šåˆ¶é”™è¯¯çš„å“åº”è§„åˆ™ï¼‰ï¼›å°±ä¼šæ¥åˆ°/errorè¯·æ±‚ï¼›å°±ä¼šè¢«<strong>BasicErrorController</strong>å¤„ç†ï¼›</p>
<p>â€‹        1ï¼‰å“åº”é¡µé¢ï¼›å»å“ªä¸ªé¡µé¢æ˜¯ç”±<strong>DefaultErrorViewResolver</strong>è§£æå¾—åˆ°çš„ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> ModelAndView <span class="title">resolveErrorView</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">      HttpServletResponse response, HttpStatus status, Map&lt;String, Object&gt; model)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ‰€æœ‰çš„ErrorViewResolverå¾—åˆ°ModelAndView</span></span><br><span class="line">   <span class="keyword">for</span> (ErrorViewResolver resolver : <span class="keyword">this</span>.errorViewResolvers) &#123;</span><br><span class="line">      ModelAndView modelAndView = resolver.resolveErrorView(request, status, model);</span><br><span class="line">      <span class="keyword">if</span> (modelAndView != <span class="keyword">null</span>) &#123;</span><br><span class="line">         <span class="keyword">return</span> modelAndView;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š"><a href="#2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š" class="headerlink" title="2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š"></a>2ï¼‰ã€å¦‚æœå®šåˆ¶é”™è¯¯å“åº”ï¼š</h3><h4 id="1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›"><a href="#1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›" class="headerlink" title="1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›"></a><strong>1ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„é¡µé¢ï¼›</strong></h4><p>â€‹            <strong>1ï¼‰ã€æœ‰æ¨¡æ¿å¼•æ“çš„æƒ…å†µä¸‹ï¼›error/çŠ¶æ€ç ;</strong> ã€å°†é”™è¯¯é¡µé¢å‘½åä¸º  é”™è¯¯çŠ¶æ€ç .html æ”¾åœ¨æ¨¡æ¿å¼•æ“æ–‡ä»¶å¤¹é‡Œé¢çš„ erroræ–‡ä»¶å¤¹ä¸‹ã€‘ï¼Œå‘ç”Ÿæ­¤çŠ¶æ€ç çš„é”™è¯¯å°±ä¼šæ¥åˆ°  å¯¹åº”çš„é¡µé¢ï¼›</p>
<p>â€‹            æˆ‘ä»¬å¯ä»¥ä½¿ç”¨4xxå’Œ5xxä½œä¸ºé”™è¯¯é¡µé¢çš„æ–‡ä»¶åæ¥åŒ¹é…è¿™ç§ç±»å‹çš„æ‰€æœ‰é”™è¯¯ï¼Œç²¾ç¡®ä¼˜å…ˆï¼ˆä¼˜å…ˆå¯»æ‰¾ç²¾ç¡®çš„çŠ¶æ€ç .htmlï¼‰ï¼›        </p>
<p>â€‹            é¡µé¢èƒ½è·å–çš„ä¿¡æ¯ï¼›</p>
<p>â€‹                timestampï¼šæ—¶é—´æˆ³</p>
<p>â€‹                statusï¼šçŠ¶æ€ç </p>
<p>â€‹                errorï¼šé”™è¯¯æç¤º</p>
<p>â€‹                exceptionï¼šå¼‚å¸¸å¯¹è±¡</p>
<p>â€‹                messageï¼šå¼‚å¸¸æ¶ˆæ¯</p>
<p>â€‹                errorsï¼šJSR303æ•°æ®æ ¡éªŒçš„é”™è¯¯éƒ½åœ¨è¿™é‡Œ</p>
<p>â€‹            2ï¼‰ã€æ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼ˆæ¨¡æ¿å¼•æ“æ‰¾ä¸åˆ°è¿™ä¸ªé”™è¯¯é¡µé¢ï¼‰ï¼Œé™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ï¼›</p>
<p>â€‹            3ï¼‰ã€ä»¥ä¸Šéƒ½æ²¡æœ‰é”™è¯¯é¡µé¢ï¼Œå°±æ˜¯é»˜è®¤æ¥åˆ°SpringBooté»˜è®¤çš„é”™è¯¯æç¤ºé¡µé¢ï¼›</p>
<h4 id="2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›"><a href="#2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›" class="headerlink" title="2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›"></a>2ï¼‰ã€å¦‚ä½•å®šåˆ¶é”™è¯¯çš„jsonæ•°æ®ï¼›</h4><p>â€‹        1ï¼‰ã€è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†&amp;è¿”å›å®šåˆ¶jsonæ•°æ®ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(UserNotExistException.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">handleException</span><span class="params">(Exception e)</span></span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"code"</span>,<span class="string">"user.notexist"</span>);</span><br><span class="line">        map.put(<span class="string">"message"</span>,e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ²¡æœ‰è‡ªé€‚åº”æ•ˆæœ...</span></span><br></pre></td></tr></table></figure>
<p>â€‹        2ï¼‰ã€è½¬å‘åˆ°/errorè¿›è¡Œè‡ªé€‚åº”å“åº”æ•ˆæœå¤„ç†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler</span>(UserNotExistException.class)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">handleException</span><span class="params">(Exception e, HttpServletRequest request)</span></span>&#123;</span><br><span class="line">       Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       <span class="comment">//ä¼ å…¥æˆ‘ä»¬è‡ªå·±çš„é”™è¯¯çŠ¶æ€ç   4xx 5xxï¼Œå¦åˆ™å°±ä¸ä¼šè¿›å…¥å®šåˆ¶é”™è¯¯é¡µé¢çš„è§£ææµç¨‹</span></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * Integer statusCode = (Integer) request</span></span><br><span class="line"><span class="comment">        .getAttribute("javax.servlet.error.status_code");</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       request.setAttribute(<span class="string">"javax.servlet.error.status_code"</span>,<span class="number">500</span>);</span><br><span class="line">       map.put(<span class="string">"code"</span>,<span class="string">"user.notexist"</span>);</span><br><span class="line">       map.put(<span class="string">"message"</span>,e.getMessage());</span><br><span class="line">       <span class="comment">//è½¬å‘åˆ°/error</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">"forward:/error"</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h4 id="3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›"><a href="#3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›" class="headerlink" title="3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›"></a>3ï¼‰ã€å°†æˆ‘ä»¬çš„å®šåˆ¶æ•°æ®æºå¸¦å‡ºå»ï¼›</h4><p>å‡ºç°é”™è¯¯ä»¥åï¼Œä¼šæ¥åˆ°/errorè¯·æ±‚ï¼Œä¼šè¢«BasicErrorControllerå¤„ç†ï¼Œå“åº”å‡ºå»å¯ä»¥è·å–çš„æ•°æ®æ˜¯ç”±getErrorAttributeså¾—åˆ°çš„ï¼ˆæ˜¯AbstractErrorControllerï¼ˆErrorControllerï¼‰è§„å®šçš„æ–¹æ³•ï¼‰ï¼›</p>
<p>â€‹    1ã€å®Œå…¨æ¥ç¼–å†™ä¸€ä¸ªErrorControllerçš„å®ç°ç±»ã€æˆ–è€…æ˜¯ç¼–å†™AbstractErrorControllerçš„å­ç±»ã€‘ï¼Œæ”¾åœ¨å®¹å™¨ä¸­ï¼›</p>
<p>â€‹    2ã€é¡µé¢ä¸Šèƒ½ç”¨çš„æ•°æ®ï¼Œæˆ–è€…æ˜¯jsonè¿”å›èƒ½ç”¨çš„æ•°æ®éƒ½æ˜¯é€šè¿‡errorAttributes.getErrorAttributeså¾—åˆ°ï¼›</p>
<p>â€‹            å®¹å™¨ä¸­DefaultErrorAttributes.getErrorAttributes()ï¼›é»˜è®¤è¿›è¡Œæ•°æ®å¤„ç†çš„ï¼›</p>
<p>è‡ªå®šä¹‰ErrorAttributes</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»™å®¹å™¨ä¸­åŠ å…¥æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ErrorAttributes</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyErrorAttributes</span> <span class="keyword">extends</span> <span class="title">DefaultErrorAttributes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getErrorAttributes</span><span class="params">(RequestAttributes requestAttributes, <span class="keyword">boolean</span> includeStackTrace)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">super</span>.getErrorAttributes(requestAttributes, includeStackTrace);</span><br><span class="line">        map.put(<span class="string">"company"</span>,<span class="string">"atguigu"</span>);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆçš„æ•ˆæœï¼šå“åº”æ˜¯è‡ªé€‚åº”çš„ï¼Œå¯ä»¥é€šè¿‡å®šåˆ¶ErrorAttributesæ”¹å˜éœ€è¦è¿”å›çš„å†…å®¹ï¼Œ</p>
<p><img src="images/æœç‹—æˆªå›¾20180228135513.png" alt=""></p>
<h2 id="8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨"><a href="#8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨" class="headerlink" title="8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨"></a>8ã€é…ç½®åµŒå…¥å¼Servletå®¹å™¨</h2><p>SpringBooté»˜è®¤ä½¿ç”¨Tomcatä½œä¸ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›</p>
<p><img src="images/æœç‹—æˆªå›¾20180301142915.png" alt=""></p>
<p>é—®é¢˜ï¼Ÿ</p>
<h3 id="1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›"><a href="#1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›" class="headerlink" title="1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›"></a>1ï¼‰ã€å¦‚ä½•å®šåˆ¶å’Œä¿®æ”¹Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›</h3><p>1ã€ä¿®æ”¹å’Œserveræœ‰å…³çš„é…ç½®ï¼ˆServerPropertiesã€ä¹Ÿæ˜¯EmbeddedServletContainerCustomizerã€‘ï¼‰ï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server.port=8081</span><br><span class="line">server.context-path=/crud</span><br><span class="line"></span><br><span class="line">server.tomcat.uri-encoding=UTF-8</span><br><span class="line"></span><br><span class="line">//é€šç”¨çš„Servletå®¹å™¨è®¾ç½®</span><br><span class="line">server.xxx</span><br><span class="line">//Tomcatçš„è®¾ç½®</span><br><span class="line">server.tomcat.xxx</span><br></pre></td></tr></table></figure>
<p>2ã€ç¼–å†™ä¸€ä¸ª<strong>EmbeddedServletContainerCustomizer</strong>ï¼šåµŒå…¥å¼çš„Servletå®¹å™¨çš„å®šåˆ¶å™¨ï¼›æ¥ä¿®æ”¹Servletå®¹å™¨çš„é…ç½®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span>  <span class="comment">//ä¸€å®šè¦å°†è¿™ä¸ªå®šåˆ¶å™¨åŠ å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> EmbeddedServletContainerCustomizer <span class="title">embeddedServletContainerCustomizer</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> EmbeddedServletContainerCustomizer() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å®šåˆ¶åµŒå…¥å¼çš„Servletå®¹å™¨ç›¸å…³çš„è§„åˆ™</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(ConfigurableEmbeddedServletContainer container)</span> </span>&#123;</span><br><span class="line">            container.setPort(<span class="number">8083</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘"><a href="#2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘" class="headerlink" title="2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘"></a>2ï¼‰ã€æ³¨å†ŒServletä¸‰å¤§ç»„ä»¶ã€Servletã€Filterã€Listenerã€‘</h3><p>ç”±äºSpringBooté»˜è®¤æ˜¯ä»¥jaråŒ…çš„æ–¹å¼å¯åŠ¨åµŒå…¥å¼çš„Servletå®¹å™¨æ¥å¯åŠ¨SpringBootçš„webåº”ç”¨ï¼Œæ²¡æœ‰web.xmlæ–‡ä»¶ã€‚</p>
<p>æ³¨å†Œä¸‰å¤§ç»„ä»¶ç”¨ä»¥ä¸‹æ–¹å¼</p>
<p>ServletRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨å†Œä¸‰å¤§ç»„ä»¶</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">myServlet</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ServletRegistrationBean registrationBean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> MyServlet(),<span class="string">"/myServlet"</span>);</span><br><span class="line">    <span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>FilterRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">myFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FilterRegistrationBean registrationBean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">    registrationBean.setFilter(<span class="keyword">new</span> MyFilter());</span><br><span class="line">    registrationBean.setUrlPatterns(Arrays.asList(<span class="string">"/hello"</span>,<span class="string">"/myServlet"</span>));</span><br><span class="line">    <span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ServletListenerRegistrationBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletListenerRegistrationBean <span class="title">myListener</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ServletListenerRegistrationBean&lt;MyListener&gt; registrationBean = <span class="keyword">new</span> ServletListenerRegistrationBean&lt;&gt;(<span class="keyword">new</span> MyListener());</span><br><span class="line">    <span class="keyword">return</span> registrationBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SpringBootå¸®æˆ‘ä»¬è‡ªåŠ¨SpringMVCçš„æ—¶å€™ï¼Œè‡ªåŠ¨çš„æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼›DIspatcherServletï¼›</p>
<p>DispatcherServletAutoConfigurationä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span>(name = DEFAULT_DISPATCHER_SERVLET_REGISTRATION_BEAN_NAME)</span><br><span class="line"><span class="meta">@ConditionalOnBean</span>(value = DispatcherServlet.class, name = DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">dispatcherServletRegistration</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">      DispatcherServlet dispatcherServlet)</span> </span>&#123;</span><br><span class="line">   ServletRegistrationBean registration = <span class="keyword">new</span> ServletRegistrationBean(</span><br><span class="line">         dispatcherServlet, <span class="keyword">this</span>.serverProperties.getServletMapping());</span><br><span class="line">    <span class="comment">//é»˜è®¤æ‹¦æˆªï¼š /  æ‰€æœ‰è¯·æ±‚ï¼›åŒ…é™æ€èµ„æºï¼Œä½†æ˜¯ä¸æ‹¦æˆªjspè¯·æ±‚ï¼›   /*ä¼šæ‹¦æˆªjsp</span></span><br><span class="line">    <span class="comment">//å¯ä»¥é€šè¿‡server.servletPathæ¥ä¿®æ”¹SpringMVCå‰ç«¯æ§åˆ¶å™¨é»˜è®¤æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">    </span><br><span class="line">   registration.setName(DEFAULT_DISPATCHER_SERVLET_BEAN_NAME);</span><br><span class="line">   registration.setLoadOnStartup(</span><br><span class="line">         <span class="keyword">this</span>.webMvcProperties.getServlet().getLoadOnStartup());</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">this</span>.multipartConfig != <span class="keyword">null</span>) &#123;</span><br><span class="line">      registration.setMultipartConfig(<span class="keyword">this</span>.multipartConfig);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> registration;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ã€SpringBootèƒ½ä¸èƒ½æ”¯æŒå…¶ä»–çš„Servletå®¹å™¨ï¼›</p>
<h3 id="3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨"><a href="#3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨" class="headerlink" title="3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨"></a>3ï¼‰ã€æ›¿æ¢ä¸ºå…¶ä»–åµŒå…¥å¼Servletå®¹å™¨</h3><p><img src="images/æœç‹—æˆªå›¾20180302114401.png" alt=""></p>
<p>é»˜è®¤æ”¯æŒï¼š</p>
<p>Tomcatï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   å¼•å…¥webæ¨¡å—é»˜è®¤å°±æ˜¯ä½¿ç”¨åµŒå…¥å¼çš„Tomcatä½œä¸ºServletå®¹å™¨ï¼›</span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Jetty</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥webæ¨¡å— --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥å…¶ä»–çš„Servletå®¹å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Undertow</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥webæ¨¡å— --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥å…¶ä»–çš„Servletå®¹å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›"><a href="#4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›" class="headerlink" title="4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›"></a>4ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨è‡ªåŠ¨é…ç½®åŸç†ï¼›</h3><p>EmbeddedServletContainerAutoConfigurationï¼šåµŒå…¥å¼çš„Servletå®¹å™¨è‡ªåŠ¨é…ç½®ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfigureOrder</span>(Ordered.HIGHEST_PRECEDENCE)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="meta">@Import</span>(BeanPostProcessorsRegistrar.class)</span><br><span class="line"><span class="comment">//å¯¼å…¥BeanPostProcessorsRegistrarï¼šSpringæ³¨è§£ç‰ˆï¼›ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶</span></span><br><span class="line"><span class="comment">//å¯¼å…¥äº†EmbeddedServletContainerCustomizerBeanPostProcessorï¼š</span></span><br><span class="line"><span class="comment">//åç½®å¤„ç†å™¨ï¼šbeanåˆå§‹åŒ–å‰åï¼ˆåˆ›å»ºå®Œå¯¹è±¡ï¼Œè¿˜æ²¡èµ‹å€¼èµ‹å€¼ï¼‰æ‰§è¡Œåˆå§‹åŒ–å·¥ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedServletContainerAutoConfiguration</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Configuration</span></span><br><span class="line">	<span class="meta">@ConditionalOnClass</span>(&#123; Servlet.class, Tomcat.class &#125;)<span class="comment">//åˆ¤æ–­å½“å‰æ˜¯å¦å¼•å…¥äº†Tomcatä¾èµ–ï¼›</span></span><br><span class="line">	<span class="meta">@ConditionalOnMissingBean</span>(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)<span class="comment">//åˆ¤æ–­å½“å‰å®¹å™¨æ²¡æœ‰ç”¨æˆ·è‡ªå·±å®šä¹‰EmbeddedServletContainerFactoryï¼šåµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼›ä½œç”¨ï¼šåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedTomcat</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> TomcatEmbeddedServletContainerFactory <span class="title">tomcatEmbeddedServletContainerFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> TomcatEmbeddedServletContainerFactory();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Nested configuration if Jetty is being used.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Configuration</span></span><br><span class="line">	<span class="meta">@ConditionalOnClass</span>(&#123; Servlet.class, Server.class, Loader.class,</span><br><span class="line">			WebAppContext.class &#125;)</span><br><span class="line">	<span class="meta">@ConditionalOnMissingBean</span>(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedJetty</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> JettyEmbeddedServletContainerFactory <span class="title">jettyEmbeddedServletContainerFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> JettyEmbeddedServletContainerFactory();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Nested configuration if Undertow is being used.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Configuration</span></span><br><span class="line">	<span class="meta">@ConditionalOnClass</span>(&#123; Servlet.class, Undertow.class, SslClientAuthMode.class &#125;)</span><br><span class="line">	<span class="meta">@ConditionalOnMissingBean</span>(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EmbeddedUndertow</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> UndertowEmbeddedServletContainerFactory <span class="title">undertowEmbeddedServletContainerFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> UndertowEmbeddedServletContainerFactory();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>1ï¼‰ã€EmbeddedServletContainerFactoryï¼ˆåµŒå…¥å¼Servletå®¹å™¨å·¥å‚ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmbeddedServletContainerFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//è·å–åµŒå…¥å¼çš„Servletå®¹å™¨</span></span><br><span class="line">   <span class="function">EmbeddedServletContainer <span class="title">getEmbeddedServletContainer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">         ServletContextInitializer... initializers)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="images/æœç‹—æˆªå›¾20180302144835.png" alt=""></p>
<p>2ï¼‰ã€EmbeddedServletContainerï¼šï¼ˆåµŒå…¥å¼çš„Servletå®¹å™¨ï¼‰</p>
<p><img src="images/æœç‹—æˆªå›¾20180302144910.png" alt=""></p>
<p>3ï¼‰ã€ä»¥<strong>TomcatEmbeddedServletContainerFactory</strong>ä¸ºä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> EmbeddedServletContainer <span class="title">getEmbeddedServletContainer</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">      ServletContextInitializer... initializers)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºä¸€ä¸ªTomcat</span></span><br><span class="line">   Tomcat tomcat = <span class="keyword">new</span> Tomcat();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//é…ç½®Tomcatçš„åŸºæœ¬ç¯èŠ‚</span></span><br><span class="line">   File baseDir = (<span class="keyword">this</span>.baseDirectory != <span class="keyword">null</span> ? <span class="keyword">this</span>.baseDirectory</span><br><span class="line">         : createTempDir(<span class="string">"tomcat"</span>));</span><br><span class="line">   tomcat.setBaseDir(baseDir.getAbsolutePath());</span><br><span class="line">   Connector connector = <span class="keyword">new</span> Connector(<span class="keyword">this</span>.protocol);</span><br><span class="line">   tomcat.getService().addConnector(connector);</span><br><span class="line">   customizeConnector(connector);</span><br><span class="line">   tomcat.setConnector(connector);</span><br><span class="line">   tomcat.getHost().setAutoDeploy(<span class="keyword">false</span>);</span><br><span class="line">   configureEngine(tomcat.getEngine());</span><br><span class="line">   <span class="keyword">for</span> (Connector additionalConnector : <span class="keyword">this</span>.additionalTomcatConnectors) &#123;</span><br><span class="line">      tomcat.getService().addConnector(additionalConnector);</span><br><span class="line">   &#125;</span><br><span class="line">   prepareContext(tomcat.getHost(), initializers);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å°†é…ç½®å¥½çš„Tomcatä¼ å…¥è¿›å»ï¼Œè¿”å›ä¸€ä¸ªEmbeddedServletContainerï¼›å¹¶ä¸”å¯åŠ¨TomcatæœåŠ¡å™¨</span></span><br><span class="line">   <span class="keyword">return</span> getTomcatEmbeddedServletContainer(tomcat);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ï¼‰ã€æˆ‘ä»¬å¯¹åµŒå…¥å¼å®¹å™¨çš„é…ç½®ä¿®æ”¹æ˜¯æ€ä¹ˆç”Ÿæ•ˆï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerPropertiesã€EmbeddedServletContainerCustomizer</span><br></pre></td></tr></table></figure>
<p><strong>EmbeddedServletContainerCustomizer</strong>ï¼šå®šåˆ¶å™¨å¸®æˆ‘ä»¬ä¿®æ”¹äº†Servletå®¹å™¨çš„é…ç½®ï¼Ÿ</p>
<p>æ€ä¹ˆä¿®æ”¹çš„åŸç†ï¼Ÿ</p>
<p>5ï¼‰ã€å®¹å™¨ä¸­å¯¼å…¥äº†<strong>EmbeddedServletContainerCustomizerBeanPostProcessor</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆå§‹åŒ–ä¹‹å‰</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœå½“å‰åˆå§‹åŒ–çš„æ˜¯ä¸€ä¸ªConfigurableEmbeddedServletContainerç±»å‹çš„ç»„ä»¶</span></span><br><span class="line">   <span class="keyword">if</span> (bean <span class="keyword">instanceof</span> ConfigurableEmbeddedServletContainer) &#123;</span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">      postProcessBeforeInitialization((ConfigurableEmbeddedServletContainer) bean);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">postProcessBeforeInitialization</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">			ConfigurableEmbeddedServletContainer bean)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªå®šåˆ¶å™¨çš„customizeæ–¹æ³•æ¥ç»™Servletå®¹å™¨è¿›è¡Œå±æ€§èµ‹å€¼ï¼›</span></span><br><span class="line">    <span class="keyword">for</span> (EmbeddedServletContainerCustomizer customizer : getCustomizers()) &#123;</span><br><span class="line">        customizer.customize(bean);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Collection&lt;EmbeddedServletContainerCustomizer&gt; <span class="title">getCustomizers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.customizers == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// Look up does not include the parent context</span></span><br><span class="line">        <span class="keyword">this</span>.customizers = <span class="keyword">new</span> ArrayList&lt;EmbeddedServletContainerCustomizer&gt;(</span><br><span class="line">            <span class="keyword">this</span>.beanFactory</span><br><span class="line">            <span class="comment">//ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰è¿™è‘›ç±»å‹çš„ç»„ä»¶ï¼šEmbeddedServletContainerCustomizer</span></span><br><span class="line">            <span class="comment">//å®šåˆ¶Servletå®¹å™¨ï¼Œç»™å®¹å™¨ä¸­å¯ä»¥æ·»åŠ ä¸€ä¸ªEmbeddedServletContainerCustomizerç±»å‹çš„ç»„ä»¶</span></span><br><span class="line">            .getBeansOfType(EmbeddedServletContainerCustomizer.class,</span><br><span class="line">                            <span class="keyword">false</span>, <span class="keyword">false</span>)</span><br><span class="line">            .values());</span><br><span class="line">        Collections.sort(<span class="keyword">this</span>.customizers, AnnotationAwareOrderComparator.INSTANCE);</span><br><span class="line">        <span class="keyword">this</span>.customizers = Collections.unmodifiableList(<span class="keyword">this</span>.customizers);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.customizers;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ServerPropertiesä¹Ÿæ˜¯å®šåˆ¶å™¨</span><br></pre></td></tr></table></figure>
<p>æ­¥éª¤ï¼š</p>
<p>1ï¼‰ã€SpringBootæ ¹æ®å¯¼å…¥çš„ä¾èµ–æƒ…å†µï¼Œç»™å®¹å™¨ä¸­æ·»åŠ ç›¸åº”çš„EmbeddedServletContainerFactoryã€TomcatEmbeddedServletContainerFactoryã€‘</p>
<p>2ï¼‰ã€å®¹å™¨ä¸­æŸä¸ªç»„ä»¶è¦åˆ›å»ºå¯¹è±¡å°±ä¼šæƒŠåŠ¨åç½®å¤„ç†å™¨ï¼›EmbeddedServletContainerCustomizerBeanPostProcessorï¼›</p>
<p>åªè¦æ˜¯åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼Œåç½®å¤„ç†å™¨å°±å·¥ä½œï¼›</p>
<p>3ï¼‰ã€åç½®å¤„ç†å™¨ï¼Œä»å®¹å™¨ä¸­è·å–æ‰€æœ‰çš„<strong>EmbeddedServletContainerCustomizer</strong>ï¼Œè°ƒç”¨å®šåˆ¶å™¨çš„å®šåˆ¶æ–¹æ³•</p>
<p>###5ï¼‰ã€åµŒå…¥å¼Servletå®¹å™¨å¯åŠ¨åŸç†ï¼›</p>
<p>ä»€ä¹ˆæ—¶å€™åˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼Ÿä»€ä¹ˆæ—¶å€™è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å¹¶å¯åŠ¨Tomcatï¼›</p>
<p>è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼š</p>
<p>1ï¼‰ã€SpringBootåº”ç”¨å¯åŠ¨è¿è¡Œrunæ–¹æ³•</p>
<p>2ï¼‰ã€refreshContext(context);SpringBootåˆ·æ–°IOCå®¹å™¨ã€åˆ›å»ºIOCå®¹å™¨å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å®¹å™¨ï¼Œåˆ›å»ºå®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªç»„ä»¶ã€‘ï¼›å¦‚æœæ˜¯webåº”ç”¨åˆ›å»º<strong>AnnotationConfigEmbeddedWebApplicationContext</strong>ï¼Œå¦åˆ™ï¼š<strong>AnnotationConfigApplicationContext</strong></p>
<p>3ï¼‰ã€refresh(context);<strong>åˆ·æ–°åˆšæ‰åˆ›å»ºå¥½çš„iocå®¹å™¨ï¼›</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">refresh</span><span class="params">()</span> <span class="keyword">throws</span> BeansException, IllegalStateException </span>&#123;</span><br><span class="line">   <span class="keyword">synchronized</span> (<span class="keyword">this</span>.startupShutdownMonitor) &#123;</span><br><span class="line">      <span class="comment">// Prepare this context for refreshing.</span></span><br><span class="line">      prepareRefresh();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Tell the subclass to refresh the internal bean factory.</span></span><br><span class="line">      ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Prepare the bean factory for use in this context.</span></span><br><span class="line">      prepareBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="comment">// Allows post-processing of the bean factory in context subclasses.</span></span><br><span class="line">         postProcessBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Invoke factory processors registered as beans in the context.</span></span><br><span class="line">         invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Register bean processors that intercept bean creation.</span></span><br><span class="line">         registerBeanPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Initialize message source for this context.</span></span><br><span class="line">         initMessageSource();</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Initialize event multicaster for this context.</span></span><br><span class="line">         initApplicationEventMulticaster();</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Initialize other special beans in specific context subclasses.</span></span><br><span class="line">         onRefresh();</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Check for listener beans and register them.</span></span><br><span class="line">         registerListeners();</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Instantiate all remaining (non-lazy-init) singletons.</span></span><br><span class="line">         finishBeanFactoryInitialization(beanFactory);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Last step: publish corresponding event.</span></span><br><span class="line">         finishRefresh();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">catch</span> (BeansException ex) &#123;</span><br><span class="line">         <span class="keyword">if</span> (logger.isWarnEnabled()) &#123;</span><br><span class="line">            logger.warn(<span class="string">"Exception encountered during context initialization - "</span> +</span><br><span class="line">                  <span class="string">"cancelling refresh attempt: "</span> + ex);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Destroy already created singletons to avoid dangling resources.</span></span><br><span class="line">         destroyBeans();</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Reset 'active' flag.</span></span><br><span class="line">         cancelRefresh(ex);</span><br><span class="line"></span><br><span class="line">         <span class="comment">// Propagate exception to caller.</span></span><br><span class="line">         <span class="keyword">throw</span> ex;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">finally</span> &#123;</span><br><span class="line">         <span class="comment">// Reset common introspection caches in Spring's core, since we</span></span><br><span class="line">         <span class="comment">// might not ever need metadata for singleton beans anymore...</span></span><br><span class="line">         resetCommonCaches();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ï¼‰ã€  onRefresh(); webçš„iocå®¹å™¨é‡å†™äº†onRefreshæ–¹æ³•</p>
<p>5ï¼‰ã€webiocå®¹å™¨ä¼šåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›<strong>createEmbeddedServletContainer</strong>();</p>
<p><strong>6ï¼‰ã€è·å–åµŒå…¥å¼çš„Servletå®¹å™¨å·¥å‚ï¼š</strong></p>
<p>EmbeddedServletContainerFactory containerFactory = getEmbeddedServletContainerFactory();</p>
<p>â€‹    ä»iocå®¹å™¨ä¸­è·å–EmbeddedServletContainerFactory ç»„ä»¶ï¼›<strong>TomcatEmbeddedServletContainerFactory</strong>åˆ›å»ºå¯¹è±¡ï¼Œåç½®å¤„ç†å™¨ä¸€çœ‹æ˜¯è¿™ä¸ªå¯¹è±¡ï¼Œå°±è·å–æ‰€æœ‰çš„å®šåˆ¶å™¨æ¥å…ˆå®šåˆ¶Servletå®¹å™¨çš„ç›¸å…³é…ç½®ï¼›</p>
<p>7ï¼‰ã€<strong>ä½¿ç”¨å®¹å™¨å·¥å‚è·å–åµŒå…¥å¼çš„Servletå®¹å™¨</strong>ï¼šthis.embeddedServletContainer = containerFactory      .getEmbeddedServletContainer(getSelfInitializer());</p>
<p>8ï¼‰ã€åµŒå…¥å¼çš„Servletå®¹å™¨åˆ›å»ºå¯¹è±¡å¹¶å¯åŠ¨Servletå®¹å™¨ï¼›</p>
<p><strong>å…ˆå¯åŠ¨åµŒå…¥å¼çš„Servletå®¹å™¨ï¼Œå†å°†iocå®¹å™¨ä¸­å‰©ä¸‹æ²¡æœ‰åˆ›å»ºå‡ºçš„å¯¹è±¡è·å–å‡ºæ¥ï¼›</strong></p>
<p><strong>==IOCå®¹å™¨å¯åŠ¨åˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨==</strong></p>
<h2 id="9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨"><a href="#9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨" class="headerlink" title="9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨"></a>9ã€ä½¿ç”¨å¤–ç½®çš„Servletå®¹å™¨</h2><p>åµŒå…¥å¼Servletå®¹å™¨ï¼šåº”ç”¨æ‰“æˆå¯æ‰§è¡Œçš„jar</p>
<p>â€‹        ä¼˜ç‚¹ï¼šç®€å•ã€ä¾¿æºï¼›</p>
<p>â€‹        ç¼ºç‚¹ï¼šé»˜è®¤ä¸æ”¯æŒJSPã€ä¼˜åŒ–å®šåˆ¶æ¯”è¾ƒå¤æ‚ï¼ˆä½¿ç”¨å®šåˆ¶å™¨ã€ServerPropertiesã€è‡ªå®šä¹‰EmbeddedServletContainerCustomizerã€‘ï¼Œè‡ªå·±ç¼–å†™åµŒå…¥å¼Servletå®¹å™¨çš„åˆ›å»ºå·¥å‚ã€EmbeddedServletContainerFactoryã€‘ï¼‰ï¼›</p>
<p>å¤–ç½®çš„Servletå®¹å™¨ï¼šå¤–é¢å®‰è£…Tomcatâ€”åº”ç”¨waråŒ…çš„æ–¹å¼æ‰“åŒ…ï¼›</p>
<h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><p>1ï¼‰ã€å¿…é¡»åˆ›å»ºä¸€ä¸ªwaré¡¹ç›®ï¼›ï¼ˆåˆ©ç”¨ideaåˆ›å»ºå¥½ç›®å½•ç»“æ„ï¼‰</p>
<p>2ï¼‰ã€å°†åµŒå…¥å¼çš„TomcatæŒ‡å®šä¸ºprovidedï¼›</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>3ï¼‰ã€å¿…é¡»ç¼–å†™ä¸€ä¸ª<strong>SpringBootServletInitializer</strong>çš„å­ç±»ï¼Œå¹¶è°ƒç”¨configureæ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletInitializer</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder application)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//ä¼ å…¥SpringBootåº”ç”¨çš„ä¸»ç¨‹åº</span></span><br><span class="line">      <span class="keyword">return</span> application.sources(SpringBoot04WebJspApplication.class);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ï¼‰ã€å¯åŠ¨æœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨ï¼›</p>
<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>jaråŒ…ï¼šæ‰§è¡ŒSpringBootä¸»ç±»çš„mainæ–¹æ³•ï¼Œå¯åŠ¨iocå®¹å™¨ï¼Œåˆ›å»ºåµŒå…¥å¼çš„Servletå®¹å™¨ï¼›</p>
<p>waråŒ…ï¼šå¯åŠ¨æœåŠ¡å™¨ï¼Œ<strong>æœåŠ¡å™¨å¯åŠ¨SpringBootåº”ç”¨</strong>ã€SpringBootServletInitializerã€‘ï¼Œå¯åŠ¨iocå®¹å™¨ï¼›</p>
<p>servlet3.0ï¼ˆSpringæ³¨è§£ç‰ˆï¼‰ï¼š</p>
<p>8.2.4 Shared libraries / runtimes pluggabilityï¼š</p>
<p>è§„åˆ™ï¼š</p>
<p>â€‹    1ï¼‰ã€æœåŠ¡å™¨å¯åŠ¨ï¼ˆwebåº”ç”¨å¯åŠ¨ï¼‰ä¼šåˆ›å»ºå½“å‰webåº”ç”¨é‡Œé¢æ¯ä¸€ä¸ªjaråŒ…é‡Œé¢ServletContainerInitializerå®ä¾‹ï¼š</p>
<p>â€‹    2ï¼‰ã€ServletContainerInitializerçš„å®ç°æ”¾åœ¨jaråŒ…çš„META-INF/servicesæ–‡ä»¶å¤¹ä¸‹ï¼Œæœ‰ä¸€ä¸ªåä¸ºjavax.servlet.ServletContainerInitializerçš„æ–‡ä»¶ï¼Œå†…å®¹å°±æ˜¯ServletContainerInitializerçš„å®ç°ç±»çš„å…¨ç±»å</p>
<p>â€‹    3ï¼‰ã€è¿˜å¯ä»¥ä½¿ç”¨@HandlesTypesï¼Œåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™åŠ è½½æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç±»ï¼›</p>
<p>æµç¨‹ï¼š</p>
<p>1ï¼‰ã€å¯åŠ¨Tomcat</p>
<p>2ï¼‰ã€org\springframework\spring-web\4.3.14.RELEASE\spring-web-4.3.14.RELEASE.jar!\META-INF\services\javax.servlet.ServletContainerInitializerï¼š</p>
<p>Springçš„webæ¨¡å—é‡Œé¢æœ‰è¿™ä¸ªæ–‡ä»¶ï¼š<strong>org.springframework.web.SpringServletContainerInitializer</strong></p>
<p>3ï¼‰ã€SpringServletContainerInitializerå°†@HandlesTypes(WebApplicationInitializer.class)æ ‡æ³¨çš„æ‰€æœ‰è¿™ä¸ªç±»å‹çš„ç±»éƒ½ä¼ å…¥åˆ°onStartupæ–¹æ³•çš„Set&lt;Class&lt;?&gt;&gt;ï¼›ä¸ºè¿™äº›WebApplicationInitializerç±»å‹çš„ç±»åˆ›å»ºå®ä¾‹ï¼›</p>
<p>4ï¼‰ã€æ¯ä¸€ä¸ªWebApplicationInitializeréƒ½è°ƒç”¨è‡ªå·±çš„onStartupï¼›</p>
<p><img src="images/æœç‹—æˆªå›¾20180302221835.png" alt=""></p>
<p>5ï¼‰ã€ç›¸å½“äºæˆ‘ä»¬çš„SpringBootServletInitializerçš„ç±»ä¼šè¢«åˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ‰§è¡ŒonStartupæ–¹æ³•</p>
<p>6ï¼‰ã€SpringBootServletInitializerå®ä¾‹æ‰§è¡ŒonStartupçš„æ—¶å€™ä¼šcreateRootApplicationContextï¼›åˆ›å»ºå®¹å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> WebApplicationContext <span class="title">createRootApplicationContext</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">      ServletContext servletContext)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1ã€åˆ›å»ºSpringApplicationBuilder</span></span><br><span class="line">   SpringApplicationBuilder builder = createSpringApplicationBuilder();</span><br><span class="line">   StandardServletEnvironment environment = <span class="keyword">new</span> StandardServletEnvironment();</span><br><span class="line">   environment.initPropertySources(servletContext, <span class="keyword">null</span>);</span><br><span class="line">   builder.environment(environment);</span><br><span class="line">   builder.main(getClass());</span><br><span class="line">   ApplicationContext parent = getExistingRootWebApplicationContext(servletContext);</span><br><span class="line">   <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.logger.info(<span class="string">"Root context already created (using as parent)."</span>);</span><br><span class="line">      servletContext.setAttribute(</span><br><span class="line">            WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE, <span class="keyword">null</span>);</span><br><span class="line">      builder.initializers(<span class="keyword">new</span> ParentContextApplicationContextInitializer(parent));</span><br><span class="line">   &#125;</span><br><span class="line">   builder.initializers(</span><br><span class="line">         <span class="keyword">new</span> ServletContextApplicationContextInitializer(servletContext));</span><br><span class="line">   builder.contextClass(AnnotationConfigEmbeddedWebApplicationContext.class);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è°ƒç”¨configureæ–¹æ³•ï¼Œå­ç±»é‡å†™äº†è¿™ä¸ªæ–¹æ³•ï¼Œå°†SpringBootçš„ä¸»ç¨‹åºç±»ä¼ å…¥äº†è¿›æ¥</span></span><br><span class="line">   builder = configure(builder);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä½¿ç”¨builderåˆ›å»ºä¸€ä¸ªSpringåº”ç”¨</span></span><br><span class="line">   SpringApplication application = builder.build();</span><br><span class="line">   <span class="keyword">if</span> (application.getSources().isEmpty() &amp;&amp; AnnotationUtils</span><br><span class="line">         .findAnnotation(getClass(), Configuration.class) != <span class="keyword">null</span>) &#123;</span><br><span class="line">      application.getSources().add(getClass());</span><br><span class="line">   &#125;</span><br><span class="line">   Assert.state(!application.getSources().isEmpty(),</span><br><span class="line">         <span class="string">"No SpringApplication sources have been defined. Either override the "</span></span><br><span class="line">               + <span class="string">"configure method or add an @Configuration annotation"</span>);</span><br><span class="line">   <span class="comment">// Ensure error pages are registered</span></span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">this</span>.registerErrorPageFilter) &#123;</span><br><span class="line">      application.getSources().add(ErrorPageFilterConfiguration.class);</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="comment">//å¯åŠ¨Springåº”ç”¨</span></span><br><span class="line">   <span class="keyword">return</span> run(application);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>7ï¼‰ã€Springçš„åº”ç”¨å°±å¯åŠ¨å¹¶ä¸”åˆ›å»ºIOCå®¹å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">   StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">   stopWatch.start();</span><br><span class="line">   ConfigurableApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line">   FailureAnalyzers analyzers = <span class="keyword">null</span>;</span><br><span class="line">   configureHeadlessProperty();</span><br><span class="line">   SpringApplicationRunListeners listeners = getRunListeners(args);</span><br><span class="line">   listeners.starting();</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      ApplicationArguments applicationArguments = <span class="keyword">new</span> DefaultApplicationArguments(</span><br><span class="line">            args);</span><br><span class="line">      ConfigurableEnvironment environment = prepareEnvironment(listeners,</span><br><span class="line">            applicationArguments);</span><br><span class="line">      Banner printedBanner = printBanner(environment);</span><br><span class="line">      context = createApplicationContext();</span><br><span class="line">      analyzers = <span class="keyword">new</span> FailureAnalyzers(context);</span><br><span class="line">      prepareContext(context, environment, listeners, applicationArguments,</span><br><span class="line">            printedBanner);</span><br><span class="line">       </span><br><span class="line">       <span class="comment">//åˆ·æ–°IOCå®¹å™¨</span></span><br><span class="line">      refreshContext(context);</span><br><span class="line">      afterRefresh(context, applicationArguments);</span><br><span class="line">      listeners.finished(context, <span class="keyword">null</span>);</span><br><span class="line">      stopWatch.stop();</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.logStartupInfo) &#123;</span><br><span class="line">         <span class="keyword">new</span> StartupInfoLogger(<span class="keyword">this</span>.mainApplicationClass)</span><br><span class="line">               .logStarted(getApplicationLog(), stopWatch);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> context;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">      handleRunFailure(context, listeners, analyzers, ex);</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(ex);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>==å¯åŠ¨Servletå®¹å™¨ï¼Œå†å¯åŠ¨SpringBootåº”ç”¨==</strong></p>
<h1 id="äº”ã€Docker"><a href="#äº”ã€Docker" class="headerlink" title="äº”ã€Docker"></a>äº”ã€Docker</h1><h2 id="1ã€ç®€ä»‹-1"><a href="#1ã€ç®€ä»‹-1" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h2><p><strong>Docker</strong>æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼›æ˜¯ä¸€ä¸ªè½»é‡çº§å®¹å™¨æŠ€æœ¯ï¼›</p>
<p>Dockeræ”¯æŒå°†è½¯ä»¶ç¼–è¯‘æˆä¸€ä¸ªé•œåƒï¼›ç„¶ååœ¨é•œåƒä¸­å„ç§è½¯ä»¶åšå¥½é…ç½®ï¼Œå°†é•œåƒå‘å¸ƒå‡ºå»ï¼Œå…¶ä»–ä½¿ç”¨è€…å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªé•œåƒï¼›</p>
<p>è¿è¡Œä¸­çš„è¿™ä¸ªé•œåƒç§°ä¸ºå®¹å™¨ï¼Œå®¹å™¨å¯åŠ¨æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚</p>
<p><img src="images/æœç‹—æˆªå›¾20180303145450.png" alt=""></p>
<p><img src="images/æœç‹—æˆªå›¾20180303145531.png" alt=""></p>
<h2 id="2ã€æ ¸å¿ƒæ¦‚å¿µ"><a href="#2ã€æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="2ã€æ ¸å¿ƒæ¦‚å¿µ"></a>2ã€æ ¸å¿ƒæ¦‚å¿µ</h2><p>dockerä¸»æœº(Host)ï¼šå®‰è£…äº†Dockerç¨‹åºçš„æœºå™¨ï¼ˆDockerç›´æ¥å®‰è£…åœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼‰ï¼›</p>
<p>dockerå®¢æˆ·ç«¯(Client)ï¼šè¿æ¥dockerä¸»æœºè¿›è¡Œæ“ä½œï¼›</p>
<p>dockerä»“åº“(Registry)ï¼šç”¨æ¥ä¿å­˜å„ç§æ‰“åŒ…å¥½çš„è½¯ä»¶é•œåƒï¼›</p>
<p>dockeré•œåƒ(Images)ï¼šè½¯ä»¶æ‰“åŒ…å¥½çš„é•œåƒï¼›æ”¾åœ¨dockerä»“åº“ä¸­ï¼›</p>
<p>dockerå®¹å™¨(Container)ï¼šé•œåƒå¯åŠ¨åçš„å®ä¾‹ç§°ä¸ºä¸€ä¸ªå®¹å™¨ï¼›å®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨</p>
<p><img src="images/æœç‹—æˆªå›¾20180303165113.png" alt=""></p>
<p>ä½¿ç”¨Dockerçš„æ­¥éª¤ï¼š</p>
<p>1ï¼‰ã€å®‰è£…Docker</p>
<p>2ï¼‰ã€å»Dockerä»“åº“æ‰¾åˆ°è¿™ä¸ªè½¯ä»¶å¯¹åº”çš„é•œåƒï¼›</p>
<p>3ï¼‰ã€ä½¿ç”¨Dockerè¿è¡Œè¿™ä¸ªé•œåƒï¼Œè¿™ä¸ªé•œåƒå°±ä¼šç”Ÿæˆä¸€ä¸ªDockerå®¹å™¨ï¼›</p>
<p>4ï¼‰ã€å¯¹å®¹å™¨çš„å¯åŠ¨åœæ­¢å°±æ˜¯å¯¹è½¯ä»¶çš„å¯åŠ¨åœæ­¢ï¼›</p>
<h2 id="3ã€å®‰è£…Docker"><a href="#3ã€å®‰è£…Docker" class="headerlink" title="3ã€å®‰è£…Docker"></a>3ã€å®‰è£…Docker</h2><h4 id="1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº"><a href="#1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº" class="headerlink" title="1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº"></a>1ï¼‰ã€å®‰è£…linuxè™šæ‹Ÿæœº</h4><p>â€‹    1ï¼‰ã€VMWareã€VirtualBoxï¼ˆå®‰è£…ï¼‰ï¼›</p>
<p>â€‹    2ï¼‰ã€å¯¼å…¥è™šæ‹Ÿæœºæ–‡ä»¶centos7-atguigu.ovaï¼›</p>
<p>â€‹    3ï¼‰ã€åŒå‡»å¯åŠ¨linuxè™šæ‹Ÿæœº;ä½¿ç”¨  root/ 123456ç™»é™†</p>
<p>â€‹    4ï¼‰ã€ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥linuxæœåŠ¡å™¨è¿›è¡Œå‘½ä»¤æ“ä½œï¼›</p>
<p>â€‹    5ï¼‰ã€è®¾ç½®è™šæ‹Ÿæœºç½‘ç»œï¼›</p>
<p>â€‹        æ¡¥æ¥ç½‘ç»œ===é€‰å¥½ç½‘å¡====æ¥å…¥ç½‘çº¿ï¼›</p>
<p>â€‹    6ï¼‰ã€è®¾ç½®å¥½ç½‘ç»œä»¥åä½¿ç”¨å‘½ä»¤é‡å¯è™šæ‹Ÿæœºçš„ç½‘ç»œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure>
<p>â€‹    7ï¼‰ã€æŸ¥çœ‹linuxçš„ipåœ°å€</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr</span><br></pre></td></tr></table></figure>
<p>â€‹    8ï¼‰ã€ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥linuxï¼›</p>
<h4 id="2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker"><a href="#2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker" class="headerlink" title="2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker"></a>2ï¼‰ã€åœ¨linuxè™šæ‹Ÿæœºä¸Šå®‰è£…docker</h4><p>æ­¥éª¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1ã€æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬ï¼Œå¿…é¡»æ˜¯3.10åŠä»¥ä¸Š</span><br><span class="line">uname -r</span><br><span class="line">2ã€å®‰è£…docker</span><br><span class="line">yum install docker</span><br><span class="line">3ã€è¾“å…¥yç¡®è®¤å®‰è£…</span><br><span class="line">4ã€å¯åŠ¨docker</span><br><span class="line">[root@localhost ~]# systemctl start docker</span><br><span class="line">[root@localhost ~]# docker -v</span><br><span class="line">Docker version 1.12.6, build 3e8e77d/1.12.6</span><br><span class="line">5ã€å¼€æœºå¯åŠ¨docker</span><br><span class="line">[root@localhost ~]# systemctl enable docker</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.</span><br><span class="line">6ã€åœæ­¢docker</span><br><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure>
<h2 id="4ã€Dockerå¸¸ç”¨å‘½ä»¤-amp-æ“ä½œ"><a href="#4ã€Dockerå¸¸ç”¨å‘½ä»¤-amp-æ“ä½œ" class="headerlink" title="4ã€Dockerå¸¸ç”¨å‘½ä»¤&amp;æ“ä½œ"></a>4ã€Dockerå¸¸ç”¨å‘½ä»¤&amp;æ“ä½œ</h2><h3 id="1ï¼‰ã€é•œåƒæ“ä½œ"><a href="#1ï¼‰ã€é•œåƒæ“ä½œ" class="headerlink" title="1ï¼‰ã€é•œåƒæ“ä½œ"></a>1ï¼‰ã€é•œåƒæ“ä½œ</h3><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ£€ç´¢</td>
<td>docker  search å…³é”®å­—  egï¼šdocker  search redis</td>
<td>æˆ‘ä»¬ç»å¸¸å»docker  hubä¸Šæ£€ç´¢é•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚é•œåƒçš„TAGã€‚</td>
</tr>
<tr>
<td>æ‹‰å–</td>
<td>docker pull é•œåƒå:tag</td>
<td>:tagæ˜¯å¯é€‰çš„ï¼Œtagè¡¨ç¤ºæ ‡ç­¾ï¼Œå¤šä¸ºè½¯ä»¶çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æ˜¯latest</td>
</tr>
<tr>
<td>åˆ—è¡¨</td>
<td>docker images</td>
<td>æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°é•œåƒ</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>docker rmi image-id</td>
<td>åˆ é™¤æŒ‡å®šçš„æœ¬åœ°é•œåƒ</td>
</tr>
</tbody>
</table>
<p><a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a></p>
<h3 id="2ï¼‰ã€å®¹å™¨æ“ä½œ"><a href="#2ï¼‰ã€å®¹å™¨æ“ä½œ" class="headerlink" title="2ï¼‰ã€å®¹å™¨æ“ä½œ"></a>2ï¼‰ã€å®¹å™¨æ“ä½œ</h3><p>è½¯ä»¶é•œåƒï¼ˆQQå®‰è£…ç¨‹åºï¼‰â€”-è¿è¡Œé•œåƒâ€”-äº§ç”Ÿä¸€ä¸ªå®¹å™¨ï¼ˆæ­£åœ¨è¿è¡Œçš„è½¯ä»¶ï¼Œè¿è¡Œçš„QQï¼‰ï¼›</p>
<p>æ­¥éª¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1ã€æœç´¢é•œåƒ</span><br><span class="line">[root@localhost ~]# docker search tomcat</span><br><span class="line">2ã€æ‹‰å–é•œåƒ</span><br><span class="line">[root@localhost ~]# docker pull tomcat</span><br><span class="line">3ã€æ ¹æ®é•œåƒå¯åŠ¨å®¹å™¨</span><br><span class="line">docker run --name mytomcat -d tomcat:latest</span><br><span class="line">4ã€docker ps  </span><br><span class="line">æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span><br><span class="line">5ã€ åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨</span><br><span class="line">docker stop  å®¹å™¨çš„id</span><br><span class="line">6ã€æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨</span><br><span class="line">docker ps -a</span><br><span class="line">7ã€å¯åŠ¨å®¹å™¨</span><br><span class="line">docker start å®¹å™¨id</span><br><span class="line">8ã€åˆ é™¤ä¸€ä¸ªå®¹å™¨</span><br><span class="line"> docker rm å®¹å™¨id</span><br><span class="line">9ã€å¯åŠ¨ä¸€ä¸ªåšäº†ç«¯å£æ˜ å°„çš„tomcat</span><br><span class="line">[root@localhost ~]# docker run -d -p 8888:8080 tomcat</span><br><span class="line">-dï¼šåå°è¿è¡Œ</span><br><span class="line">-p: å°†ä¸»æœºçš„ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ä¸€ä¸ªç«¯å£    ä¸»æœºç«¯å£:å®¹å™¨å†…éƒ¨çš„ç«¯å£</span><br><span class="line"></span><br><span class="line">10ã€ä¸ºäº†æ¼”ç¤ºç®€å•å…³é—­äº†linuxçš„é˜²ç«å¢™</span><br><span class="line">service firewalld status ï¼›æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span><br><span class="line">service firewalld stopï¼šå…³é—­é˜²ç«å¢™</span><br><span class="line">11ã€æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—</span><br><span class="line">docker logs container-name/container-id</span><br><span class="line"></span><br><span class="line">æ›´å¤šå‘½ä»¤å‚çœ‹</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/docker/</span><br><span class="line">å¯ä»¥å‚è€ƒæ¯ä¸€ä¸ªé•œåƒçš„æ–‡æ¡£</span><br></pre></td></tr></table></figure>
<h3 id="3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹"><a href="#3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹" class="headerlink" title="3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹"></a>3ï¼‰ã€å®‰è£…MySQLç¤ºä¾‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql</span><br></pre></td></tr></table></figure>
<p>é”™è¯¯çš„å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run --name mysql01 -d mysql</span><br><span class="line">42f09819908bb72dd99ae19e792e0a5d03c48638421fa64cce5f8ba0f40f5846</span><br><span class="line"></span><br><span class="line">mysqlé€€å‡ºäº†</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                           PORTS               NAMES</span><br><span class="line">42f09819908b        mysql               "docker-entrypoint.sh"   34 seconds ago      Exited (1) 33 seconds ago                            mysql01</span><br><span class="line">538bde63e500        tomcat              "catalina.sh run"        About an hour ago   Exited (143) About an hour ago                       compassionate_</span><br><span class="line">goldstine</span><br><span class="line">c4f1ac60b3fc        tomcat              "catalina.sh run"        About an hour ago   Exited (143) About an hour ago                       lonely_fermi</span><br><span class="line">81ec743a5271        tomcat              "catalina.sh run"        About an hour ago   Exited (143) About an hour ago                       sick_ramanujan</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//é”™è¯¯æ—¥å¿—</span><br><span class="line">[root@localhost ~]# docker logs 42f09819908b</span><br><span class="line">error: database is uninitialized and password option is not specified </span><br><span class="line">  You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and MYSQL_RANDOM_ROOT_PASSWORDï¼›è¿™ä¸ªä¸‰ä¸ªå‚æ•°å¿…é¡»æŒ‡å®šä¸€ä¸ª</span><br></pre></td></tr></table></figure>
<p>æ­£ç¡®çš„å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span><br><span class="line">b874c56bec49fb43024b3805ab51e9097da779f2f572c22c695305dedd684c5f</span><br><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES</span><br><span class="line">b874c56bec49        mysql               "docker-entrypoint.sh"   4 seconds ago       Up 3 seconds        3306/tcp            mysql01</span><br></pre></td></tr></table></figure>
<p>åšäº†ç«¯å£æ˜ å°„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span><br><span class="line">ad10e4bc5c6a0f61cbad43898de71d366117d120e39db651844c0e73863b9434</span><br><span class="line">[root@localhost ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">ad10e4bc5c6a        mysql               "docker-entrypoint.sh"   4 seconds ago       Up 2 seconds        0.0.0.0:3306-&gt;3306/tcp   mysql02</span><br></pre></td></tr></table></figure>
<p>å‡ ä¸ªå…¶ä»–çš„é«˜çº§æ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql03 -v /conf/mysql:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span><br><span class="line">æŠŠä¸»æœºçš„/conf/mysqlæ–‡ä»¶å¤¹æŒ‚è½½åˆ° mysqldockerå®¹å™¨çš„/etc/mysql/conf.dæ–‡ä»¶å¤¹é‡Œé¢</span><br><span class="line">æ”¹mysqlçš„é…ç½®æ–‡ä»¶å°±åªéœ€è¦æŠŠmysqlé…ç½®æ–‡ä»¶æ”¾åœ¨è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹ä¸‹ï¼ˆ/conf/mysqlï¼‰</span><br><span class="line"></span><br><span class="line">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br><span class="line">æŒ‡å®šmysqlçš„ä¸€äº›é…ç½®å‚æ•°</span><br></pre></td></tr></table></figure>
<h1 id="å…­ã€SpringBootä¸æ•°æ®è®¿é—®"><a href="#å…­ã€SpringBootä¸æ•°æ®è®¿é—®" class="headerlink" title="å…­ã€SpringBootä¸æ•°æ®è®¿é—®"></a>å…­ã€SpringBootä¸æ•°æ®è®¿é—®</h1><h2 id="1ã€JDBC"><a href="#1ã€JDBC" class="headerlink" title="1ã€JDBC"></a>1ã€JDBC</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  datasource:</span></span><br><span class="line"><span class="attr">    username:</span> <span class="string">root</span></span><br><span class="line"><span class="attr">    password:</span> <span class="number">123456</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">jdbc:mysql://192.168.15.22:3306/jdbc</span></span><br><span class="line"><span class="attr">    driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼š</p>
<p>â€‹    é»˜è®¤æ˜¯ç”¨org.apache.tomcat.jdbc.pool.DataSourceä½œä¸ºæ•°æ®æºï¼›</p>
<p>â€‹    æ•°æ®æºçš„ç›¸å…³é…ç½®éƒ½åœ¨DataSourcePropertiesé‡Œé¢ï¼›</p>
<p>è‡ªåŠ¨é…ç½®åŸç†ï¼š</p>
<p>org.springframework.boot.autoconfigure.jdbcï¼š</p>
<p>1ã€å‚è€ƒDataSourceConfigurationï¼Œæ ¹æ®é…ç½®åˆ›å»ºæ•°æ®æºï¼Œé»˜è®¤ä½¿ç”¨Tomcatè¿æ¥æ± ï¼›å¯ä»¥ä½¿ç”¨spring.datasource.typeæŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼›</p>
<p>2ã€SpringBooté»˜è®¤å¯ä»¥æ”¯æŒï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.apache.tomcat.jdbc.pool.DataSourceã€HikariDataSourceã€BasicDataSourceã€</span><br></pre></td></tr></table></figure>
<p>3ã€è‡ªå®šä¹‰æ•°æ®æºç±»å‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Generic DataSource configuration.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(DataSource.class)</span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(name = <span class="string">"spring.datasource.type"</span>)</span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Generic</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">(DataSourceProperties properties)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//ä½¿ç”¨DataSourceBuilderåˆ›å»ºæ•°æ®æºï¼Œåˆ©ç”¨åå°„åˆ›å»ºå“åº”typeçš„æ•°æ®æºï¼Œå¹¶ä¸”ç»‘å®šç›¸å…³å±æ€§</span></span><br><span class="line">      <span class="keyword">return</span> properties.initializeDataSourceBuilder().build();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ã€<strong>DataSourceInitializerï¼šApplicationListener</strong>ï¼›</p>
<p>â€‹    ä½œç”¨ï¼š</p>
<p>â€‹        1ï¼‰ã€runSchemaScripts();è¿è¡Œå»ºè¡¨è¯­å¥ï¼›</p>
<p>â€‹        2ï¼‰ã€runDataScripts();è¿è¡Œæ’å…¥æ•°æ®çš„sqlè¯­å¥ï¼›</p>
<p>é»˜è®¤åªéœ€è¦å°†æ–‡ä»¶å‘½åä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">schema-*.sqlã€data-*.sql</span><br><span class="line">é»˜è®¤è§„åˆ™ï¼šschema.sqlï¼Œschema-all.sqlï¼›</span><br><span class="line">å¯ä»¥ä½¿ç”¨   </span><br><span class="line">	schema:</span><br><span class="line">      - classpath:department.sql</span><br><span class="line">      æŒ‡å®šä½ç½®</span><br></pre></td></tr></table></figure>
<p>5ã€æ“ä½œæ•°æ®åº“ï¼šè‡ªåŠ¨é…ç½®äº†JdbcTemplateæ“ä½œæ•°æ®åº“</p>
<h2 id="2ã€æ•´åˆDruidæ•°æ®æº"><a href="#2ã€æ•´åˆDruidæ•°æ®æº" class="headerlink" title="2ã€æ•´åˆDruidæ•°æ®æº"></a>2ã€æ•´åˆDruidæ•°æ®æº</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">å¯¼å…¥druidæ•°æ®æº</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.datasource"</span>)</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">druid</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span>  <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®Druidçš„ç›‘æ§</span></span><br><span class="line">    <span class="comment">//1ã€é…ç½®ä¸€ä¸ªç®¡ç†åå°çš„Servlet</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">statViewServlet</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ServletRegistrationBean bean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> StatViewServlet(), <span class="string">"/druid/*"</span>);</span><br><span class="line">        Map&lt;String,String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        initParams.put(<span class="string">"loginUsername"</span>,<span class="string">"admin"</span>);</span><br><span class="line">        initParams.put(<span class="string">"loginPassword"</span>,<span class="string">"123456"</span>);</span><br><span class="line">        initParams.put(<span class="string">"allow"</span>,<span class="string">""</span>);<span class="comment">//é»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰è®¿é—®</span></span><br><span class="line">        initParams.put(<span class="string">"deny"</span>,<span class="string">"192.168.15.21"</span>);</span><br><span class="line"></span><br><span class="line">        bean.setInitParameters(initParams);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2ã€é…ç½®ä¸€ä¸ªwebç›‘æ§çš„filter</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">webStatFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        FilterRegistrationBean bean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">        bean.setFilter(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line"></span><br><span class="line">        Map&lt;String,String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        initParams.put(<span class="string">"exclusions"</span>,<span class="string">"*.js,*.css,/druid/*"</span>);</span><br><span class="line"></span><br><span class="line">        bean.setInitParameters(initParams);</span><br><span class="line"></span><br><span class="line">        bean.setUrlPatterns(Arrays.asList(<span class="string">"/*"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>  bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3ã€æ•´åˆMyBatis"><a href="#3ã€æ•´åˆMyBatis" class="headerlink" title="3ã€æ•´åˆMyBatis"></a>3ã€æ•´åˆMyBatis</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="images/æœç‹—æˆªå›¾20180305194443.png" alt=""></p>
<p>æ­¥éª¤ï¼š</p>
<p>â€‹    1ï¼‰ã€é…ç½®æ•°æ®æºç›¸å…³å±æ€§ï¼ˆè§ä¸Šä¸€èŠ‚Druidï¼‰</p>
<p>â€‹    2ï¼‰ã€ç»™æ•°æ®åº“å»ºè¡¨</p>
<p>â€‹    3ï¼‰ã€åˆ›å»ºJavaBean</p>
<h3 id="4ï¼‰ã€æ³¨è§£ç‰ˆ"><a href="#4ï¼‰ã€æ³¨è§£ç‰ˆ" class="headerlink" title="4ï¼‰ã€æ³¨è§£ç‰ˆ"></a>4ï¼‰ã€æ³¨è§£ç‰ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŒ‡å®šè¿™æ˜¯ä¸€ä¸ªæ“ä½œæ•°æ®åº“çš„mapper</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DepartmentMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from department where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Department <span class="title">getDeptById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"delete from department where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteDeptById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Options</span>(useGeneratedKeys = <span class="keyword">true</span>,keyProperty = <span class="string">"id"</span>)</span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into department(departmentName) values(#&#123;departmentName&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insertDept</span><span class="params">(Department department)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update</span>(<span class="string">"update department set departmentName=#&#123;departmentName&#125; where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateDept</span><span class="params">(Department department)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é—®é¢˜ï¼š</p>
<p>è‡ªå®šä¹‰MyBatisçš„é…ç½®è§„åˆ™ï¼›ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªConfigurationCustomizerï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@org</span>.springframework.context.annotation.Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConfigurationCustomizer <span class="title">configurationCustomizer</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConfigurationCustomizer()&#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(Configuration configuration)</span> </span>&#123;</span><br><span class="line">                configuration.setMapUnderscoreToCamelCase(<span class="keyword">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨MapperScanæ‰¹é‡æ‰«ææ‰€æœ‰çš„Mapperæ¥å£ï¼›</span><br><span class="line"><span class="meta">@MapperScan</span>(value = <span class="string">"com.atguigu.springboot.mapper"</span>)</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBoot06DataMybatisApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(SpringBoot06DataMybatisApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ"><a href="#5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ" class="headerlink" title="5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ"></a>5ï¼‰ã€é…ç½®æ–‡ä»¶ç‰ˆ</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line"><span class="attr">  config-location:</span> <span class="attr">classpath:mybatis/mybatis-config.xml</span> <span class="string">æŒ‡å®šå…¨å±€é…ç½®æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line"><span class="attr">  mapper-locations:</span> <span class="attr">classpath:mybatis/mapper/*.xml</span>  <span class="string">æŒ‡å®šsqlæ˜ å°„æ–‡ä»¶çš„ä½ç½®</span></span><br></pre></td></tr></table></figure>
<p>æ›´å¤šä½¿ç”¨å‚ç…§</p>
<p><a href="http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/" target="_blank" rel="noopener">http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</a></p>
<h2 id="4ã€æ•´åˆSpringData-JPA"><a href="#4ã€æ•´åˆSpringData-JPA" class="headerlink" title="4ã€æ•´åˆSpringData JPA"></a>4ã€æ•´åˆSpringData JPA</h2><h3 id="1ï¼‰ã€SpringDataç®€ä»‹"><a href="#1ï¼‰ã€SpringDataç®€ä»‹" class="headerlink" title="1ï¼‰ã€SpringDataç®€ä»‹"></a>1ï¼‰ã€SpringDataç®€ä»‹</h3><p><img src="images/æœç‹—æˆªå›¾20180306105412.png" alt=""></p>
<h3 id="2ï¼‰ã€æ•´åˆSpringData-JPA"><a href="#2ï¼‰ã€æ•´åˆSpringData-JPA" class="headerlink" title="2ï¼‰ã€æ•´åˆSpringData JPA"></a>2ï¼‰ã€æ•´åˆSpringData JPA</h3><p>JPA:ORMï¼ˆObject Relational Mappingï¼‰ï¼›</p>
<p>1ï¼‰ã€ç¼–å†™ä¸€ä¸ªå®ä½“ç±»ï¼ˆbeanï¼‰å’Œæ•°æ®è¡¨è¿›è¡Œæ˜ å°„ï¼Œå¹¶ä¸”é…ç½®å¥½æ˜ å°„å…³ç³»ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨JPAæ³¨è§£é…ç½®æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="meta">@Entity</span> <span class="comment">//å‘Šè¯‰JPAè¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼ˆå’Œæ•°æ®è¡¨æ˜ å°„çš„ç±»ï¼‰</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"tbl_user"</span>) <span class="comment">//@Tableæ¥æŒ‡å®šå’Œå“ªä¸ªæ•°æ®è¡¨å¯¹åº”;å¦‚æœçœç•¥é»˜è®¤è¡¨åå°±æ˜¯userï¼›</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span> <span class="comment">//è¿™æ˜¯ä¸€ä¸ªä¸»é”®</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)<span class="comment">//è‡ªå¢ä¸»é”®</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"last_name"</span>,length = <span class="number">50</span>) <span class="comment">//è¿™æ˜¯å’Œæ•°æ®è¡¨å¯¹åº”çš„ä¸€ä¸ªåˆ—</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="meta">@Column</span> <span class="comment">//çœç•¥é»˜è®¤åˆ—åå°±æ˜¯å±æ€§å</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ã€ç¼–å†™ä¸€ä¸ªDaoæ¥å£æ¥æ“ä½œå®ä½“ç±»å¯¹åº”çš„æ•°æ®è¡¨ï¼ˆRepositoryï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»§æ‰¿JpaRepositoryæ¥å®Œæˆå¯¹æ•°æ®åº“çš„æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">User</span>,<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ã€åŸºæœ¬çš„é…ç½®JpaProperties</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span>  </span><br><span class="line"><span class="attr"> jpa:</span></span><br><span class="line"><span class="attr">    hibernate:</span></span><br><span class="line"><span class="comment">#     æ›´æ–°æˆ–è€…åˆ›å»ºæ•°æ®è¡¨ç»“æ„</span></span><br><span class="line"><span class="attr">      ddl-auto:</span> <span class="string">update</span></span><br><span class="line"><span class="comment">#    æ§åˆ¶å°æ˜¾ç¤ºSQL</span></span><br><span class="line"><span class="attr">    show-sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h1 id="ä¸ƒã€å¯åŠ¨é…ç½®åŸç†"><a href="#ä¸ƒã€å¯åŠ¨é…ç½®åŸç†" class="headerlink" title="ä¸ƒã€å¯åŠ¨é…ç½®åŸç†"></a>ä¸ƒã€å¯åŠ¨é…ç½®åŸç†</h1><p>å‡ ä¸ªé‡è¦çš„äº‹ä»¶å›è°ƒæœºåˆ¶</p>
<p>é…ç½®åœ¨META-INF/spring.factories</p>
<p><strong>ApplicationContextInitializer</strong></p>
<p><strong>SpringApplicationRunListener</strong></p>
<p>åªéœ€è¦æ”¾åœ¨iocå®¹å™¨ä¸­</p>
<p><strong>ApplicationRunner</strong></p>
<p><strong>CommandLineRunner</strong></p>
<p>å¯åŠ¨æµç¨‹ï¼š</p>
<h2 id="1ã€åˆ›å»ºSpringApplicationå¯¹è±¡"><a href="#1ã€åˆ›å»ºSpringApplicationå¯¹è±¡" class="headerlink" title="1ã€åˆ›å»ºSpringApplicationå¯¹è±¡"></a><strong>1ã€åˆ›å»ºSpringApplicationå¯¹è±¡</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">initialize(sources);</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(Object[] sources)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¿å­˜ä¸»é…ç½®ç±»</span></span><br><span class="line">    <span class="keyword">if</span> (sources != <span class="keyword">null</span> &amp;&amp; sources.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.sources.addAll(Arrays.asList(sources));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å½“å‰æ˜¯å¦ä¸€ä¸ªwebåº”ç”¨</span></span><br><span class="line">    <span class="keyword">this</span>.webEnvironment = deduceWebEnvironment();</span><br><span class="line">    <span class="comment">//ä»ç±»è·¯å¾„ä¸‹æ‰¾åˆ°META-INF/spring.factoriesé…ç½®çš„æ‰€æœ‰ApplicationContextInitializerï¼›ç„¶åä¿å­˜èµ·æ¥</span></span><br><span class="line">    setInitializers((Collection) getSpringFactoriesInstances(</span><br><span class="line">        ApplicationContextInitializer.class));</span><br><span class="line">    <span class="comment">//ä»ç±»è·¯å¾„ä¸‹æ‰¾åˆ°ETA-INF/spring.factoriesé…ç½®çš„æ‰€æœ‰ApplicationListener</span></span><br><span class="line">    setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));</span><br><span class="line">    <span class="comment">//ä»å¤šä¸ªé…ç½®ç±»ä¸­æ‰¾åˆ°æœ‰mainæ–¹æ³•çš„ä¸»é…ç½®ç±»</span></span><br><span class="line">    <span class="keyword">this</span>.mainApplicationClass = deduceMainApplicationClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="images/æœç‹—æˆªå›¾20180306145727.png" alt=""></p>
<p><img src="images/æœç‹—æˆªå›¾20180306145855.png" alt=""></p>
<h2 id="2ã€è¿è¡Œrunæ–¹æ³•"><a href="#2ã€è¿è¡Œrunæ–¹æ³•" class="headerlink" title="2ã€è¿è¡Œrunæ–¹æ³•"></a>2ã€è¿è¡Œrunæ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ConfigurableApplicationContext <span class="title">run</span><span class="params">(String... args)</span> </span>&#123;</span><br><span class="line">   StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">   stopWatch.start();</span><br><span class="line">   ConfigurableApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line">   FailureAnalyzers analyzers = <span class="keyword">null</span>;</span><br><span class="line">   configureHeadlessProperty();</span><br><span class="line">    </span><br><span class="line">   <span class="comment">//è·å–SpringApplicationRunListenersï¼›ä»ç±»è·¯å¾„ä¸‹META-INF/spring.factories</span></span><br><span class="line">   SpringApplicationRunListeners listeners = getRunListeners(args);</span><br><span class="line">    <span class="comment">//å›è°ƒæ‰€æœ‰çš„è·å–SpringApplicationRunListener.starting()æ–¹æ³•</span></span><br><span class="line">   listeners.starting();</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">       <span class="comment">//å°è£…å‘½ä»¤è¡Œå‚æ•°</span></span><br><span class="line">      ApplicationArguments applicationArguments = <span class="keyword">new</span> DefaultApplicationArguments(</span><br><span class="line">            args);</span><br><span class="line">      <span class="comment">//å‡†å¤‡ç¯å¢ƒ</span></span><br><span class="line">      ConfigurableEnvironment environment = prepareEnvironment(listeners,</span><br><span class="line">            applicationArguments);</span><br><span class="line">       		<span class="comment">//åˆ›å»ºç¯å¢ƒå®Œæˆåå›è°ƒSpringApplicationRunListener.environmentPrepared()ï¼›è¡¨ç¤ºç¯å¢ƒå‡†å¤‡å®Œæˆ</span></span><br><span class="line">       </span><br><span class="line">      Banner printedBanner = printBanner(environment);</span><br><span class="line">       </span><br><span class="line">       <span class="comment">//åˆ›å»ºApplicationContextï¼›å†³å®šåˆ›å»ºwebçš„iocè¿˜æ˜¯æ™®é€šçš„ioc</span></span><br><span class="line">      context = createApplicationContext();</span><br><span class="line">       </span><br><span class="line">      analyzers = <span class="keyword">new</span> FailureAnalyzers(context);</span><br><span class="line">       <span class="comment">//å‡†å¤‡ä¸Šä¸‹æ–‡ç¯å¢ƒ;å°†environmentä¿å­˜åˆ°iocä¸­ï¼›è€Œä¸”applyInitializers()ï¼›</span></span><br><span class="line">       <span class="comment">//applyInitializers()ï¼šå›è°ƒä¹‹å‰ä¿å­˜çš„æ‰€æœ‰çš„ApplicationContextInitializerçš„initializeæ–¹æ³•</span></span><br><span class="line">       <span class="comment">//å›è°ƒæ‰€æœ‰çš„SpringApplicationRunListenerçš„contextPrepared()ï¼›</span></span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">      prepareContext(context, environment, listeners, applicationArguments,</span><br><span class="line">            printedBanner);</span><br><span class="line">       <span class="comment">//prepareContextè¿è¡Œå®Œæˆä»¥åå›è°ƒæ‰€æœ‰çš„SpringApplicationRunListenerçš„contextLoadedï¼ˆï¼‰ï¼›</span></span><br><span class="line">       </span><br><span class="line">       <span class="comment">//såˆ·æ–°å®¹å™¨ï¼›iocå®¹å™¨åˆå§‹åŒ–ï¼ˆå¦‚æœæ˜¯webåº”ç”¨è¿˜ä¼šåˆ›å»ºåµŒå…¥å¼çš„Tomcatï¼‰ï¼›Springæ³¨è§£ç‰ˆ</span></span><br><span class="line">       <span class="comment">//æ‰«æï¼Œåˆ›å»ºï¼ŒåŠ è½½æ‰€æœ‰ç»„ä»¶çš„åœ°æ–¹ï¼›ï¼ˆé…ç½®ç±»ï¼Œç»„ä»¶ï¼Œè‡ªåŠ¨é…ç½®ï¼‰</span></span><br><span class="line">      refreshContext(context);</span><br><span class="line">       <span class="comment">//ä»iocå®¹å™¨ä¸­è·å–æ‰€æœ‰çš„ApplicationRunnerå’ŒCommandLineRunnerè¿›è¡Œå›è°ƒ</span></span><br><span class="line">       <span class="comment">//ApplicationRunnerå…ˆå›è°ƒï¼ŒCommandLineRunnerå†å›è°ƒ</span></span><br><span class="line">      afterRefresh(context, applicationArguments);</span><br><span class="line">       <span class="comment">//æ‰€æœ‰çš„SpringApplicationRunListenerå›è°ƒfinishedæ–¹æ³•</span></span><br><span class="line">      listeners.finished(context, <span class="keyword">null</span>);</span><br><span class="line">      stopWatch.stop();</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.logStartupInfo) &#123;</span><br><span class="line">         <span class="keyword">new</span> StartupInfoLogger(<span class="keyword">this</span>.mainApplicationClass)</span><br><span class="line">               .logStarted(getApplicationLog(), stopWatch);</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="comment">//æ•´ä¸ªSpringBootåº”ç”¨å¯åŠ¨å®Œæˆä»¥åè¿”å›å¯åŠ¨çš„iocå®¹å™¨ï¼›</span></span><br><span class="line">      <span class="keyword">return</span> context;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">      handleRunFailure(context, listeners, analyzers, ex);</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(ex);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶"><a href="#3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶" class="headerlink" title="3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶"></a>3ã€äº‹ä»¶ç›‘å¬æœºåˆ¶</h2><p>é…ç½®åœ¨META-INF/spring.factories</p>
<p><strong>ApplicationContextInitializer</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloApplicationContextInitializer</span> <span class="keyword">implements</span> <span class="title">ApplicationContextInitializer</span>&lt;<span class="title">ConfigurableApplicationContext</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext applicationContext)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ApplicationContextInitializer...initialize..."</span>+applicationContext);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>SpringApplicationRunListener</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloSpringApplicationRunListener</span> <span class="keyword">implements</span> <span class="title">SpringApplicationRunListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¿…é¡»æœ‰çš„æ„é€ å™¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloSpringApplicationRunListener</span><span class="params">(SpringApplication application, String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">starting</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SpringApplicationRunListener...starting..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">environmentPrepared</span><span class="params">(ConfigurableEnvironment environment)</span> </span>&#123;</span><br><span class="line">        Object o = environment.getSystemProperties().get(<span class="string">"os.name"</span>);</span><br><span class="line">        System.out.println(<span class="string">"SpringApplicationRunListener...environmentPrepared.."</span>+o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextPrepared</span><span class="params">(ConfigurableApplicationContext context)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SpringApplicationRunListener...contextPrepared..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoaded</span><span class="params">(ConfigurableApplicationContext context)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SpringApplicationRunListener...contextLoaded..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finished</span><span class="params">(ConfigurableApplicationContext context, Throwable exception)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"SpringApplicationRunListener...finished..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®ï¼ˆMETA-INF/spring.factoriesï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.context.ApplicationContextInitializer=\</span><br><span class="line">com.atguigu.springboot.listener.HelloApplicationContextInitializer</span><br><span class="line"></span><br><span class="line">org.springframework.boot.SpringApplicationRunListener=\</span><br><span class="line">com.atguigu.springboot.listener.HelloSpringApplicationRunListener</span><br></pre></td></tr></table></figure>
<p>åªéœ€è¦æ”¾åœ¨iocå®¹å™¨ä¸­</p>
<p><strong>ApplicationRunner</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloApplicationRunner</span> <span class="keyword">implements</span> <span class="title">ApplicationRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ApplicationRunner...run...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>CommandLineRunner</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloCommandLineRunner</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"CommandLineRunner...run..."</span>+ Arrays.asList(args));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…«ã€è‡ªå®šä¹‰starter"><a href="#å…«ã€è‡ªå®šä¹‰starter" class="headerlink" title="å…«ã€è‡ªå®šä¹‰starter"></a>å…«ã€è‡ªå®šä¹‰starter</h1><p>starterï¼š</p>
<p>â€‹    1ã€è¿™ä¸ªåœºæ™¯éœ€è¦ä½¿ç”¨åˆ°çš„ä¾èµ–æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>â€‹    2ã€å¦‚ä½•ç¼–å†™è‡ªåŠ¨é…ç½®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  <span class="comment">//æŒ‡å®šè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ConditionalOnXXX</span>  <span class="comment">//åœ¨æŒ‡å®šæ¡ä»¶æˆç«‹çš„æƒ…å†µä¸‹è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter</span>  <span class="comment">//æŒ‡å®šè‡ªåŠ¨é…ç½®ç±»çš„é¡ºåº</span></span><br><span class="line"><span class="meta">@Bean</span>  <span class="comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationPropertie</span>ç»“åˆç›¸å…³xxxPropertiesç±»æ¥ç»‘å®šç›¸å…³çš„é…ç½®</span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span> <span class="comment">//è®©xxxPropertiesç”Ÿæ•ˆåŠ å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line"></span><br><span class="line">è‡ªåŠ¨é…ç½®ç±»è¦èƒ½åŠ è½½</span><br><span class="line">å°†éœ€è¦å¯åŠ¨å°±åŠ è½½çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œé…ç½®åœ¨META-INF/spring.factories</span><br><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span><br></pre></td></tr></table></figure>
<p>â€‹    3ã€æ¨¡å¼ï¼š</p>
<p>å¯åŠ¨å™¨åªç”¨æ¥åšä¾èµ–å¯¼å…¥ï¼›</p>
<p>ä¸“é—¨æ¥å†™ä¸€ä¸ªè‡ªåŠ¨é…ç½®æ¨¡å—ï¼›</p>
<p>å¯åŠ¨å™¨ä¾èµ–è‡ªåŠ¨é…ç½®ï¼›åˆ«äººåªéœ€è¦å¼•å…¥å¯åŠ¨å™¨ï¼ˆstarterï¼‰</p>
<p>mybatis-spring-boot-starterï¼›è‡ªå®šä¹‰å¯åŠ¨å™¨å-spring-boot-starter</p>
<p>æ­¥éª¤ï¼š</p>
<p>1ï¼‰ã€å¯åŠ¨å™¨æ¨¡å—</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.starter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>atguigu-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¯åŠ¨å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--å¼•å…¥è‡ªåŠ¨é…ç½®æ¨¡å—--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.starter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>atguigu-spring-boot-starter-autoconfigurer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>2ï¼‰ã€è‡ªåŠ¨é…ç½®æ¨¡å—</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.starter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>atguigu-spring-boot-starter-autoconfigurer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>atguigu-spring-boot-starter-autoconfigurer<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!--å¼•å…¥spring-boot-starterï¼›æ‰€æœ‰starterçš„åŸºæœ¬é…ç½®--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.starter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"atguigu.hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String prefix;</span><br><span class="line">    <span class="keyword">private</span> String suffix;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPrefix</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> prefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrefix</span><span class="params">(String prefix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.prefix = prefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSuffix</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> suffix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuffix</span><span class="params">(String suffix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.suffix = suffix;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.starter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    HelloProperties helloProperties;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HelloProperties <span class="title">getHelloProperties</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> helloProperties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHelloProperties</span><span class="params">(HelloProperties helloProperties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.helloProperties = helloProperties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHellAtguigu</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> helloProperties.getPrefix()+<span class="string">"-"</span> +name + helloProperties.getSuffix();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.starter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnWebApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span> <span class="comment">//webåº”ç”¨æ‰ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(HelloProperties.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServiceAutoConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    HelloProperties helloProperties;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HelloService <span class="title">helloService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        HelloService service = <span class="keyword">new</span> HelloService();</span><br><span class="line">        service.setHelloProperties(helloProperties);</span><br><span class="line">        <span class="keyword">return</span> service;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹"><a href="#æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹" class="headerlink" title="æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹"></a>æ›´å¤šSpringBootæ•´åˆç¤ºä¾‹</h1><p><a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples" target="_blank" rel="noopener">https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://ws2.sinaimg.cn/large/006tNbRwgy1fy0kf0oua7j30ow0ow3zs.jpg" alt="è¢æµ·é¹">
            
              <p class="site-author-name" itemprop="name">è¢æµ·é¹</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">89</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        


<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">è¢æµ·é¹</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>




<div class="powered-by">
<i class="fa fa-user-md"></i>

<span id="busuanzi_container_site_pv">
    æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
</span>


</div>





  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    

  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<script type="text/javascript" src="/js/src/love.js"></script>


